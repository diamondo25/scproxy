define("common/games/lanoire",["jquery","utils","common/jquery.datafunctions","jquery.setup.environment.utils"],function(t,e,a,s){var o={},n=",2827-2851,2855-2876,2880-2892,2897,2898,2907-2945,2952-2967,2972-2975,2982-2993,2997-3002,3015-3037,3044-3047,3051,3052,3053,3056,3057,3058,3063-3070,3076,3077,3078",l=",2852,2853,2854,2877,2878,2879,2893,2894,2895,2896,2899-2906,2946,2947,2948,2949,2950,2951,2968,2969,2970,2971,2976-2981,2994,2995,2996,3003-3014,3038-3043,3048,3049,3050,3054,3055,3059-3062,3071-3075",r="2231,2230,3,2228,2229,2204,7,8,9,840,888,911,934,972,980,1053,1141,1214,1307,1410,1418,1501,1584,1642,1755,1843,1896,1949,1972,2070,2148,2186"+n+l;return o.statIds=e.expandDashString(r),o.LoadHomeScreen=function(){s.isOnline()&&o.GetCommunityStatsJS(),a.GetTweets()},o.GetCommunityStatsJS=function(){var a={env:globals.rosEnvironment,title:globals.titleName,version:globals.RosTitleVersion,platformId:globals.platformId,rosTitleName:globals.titleName,statIds:o.statIds};e.WriteDebugLog("GetCommunityStatsJS","options",JSON.stringify(a)),t.ajax({type:"POST",url:e.getApiUrl("/api/"+globals.titleName+"/getcommunitystats"),services:["stats"],data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",silentFail:!0,disableSlowMsg:!0,requestDescription:"GetCommunityStats",success:function(t){"undefined"!=typeof t&&null!=t&&void 0!=t.d&&t.Status?o.ProcessCommunityStats(t):o.GetCommunityStatsJSLocal()},error:function(t,a,s){e.WriteDebugLog("GetCommunityStatsJS","ERROR",s),e.WriteDebugLog("GetCommunityStatsJS","ERROR status",a),e.WriteDebugLog("GetCommunityStatsJS","ERROR responseText",t.responseText,e.logType.error,e.logController[globals.titleName]),o.GetCommunityStatsJSLocal()}})},o.GetCommunityStatsJSLocal=function(){e.WriteDebugLog("GetCommunityStatsJSLocal","",""),t.ajax({type:"GET",url:globals.baseAssetUrl+"xml/"+globals.titleName+"/CommunityStats.xml",dataType:"json",success:function(t){o.ProcessCommunityStats(t)},error:function(a,s,o){e.WriteDebugLog("GetCommunityStatsJSLocal","ERROR",o,e.logType.error,e.logController[globals.titleName]);try{t(this).stopPropagation()}catch(n){}}})},o.ProcessCommunityStats=function(a){if("undefined"!=typeof a&&null!=a&&"undefined"!=a.d&&(e.WriteDebugLog("GetCommunityStatsJS","data.d",a.d),"ERROR"!=a.d.substring(0,5).toUpperCase())){var s=o.statIds.split(","),n=a.d.split(","),r=0,i=0,d=100;l=e.expandDashString(l),e.WriteDebugLog("GetCommunityStatsJS","femalesTrustedIds",l);for(var m=0,u=0,g=0;g<s.length;g++){var S=parseInt(s[g],10);if(S>2227&&2232>S){var c=Math.round(100*n[g],0);t("#trendStat"+s[g]).html(c),d-=c}else if(S>2826&&3079>S){var y=","+s[g];-1!=l.indexOf(y)?u+=Math.round(n[g],0):m+=Math.round(n[g],0)}else t("#trendStat"+s[g]).html(e.addCommas(n[g]));if(S>839&&2187>S){var f=parseInt(n[g],10);f>i&&(r=s[g],i=f)}}r>0&&(t("#homefeedPanel .communityWrapperNum .mostfailedcase div.homeListInner h3").css("background-image","url("+globals.baseUrl+"images/lanoire/caseTitles/"+r+".png)"),t("#trendStat9").html(e.addCommas(i))),t("#trendStat3").html(d),t("#trendStat7").html(e.addCommas(m)),t("#trendStat8").html(e.addCommas(u)),("undefined"!=typeof n[s.length]||null!=n[s.length])&&t("#statsDate").html(e.localizedDate(n[s.length],"LLL"))}},o.LoadPlayerStats=function(){if(e.WriteDebugLog("LoadGameStats","",""),t("#statsPanel").hasClass("compared"))return s.removeLoading("statsPanel"),void t("#awardsLink2").removeClass("disabled");var a=s.CallGameMethodAsync("RGSC_GET_STATS_DATA",null,"RGSC_GET_STATS_DATA_DEMO");a.done(function(a){var o=t("#statsbody");if(a){e.WriteDebugLog("LoadGameStats","statsDataString",a),o.html(""),t("#statsPanel").find(".titleRowDetail").html("");for(var n=a.split(","),l="",r=0,i=n.length-1;i>r;r+=2)l+='<tr><td class="col1">'+n[r]+'</td><td class="col2">'+n[r+1]+"</td></tr>";o.append(l)}else e.WriteDebugLog("LoadPlayerStats","statsDataString","statsDataString is null");o.find("tr").length<1&&o.html('<tr><td class="col1">'+s.getError("NoStatsExist")+'</td><td class="col2 "></td></tr>'),s.resetScrollbar("#statsContainer"),s.removeLoading("statsPanel"),t("#awardsLink2").removeClass("disabled")}),a.fail(function(){e.WriteDebugLog("LAN LoadPlayerStats","RGSC_GET_STATS_DATA","async operation fail",e.logType.error,e.logController.lanoire),t("#statsbody").html('<tr><td class="col1">'+s.getError("ErrorHasOccurred")+'</td><td class="col2 "></td></tr>'),s.removeLoading("statsPanel"),t("#awardsLink2").removeClass("disabled")})},o});