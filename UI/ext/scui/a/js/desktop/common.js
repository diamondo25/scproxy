/** moment.js
 version : 2.5.1
 authors : Tim Wood, Iskren Chernev, Moment.js contributors
 license : MIT
 momentjs.com

 * Modified by Rockstar 2015-03-30
 * Added ALLOW_FUTURE constant - set to false - to prevent erroneous future dates appearing against messages (url:bugstar:2289957) */

/*
 * jTweetsAnywhere V1.2.1
 * http://thomasbillenstein.com/jTweetsAnywhere/
 *
 * Copyright 2010, Thomas Billenstein
 * Licensed under the MIT license.
 * http://thomasbillenstein.com/jTweetsAnywhere/license.txt
 *
 * Modified from original
 */

/*!     Underscore.js 1.6.0
     http://underscorejs.org
     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     Underscore may be freely distributed under the MIT license.
*/

/*!     Backbone.js 1.1.2
     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     Backbone may be freely distributed under the MIT license.
*/

/*! jQuery UI - v1.10.4 - 2014-05-08
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.menu.js, jquery.ui.effect.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

/*!
     * jQuery Color Animations v2.1.2
     * https://github.com/jquery/jquery-color
     *
     * Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     *
     * Date: Wed Jan 16 08:47:09 2013 -0600
     */

/* Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 * Version: 3.1.12
 */

/*! Mousewheel version: 3.1.12 * (c) 2014 Brandon Aaron * MIT License */

/*!
 * Copyright (c) 2010 C. F., Wong (<a href="http://cloudgen.w0ng.hk">Cloudgen Examplet Store</a>)
 * Licensed under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 * Highly modified from the original jquery.caret.1.02.js
*/

/*!
jQuery UI Virtual Keyboard
Version 1.18.12

Author: Jeremy Satterfield
Modified: Rob Garrison (Mottie on github)
Modified: R*
-----------------------------------------
Licensed under the MIT License

Caret code modified from jquery.caret.1.02.js
Licensed under the MIT License:
http://www.opensource.org/licenses/mit-license.php
-----------------------------------------
*/

/** @license
 * jQuery UI Virtual Keyboard Autocomplete v1.5 for Keyboard v1.18+ only (3/1/2014)
 *
 * By Rob Garrison (aka Mottie & Fudgey)
 * Modified: R* - Added AMD wrapper
 * Licensed under the MIT License
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*!

 handlebars v1.3.0

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

/**
 * @license Handlebars hbs 0.8.0 - Alex Sexton, but Handlebars has it's own licensing junk
 *
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/require-cs for details on the plugin this was based off of
 */

/*!
	AnythingSlider v1.9.4
	Original by Chris Coyier: http://css-tricks.com
	Get the latest version: https://github.com/CSS-Tricks/AnythingSlider
*/

/** @license
 * DropKick 1.4
 *
 * Highly customizable <select> lists
 * https://github.com/robdel12/DropKick
 *
 * Created by: Jamie Lottering <http://github.com/JamieLottering> <http://twitter.com/JamieLottering>
 */

/*
 * jCoverflip - Present your featured content elegantly.
 * Version: 1.1.0
 * Copyright 2010 New Signature
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of the
 * GNU General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <http://www.gnu.org/licenses/>.
 *
 * You can contact New Signature by electronic mail at labs@newsignature.com
 * or- by U.S. Postal Service at 1100 H St. NW, Suite 940, Washington, DC 20005.
 */

/** @license
 ### jQuery XML to JSON Plugin v1.3 - 2013-02-18 ###
 * http://www.fyneworks.com/ - diego@fyneworks.com
 * Licensed under http://en.wikipedia.org/wiki/MIT_License
 ###
 Website: http://www.fyneworks.com/jquery/xml-to-json/
 */

/*
Copyright (c) Jim Garvin (http://github.com/coderifous), 2008.
Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses.
Written by Jim Garvin (@coderifous) for use on LMGTFY.com.
http://github.com/coderifous/jquery-localize
Based off of Keith Wood's Localisation jQuery plugin.
http://keith-wood.name/localisation.html
 */

/**
 * Copyright 2012, Digital Fusion
 * Licensed under the MIT license.
 * http://teamdf.com/jquery-plugins/license/
 *
 * @author Sam Sehnert
 * @desc A small plugin that checks whether elements are within
 *       the user visible viewport of a web browser (or within a specified container element if $el is provided).
 *       only accounts for vertical position, not horizontal.
 *
 * Updated by R*
 */

/*!
Copyright (c) 2011 Guillermo Rauch <guillermo@learnboost.com>
Licensed under the MIT license.
https://github.com/LearnBoost/antiscroll#license
*/

(function (e) {
    function t() {
        return {
            empty: !1,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: !1,
            invalidMonth: null,
            invalidFormat: !1,
            userInvalidated: !1,
            iso: !1
        }
    }

    function n(e, t) {
        return function (n) {
            return d(e.call(this, n), t)
        }
    }

    function i(e, t) {
        return function (n) {
            return this.lang().ordinal(e.call(this, n), t)
        }
    }

    function a() {
    }

    function r(e) {
        S(e), o(this, e)
    }

    function s(e) {
        var t = g(e), n = t.year || 0, i = t.month || 0, a = t.week || 0, r = t.day || 0, s = t.hour || 0,
            o = t.minute || 0, l = t.second || 0, c = t.millisecond || 0;
        this._milliseconds = +c + 1e3 * l + 6e4 * o + 36e5 * s, this._days = +r + 7 * a, this._months = +i + 12 * n, this._data = {}, this._bubble()
    }

    function o(e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
        return t.hasOwnProperty("toString") && (e.toString = t.toString), t.hasOwnProperty("valueOf") && (e.valueOf = t.valueOf), e
    }

    function l(e) {
        var t, n = {};
        for (t in e) e.hasOwnProperty(t) && vt.hasOwnProperty(t) && (n[t] = e[t]);
        return n
    }

    function c(e) {
        return 0 > e ? Math.ceil(e) : Math.floor(e)
    }

    function d(e, t, n) {
        for (var i = "" + Math.abs(e), a = e >= 0; i.length < t;) i = "0" + i;
        return (a ? n ? "+" : "" : "-") + i
    }

    function u(e, t, n, i) {
        var a, r, s = t._milliseconds, o = t._days, l = t._months;
        s && e._d.setTime(+e._d + s * n), (o || l) && (a = e.minute(), r = e.hour()), o && e.date(e.date() + o * n), l && e.month(e.month() + l * n), s && !i && it.updateOffset(e), (o || l) && (e.minute(a), e.hour(r))
    }

    function h(e) {
        return "[object Array]" === Object.prototype.toString.call(e)
    }

    function f(e) {
        return "[object Date]" === Object.prototype.toString.call(e) || e instanceof Date
    }

    function p(e, t, n) {
        var i, a = Math.min(e.length, t.length), r = Math.abs(e.length - t.length), s = 0;
        for (i = 0; a > i; i++) (n && e[i] !== t[i] || !n && _(e[i]) !== _(t[i])) && s++;
        return s + r
    }

    function m(e) {
        if (e) {
            var t = e.toLowerCase().replace(/(.)s$/, "$1");
            e = $t[e] || zt[t] || t
        }
        return e
    }

    function g(e) {
        var t, n, i = {};
        for (n in e) e.hasOwnProperty(n) && (t = m(n), t && (i[t] = e[n]));
        return i
    }

    function v(t) {
        var n, i;
        if (0 === t.indexOf("week")) n = 7, i = "day"; else {
            if (0 !== t.indexOf("month")) return;
            n = 12, i = "month"
        }
        it[t] = function (a, r) {
            var s, o, l = it.fn._lang[t], c = [];
            if ("number" == typeof a && (r = a, a = e), o = function (e) {
                var t = it().utc().set(i, e);
                return l.call(it.fn._lang, t, a || "")
            }, null != r) return o(r);
            for (s = 0; n > s; s++) c.push(o(s));
            return c
        }
    }

    function _(e) {
        var t = +e, n = 0;
        return 0 !== t && isFinite(t) && (n = t >= 0 ? Math.floor(t) : Math.ceil(t)), n
    }

    function b(e, t) {
        return new Date(Date.UTC(e, t + 1, 0)).getUTCDate()
    }

    function y(e) {
        return w(e) ? 366 : 365
    }

    function w(e) {
        return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
    }

    function S(e) {
        var t;
        e._a && -2 === e._pf.overflow && (t = e._a[ct] < 0 || e._a[ct] > 11 ? ct : e._a[dt] < 1 || e._a[dt] > b(e._a[lt], e._a[ct]) ? dt : e._a[ut] < 0 || e._a[ut] > 23 ? ut : e._a[ht] < 0 || e._a[ht] > 59 ? ht : e._a[ft] < 0 || e._a[ft] > 59 ? ft : e._a[pt] < 0 || e._a[pt] > 999 ? pt : -1, e._pf._overflowDayOfYear && (lt > t || t > dt) && (t = dt), e._pf.overflow = t)
    }

    function C(e) {
        return null == e._isValid && (e._isValid = !isNaN(e._d.getTime()) && e._pf.overflow < 0 && !e._pf.empty && !e._pf.invalidMonth && !e._pf.nullInput && !e._pf.invalidFormat && !e._pf.userInvalidated, e._strict && (e._isValid = e._isValid && 0 === e._pf.charsLeftOver && 0 === e._pf.unusedTokens.length)), e._isValid
    }

    function k(e) {
        return e ? e.toLowerCase().replace("_", "-") : e
    }

    function T(e, t) {
        return t._isUTC ? it(e).zone(t._offset || 0) : it(e).local()
    }

    function L(e, t) {
        return t.abbr = e, gt[e] || (gt[e] = new a), gt[e].set(t), gt[e]
    }

    function E(e) {
        delete gt[e]
    }

    function M(e) {
        var t, n, i, a, r = 0, s = function (e) {
            if (!gt[e] && _t) try {
                require("./lang/" + e)
            } catch (t) {
            }
            return gt[e]
        };
        if (!e) return it.fn._lang;
        if (!h(e)) {
            if (n = s(e)) return n;
            e = [e]
        }
        for (; r < e.length;) {
            for (a = k(e[r]).split("-"), t = a.length, i = k(e[r + 1]), i = i ? i.split("-") : null; t > 0;) {
                if (n = s(a.slice(0, t).join("-"))) return n;
                if (i && i.length >= t && p(a, i, !0) >= t - 1) break;
                t--
            }
            r++
        }
        return it.fn._lang
    }

    function I(e) {
        return e.match(/\[[\s\S]/) ? e.replace(/^\[|\]$/g, "") : e.replace(/\\/g, "")
    }

    function P(e) {
        var t, n, i = e.match(St);
        for (t = 0, n = i.length; n > t; t++) i[t] = Qt[i[t]] ? Qt[i[t]] : I(i[t]);
        return function (a) {
            var r = "";
            for (t = 0; n > t; t++) r += i[t] instanceof Function ? i[t].call(a, e) : i[t];
            return r
        }
    }

    function D(e, t) {
        return e.isValid() ? (t = A(t, e.lang()), qt[t] || (qt[t] = P(t)), qt[t](e)) : e.lang().invalidDate()
    }

    function A(e, t) {
        function n(e) {
            return t.longDateFormat(e) || e
        }

        var i = 5;
        for (Ct.lastIndex = 0; i >= 0 && Ct.test(e);) e = e.replace(Ct, n), Ct.lastIndex = 0, i -= 1;
        return e
    }

    function R(e, t) {
        var n, i = t._strict;
        switch (e) {
            case"DDDD":
                return Nt;
            case"YYYY":
            case"GGGG":
            case"gggg":
                return i ? Ot : Lt;
            case"Y":
            case"G":
            case"g":
                return Ut;
            case"YYYYYY":
            case"YYYYY":
            case"GGGGG":
            case"ggggg":
                return i ? Ft : Et;
            case"S":
                if (i) return Rt;
            case"SS":
                if (i) return xt;
            case"SSS":
                if (i) return Nt;
            case"DDD":
                return Tt;
            case"MMM":
            case"MMMM":
            case"dd":
            case"ddd":
            case"dddd":
                return It;
            case"a":
            case"A":
                return M(t._l)._meridiemParse;
            case"X":
                return At;
            case"Z":
            case"ZZ":
                return Pt;
            case"T":
                return Dt;
            case"SSSS":
                return Mt;
            case"MM":
            case"DD":
            case"YY":
            case"GG":
            case"gg":
            case"HH":
            case"hh":
            case"mm":
            case"ss":
            case"ww":
            case"WW":
                return i ? xt : kt;
            case"M":
            case"D":
            case"d":
            case"H":
            case"h":
            case"m":
            case"s":
            case"w":
            case"W":
            case"e":
            case"E":
                return kt;
            default:
                return n = new RegExp(j(Y(e.replace("\\", "")), "i"))
        }
    }

    function x(e) {
        e = e || "";
        var t = e.match(Pt) || [], n = t[t.length - 1] || [], i = (n + "").match(Vt) || ["-", 0, 0],
            a = +(60 * i[1]) + _(i[2]);
        return "+" === i[0] ? -a : a
    }

    function N(e, t, n) {
        var i, a = n._a;
        switch (e) {
            case"M":
            case"MM":
                null != t && (a[ct] = _(t) - 1);
                break;
            case"MMM":
            case"MMMM":
                i = M(n._l).monthsParse(t), null != i ? a[ct] = i : n._pf.invalidMonth = t;
                break;
            case"D":
            case"DD":
                null != t && (a[dt] = _(t));
                break;
            case"DDD":
            case"DDDD":
                null != t && (n._dayOfYear = _(t));
                break;
            case"YY":
                a[lt] = _(t) + (_(t) > 68 ? 1900 : 2e3);
                break;
            case"YYYY":
            case"YYYYY":
            case"YYYYYY":
                a[lt] = _(t);
                break;
            case"a":
            case"A":
                n._isPm = M(n._l).isPM(t);
                break;
            case"H":
            case"HH":
            case"h":
            case"hh":
                a[ut] = _(t);
                break;
            case"m":
            case"mm":
                a[ht] = _(t);
                break;
            case"s":
            case"ss":
                a[ft] = _(t);
                break;
            case"S":
            case"SS":
            case"SSS":
            case"SSSS":
                a[pt] = _(1e3 * ("0." + t));
                break;
            case"X":
                n._d = new Date(1e3 * parseFloat(t));
                break;
            case"Z":
            case"ZZ":
                n._useUTC = !0, n._tzm = x(t);
                break;
            case"w":
            case"ww":
            case"W":
            case"WW":
            case"d":
            case"dd":
            case"ddd":
            case"dddd":
            case"e":
            case"E":
                e = e.substr(0, 1);
            case"gg":
            case"gggg":
            case"GG":
            case"GGGG":
            case"GGGGG":
                e = e.substr(0, 2), t && (n._w = n._w || {}, n._w[e] = t)
        }
    }

    function O(e) {
        var t, n, i, a, r, s, o, l, c, d, u = [];
        if (!e._d) {
            for (i = U(e), e._w && null == e._a[dt] && null == e._a[ct] && (r = function (t) {
                var n = parseInt(t, 10);
                return t ? t.length < 3 ? n > 68 ? 1900 + n : 2e3 + n : n : null == e._a[lt] ? it().weekYear() : e._a[lt]
            }, s = e._w, null != s.GG || null != s.W || null != s.E ? o = Q(r(s.GG), s.W || 1, s.E, 4, 1) : (l = M(e._l), c = null != s.d ? z(s.d, l) : null != s.e ? parseInt(s.e, 10) + l._week.dow : 0, d = parseInt(s.w, 10) || 1, null != s.d && c < l._week.dow && d++, o = Q(r(s.gg), d, c, l._week.doy, l._week.dow)), e._a[lt] = o.year, e._dayOfYear = o.dayOfYear), e._dayOfYear && (a = null == e._a[lt] ? i[lt] : e._a[lt], e._dayOfYear > y(a) && (e._pf._overflowDayOfYear = !0), n = $(a, 0, e._dayOfYear), e._a[ct] = n.getUTCMonth(), e._a[dt] = n.getUTCDate()), t = 0; 3 > t && null == e._a[t]; ++t) e._a[t] = u[t] = i[t];
            for (; 7 > t; t++) e._a[t] = u[t] = null == e._a[t] ? 2 === t ? 1 : 0 : e._a[t];
            u[ut] += _((e._tzm || 0) / 60), u[ht] += _((e._tzm || 0) % 60), e._d = (e._useUTC ? $ : H).apply(null, u)
        }
    }

    function F(e) {
        var t;
        e._d || (t = g(e._i), e._a = [t.year, t.month, t.day, t.hour, t.minute, t.second, t.millisecond], O(e))
    }

    function U(e) {
        var t = new Date;
        return e._useUTC ? [t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate()] : [t.getFullYear(), t.getMonth(), t.getDate()]
    }

    function G(e) {
        e._a = [], e._pf.empty = !0;
        var t, n, i, a, r, s = M(e._l), o = "" + e._i, l = o.length, c = 0;
        for (i = A(e._f, s).match(St) || [], t = 0; t < i.length; t++) a = i[t], n = (o.match(R(a, e)) || [])[0], n && (r = o.substr(0, o.indexOf(n)), r.length > 0 && e._pf.unusedInput.push(r), o = o.slice(o.indexOf(n) + n.length), c += n.length), Qt[a] ? (n ? e._pf.empty = !1 : e._pf.unusedTokens.push(a), N(a, n, e)) : e._strict && !n && e._pf.unusedTokens.push(a);
        e._pf.charsLeftOver = l - c, o.length > 0 && e._pf.unusedInput.push(o), e._isPm && e._a[ut] < 12 && (e._a[ut] += 12), e._isPm === !1 && 12 === e._a[ut] && (e._a[ut] = 0), O(e), S(e)
    }

    function Y(e) {
        return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (e, t, n, i, a) {
            return t || n || i || a
        })
    }

    function j(e) {
        return e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
    }

    function W(e) {
        var n, i, a, r, s;
        if (0 === e._f.length) return e._pf.invalidFormat = !0, void (e._d = new Date(0 / 0));
        for (r = 0; r < e._f.length; r++) s = 0, n = o({}, e), n._pf = t(), n._f = e._f[r], G(n), C(n) && (s += n._pf.charsLeftOver, s += 10 * n._pf.unusedTokens.length, n._pf.score = s, (null == a || a > s) && (a = s, i = n));
        o(e, i || n)
    }

    function V(e) {
        var t, n, i = e._i, a = Gt.exec(i);
        if (a) {
            for (e._pf.iso = !0, t = 0, n = jt.length; n > t; t++) if (jt[t][1].exec(i)) {
                e._f = jt[t][0] + (a[6] || " ");
                break
            }
            for (t = 0, n = Wt.length; n > t; t++) if (Wt[t][1].exec(i)) {
                e._f += Wt[t][0];
                break
            }
            i.match(Pt) && (e._f += "Z"), G(e)
        } else e._d = new Date(i)
    }

    function B(t) {
        var n = t._i, i = bt.exec(n);
        n === e ? t._d = new Date : i ? t._d = new Date(+i[1]) : "string" == typeof n ? V(t) : h(n) ? (t._a = n.slice(0), O(t)) : f(n) ? t._d = new Date(+n) : "object" == typeof n ? F(t) : t._d = new Date(n)
    }

    function H(e, t, n, i, a, r, s) {
        var o = new Date(e, t, n, i, a, r, s);
        return 1970 > e && o.setFullYear(e), o
    }

    function $(e) {
        var t = new Date(Date.UTC.apply(null, arguments));
        return 1970 > e && t.setUTCFullYear(e), t
    }

    function z(e, t) {
        if ("string" == typeof e) if (isNaN(e)) {
            if (e = t.weekdaysParse(e), "number" != typeof e) return null
        } else e = parseInt(e, 10);
        return e
    }

    function q(e, t, n, i, a) {
        return a.relativeTime(t || 1, !!n, e, i)
    }

    function J(e, t, n) {
        var i = ot(Math.abs(e) / 1e3), a = ot(i / 60), r = ot(a / 60), s = ot(r / 24), o = ot(s / 365),
            l = 45 > i && ["s", i] || 1 === a && ["m"] || 45 > a && ["mm", a] || 1 === r && ["h"] || 22 > r && ["hh", r] || 1 === s && ["d"] || 25 >= s && ["dd", s] || 45 >= s && ["M"] || 345 > s && ["MM", ot(s / 30)] || 1 === o && ["y"] || ["yy", o];
        return l[2] = t, l[3] = e > 0, l[4] = n, q.apply({}, l)
    }

    function K(e, t, n) {
        var i, a = n - t, r = n - e.day();
        return r > a && (r -= 7), a - 7 > r && (r += 7), i = it(e).add("d", r), {
            week: Math.ceil(i.dayOfYear() / 7),
            year: i.year()
        }
    }

    function Q(e, t, n, i, a) {
        var r, s, o = $(e, 0, 1).getUTCDay();
        return n = null != n ? n : a, r = a - o + (o > i ? 7 : 0) - (a > o ? 7 : 0), s = 7 * (t - 1) + (n - a) + r + 1, {
            year: s > 0 ? e : e - 1,
            dayOfYear: s > 0 ? s : y(e - 1) + s
        }
    }

    function X(e) {
        var t = e._i, n = e._f;
        return null === t ? it.invalid({nullInput: !0}) : ("string" == typeof t && (e._i = t = M().preparse(t)), it.isMoment(t) ? (e = l(t), e._d = new Date(+t._d)) : n ? h(n) ? W(e) : G(e) : B(e), new r(e))
    }

    function Z(e, t) {
        it.fn[e] = it.fn[e + "s"] = function (e) {
            var n = this._isUTC ? "UTC" : "";
            return null != e ? (this._d["set" + n + t](e), it.updateOffset(this), this) : this._d["get" + n + t]()
        }
    }

    function et(e) {
        it.duration.fn[e] = function () {
            return this._data[e]
        }
    }

    function tt(e, t) {
        it.duration.fn["as" + e] = function () {
            return +this / t
        }
    }

    function nt(e) {
        var t = !1, n = it;
        "undefined" == typeof ender && (e ? (st.moment = function () {
            return !t && console && console.warn && (t = !0, console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")), n.apply(null, arguments)
        }, o(st.moment, n)) : st.moment = it)
    }

    for (var it, at, rt = "2.5.1", st = this, ot = Math.round, lt = 0, ct = 1, dt = 2, ut = 3, ht = 4, ft = 5, pt = 6, mt = !1, gt = {}, vt = {
        _isAMomentObject: null,
        _i: null,
        _f: null,
        _l: null,
        _strict: null,
        _isUTC: null,
        _offset: null,
        _pf: null,
        _lang: null
    }, _t = "undefined" != typeof module && module.exports && "undefined" != typeof require, bt = /^\/?Date\((\-?\d+)/i, yt = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/, wt = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/, St = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g, Ct = /(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g, kt = /\d\d?/, Tt = /\d{1,3}/, Lt = /\d{1,4}/, Et = /[+\-]?\d{1,6}/, Mt = /\d+/, It = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, Pt = /Z|[\+\-]\d\d:?\d\d/gi, Dt = /T/i, At = /[\+\-]?\d+(\.\d{1,3})?/, Rt = /\d/, xt = /\d\d/, Nt = /\d{3}/, Ot = /\d{4}/, Ft = /[+-]?\d{6}/, Ut = /[+-]?\d+/, Gt = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, Yt = "YYYY-MM-DDTHH:mm:ssZ", jt = [["YYYYYY-MM-DD", /[+-]\d{6}-\d{2}-\d{2}/], ["YYYY-MM-DD", /\d{4}-\d{2}-\d{2}/], ["GGGG-[W]WW-E", /\d{4}-W\d{2}-\d/], ["GGGG-[W]WW", /\d{4}-W\d{2}/], ["YYYY-DDD", /\d{4}-\d{3}/]], Wt = [["HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d{1,3}/], ["HH:mm:ss", /(T| )\d\d:\d\d:\d\d/], ["HH:mm", /(T| )\d\d:\d\d/], ["HH", /(T| )\d\d/]], Vt = /([\+\-]|\d\d)/gi, Bt = "Date|Hours|Minutes|Seconds|Milliseconds".split("|"), Ht = {
        Milliseconds: 1,
        Seconds: 1e3,
        Minutes: 6e4,
        Hours: 36e5,
        Days: 864e5,
        Months: 2592e6,
        Years: 31536e6
    }, $t = {
        ms: "millisecond",
        s: "second",
        m: "minute",
        h: "hour",
        d: "day",
        D: "date",
        w: "week",
        W: "isoWeek",
        M: "month",
        y: "year",
        DDD: "dayOfYear",
        e: "weekday",
        E: "isoWeekday",
        gg: "weekYear",
        GG: "isoWeekYear"
    }, zt = {
        dayofyear: "dayOfYear",
        isoweekday: "isoWeekday",
        isoweek: "isoWeek",
        weekyear: "weekYear",
        isoweekyear: "isoWeekYear"
    }, qt = {}, Jt = "DDD w W M D d".split(" "), Kt = "M D H h m s w W".split(" "), Qt = {
        M: function () {
            return this.month() + 1
        }, MMM: function (e) {
            return this.lang().monthsShort(this, e)
        }, MMMM: function (e) {
            return this.lang().months(this, e)
        }, D: function () {
            return this.date()
        }, DDD: function () {
            return this.dayOfYear()
        }, d: function () {
            return this.day()
        }, dd: function (e) {
            return this.lang().weekdaysMin(this, e)
        }, ddd: function (e) {
            return this.lang().weekdaysShort(this, e)
        }, dddd: function (e) {
            return this.lang().weekdays(this, e)
        }, w: function () {
            return this.week()
        }, W: function () {
            return this.isoWeek()
        }, YY: function () {
            return d(this.year() % 100, 2)
        }, YYYY: function () {
            return d(this.year(), 4)
        }, YYYYY: function () {
            return d(this.year(), 5)
        }, YYYYYY: function () {
            var e = this.year(), t = e >= 0 ? "+" : "-";
            return t + d(Math.abs(e), 6)
        }, gg: function () {
            return d(this.weekYear() % 100, 2)
        }, gggg: function () {
            return d(this.weekYear(), 4)
        }, ggggg: function () {
            return d(this.weekYear(), 5)
        }, GG: function () {
            return d(this.isoWeekYear() % 100, 2)
        }, GGGG: function () {
            return d(this.isoWeekYear(), 4)
        }, GGGGG: function () {
            return d(this.isoWeekYear(), 5)
        }, e: function () {
            return this.weekday()
        }, E: function () {
            return this.isoWeekday()
        }, a: function () {
            return this.lang().meridiem(this.hours(), this.minutes(), !0)
        }, A: function () {
            return this.lang().meridiem(this.hours(), this.minutes(), !1)
        }, H: function () {
            return this.hours()
        }, h: function () {
            return this.hours() % 12 || 12
        }, m: function () {
            return this.minutes()
        }, s: function () {
            return this.seconds()
        }, S: function () {
            return _(this.milliseconds() / 100)
        }, SS: function () {
            return d(_(this.milliseconds() / 10), 2)
        }, SSS: function () {
            return d(this.milliseconds(), 3)
        }, SSSS: function () {
            return d(this.milliseconds(), 3)
        }, Z: function () {
            var e = -this.zone(), t = "+";
            return 0 > e && (e = -e, t = "-"), t + d(_(e / 60), 2) + ":" + d(_(e) % 60, 2)
        }, ZZ: function () {
            var e = -this.zone(), t = "+";
            return 0 > e && (e = -e, t = "-"), t + d(_(e / 60), 2) + d(_(e) % 60, 2)
        }, z: function () {
            return this.zoneAbbr()
        }, zz: function () {
            return this.zoneName()
        }, X: function () {
            return this.unix()
        }, Q: function () {
            return this.quarter()
        }
    }, Xt = ["months", "monthsShort", "weekdays", "weekdaysShort", "weekdaysMin"]; Jt.length;) at = Jt.pop(), Qt[at + "o"] = i(Qt[at], at);
    for (; Kt.length;) at = Kt.pop(), Qt[at + at] = n(Qt[at], 2);
    for (Qt.DDDD = n(Qt.DDD, 3), o(a.prototype, {
        set: function (e) {
            var t, n;
            for (n in e) t = e[n], "function" == typeof t ? this[n] = t : this["_" + n] = t
        },
        _months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
        months: function (e) {
            return this._months[e.month()]
        },
        _monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
        monthsShort: function (e) {
            return this._monthsShort[e.month()]
        },
        monthsParse: function (e) {
            var t, n, i;
            for (this._monthsParse || (this._monthsParse = []), t = 0; 12 > t; t++) if (this._monthsParse[t] || (n = it.utc([2e3, t]), i = "^" + this.months(n, "") + "|^" + this.monthsShort(n, ""), this._monthsParse[t] = new RegExp(i.replace(".", ""), "i")), this._monthsParse[t].test(e)) return t
        },
        _weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
        weekdays: function (e) {
            return this._weekdays[e.day()]
        },
        _weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
        weekdaysShort: function (e) {
            return this._weekdaysShort[e.day()]
        },
        _weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
        weekdaysMin: function (e) {
            return this._weekdaysMin[e.day()]
        },
        weekdaysParse: function (e) {
            var t, n, i;
            for (this._weekdaysParse || (this._weekdaysParse = []), t = 0; 7 > t; t++) if (this._weekdaysParse[t] || (n = it([2e3, 1]).day(t), i = "^" + this.weekdays(n, "") + "|^" + this.weekdaysShort(n, "") + "|^" + this.weekdaysMin(n, ""), this._weekdaysParse[t] = new RegExp(i.replace(".", ""), "i")), this._weekdaysParse[t].test(e)) return t
        },
        _longDateFormat: {
            LT: "h:mm A",
            L: "MM/DD/YYYY",
            LL: "MMMM D YYYY",
            LLL: "MMMM D YYYY LT",
            LLLL: "dddd, MMMM D YYYY LT"
        },
        longDateFormat: function (e) {
            var t = this._longDateFormat[e];
            return !t && this._longDateFormat[e.toUpperCase()] && (t = this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function (e) {
                return e.slice(1)
            }), this._longDateFormat[e] = t), t
        },
        isPM: function (e) {
            return "p" === (e + "").toLowerCase().charAt(0)
        },
        _meridiemParse: /[ap]\.?m?\.?/i,
        meridiem: function (e, t, n) {
            return e > 11 ? n ? "pm" : "PM" : n ? "am" : "AM"
        },
        _calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        calendar: function (e, t) {
            var n = this._calendar[e];
            return "function" == typeof n ? n.apply(t) : n
        },
        _relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        relativeTime: function (e, t, n, i) {
            var a = this._relativeTime[n];
            return "function" == typeof a ? a(e, t, n, i) : a.replace(/%d/i, e)
        },
        pastFuture: function (e, t) {
            var n = this._relativeTime[mt && e > 0 ? "future" : "past"];
            return "function" == typeof n ? n(t) : n.replace(/%s/i, t)
        },
        ordinal: function (e) {
            return this._ordinal.replace("%d", e)
        },
        _ordinal: "%d",
        preparse: function (e) {
            return e
        },
        postformat: function (e) {
            return e
        },
        week: function (e) {
            return K(e, this._week.dow, this._week.doy).week
        },
        _week: {dow: 0, doy: 6},
        _invalidDate: "Invalid date",
        invalidDate: function () {
            return this._invalidDate
        }
    }), it = function (n, i, a, r) {
        var s;
        return "boolean" == typeof a && (r = a, a = e), s = {}, s._isAMomentObject = !0, s._i = n, s._f = i, s._l = a, s._strict = r, s._isUTC = !1, s._pf = t(), X(s)
    }, it.utc = function (n, i, a, r) {
        var s;
        return "boolean" == typeof a && (r = a, a = e), s = {}, s._isAMomentObject = !0, s._useUTC = !0, s._isUTC = !0, s._l = a, s._i = n, s._f = i, s._strict = r, s._pf = t(), X(s).utc()
    }, it.unix = function (e) {
        return it(1e3 * e)
    }, it.duration = function (e, t) {
        var n, i, a, r = e, o = null;
        return it.isDuration(e) ? r = {
            ms: e._milliseconds,
            d: e._days,
            M: e._months
        } : "number" == typeof e ? (r = {}, t ? r[t] = e : r.milliseconds = e) : (o = yt.exec(e)) ? (n = "-" === o[1] ? -1 : 1, r = {
            y: 0,
            d: _(o[dt]) * n,
            h: _(o[ut]) * n,
            m: _(o[ht]) * n,
            s: _(o[ft]) * n,
            ms: _(o[pt]) * n
        }) : (o = wt.exec(e)) && (n = "-" === o[1] ? -1 : 1, a = function (e) {
            var t = e && parseFloat(e.replace(",", "."));
            return (isNaN(t) ? 0 : t) * n
        }, r = {
            y: a(o[2]),
            M: a(o[3]),
            d: a(o[4]),
            h: a(o[5]),
            m: a(o[6]),
            s: a(o[7]),
            w: a(o[8])
        }), i = new s(r), it.isDuration(e) && e.hasOwnProperty("_lang") && (i._lang = e._lang), i
    }, it.version = rt, it.defaultFormat = Yt, it.updateOffset = function () {
    }, it.lang = function (e, t) {
        var n;
        return e ? (t ? L(k(e), t) : null === t ? (E(e), e = "en") : gt[e] || M(e), n = it.duration.fn._lang = it.fn._lang = M(e), n._abbr) : it.fn._lang._abbr
    }, it.langData = function (e) {
        return e && e._lang && e._lang._abbr && (e = e._lang._abbr), M(e)
    }, it.isMoment = function (e) {
        return e instanceof r || null != e && e.hasOwnProperty("_isAMomentObject")
    }, it.isDuration = function (e) {
        return e instanceof s
    }, at = Xt.length - 1; at >= 0; --at) v(Xt[at]);
    for (it.normalizeUnits = function (e) {
        return m(e)
    }, it.invalid = function (e) {
        var t = it.utc(0 / 0);
        return null != e ? o(t._pf, e) : t._pf.userInvalidated = !0, t
    }, it.parseZone = function (e) {
        return it(e).parseZone()
    }, o(it.fn = r.prototype, {
        clone: function () {
            return it(this)
        }, valueOf: function () {
            return +this._d + 6e4 * (this._offset || 0)
        }, unix: function () {
            return Math.floor(+this / 1e3)
        }, toString: function () {
            return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
        }, toDate: function () {
            return this._offset ? new Date(+this) : this._d
        }, toISOString: function () {
            var e = it(this).utc();
            return 0 < e.year() && e.year() <= 9999 ? D(e, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : D(e, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
        }, toArray: function () {
            var e = this;
            return [e.year(), e.month(), e.date(), e.hours(), e.minutes(), e.seconds(), e.milliseconds()]
        }, isValid: function () {
            return C(this)
        }, isDSTShifted: function () {
            return this._a ? this.isValid() && p(this._a, (this._isUTC ? it.utc(this._a) : it(this._a)).toArray()) > 0 : !1
        }, parsingFlags: function () {
            return o({}, this._pf)
        }, invalidAt: function () {
            return this._pf.overflow
        }, utc: function () {
            return this.zone(0)
        }, local: function () {
            return this.zone(0), this._isUTC = !1, this
        }, format: function (e) {
            var t = D(this, e || it.defaultFormat);
            return this.lang().postformat(t)
        }, add: function (e, t) {
            var n;
            return n = "string" == typeof e ? it.duration(+t, e) : it.duration(e, t), u(this, n, 1), this
        }, subtract: function (e, t) {
            var n;
            return n = "string" == typeof e ? it.duration(+t, e) : it.duration(e, t), u(this, n, -1), this
        }, diff: function (e, t, n) {
            var i, a, r = T(e, this), s = 6e4 * (this.zone() - r.zone());
            return t = m(t), "year" === t || "month" === t ? (i = 432e5 * (this.daysInMonth() + r.daysInMonth()), a = 12 * (this.year() - r.year()) + (this.month() - r.month()), a += (this - it(this).startOf("month") - (r - it(r).startOf("month"))) / i, a -= 6e4 * (this.zone() - it(this).startOf("month").zone() - (r.zone() - it(r).startOf("month").zone())) / i, "year" === t && (a /= 12)) : (i = this - r, a = "second" === t ? i / 1e3 : "minute" === t ? i / 6e4 : "hour" === t ? i / 36e5 : "day" === t ? (i - s) / 864e5 : "week" === t ? (i - s) / 6048e5 : i), n ? a : c(a)
        }, from: function (e, t) {
            return it.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)
        }, fromNow: function (e) {
            return this.from(it(), e)
        }, calendar: function () {
            var e = T(it(), this).startOf("day"), t = this.diff(e, "days", !0),
                n = -6 > t ? "sameElse" : -1 > t ? "lastWeek" : 0 > t ? "lastDay" : 1 > t ? "sameDay" : 2 > t ? "nextDay" : 7 > t ? "nextWeek" : "sameElse";
            return this.format(this.lang().calendar(n, this))
        }, isLeapYear: function () {
            return w(this.year())
        }, isDST: function () {
            return this.zone() < this.clone().month(0).zone() || this.zone() < this.clone().month(5).zone()
        }, day: function (e) {
            var t = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
            return null != e ? (e = z(e, this.lang()), this.add({d: e - t})) : t
        }, month: function (e) {
            var t, n = this._isUTC ? "UTC" : "";
            return null != e ? "string" == typeof e && (e = this.lang().monthsParse(e), "number" != typeof e) ? this : (t = this.date(), this.date(1), this._d["set" + n + "Month"](e), this.date(Math.min(t, this.daysInMonth())), it.updateOffset(this), this) : this._d["get" + n + "Month"]()
        }, startOf: function (e) {
            switch (e = m(e)) {
                case"year":
                    this.month(0);
                case"month":
                    this.date(1);
                case"week":
                case"isoWeek":
                case"day":
                    this.hours(0);
                case"hour":
                    this.minutes(0);
                case"minute":
                    this.seconds(0);
                case"second":
                    this.milliseconds(0)
            }
            return "week" === e ? this.weekday(0) : "isoWeek" === e && this.isoWeekday(1), this
        }, endOf: function (e) {
            return e = m(e), this.startOf(e).add("isoWeek" === e ? "week" : e, 1).subtract("ms", 1)
        }, isAfter: function (e, t) {
            return t = "undefined" != typeof t ? t : "millisecond", +this.clone().startOf(t) > +it(e).startOf(t)
        }, isBefore: function (e, t) {
            return t = "undefined" != typeof t ? t : "millisecond", +this.clone().startOf(t) < +it(e).startOf(t)
        }, isSame: function (e, t) {
            return t = t || "ms", +this.clone().startOf(t) === +T(e, this).startOf(t)
        }, min: function (e) {
            return e = it.apply(null, arguments), this > e ? this : e
        }, max: function (e) {
            return e = it.apply(null, arguments), e > this ? this : e
        }, zone: function (e) {
            var t = this._offset || 0;
            return null == e ? this._isUTC ? t : this._d.getTimezoneOffset() : ("string" == typeof e && (e = x(e)), Math.abs(e) < 16 && (e = 60 * e), this._offset = e, this._isUTC = !0, t !== e && u(this, it.duration(t - e, "m"), 1, !0), this)
        }, zoneAbbr: function () {
            return this._isUTC ? "UTC" : ""
        }, zoneName: function () {
            return this._isUTC ? "Coordinated Universal Time" : ""
        }, parseZone: function () {
            return this._tzm ? this.zone(this._tzm) : "string" == typeof this._i && this.zone(this._i), this
        }, hasAlignedHourOffset: function (e) {
            return e = e ? it(e).zone() : 0, (this.zone() - e) % 60 === 0
        }, daysInMonth: function () {
            return b(this.year(), this.month())
        }, dayOfYear: function (e) {
            var t = ot((it(this).startOf("day") - it(this).startOf("year")) / 864e5) + 1;
            return null == e ? t : this.add("d", e - t)
        }, quarter: function () {
            return Math.ceil((this.month() + 1) / 3)
        }, weekYear: function (e) {
            var t = K(this, this.lang()._week.dow, this.lang()._week.doy).year;
            return null == e ? t : this.add("y", e - t)
        }, isoWeekYear: function (e) {
            var t = K(this, 1, 4).year;
            return null == e ? t : this.add("y", e - t)
        }, week: function (e) {
            var t = this.lang().week(this);
            return null == e ? t : this.add("d", 7 * (e - t))
        }, isoWeek: function (e) {
            var t = K(this, 1, 4).week;
            return null == e ? t : this.add("d", 7 * (e - t))
        }, weekday: function (e) {
            var t = (this.day() + 7 - this.lang()._week.dow) % 7;
            return null == e ? t : this.add("d", e - t)
        }, isoWeekday: function (e) {
            return null == e ? this.day() || 7 : this.day(this.day() % 7 ? e : e - 7)
        }, get: function (e) {
            return e = m(e), this[e]()
        }, set: function (e, t) {
            return e = m(e), "function" == typeof this[e] && this[e](t), this
        }, lang: function (t) {
            return t === e ? this._lang : (this._lang = M(t), this)
        }
    }), at = 0; at < Bt.length; at++) Z(Bt[at].toLowerCase().replace(/s$/, ""), Bt[at]);
    Z("year", "FullYear"), it.fn.days = it.fn.day, it.fn.months = it.fn.month, it.fn.weeks = it.fn.week, it.fn.isoWeeks = it.fn.isoWeek, it.fn.toJSON = it.fn.toISOString, o(it.duration.fn = s.prototype, {
        _bubble: function () {
            var e, t, n, i, a = this._milliseconds, r = this._days, s = this._months, o = this._data;
            o.milliseconds = a % 1e3, e = c(a / 1e3), o.seconds = e % 60, t = c(e / 60), o.minutes = t % 60, n = c(t / 60), o.hours = n % 24, r += c(n / 24), o.days = r % 30, s += c(r / 30), o.months = s % 12, i = c(s / 12), o.years = i
        }, weeks: function () {
            return c(this.days() / 7)
        }, valueOf: function () {
            return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * _(this._months / 12)
        }, humanize: function (e) {
            var t = +this, n = J(t, !e, this.lang());
            return e && (n = this.lang().pastFuture(t, n)), this.lang().postformat(n)
        }, add: function (e, t) {
            var n = it.duration(e, t);
            return this._milliseconds += n._milliseconds, this._days += n._days, this._months += n._months, this._bubble(), this
        }, subtract: function (e, t) {
            var n = it.duration(e, t);
            return this._milliseconds -= n._milliseconds, this._days -= n._days, this._months -= n._months, this._bubble(), this
        }, get: function (e) {
            return e = m(e), this[e.toLowerCase() + "s"]()
        }, as: function (e) {
            return e = m(e), this["as" + e.charAt(0).toUpperCase() + e.slice(1) + "s"]()
        }, lang: it.fn.lang, toIsoString: function () {
            var e = Math.abs(this.years()), t = Math.abs(this.months()), n = Math.abs(this.days()),
                i = Math.abs(this.hours()), a = Math.abs(this.minutes()),
                r = Math.abs(this.seconds() + this.milliseconds() / 1e3);
            return this.asSeconds() ? (this.asSeconds() < 0 ? "-" : "") + "P" + (e ? e + "Y" : "") + (t ? t + "M" : "") + (n ? n + "D" : "") + (i || a || r ? "T" : "") + (i ? i + "H" : "") + (a ? a + "M" : "") + (r ? r + "S" : "") : "P0D"
        }
    });
    for (at in Ht) Ht.hasOwnProperty(at) && (tt(at, Ht[at]), et(at.toLowerCase()));
    tt("Weeks", 6048e5), it.duration.fn.asMonths = function () {
        return (+this - 31536e6 * this.years()) / 2592e6 + 12 * this.years()
    }, it.lang("en", {
        ordinal: function (e) {
            var t = e % 10, n = 1 === _(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th";
            return e + n
        }
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("ar-ma", {
            months: "يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),
            monthsShort: "يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),
            weekdays: "الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),
            weekdaysShort: "احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),
            weekdaysMin: "ح_ن_ث_ر_خ_ج_س".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[اليوم على الساعة] LT",
                nextDay: "[غدا على الساعة] LT",
                nextWeek: "dddd [على الساعة] LT",
                lastDay: "[أمس على الساعة] LT",
                lastWeek: "dddd [على الساعة] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "في %s",
                past: "منذ %s",
                s: "ثوان",
                m: "دقيقة",
                mm: "%d دقائق",
                h: "ساعة",
                hh: "%d ساعات",
                d: "يوم",
                dd: "%d أيام",
                M: "شهر",
                MM: "%d أشهر",
                y: "سنة",
                yy: "%d سنوات"
            },
            week: {dow: 6, doy: 12}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("ar", {
            months: "يناير/ كانون الثاني_فبراير/ شباط_مارس/ آذار_أبريل/ نيسان_مايو/ أيار_يونيو/ حزيران_يوليو/ تموز_أغسطس/ آب_سبتمبر/ أيلول_أكتوبر/ تشرين الأول_نوفمبر/ تشرين الثاني_ديسمبر/ كانون الأول".split("_"),
            monthsShort: "يناير/ كانون الثاني_فبراير/ شباط_مارس/ آذار_أبريل/ نيسان_مايو/ أيار_يونيو/ حزيران_يوليو/ تموز_أغسطس/ آب_سبتمبر/ أيلول_أكتوبر/ تشرين الأول_نوفمبر/ تشرين الثاني_ديسمبر/ كانون الأول".split("_"),
            weekdays: "الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),
            weekdaysShort: "الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),
            weekdaysMin: "ح_ن_ث_ر_خ_ج_س".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[اليوم على الساعة] LT",
                nextDay: "[غدا على الساعة] LT",
                nextWeek: "dddd [على الساعة] LT",
                lastDay: "[أمس على الساعة] LT",
                lastWeek: "dddd [على الساعة] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "في %s",
                past: "منذ %s",
                s: "ثوان",
                m: "دقيقة",
                mm: "%d دقائق",
                h: "ساعة",
                hh: "%d ساعات",
                d: "يوم",
                dd: "%d أيام",
                M: "شهر",
                MM: "%d أشهر",
                y: "سنة",
                yy: "%d سنوات"
            },
            week: {dow: 6, doy: 12}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("bg", {
            months: "януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),
            monthsShort: "янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),
            weekdays: "неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),
            weekdaysShort: "нед_пон_вто_сря_чет_пет_съб".split("_"),
            weekdaysMin: "нд_пн_вт_ср_чт_пт_сб".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "D.MM.YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Днес в] LT",
                nextDay: "[Утре в] LT",
                nextWeek: "dddd [в] LT",
                lastDay: "[Вчера в] LT",
                lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                        case 3:
                        case 6:
                            return "[В изминалата] dddd [в] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[В изминалия] dddd [в] LT"
                    }
                },
                sameElse: "L"
            },
            relativeTime: {
                future: "след %s",
                past: "преди %s",
                s: "няколко секунди",
                m: "минута",
                mm: "%d минути",
                h: "час",
                hh: "%d часа",
                d: "ден",
                dd: "%d дни",
                M: "месец",
                MM: "%d месеца",
                y: "година",
                yy: "%d години"
            },
            ordinal: function (e) {
                var t = e % 10, n = e % 100;
                return 0 === e ? e + "-ев" : 0 === n ? e + "-ен" : n > 10 && 20 > n ? e + "-ти" : 1 === t ? e + "-ви" : 2 === t ? e + "-ри" : 7 === t || 8 === t ? e + "-ми" : e + "-ти"
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (t) {
        function n(e, t, n) {
            var i = {mm: "munutenn", MM: "miz", dd: "devezh"};
            return e + " " + r(i[n], e)
        }

        function i(e) {
            switch (a(e)) {
                case 1:
                case 3:
                case 4:
                case 5:
                case 9:
                    return e + " bloaz";
                default:
                    return e + " vloaz"
            }
        }

        function a(e) {
            return e > 9 ? a(e % 10) : e
        }

        function r(e, t) {
            return 2 === t ? s(e) : e
        }

        function s(t) {
            var n = {m: "v", b: "v", d: "z"};
            return n[t.charAt(0)] === e ? t : n[t.charAt(0)] + t.substring(1)
        }

        return t.lang("br", {
            months: "Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),
            monthsShort: "Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),
            weekdays: "Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),
            weekdaysShort: "Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),
            weekdaysMin: "Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),
            longDateFormat: {
                LT: "h[e]mm A",
                L: "DD/MM/YYYY",
                LL: "D [a viz] MMMM YYYY",
                LLL: "D [a viz] MMMM YYYY LT",
                LLLL: "dddd, D [a viz] MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Hiziv da] LT",
                nextDay: "[Warc'hoazh da] LT",
                nextWeek: "dddd [da] LT",
                lastDay: "[Dec'h da] LT",
                lastWeek: "dddd [paset da] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "a-benn %s",
                past: "%s 'zo",
                s: "un nebeud segondennoù",
                m: "ur vunutenn",
                mm: n,
                h: "un eur",
                hh: "%d eur",
                d: "un devezh",
                dd: n,
                M: "ur miz",
                MM: n,
                y: "ur bloaz",
                yy: i
            },
            ordinal: function (e) {
                var t = 1 === e ? "añ" : "vet";
                return e + t
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n) {
            var i = e + " ";
            switch (n) {
                case"m":
                    return t ? "jedna minuta" : "jedne minute";
                case"mm":
                    return i += 1 === e ? "minuta" : 2 === e || 3 === e || 4 === e ? "minute" : "minuta";
                case"h":
                    return t ? "jedan sat" : "jednog sata";
                case"hh":
                    return i += 1 === e ? "sat" : 2 === e || 3 === e || 4 === e ? "sata" : "sati";
                case"dd":
                    return i += 1 === e ? "dan" : "dana";
                case"MM":
                    return i += 1 === e ? "mjesec" : 2 === e || 3 === e || 4 === e ? "mjeseca" : "mjeseci";
                case"yy":
                    return i += 1 === e ? "godina" : 2 === e || 3 === e || 4 === e ? "godine" : "godina"
            }
        }

        return e.lang("bs", {
            months: "januar_februar_mart_april_maj_juni_juli_avgust_septembar_oktobar_novembar_decembar".split("_"),
            monthsShort: "jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),
            weekdays: "nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),
            weekdaysShort: "ned._pon._uto._sri._čet._pet._sub.".split("_"),
            weekdaysMin: "ne_po_ut_sr_če_pe_su".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD. MM. YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd, D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[danas u] LT", nextDay: "[sutra u] LT", nextWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[u] [nedjelju] [u] LT";
                        case 3:
                            return "[u] [srijedu] [u] LT";
                        case 6:
                            return "[u] [subotu] [u] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[u] dddd [u] LT"
                    }
                }, lastDay: "[jučer u] LT", lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                        case 3:
                            return "[prošlu] dddd [u] LT";
                        case 6:
                            return "[prošle] [subote] [u] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[prošli] dddd [u] LT"
                    }
                }, sameElse: "L"
            },
            relativeTime: {
                future: "za %s",
                past: "prije %s",
                s: "par sekundi",
                m: t,
                mm: t,
                h: t,
                hh: t,
                d: "dan",
                dd: t,
                M: "mjesec",
                MM: t,
                y: "godinu",
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("ca", {
            months: "gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),
            monthsShort: "gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),
            weekdays: "diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),
            weekdaysShort: "dg._dl._dt._dc._dj._dv._ds.".split("_"),
            weekdaysMin: "Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: function () {
                    return "[avui a " + (1 !== this.hours() ? "les" : "la") + "] LT"
                }, nextDay: function () {
                    return "[demà a " + (1 !== this.hours() ? "les" : "la") + "] LT"
                }, nextWeek: function () {
                    return "dddd [a " + (1 !== this.hours() ? "les" : "la") + "] LT"
                }, lastDay: function () {
                    return "[ahir a " + (1 !== this.hours() ? "les" : "la") + "] LT"
                }, lastWeek: function () {
                    return "[el] dddd [passat a " + (1 !== this.hours() ? "les" : "la") + "] LT"
                }, sameElse: "L"
            },
            relativeTime: {
                future: "en %s",
                past: "fa %s",
                s: "uns segons",
                m: "un minut",
                mm: "%d minuts",
                h: "una hora",
                hh: "%d hores",
                d: "un dia",
                dd: "%d dies",
                M: "un mes",
                MM: "%d mesos",
                y: "un any",
                yy: "%d anys"
            },
            ordinal: "%dº",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e) {
            return e > 1 && 5 > e && 1 !== ~~(e / 10)
        }

        function n(e, n, i, a) {
            var r = e + " ";
            switch (i) {
                case"s":
                    return n || a ? "pár vteřin" : "pár vteřinami";
                case"m":
                    return n ? "minuta" : a ? "minutu" : "minutou";
                case"mm":
                    return n || a ? r + (t(e) ? "minuty" : "minut") : r + "minutami";
                case"h":
                    return n ? "hodina" : a ? "hodinu" : "hodinou";
                case"hh":
                    return n || a ? r + (t(e) ? "hodiny" : "hodin") : r + "hodinami";
                case"d":
                    return n || a ? "den" : "dnem";
                case"dd":
                    return n || a ? r + (t(e) ? "dny" : "dní") : r + "dny";
                case"M":
                    return n || a ? "měsíc" : "měsícem";
                case"MM":
                    return n || a ? r + (t(e) ? "měsíce" : "měsíců") : r + "měsíci";
                case"y":
                    return n || a ? "rok" : "rokem";
                case"yy":
                    return n || a ? r + (t(e) ? "roky" : "let") : r + "lety"
            }
        }

        var i = "leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),
            a = "led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");
        return e.lang("cs", {
            months: i,
            monthsShort: a,
            monthsParse: function (e, t) {
                var n, i = [];
                for (n = 0; 12 > n; n++) i[n] = new RegExp("^" + e[n] + "$|^" + t[n] + "$", "i");
                return i
            }(i, a),
            weekdays: "neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),
            weekdaysShort: "ne_po_út_st_čt_pá_so".split("_"),
            weekdaysMin: "ne_po_út_st_čt_pá_so".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD.MM.YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[dnes v] LT", nextDay: "[zítra v] LT", nextWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[v neděli v] LT";
                        case 1:
                        case 2:
                            return "[v] dddd [v] LT";
                        case 3:
                            return "[ve středu v] LT";
                        case 4:
                            return "[ve čtvrtek v] LT";
                        case 5:
                            return "[v pátek v] LT";
                        case 6:
                            return "[v sobotu v] LT"
                    }
                }, lastDay: "[včera v] LT", lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[minulou neděli v] LT";
                        case 1:
                        case 2:
                            return "[minulé] dddd [v] LT";
                        case 3:
                            return "[minulou středu v] LT";
                        case 4:
                        case 5:
                            return "[minulý] dddd [v] LT";
                        case 6:
                            return "[minulou sobotu v] LT"
                    }
                }, sameElse: "L"
            },
            relativeTime: {
                future: "za %s",
                past: "před %s",
                s: n,
                m: n,
                mm: n,
                h: n,
                hh: n,
                d: n,
                dd: n,
                M: n,
                MM: n,
                y: n,
                yy: n
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("cv", {
            months: "кăрлач_нарăс_пуш_ака_май_çĕртме_утă_çурла_авăн_юпа_чӳк_раштав".split("_"),
            monthsShort: "кăр_нар_пуш_ака_май_çĕр_утă_çур_ав_юпа_чӳк_раш".split("_"),
            weekdays: "вырсарникун_тунтикун_ытларикун_юнкун_кĕçнерникун_эрнекун_шăматкун".split("_"),
            weekdaysShort: "выр_тун_ытл_юн_кĕç_эрн_шăм".split("_"),
            weekdaysMin: "вр_тн_ыт_юн_кç_эр_шм".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD-MM-YYYY",
                LL: "YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ]",
                LLL: "YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT",
                LLLL: "dddd, YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT"
            },
            calendar: {
                sameDay: "[Паян] LT [сехетре]",
                nextDay: "[Ыран] LT [сехетре]",
                lastDay: "[Ĕнер] LT [сехетре]",
                nextWeek: "[Çитес] dddd LT [сехетре]",
                lastWeek: "[Иртнĕ] dddd LT [сехетре]",
                sameElse: "L"
            },
            relativeTime: {
                future: function (e) {
                    var t = /сехет$/i.exec(e) ? "рен" : /çул$/i.exec(e) ? "тан" : "ран";
                    return e + t
                },
                past: "%s каялла",
                s: "пĕр-ик çеккунт",
                m: "пĕр минут",
                mm: "%d минут",
                h: "пĕр сехет",
                hh: "%d сехет",
                d: "пĕр кун",
                dd: "%d кун",
                M: "пĕр уйăх",
                MM: "%d уйăх",
                y: "пĕр çул",
                yy: "%d çул"
            },
            ordinal: "%d-мĕш",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("cy", {
            months: "Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),
            monthsShort: "Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),
            weekdays: "Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),
            weekdaysShort: "Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),
            weekdaysMin: "Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Heddiw am] LT",
                nextDay: "[Yfory am] LT",
                nextWeek: "dddd [am] LT",
                lastDay: "[Ddoe am] LT",
                lastWeek: "dddd [diwethaf am] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "mewn %s",
                past: "%s yn àl",
                s: "ychydig eiliadau",
                m: "munud",
                mm: "%d munud",
                h: "awr",
                hh: "%d awr",
                d: "diwrnod",
                dd: "%d diwrnod",
                M: "mis",
                MM: "%d mis",
                y: "blwyddyn",
                yy: "%d flynedd"
            },
            ordinal: function (e) {
                var t = e, n = "",
                    i = ["", "af", "il", "ydd", "ydd", "ed", "ed", "ed", "fed", "fed", "fed", "eg", "fed", "eg", "eg", "fed", "eg", "eg", "fed", "eg", "fed"];
                return t > 20 ? n = 40 === t || 50 === t || 60 === t || 80 === t || 100 === t ? "fed" : "ain" : t > 0 && (n = i[t]), e + n
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("da", {
            months: "januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),
            monthsShort: "jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),
            weekdays: "søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),
            weekdaysShort: "søn_man_tir_ons_tor_fre_lør".split("_"),
            weekdaysMin: "sø_ma_ti_on_to_fr_lø".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D. MMMM, YYYY LT"
            },
            calendar: {
                sameDay: "[I dag kl.] LT",
                nextDay: "[I morgen kl.] LT",
                nextWeek: "dddd [kl.] LT",
                lastDay: "[I går kl.] LT",
                lastWeek: "[sidste] dddd [kl] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "om %s",
                past: "%s siden",
                s: "få sekunder",
                m: "et minut",
                mm: "%d minutter",
                h: "en time",
                hh: "%d timer",
                d: "en dag",
                dd: "%d dage",
                M: "en måned",
                MM: "%d måneder",
                y: "et år",
                yy: "%d år"
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n) {
            var i = {
                m: ["eine Minute", "einer Minute"],
                h: ["eine Stunde", "einer Stunde"],
                d: ["ein Tag", "einem Tag"],
                dd: [e + " Tage", e + " Tagen"],
                M: ["ein Monat", "einem Monat"],
                MM: [e + " Monate", e + " Monaten"],
                y: ["ein Jahr", "einem Jahr"],
                yy: [e + " Jahre", e + " Jahren"]
            };
            return t ? i[n][0] : i[n][1]
        }

        return e.lang("de", {
            months: "Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),
            monthsShort: "Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),
            weekdays: "Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),
            weekdaysShort: "So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),
            weekdaysMin: "So_Mo_Di_Mi_Do_Fr_Sa".split("_"),
            longDateFormat: {
                LT: "H:mm [Uhr]",
                L: "DD.MM.YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd, D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Heute um] LT",
                sameElse: "L",
                nextDay: "[Morgen um] LT",
                nextWeek: "dddd [um] LT",
                lastDay: "[Gestern um] LT",
                lastWeek: "[letzten] dddd [um] LT"
            },
            relativeTime: {
                future: "in %s",
                past: "vor %s",
                s: "ein paar Sekunden",
                m: t,
                mm: "%d Minuten",
                h: t,
                hh: "%d Stunden",
                d: t,
                dd: t,
                M: t,
                MM: t,
                y: t,
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("el", {
            monthsNominativeEl: "Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),
            monthsGenitiveEl: "Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),
            months: function (e, t) {
                return /D/.test(t.substring(0, t.indexOf("MMMM"))) ? this._monthsGenitiveEl[e.month()] : this._monthsNominativeEl[e.month()]
            },
            monthsShort: "Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),
            weekdays: "Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),
            weekdaysShort: "Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),
            weekdaysMin: "Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),
            meridiem: function (e, t, n) {
                return e > 11 ? n ? "μμ" : "ΜΜ" : n ? "πμ" : "ΠΜ"
            },
            longDateFormat: {
                LT: "h:mm A",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendarEl: {
                sameDay: "[Σήμερα {}] LT",
                nextDay: "[Αύριο {}] LT",
                nextWeek: "dddd [{}] LT",
                lastDay: "[Χθες {}] LT",
                lastWeek: "[την προηγούμενη] dddd [{}] LT",
                sameElse: "L"
            },
            calendar: function (e, t) {
                var n = this._calendarEl[e], i = t && t.hours();
                return n.replace("{}", i % 12 === 1 ? "στη" : "στις")
            },
            relativeTime: {
                future: "σε %s",
                past: "%s πριν",
                s: "δευτερόλεπτα",
                m: "ένα λεπτό",
                mm: "%d λεπτά",
                h: "μία ώρα",
                hh: "%d ώρες",
                d: "μία μέρα",
                dd: "%d μέρες",
                M: "ένας μήνας",
                MM: "%d μήνες",
                y: "ένας χρόνος",
                yy: "%d χρόνια"
            },
            ordinal: function (e) {
                return e + "η"
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("en-au", {
            months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
            monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
            weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
            weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
            weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
            longDateFormat: {
                LT: "h:mm A",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Today at] LT",
                nextDay: "[Tomorrow at] LT",
                nextWeek: "dddd [at] LT",
                lastDay: "[Yesterday at] LT",
                lastWeek: "[Last] dddd [at] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "in %s",
                past: "%s ago",
                s: "a few seconds",
                m: "a minute",
                mm: "%d minutes",
                h: "an hour",
                hh: "%d hours",
                d: "a day",
                dd: "%d days",
                M: "a month",
                MM: "%d months",
                y: "a year",
                yy: "%d years"
            },
            ordinal: function (e) {
                var t = e % 10,
                    n = 1 === ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th";
                return e + n
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("en-ca", {
            months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
            monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
            weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
            weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
            weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
            longDateFormat: {
                LT: "h:mm A",
                L: "YYYY-MM-DD",
                LL: "D MMMM, YYYY",
                LLL: "D MMMM, YYYY LT",
                LLLL: "dddd, D MMMM, YYYY LT"
            },
            calendar: {
                sameDay: "[Today at] LT",
                nextDay: "[Tomorrow at] LT",
                nextWeek: "dddd [at] LT",
                lastDay: "[Yesterday at] LT",
                lastWeek: "[Last] dddd [at] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "in %s",
                past: "%s ago",
                s: "a few seconds",
                m: "a minute",
                mm: "%d minutes",
                h: "an hour",
                hh: "%d hours",
                d: "a day",
                dd: "%d days",
                M: "a month",
                MM: "%d months",
                y: "a year",
                yy: "%d years"
            },
            ordinal: function (e) {
                var t = e % 10,
                    n = 1 === ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th";
                return e + n
            }
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("en-gb", {
            months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
            monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
            weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
            weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
            weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Today at] LT",
                nextDay: "[Tomorrow at] LT",
                nextWeek: "dddd [at] LT",
                lastDay: "[Yesterday at] LT",
                lastWeek: "[Last] dddd [at] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "in %s",
                past: "%s ago",
                s: "a few seconds",
                m: "a minute",
                mm: "%d minutes",
                h: "an hour",
                hh: "%d hours",
                d: "a day",
                dd: "%d days",
                M: "a month",
                MM: "%d months",
                y: "a year",
                yy: "%d years"
            },
            ordinal: function (e) {
                var t = e % 10,
                    n = 1 === ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th";
                return e + n
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("eo", {
            months: "januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),
            monthsShort: "jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),
            weekdays: "Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),
            weekdaysShort: "Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),
            weekdaysMin: "Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "YYYY-MM-DD",
                LL: "D[-an de] MMMM, YYYY",
                LLL: "D[-an de] MMMM, YYYY LT",
                LLLL: "dddd, [la] D[-an de] MMMM, YYYY LT"
            },
            meridiem: function (e, t, n) {
                return e > 11 ? n ? "p.t.m." : "P.T.M." : n ? "a.t.m." : "A.T.M."
            },
            calendar: {
                sameDay: "[Hodiaŭ je] LT",
                nextDay: "[Morgaŭ je] LT",
                nextWeek: "dddd [je] LT",
                lastDay: "[Hieraŭ je] LT",
                lastWeek: "[pasinta] dddd [je] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "je %s",
                past: "antaŭ %s",
                s: "sekundoj",
                m: "minuto",
                mm: "%d minutoj",
                h: "horo",
                hh: "%d horoj",
                d: "tago",
                dd: "%d tagoj",
                M: "monato",
                MM: "%d monatoj",
                y: "jaro",
                yy: "%d jaroj"
            },
            ordinal: "%da",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("es", {
            months: "enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),
            monthsShort: "ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),
            weekdays: "domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),
            weekdaysShort: "dom._lun._mar._mié._jue._vie._sáb.".split("_"),
            weekdaysMin: "Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD/MM/YYYY",
                LL: "D [de] MMMM [de] YYYY",
                LLL: "D [de] MMMM [de] YYYY LT",
                LLLL: "dddd, D [de] MMMM [de] YYYY LT"
            },
            calendar: {
                sameDay: function () {
                    return "[hoy a la" + (1 !== this.hours() ? "s" : "") + "] LT"
                }, nextDay: function () {
                    return "[mañana a la" + (1 !== this.hours() ? "s" : "") + "] LT"
                }, nextWeek: function () {
                    return "dddd [a la" + (1 !== this.hours() ? "s" : "") + "] LT"
                }, lastDay: function () {
                    return "[ayer a la" + (1 !== this.hours() ? "s" : "") + "] LT"
                }, lastWeek: function () {
                    return "[el] dddd [pasado a la" + (1 !== this.hours() ? "s" : "") + "] LT"
                }, sameElse: "L"
            },
            relativeTime: {
                future: "en %s",
                past: "hace %s",
                s: "unos segundos",
                m: "un minuto",
                mm: "%d minutos",
                h: "una hora",
                hh: "%d horas",
                d: "un día",
                dd: "%d días",
                M: "un mes",
                MM: "%d meses",
                y: "un año",
                yy: "%d años"
            },
            ordinal: "%dº",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n, i) {
            var a = {
                s: ["mõne sekundi", "mõni sekund", "paar sekundit"],
                m: ["ühe minuti", "üks minut"],
                mm: [e + " minuti", e + " minutit"],
                h: ["ühe tunni", "tund aega", "üks tund"],
                hh: [e + " tunni", e + " tundi"],
                d: ["ühe päeva", "üks päev"],
                M: ["kuu aja", "kuu aega", "üks kuu"],
                MM: [e + " kuu", e + " kuud"],
                y: ["ühe aasta", "aasta", "üks aasta"],
                yy: [e + " aasta", e + " aastat"]
            };
            return t ? a[n][2] ? a[n][2] : a[n][1] : i ? a[n][0] : a[n][1]
        }

        return e.lang("et", {
            months: "jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),
            monthsShort: "jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),
            weekdays: "pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),
            weekdaysShort: "P_E_T_K_N_R_L".split("_"),
            weekdaysMin: "P_E_T_K_N_R_L".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD.MM.YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd, D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Täna,] LT",
                nextDay: "[Homme,] LT",
                nextWeek: "[Järgmine] dddd LT",
                lastDay: "[Eile,] LT",
                lastWeek: "[Eelmine] dddd LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s pärast",
                past: "%s tagasi",
                s: t,
                m: t,
                mm: t,
                h: t,
                hh: t,
                d: t,
                dd: "%d päeva",
                M: t,
                MM: t,
                y: t,
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("eu", {
            months: "urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),
            monthsShort: "urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),
            weekdays: "igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),
            weekdaysShort: "ig._al._ar._az._og._ol._lr.".split("_"),
            weekdaysMin: "ig_al_ar_az_og_ol_lr".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "YYYY-MM-DD",
                LL: "YYYY[ko] MMMM[ren] D[a]",
                LLL: "YYYY[ko] MMMM[ren] D[a] LT",
                LLLL: "dddd, YYYY[ko] MMMM[ren] D[a] LT",
                l: "YYYY-M-D",
                ll: "YYYY[ko] MMM D[a]",
                lll: "YYYY[ko] MMM D[a] LT",
                llll: "ddd, YYYY[ko] MMM D[a] LT"
            },
            calendar: {
                sameDay: "[gaur] LT[etan]",
                nextDay: "[bihar] LT[etan]",
                nextWeek: "dddd LT[etan]",
                lastDay: "[atzo] LT[etan]",
                lastWeek: "[aurreko] dddd LT[etan]",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s barru",
                past: "duela %s",
                s: "segundo batzuk",
                m: "minutu bat",
                mm: "%d minutu",
                h: "ordu bat",
                hh: "%d ordu",
                d: "egun bat",
                dd: "%d egun",
                M: "hilabete bat",
                MM: "%d hilabete",
                y: "urte bat",
                yy: "%d urte"
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        var t = {1: "۱", 2: "۲", 3: "۳", 4: "۴", 5: "۵", 6: "۶", 7: "۷", 8: "۸", 9: "۹", 0: "۰"},
            n = {"۱": "1", "۲": "2", "۳": "3", "۴": "4", "۵": "5", "۶": "6", "۷": "7", "۸": "8", "۹": "9", "۰": "0"};
        return e.lang("fa", {
            months: "ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),
            monthsShort: "ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),
            weekdays: "یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),
            weekdaysShort: "یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),
            weekdaysMin: "ی_د_س_چ_پ_ج_ش".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            meridiem: function (e) {
                return 12 > e ? "قبل از ظهر" : "بعد از ظهر"
            },
            calendar: {
                sameDay: "[امروز ساعت] LT",
                nextDay: "[فردا ساعت] LT",
                nextWeek: "dddd [ساعت] LT",
                lastDay: "[دیروز ساعت] LT",
                lastWeek: "dddd [پیش] [ساعت] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "در %s",
                past: "%s پیش",
                s: "چندین ثانیه",
                m: "یک دقیقه",
                mm: "%d دقیقه",
                h: "یک ساعت",
                hh: "%d ساعت",
                d: "یک روز",
                dd: "%d روز",
                M: "یک ماه",
                MM: "%d ماه",
                y: "یک سال",
                yy: "%d سال"
            },
            preparse: function (e) {
                return e.replace(/[۰-۹]/g, function (e) {
                    return n[e]
                }).replace(/،/g, ",")
            },
            postformat: function (e) {
                return e.replace(/\d/g, function (e) {
                    return t[e]
                }).replace(/,/g, "،")
            },
            ordinal: "%dم",
            week: {dow: 6, doy: 12}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, i, a) {
            var r = "";
            switch (i) {
                case"s":
                    return a ? "muutaman sekunnin" : "muutama sekunti";
                case"m":
                    return a ? "minuutin" : "minuutti";
                case"mm":
                    r = a ? "minuutin" : "minuuttia";
                    break;
                case"h":
                    return a ? "tunnin" : "tunti";
                case"hh":
                    r = a ? "tunnin" : "tuntia";
                    break;
                case"d":
                    return a ? "päivän" : "päivä";
                case"dd":
                    r = a ? "päivän" : "päivää";
                    break;
                case"M":
                    return a ? "kuukauden" : "kuukausi";
                case"MM":
                    r = a ? "kuukauden" : "kuukautta";
                    break;
                case"y":
                    return a ? "vuoden" : "vuosi";
                case"yy":
                    r = a ? "vuoden" : "vuotta"
            }
            return r = n(e, a) + " " + r
        }

        function n(e, t) {
            return 10 > e ? t ? a[e] : i[e] : e
        }

        var i = "nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),
            a = ["nolla", "yhden", "kahden", "kolmen", "neljän", "viiden", "kuuden", i[7], i[8], i[9]];
        return e.lang("fi", {
            months: "tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),
            monthsShort: "tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),
            weekdays: "sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),
            weekdaysShort: "su_ma_ti_ke_to_pe_la".split("_"),
            weekdaysMin: "su_ma_ti_ke_to_pe_la".split("_"),
            longDateFormat: {
                LT: "HH.mm",
                L: "DD.MM.YYYY",
                LL: "Do MMMM[ta] YYYY",
                LLL: "Do MMMM[ta] YYYY, [klo] LT",
                LLLL: "dddd, Do MMMM[ta] YYYY, [klo] LT",
                l: "D.M.YYYY",
                ll: "Do MMM YYYY",
                lll: "Do MMM YYYY, [klo] LT",
                llll: "ddd, Do MMM YYYY, [klo] LT"
            },
            calendar: {
                sameDay: "[tänään] [klo] LT",
                nextDay: "[huomenna] [klo] LT",
                nextWeek: "dddd [klo] LT",
                lastDay: "[eilen] [klo] LT",
                lastWeek: "[viime] dddd[na] [klo] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s päästä",
                past: "%s sitten",
                s: t,
                m: t,
                mm: t,
                h: t,
                hh: t,
                d: t,
                dd: t,
                M: t,
                MM: t,
                y: t,
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("fo", {
            months: "januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),
            monthsShort: "jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),
            weekdays: "sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),
            weekdaysShort: "sun_mán_týs_mik_hós_frí_ley".split("_"),
            weekdaysMin: "su_má_tý_mi_hó_fr_le".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D. MMMM, YYYY LT"
            },
            calendar: {
                sameDay: "[Í dag kl.] LT",
                nextDay: "[Í morgin kl.] LT",
                nextWeek: "dddd [kl.] LT",
                lastDay: "[Í gjár kl.] LT",
                lastWeek: "[síðstu] dddd [kl] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "um %s",
                past: "%s síðani",
                s: "fá sekund",
                m: "ein minutt",
                mm: "%d minuttir",
                h: "ein tími",
                hh: "%d tímar",
                d: "ein dagur",
                dd: "%d dagar",
                M: "ein mánaði",
                MM: "%d mánaðir",
                y: "eitt ár",
                yy: "%d ár"
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("fr-ca", {
            months: "janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),
            monthsShort: "janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),
            weekdays: "dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),
            weekdaysShort: "dim._lun._mar._mer._jeu._ven._sam.".split("_"),
            weekdaysMin: "Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "YYYY-MM-DD",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Aujourd'hui à] LT",
                nextDay: "[Demain à] LT",
                nextWeek: "dddd [à] LT",
                lastDay: "[Hier à] LT",
                lastWeek: "dddd [dernier à] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "dans %s",
                past: "il y a %s",
                s: "quelques secondes",
                m: "une minute",
                mm: "%d minutes",
                h: "une heure",
                hh: "%d heures",
                d: "un jour",
                dd: "%d jours",
                M: "un mois",
                MM: "%d mois",
                y: "un an",
                yy: "%d ans"
            },
            ordinal: function (e) {
                return e + (1 === e ? "er" : "")
            }
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("fr", {
            months: "janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),
            monthsShort: "janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),
            weekdays: "dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),
            weekdaysShort: "dim._lun._mar._mer._jeu._ven._sam.".split("_"),
            weekdaysMin: "Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Aujourd'hui à] LT",
                nextDay: "[Demain à] LT",
                nextWeek: "dddd [à] LT",
                lastDay: "[Hier à] LT",
                lastWeek: "dddd [dernier à] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "dans %s",
                past: "il y a %s",
                s: "quelques secondes",
                m: "une minute",
                mm: "%d minutes",
                h: "une heure",
                hh: "%d heures",
                d: "un jour",
                dd: "%d jours",
                M: "un mois",
                MM: "%d mois",
                y: "un an",
                yy: "%d ans"
            },
            ordinal: function (e) {
                return e + (1 === e ? "er" : "")
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("gl", {
            months: "Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),
            monthsShort: "Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),
            weekdays: "Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),
            weekdaysShort: "Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),
            weekdaysMin: "Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: function () {
                    return "[hoxe " + (1 !== this.hours() ? "ás" : "á") + "] LT"
                }, nextDay: function () {
                    return "[mañá " + (1 !== this.hours() ? "ás" : "á") + "] LT"
                }, nextWeek: function () {
                    return "dddd [" + (1 !== this.hours() ? "ás" : "a") + "] LT"
                }, lastDay: function () {
                    return "[onte " + (1 !== this.hours() ? "á" : "a") + "] LT"
                }, lastWeek: function () {
                    return "[o] dddd [pasado " + (1 !== this.hours() ? "ás" : "a") + "] LT"
                }, sameElse: "L"
            },
            relativeTime: {
                future: function (e) {
                    return "uns segundos" === e ? "nuns segundos" : "en " + e
                },
                past: "hai %s",
                s: "uns segundos",
                m: "un minuto",
                mm: "%d minutos",
                h: "unha hora",
                hh: "%d horas",
                d: "un día",
                dd: "%d días",
                M: "un mes",
                MM: "%d meses",
                y: "un ano",
                yy: "%d anos"
            },
            ordinal: "%dº",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("he", {
            months: "ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),
            monthsShort: "ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),
            weekdays: "ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),
            weekdaysShort: "א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),
            weekdaysMin: "א_ב_ג_ד_ה_ו_ש".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D [ב]MMMM YYYY",
                LLL: "D [ב]MMMM YYYY LT",
                LLLL: "dddd, D [ב]MMMM YYYY LT",
                l: "D/M/YYYY",
                ll: "D MMM YYYY",
                lll: "D MMM YYYY LT",
                llll: "ddd, D MMM YYYY LT"
            },
            calendar: {
                sameDay: "[היום ב־]LT",
                nextDay: "[מחר ב־]LT",
                nextWeek: "dddd [בשעה] LT",
                lastDay: "[אתמול ב־]LT",
                lastWeek: "[ביום] dddd [האחרון בשעה] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "בעוד %s",
                past: "לפני %s",
                s: "מספר שניות",
                m: "דקה",
                mm: "%d דקות",
                h: "שעה",
                hh: function (e) {
                    return 2 === e ? "שעתיים" : e + " שעות"
                },
                d: "יום",
                dd: function (e) {
                    return 2 === e ? "יומיים" : e + " ימים"
                },
                M: "חודש",
                MM: function (e) {
                    return 2 === e ? "חודשיים" : e + " חודשים"
                },
                y: "שנה",
                yy: function (e) {
                    return 2 === e ? "שנתיים" : e + " שנים"
                }
            }
        })
    }), function (e) {
        e(it)
    }(function (e) {
        var t = {1: "१", 2: "२", 3: "३", 4: "४", 5: "५", 6: "६", 7: "७", 8: "८", 9: "९", 0: "०"},
            n = {"१": "1", "२": "2", "३": "3", "४": "4", "५": "5", "६": "6", "७": "7", "८": "8", "९": "9", "०": "0"};
        return e.lang("hi", {
            months: "जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),
            monthsShort: "जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),
            weekdays: "रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),
            weekdaysShort: "रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),
            weekdaysMin: "र_सो_मं_बु_गु_शु_श".split("_"),
            longDateFormat: {
                LT: "A h:mm बजे",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY, LT",
                LLLL: "dddd, D MMMM YYYY, LT"
            },
            calendar: {
                sameDay: "[आज] LT",
                nextDay: "[कल] LT",
                nextWeek: "dddd, LT",
                lastDay: "[कल] LT",
                lastWeek: "[पिछले] dddd, LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s में",
                past: "%s पहले",
                s: "कुछ ही क्षण",
                m: "एक मिनट",
                mm: "%d मिनट",
                h: "एक घंटा",
                hh: "%d घंटे",
                d: "एक दिन",
                dd: "%d दिन",
                M: "एक महीने",
                MM: "%d महीने",
                y: "एक वर्ष",
                yy: "%d वर्ष"
            },
            preparse: function (e) {
                return e.replace(/[१२३४५६७८९०]/g, function (e) {
                    return n[e]
                })
            },
            postformat: function (e) {
                return e.replace(/\d/g, function (e) {
                    return t[e]
                })
            },
            meridiem: function (e) {
                return 4 > e ? "रात" : 10 > e ? "सुबह" : 17 > e ? "दोपहर" : 20 > e ? "शाम" : "रात"
            },
            week: {dow: 0, doy: 6}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n) {
            var i = e + " ";
            switch (n) {
                case"m":
                    return t ? "jedna minuta" : "jedne minute";
                case"mm":
                    return i += 1 === e ? "minuta" : 2 === e || 3 === e || 4 === e ? "minute" : "minuta";
                case"h":
                    return t ? "jedan sat" : "jednog sata";
                case"hh":
                    return i += 1 === e ? "sat" : 2 === e || 3 === e || 4 === e ? "sata" : "sati";
                case"dd":
                    return i += 1 === e ? "dan" : "dana";
                case"MM":
                    return i += 1 === e ? "mjesec" : 2 === e || 3 === e || 4 === e ? "mjeseca" : "mjeseci";
                case"yy":
                    return i += 1 === e ? "godina" : 2 === e || 3 === e || 4 === e ? "godine" : "godina"
            }
        }

        return e.lang("hr", {
            months: "sječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),
            monthsShort: "sje._vel._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),
            weekdays: "nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),
            weekdaysShort: "ned._pon._uto._sri._čet._pet._sub.".split("_"),
            weekdaysMin: "ne_po_ut_sr_če_pe_su".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD. MM. YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd, D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[danas u] LT", nextDay: "[sutra u] LT", nextWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[u] [nedjelju] [u] LT";
                        case 3:
                            return "[u] [srijedu] [u] LT";
                        case 6:
                            return "[u] [subotu] [u] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[u] dddd [u] LT"
                    }
                }, lastDay: "[jučer u] LT", lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                        case 3:
                            return "[prošlu] dddd [u] LT";
                        case 6:
                            return "[prošle] [subote] [u] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[prošli] dddd [u] LT"
                    }
                }, sameElse: "L"
            },
            relativeTime: {
                future: "za %s",
                past: "prije %s",
                s: "par sekundi",
                m: t,
                mm: t,
                h: t,
                hh: t,
                d: "dan",
                dd: t,
                M: "mjesec",
                MM: t,
                y: "godinu",
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n, i) {
            var a = e;
            switch (n) {
                case"s":
                    return i || t ? "néhány másodperc" : "néhány másodperce";
                case"m":
                    return "egy" + (i || t ? " perc" : " perce");
                case"mm":
                    return a + (i || t ? " perc" : " perce");
                case"h":
                    return "egy" + (i || t ? " óra" : " órája");
                case"hh":
                    return a + (i || t ? " óra" : " órája");
                case"d":
                    return "egy" + (i || t ? " nap" : " napja");
                case"dd":
                    return a + (i || t ? " nap" : " napja");
                case"M":
                    return "egy" + (i || t ? " hónap" : " hónapja");
                case"MM":
                    return a + (i || t ? " hónap" : " hónapja");
                case"y":
                    return "egy" + (i || t ? " év" : " éve");
                case"yy":
                    return a + (i || t ? " év" : " éve")
            }
            return ""
        }

        function n(e) {
            return (e ? "" : "[múlt] ") + "[" + i[this.day()] + "] LT[-kor]"
        }

        var i = "vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");
        return e.lang("hu", {
            months: "január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),
            monthsShort: "jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),
            weekdays: "vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),
            weekdaysShort: "vas_hét_kedd_sze_csüt_pén_szo".split("_"),
            weekdaysMin: "v_h_k_sze_cs_p_szo".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "YYYY.MM.DD.",
                LL: "YYYY. MMMM D.",
                LLL: "YYYY. MMMM D., LT",
                LLLL: "YYYY. MMMM D., dddd LT"
            },
            calendar: {
                sameDay: "[ma] LT[-kor]", nextDay: "[holnap] LT[-kor]", nextWeek: function () {
                    return n.call(this, !0)
                }, lastDay: "[tegnap] LT[-kor]", lastWeek: function () {
                    return n.call(this, !1)
                }, sameElse: "L"
            },
            relativeTime: {
                future: "%s múlva",
                past: "%s",
                s: t,
                m: t,
                mm: t,
                h: t,
                hh: t,
                d: t,
                dd: t,
                M: t,
                MM: t,
                y: t,
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t) {
            var n = {
                nominative: "հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),
                accusative: "հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")
            }, i = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t) ? "accusative" : "nominative";
            return n[i][e.month()]
        }

        function n(e) {
            var t = "հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_");
            return t[e.month()]
        }

        function i(e) {
            var t = "կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_");
            return t[e.day()]
        }

        return e.lang("hy-am", {
            months: t,
            monthsShort: n,
            weekdays: i,
            weekdaysShort: "կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),
            weekdaysMin: "կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD.MM.YYYY",
                LL: "D MMMM YYYY թ.",
                LLL: "D MMMM YYYY թ., LT",
                LLLL: "dddd, D MMMM YYYY թ., LT"
            },
            calendar: {
                sameDay: "[այսօր] LT", nextDay: "[վաղը] LT", lastDay: "[երեկ] LT", nextWeek: function () {
                    return "dddd [օրը ժամը] LT"
                }, lastWeek: function () {
                    return "[անցած] dddd [օրը ժամը] LT"
                }, sameElse: "L"
            },
            relativeTime: {
                future: "%s հետո",
                past: "%s առաջ",
                s: "մի քանի վայրկյան",
                m: "րոպե",
                mm: "%d րոպե",
                h: "ժամ",
                hh: "%d ժամ",
                d: "օր",
                dd: "%d օր",
                M: "ամիս",
                MM: "%d ամիս",
                y: "տարի",
                yy: "%d տարի"
            },
            meridiem: function (e) {
                return 4 > e ? "գիշերվա" : 12 > e ? "առավոտվա" : 17 > e ? "ցերեկվա" : "երեկոյան"
            },
            ordinal: function (e, t) {
                switch (t) {
                    case"DDD":
                    case"w":
                    case"W":
                    case"DDDo":
                        return 1 === e ? e + "-ին" : e + "-րդ";
                    default:
                        return e
                }
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("id", {
            months: "Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),
            monthsShort: "Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),
            weekdays: "Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),
            weekdaysShort: "Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),
            weekdaysMin: "Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),
            longDateFormat: {
                LT: "HH.mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY [pukul] LT",
                LLLL: "dddd, D MMMM YYYY [pukul] LT"
            },
            meridiem: function (e) {
                return 11 > e ? "pagi" : 15 > e ? "siang" : 19 > e ? "sore" : "malam"
            },
            calendar: {
                sameDay: "[Hari ini pukul] LT",
                nextDay: "[Besok pukul] LT",
                nextWeek: "dddd [pukul] LT",
                lastDay: "[Kemarin pukul] LT",
                lastWeek: "dddd [lalu pukul] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "dalam %s",
                past: "%s yang lalu",
                s: "beberapa detik",
                m: "semenit",
                mm: "%d menit",
                h: "sejam",
                hh: "%d jam",
                d: "sehari",
                dd: "%d hari",
                M: "sebulan",
                MM: "%d bulan",
                y: "setahun",
                yy: "%d tahun"
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e) {
            return e % 100 === 11 ? !0 : e % 10 === 1 ? !1 : !0
        }

        function n(e, n, i, a) {
            var r = e + " ";
            switch (i) {
                case"s":
                    return n || a ? "nokkrar sekúndur" : "nokkrum sekúndum";
                case"m":
                    return n ? "mínúta" : "mínútu";
                case"mm":
                    return t(e) ? r + (n || a ? "mínútur" : "mínútum") : n ? r + "mínúta" : r + "mínútu";
                case"hh":
                    return t(e) ? r + (n || a ? "klukkustundir" : "klukkustundum") : r + "klukkustund";
                case"d":
                    return n ? "dagur" : a ? "dag" : "degi";
                case"dd":
                    return t(e) ? n ? r + "dagar" : r + (a ? "daga" : "dögum") : n ? r + "dagur" : r + (a ? "dag" : "degi");
                case"M":
                    return n ? "mánuður" : a ? "mánuð" : "mánuði";
                case"MM":
                    return t(e) ? n ? r + "mánuðir" : r + (a ? "mánuði" : "mánuðum") : n ? r + "mánuður" : r + (a ? "mánuð" : "mánuði");
                case"y":
                    return n || a ? "ár" : "ári";
                case"yy":
                    return t(e) ? r + (n || a ? "ár" : "árum") : r + (n || a ? "ár" : "ári")
            }
        }

        return e.lang("is", {
            months: "janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),
            monthsShort: "jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),
            weekdays: "sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),
            weekdaysShort: "sun_mán_þri_mið_fim_fös_lau".split("_"),
            weekdaysMin: "Su_Má_Þr_Mi_Fi_Fö_La".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD/MM/YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY [kl.] LT",
                LLLL: "dddd, D. MMMM YYYY [kl.] LT"
            },
            calendar: {
                sameDay: "[í dag kl.] LT",
                nextDay: "[á morgun kl.] LT",
                nextWeek: "dddd [kl.] LT",
                lastDay: "[í gær kl.] LT",
                lastWeek: "[síðasta] dddd [kl.] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "eftir %s",
                past: "fyrir %s síðan",
                s: n,
                m: n,
                mm: n,
                h: "klukkustund",
                hh: n,
                d: n,
                dd: n,
                M: n,
                MM: n,
                y: n,
                yy: n
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("it", {
            months: "Gennaio_Febbraio_Marzo_Aprile_Maggio_Giugno_Luglio_Agosto_Settembre_Ottobre_Novembre_Dicembre".split("_"),
            monthsShort: "Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),
            weekdays: "Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),
            weekdaysShort: "Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),
            weekdaysMin: "D_L_Ma_Me_G_V_S".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Oggi alle] LT",
                nextDay: "[Domani alle] LT",
                nextWeek: "dddd [alle] LT",
                lastDay: "[Ieri alle] LT",
                lastWeek: "[lo scorso] dddd [alle] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: function (e) {
                    return (/^[0-9].+$/.test(e) ? "tra" : "in") + " " + e
                },
                past: "%s fa",
                s: "alcuni secondi",
                m: "un minuto",
                mm: "%d minuti",
                h: "un'ora",
                hh: "%d ore",
                d: "un giorno",
                dd: "%d giorni",
                M: "un mese",
                MM: "%d mesi",
                y: "un anno",
                yy: "%d anni"
            },
            ordinal: "%dº",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("ja", {
            months: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),
            monthsShort: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),
            weekdays: "日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),
            weekdaysShort: "日_月_火_水_木_金_土".split("_"),
            weekdaysMin: "日_月_火_水_木_金_土".split("_"),
            longDateFormat: {
                LT: "Ah時m分",
                L: "YYYY/MM/DD",
                LL: "YYYY年M月D日",
                LLL: "YYYY年M月D日LT",
                LLLL: "YYYY年M月D日LT dddd"
            },
            meridiem: function (e) {
                return 12 > e ? "午前" : "午後"
            },
            calendar: {
                sameDay: "[今日] LT",
                nextDay: "[明日] LT",
                nextWeek: "[来週]dddd LT",
                lastDay: "[昨日] LT",
                lastWeek: "[前週]dddd LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s後",
                past: "%s前",
                s: "数秒",
                m: "1分",
                mm: "%d分",
                h: "1時間",
                hh: "%d時間",
                d: "1日",
                dd: "%d日",
                M: "1ヶ月",
                MM: "%dヶ月",
                y: "1年",
                yy: "%d年"
            }
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t) {
            var n = {
                nominative: "იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),
                accusative: "იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")
            }, i = /D[oD] *MMMM?/.test(t) ? "accusative" : "nominative";
            return n[i][e.month()]
        }

        function n(e, t) {
            var n = {
                nominative: "კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),
                accusative: "კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")
            }, i = /(წინა|შემდეგ)/.test(t) ? "accusative" : "nominative";
            return n[i][e.day()]
        }

        return e.lang("ka", {
            months: t,
            monthsShort: "იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),
            weekdays: n,
            weekdaysShort: "კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),
            weekdaysMin: "კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),
            longDateFormat: {
                LT: "h:mm A",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[დღეს] LT[-ზე]",
                nextDay: "[ხვალ] LT[-ზე]",
                lastDay: "[გუშინ] LT[-ზე]",
                nextWeek: "[შემდეგ] dddd LT[-ზე]",
                lastWeek: "[წინა] dddd LT-ზე",
                sameElse: "L"
            },
            relativeTime: {
                future: function (e) {
                    return /(წამი|წუთი|საათი|წელი)/.test(e) ? e.replace(/ი$/, "ში") : e + "ში"
                },
                past: function (e) {
                    return /(წამი|წუთი|საათი|დღე|თვე)/.test(e) ? e.replace(/(ი|ე)$/, "ის წინ") : /წელი/.test(e) ? e.replace(/წელი$/, "წლის წინ") : void 0
                },
                s: "რამდენიმე წამი",
                m: "წუთი",
                mm: "%d წუთი",
                h: "საათი",
                hh: "%d საათი",
                d: "დღე",
                dd: "%d დღე",
                M: "თვე",
                MM: "%d თვე",
                y: "წელი",
                yy: "%d წელი"
            },
            ordinal: function (e) {
                return 0 === e ? e : 1 === e ? e + "-ლი" : 20 > e || 100 >= e && e % 20 === 0 || e % 100 === 0 ? "მე-" + e : e + "-ე"
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("ko", {
            months: "1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),
            monthsShort: "1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),
            weekdays: "일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),
            weekdaysShort: "일_월_화_수_목_금_토".split("_"),
            weekdaysMin: "일_월_화_수_목_금_토".split("_"),
            longDateFormat: {
                LT: "A h시 mm분",
                L: "YYYY.MM.DD",
                LL: "YYYY년 MMMM D일",
                LLL: "YYYY년 MMMM D일 LT",
                LLLL: "YYYY년 MMMM D일 dddd LT"
            },
            meridiem: function (e) {
                return 12 > e ? "오전" : "오후"
            },
            calendar: {
                sameDay: "오늘 LT",
                nextDay: "내일 LT",
                nextWeek: "dddd LT",
                lastDay: "어제 LT",
                lastWeek: "지난주 dddd LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s 후",
                past: "%s 전",
                s: "몇초",
                ss: "%d초",
                m: "일분",
                mm: "%d분",
                h: "한시간",
                hh: "%d시간",
                d: "하루",
                dd: "%d일",
                M: "한달",
                MM: "%d달",
                y: "일년",
                yy: "%d년"
            },
            ordinal: "%d일",
            meridiemParse: /(오전|오후)/,
            isPM: function (e) {
                return "오후" === e
            }
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n) {
            var i = {
                m: ["eng Minutt", "enger Minutt"],
                h: ["eng Stonn", "enger Stonn"],
                d: ["een Dag", "engem Dag"],
                dd: [e + " Deeg", e + " Deeg"],
                M: ["ee Mount", "engem Mount"],
                MM: [e + " Méint", e + " Méint"],
                y: ["ee Joer", "engem Joer"],
                yy: [e + " Joer", e + " Joer"]
            };
            return t ? i[n][0] : i[n][1]
        }

        function n(e) {
            var t = e.substr(0, e.indexOf(" "));
            return s(t) ? "a " + e : "an " + e
        }

        function i(e) {
            var t = e.substr(0, e.indexOf(" "));
            return s(t) ? "viru " + e : "virun " + e
        }

        function a() {
            var e = this.format("d");
            return r(e) ? "[Leschte] dddd [um] LT" : "[Leschten] dddd [um] LT"
        }

        function r(e) {
            switch (e = parseInt(e, 10)) {
                case 0:
                case 1:
                case 3:
                case 5:
                case 6:
                    return !0;
                default:
                    return !1
            }
        }

        function s(e) {
            if (e = parseInt(e, 10), isNaN(e)) return !1;
            if (0 > e) return !0;
            if (10 > e) return e >= 4 && 7 >= e ? !0 : !1;
            if (100 > e) {
                var t = e % 10, n = e / 10;
                return s(0 === t ? n : t)
            }
            if (1e4 > e) {
                for (; e >= 10;) e /= 10;
                return s(e)
            }
            return e /= 1e3, s(e)
        }

        return e.lang("lb", {
            months: "Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),
            monthsShort: "Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),
            weekdays: "Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),
            weekdaysShort: "So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),
            weekdaysMin: "So_Mé_Dë_Më_Do_Fr_Sa".split("_"),
            longDateFormat: {
                LT: "H:mm [Auer]",
                L: "DD.MM.YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd, D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Haut um] LT",
                sameElse: "L",
                nextDay: "[Muer um] LT",
                nextWeek: "dddd [um] LT",
                lastDay: "[Gëschter um] LT",
                lastWeek: a
            },
            relativeTime: {
                future: n,
                past: i,
                s: "e puer Sekonnen",
                m: t,
                mm: "%d Minutten",
                h: t,
                hh: "%d Stonnen",
                d: t,
                dd: t,
                M: t,
                MM: t,
                y: t,
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n, i) {
            return t ? "kelios sekundės" : i ? "kelių sekundžių" : "kelias sekundes"
        }

        function n(e, t, n, i) {
            return t ? a(n)[0] : i ? a(n)[1] : a(n)[2]
        }

        function i(e) {
            return e % 10 === 0 || e > 10 && 20 > e
        }

        function a(e) {
            return o[e].split("_")
        }

        function r(e, t, r, s) {
            var o = e + " ";
            return 1 === e ? o + n(e, t, r[0], s) : t ? o + (i(e) ? a(r)[1] : a(r)[0]) : s ? o + a(r)[1] : o + (i(e) ? a(r)[1] : a(r)[2])
        }

        function s(e, t) {
            var n = -1 === t.indexOf("dddd LT"), i = l[e.weekday()];
            return n ? i : i.substring(0, i.length - 2) + "į"
        }

        var o = {
            m: "minutė_minutės_minutę",
            mm: "minutės_minučių_minutes",
            h: "valanda_valandos_valandą",
            hh: "valandos_valandų_valandas",
            d: "diena_dienos_dieną",
            dd: "dienos_dienų_dienas",
            M: "mėnuo_mėnesio_mėnesį",
            MM: "mėnesiai_mėnesių_mėnesius",
            y: "metai_metų_metus",
            yy: "metai_metų_metus"
        }, l = "pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis_sekmadienis".split("_");
        return e.lang("lt", {
            months: "sausio_vasario_kovo_balandžio_gegužės_biržėlio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),
            monthsShort: "sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),
            weekdays: s,
            weekdaysShort: "Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),
            weekdaysMin: "S_P_A_T_K_Pn_Š".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "YYYY-MM-DD",
                LL: "YYYY [m.] MMMM D [d.]",
                LLL: "YYYY [m.] MMMM D [d.], LT [val.]",
                LLLL: "YYYY [m.] MMMM D [d.], dddd, LT [val.]",
                l: "YYYY-MM-DD",
                ll: "YYYY [m.] MMMM D [d.]",
                lll: "YYYY [m.] MMMM D [d.], LT [val.]",
                llll: "YYYY [m.] MMMM D [d.], ddd, LT [val.]"
            },
            calendar: {
                sameDay: "[Šiandien] LT",
                nextDay: "[Rytoj] LT",
                nextWeek: "dddd LT",
                lastDay: "[Vakar] LT",
                lastWeek: "[Praėjusį] dddd LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "po %s",
                past: "prieš %s",
                s: t,
                m: n,
                mm: r,
                h: n,
                hh: r,
                d: n,
                dd: r,
                M: n,
                MM: r,
                y: n,
                yy: r
            },
            ordinal: function (e) {
                return e + "-oji"
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n) {
            var i = e.split("_");
            return n ? t % 10 === 1 && 11 !== t ? i[2] : i[3] : t % 10 === 1 && 11 !== t ? i[0] : i[1]
        }

        function n(e, n, a) {
            return e + " " + t(i[a], e, n)
        }

        var i = {
            mm: "minūti_minūtes_minūte_minūtes",
            hh: "stundu_stundas_stunda_stundas",
            dd: "dienu_dienas_diena_dienas",
            MM: "mēnesi_mēnešus_mēnesis_mēneši",
            yy: "gadu_gadus_gads_gadi"
        };
        return e.lang("lv", {
            months: "janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),
            monthsShort: "jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),
            weekdays: "svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),
            weekdaysShort: "Sv_P_O_T_C_Pk_S".split("_"),
            weekdaysMin: "Sv_P_O_T_C_Pk_S".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD.MM.YYYY",
                LL: "YYYY. [gada] D. MMMM",
                LLL: "YYYY. [gada] D. MMMM, LT",
                LLLL: "YYYY. [gada] D. MMMM, dddd, LT"
            },
            calendar: {
                sameDay: "[Šodien pulksten] LT",
                nextDay: "[Rīt pulksten] LT",
                nextWeek: "dddd [pulksten] LT",
                lastDay: "[Vakar pulksten] LT",
                lastWeek: "[Pagājušā] dddd [pulksten] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s vēlāk",
                past: "%s agrāk",
                s: "dažas sekundes",
                m: "minūti",
                mm: n,
                h: "stundu",
                hh: n,
                d: "dienu",
                dd: n,
                M: "mēnesi",
                MM: n,
                y: "gadu",
                yy: n
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("mk", {
            months: "јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),
            monthsShort: "јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),
            weekdays: "недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),
            weekdaysShort: "нед_пон_вто_сре_чет_пет_саб".split("_"),
            weekdaysMin: "нe_пo_вт_ср_че_пе_сa".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "D.MM.YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Денес во] LT",
                nextDay: "[Утре во] LT",
                nextWeek: "dddd [во] LT",
                lastDay: "[Вчера во] LT",
                lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                        case 3:
                        case 6:
                            return "[Во изминатата] dddd [во] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[Во изминатиот] dddd [во] LT"
                    }
                },
                sameElse: "L"
            },
            relativeTime: {
                future: "после %s",
                past: "пред %s",
                s: "неколку секунди",
                m: "минута",
                mm: "%d минути",
                h: "час",
                hh: "%d часа",
                d: "ден",
                dd: "%d дена",
                M: "месец",
                MM: "%d месеци",
                y: "година",
                yy: "%d години"
            },
            ordinal: function (e) {
                var t = e % 10, n = e % 100;
                return 0 === e ? e + "-ев" : 0 === n ? e + "-ен" : n > 10 && 20 > n ? e + "-ти" : 1 === t ? e + "-ви" : 2 === t ? e + "-ри" : 7 === t || 8 === t ? e + "-ми" : e + "-ти"
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("ml", {
            months: "ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),
            monthsShort: "ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),
            weekdays: "ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),
            weekdaysShort: "ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),
            weekdaysMin: "ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),
            longDateFormat: {
                LT: "A h:mm -നു",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY, LT",
                LLLL: "dddd, D MMMM YYYY, LT"
            },
            calendar: {
                sameDay: "[ഇന്ന്] LT",
                nextDay: "[നാളെ] LT",
                nextWeek: "dddd, LT",
                lastDay: "[ഇന്നലെ] LT",
                lastWeek: "[കഴിഞ്ഞ] dddd, LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s കഴിഞ്ഞ്",
                past: "%s മുൻപ്",
                s: "അൽപ നിമിഷങ്ങൾ",
                m: "ഒരു മിനിറ്റ്",
                mm: "%d മിനിറ്റ്",
                h: "ഒരു മണിക്കൂർ",
                hh: "%d മണിക്കൂർ",
                d: "ഒരു ദിവസം",
                dd: "%d ദിവസം",
                M: "ഒരു മാസം",
                MM: "%d മാസം",
                y: "ഒരു വർഷം",
                yy: "%d വർഷം"
            },
            meridiem: function (e) {
                return 4 > e ? "രാത്രി" : 12 > e ? "രാവിലെ" : 17 > e ? "ഉച്ച കഴിഞ്ഞ്" : 20 > e ? "വൈകുന്നേരം" : "രാത്രി"
            }
        })
    }), function (e) {
        e(it)
    }(function (e) {
        var t = {1: "१", 2: "२", 3: "३", 4: "४", 5: "५", 6: "६", 7: "७", 8: "८", 9: "९", 0: "०"},
            n = {"१": "1", "२": "2", "३": "3", "४": "4", "५": "5", "६": "6", "७": "7", "८": "8", "९": "9", "०": "0"};
        return e.lang("mr", {
            months: "जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),
            monthsShort: "जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),
            weekdays: "रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),
            weekdaysShort: "रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),
            weekdaysMin: "र_सो_मं_बु_गु_शु_श".split("_"),
            longDateFormat: {
                LT: "A h:mm वाजता",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY, LT",
                LLLL: "dddd, D MMMM YYYY, LT"
            },
            calendar: {
                sameDay: "[आज] LT",
                nextDay: "[उद्या] LT",
                nextWeek: "dddd, LT",
                lastDay: "[काल] LT",
                lastWeek: "[मागील] dddd, LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s नंतर",
                past: "%s पूर्वी",
                s: "सेकंद",
                m: "एक मिनिट",
                mm: "%d मिनिटे",
                h: "एक तास",
                hh: "%d तास",
                d: "एक दिवस",
                dd: "%d दिवस",
                M: "एक महिना",
                MM: "%d महिने",
                y: "एक वर्ष",
                yy: "%d वर्षे"
            },
            preparse: function (e) {
                return e.replace(/[१२३४५६७८९०]/g, function (e) {
                    return n[e]
                })
            },
            postformat: function (e) {
                return e.replace(/\d/g, function (e) {
                    return t[e]
                })
            },
            meridiem: function (e) {
                return 4 > e ? "रात्री" : 10 > e ? "सकाळी" : 17 > e ? "दुपारी" : 20 > e ? "सायंकाळी" : "रात्री"
            },
            week: {dow: 0, doy: 6}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("ms-my", {
            months: "Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),
            monthsShort: "Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),
            weekdays: "Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),
            weekdaysShort: "Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),
            weekdaysMin: "Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),
            longDateFormat: {
                LT: "HH.mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY [pukul] LT",
                LLLL: "dddd, D MMMM YYYY [pukul] LT"
            },
            meridiem: function (e) {
                return 11 > e ? "pagi" : 15 > e ? "tengahari" : 19 > e ? "petang" : "malam"
            },
            calendar: {
                sameDay: "[Hari ini pukul] LT",
                nextDay: "[Esok pukul] LT",
                nextWeek: "dddd [pukul] LT",
                lastDay: "[Kelmarin pukul] LT",
                lastWeek: "dddd [lepas pukul] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "dalam %s",
                past: "%s yang lepas",
                s: "beberapa saat",
                m: "seminit",
                mm: "%d minit",
                h: "sejam",
                hh: "%d jam",
                d: "sehari",
                dd: "%d hari",
                M: "sebulan",
                MM: "%d bulan",
                y: "setahun",
                yy: "%d tahun"
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("nb", {
            months: "januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),
            monthsShort: "jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),
            weekdays: "søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),
            weekdaysShort: "sø._ma._ti._on._to._fr._lø.".split("_"),
            weekdaysMin: "sø_ma_ti_on_to_fr_lø".split("_"),
            longDateFormat: {
                LT: "H.mm",
                L: "DD.MM.YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY [kl.] LT",
                LLLL: "dddd D. MMMM YYYY [kl.] LT"
            },
            calendar: {
                sameDay: "[i dag kl.] LT",
                nextDay: "[i morgen kl.] LT",
                nextWeek: "dddd [kl.] LT",
                lastDay: "[i går kl.] LT",
                lastWeek: "[forrige] dddd [kl.] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "om %s",
                past: "for %s siden",
                s: "noen sekunder",
                m: "ett minutt",
                mm: "%d minutter",
                h: "en time",
                hh: "%d timer",
                d: "en dag",
                dd: "%d dager",
                M: "en måned",
                MM: "%d måneder",
                y: "ett år",
                yy: "%d år"
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        var t = {1: "१", 2: "२", 3: "३", 4: "४", 5: "५", 6: "६", 7: "७", 8: "८", 9: "९", 0: "०"},
            n = {"१": "1", "२": "2", "३": "3", "४": "4", "५": "5", "६": "6", "७": "7", "८": "8", "९": "9", "०": "0"};
        return e.lang("ne", {
            months: "जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),
            monthsShort: "जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),
            weekdays: "आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),
            weekdaysShort: "आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),
            weekdaysMin: "आइ._सो._मङ्_बु._बि._शु._श.".split("_"),
            longDateFormat: {
                LT: "Aको h:mm बजे",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY, LT",
                LLLL: "dddd, D MMMM YYYY, LT"
            },
            preparse: function (e) {
                return e.replace(/[१२३४५६७८९०]/g, function (e) {
                    return n[e]
                })
            },
            postformat: function (e) {
                return e.replace(/\d/g, function (e) {
                    return t[e]
                })
            },
            meridiem: function (e) {
                return 3 > e ? "राती" : 10 > e ? "बिहान" : 15 > e ? "दिउँसो" : 18 > e ? "बेलुका" : 20 > e ? "साँझ" : "राती"
            },
            calendar: {
                sameDay: "[आज] LT",
                nextDay: "[भोली] LT",
                nextWeek: "[आउँदो] dddd[,] LT",
                lastDay: "[हिजो] LT",
                lastWeek: "[गएको] dddd[,] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%sमा",
                past: "%s अगाडी",
                s: "केही समय",
                m: "एक मिनेट",
                mm: "%d मिनेट",
                h: "एक घण्टा",
                hh: "%d घण्टा",
                d: "एक दिन",
                dd: "%d दिन",
                M: "एक महिना",
                MM: "%d महिना",
                y: "एक बर्ष",
                yy: "%d बर्ष"
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        var t = "jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),
            n = "jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");
        return e.lang("nl", {
            months: "januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),
            monthsShort: function (e, i) {
                return /-MMM-/.test(i) ? n[e.month()] : t[e.month()]
            },
            weekdays: "zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),
            weekdaysShort: "zo._ma._di._wo._do._vr._za.".split("_"),
            weekdaysMin: "Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD-MM-YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[vandaag om] LT",
                nextDay: "[morgen om] LT",
                nextWeek: "dddd [om] LT",
                lastDay: "[gisteren om] LT",
                lastWeek: "[afgelopen] dddd [om] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "over %s",
                past: "%s geleden",
                s: "een paar seconden",
                m: "één minuut",
                mm: "%d minuten",
                h: "één uur",
                hh: "%d uur",
                d: "één dag",
                dd: "%d dagen",
                M: "één maand",
                MM: "%d maanden",
                y: "één jaar",
                yy: "%d jaar"
            },
            ordinal: function (e) {
                return e + (1 === e || 8 === e || e >= 20 ? "ste" : "de")
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("nn", {
            months: "januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),
            monthsShort: "jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),
            weekdays: "sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),
            weekdaysShort: "sun_mån_tys_ons_tor_fre_lau".split("_"),
            weekdaysMin: "su_må_ty_on_to_fr_lø".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD.MM.YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[I dag klokka] LT",
                nextDay: "[I morgon klokka] LT",
                nextWeek: "dddd [klokka] LT",
                lastDay: "[I går klokka] LT",
                lastWeek: "[Føregående] dddd [klokka] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "om %s",
                past: "for %s siden",
                s: "noen sekund",
                m: "ett minutt",
                mm: "%d minutt",
                h: "en time",
                hh: "%d timar",
                d: "en dag",
                dd: "%d dagar",
                M: "en månad",
                MM: "%d månader",
                y: "ett år",
                yy: "%d år"
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e) {
            return 5 > e % 10 && e % 10 > 1 && ~~(e / 10) % 10 !== 1
        }

        function n(e, n, i) {
            var a = e + " ";
            switch (i) {
                case"m":
                    return n ? "minuta" : "minutę";
                case"mm":
                    return a + (t(e) ? "minuty" : "minut");
                case"h":
                    return n ? "godzina" : "godzinę";
                case"hh":
                    return a + (t(e) ? "godziny" : "godzin");
                case"MM":
                    return a + (t(e) ? "miesiące" : "miesięcy");
                case"yy":
                    return a + (t(e) ? "lata" : "lat")
            }
        }

        var i = "styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),
            a = "stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");
        return e.lang("pl", {
            months: function (e, t) {
                return /D MMMM/.test(t) ? a[e.month()] : i[e.month()]
            },
            monthsShort: "sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),
            weekdays: "niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),
            weekdaysShort: "nie_pon_wt_śr_czw_pt_sb".split("_"),
            weekdaysMin: "N_Pn_Wt_Śr_Cz_Pt_So".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD.MM.YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Dziś o] LT",
                nextDay: "[Jutro o] LT",
                nextWeek: "[W] dddd [o] LT",
                lastDay: "[Wczoraj o] LT",
                lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[W zeszłą niedzielę o] LT";
                        case 3:
                            return "[W zeszłą środę o] LT";
                        case 6:
                            return "[W zeszłą sobotę o] LT";
                        default:
                            return "[W zeszły] dddd [o] LT"
                    }
                },
                sameElse: "L"
            },
            relativeTime: {
                future: "za %s",
                past: "%s temu",
                s: "kilka sekund",
                m: n,
                mm: n,
                h: n,
                hh: n,
                d: "1 dzień",
                dd: "%d dni",
                M: "miesiąc",
                MM: n,
                y: "rok",
                yy: n
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("pt-br", {
            months: "Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),
            monthsShort: "Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),
            weekdays: "Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),
            weekdaysShort: "Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),
            weekdaysMin: "Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D [de] MMMM [de] YYYY",
                LLL: "D [de] MMMM [de] YYYY LT",
                LLLL: "dddd, D [de] MMMM [de] YYYY LT"
            },
            calendar: {
                sameDay: "[Hoje às] LT",
                nextDay: "[Amanhã às] LT",
                nextWeek: "dddd [às] LT",
                lastDay: "[Ontem às] LT",
                lastWeek: function () {
                    return 0 === this.day() || 6 === this.day() ? "[Último] dddd [às] LT" : "[Última] dddd [às] LT"
                },
                sameElse: "L"
            },
            relativeTime: {
                future: "em %s",
                past: "%s atrás",
                s: "segundos",
                m: "um minuto",
                mm: "%d minutos",
                h: "uma hora",
                hh: "%d horas",
                d: "um dia",
                dd: "%d dias",
                M: "um mês",
                MM: "%d meses",
                y: "um ano",
                yy: "%d anos"
            },
            ordinal: "%dº"
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("pt", {
            months: "Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),
            monthsShort: "Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),
            weekdays: "Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),
            weekdaysShort: "Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),
            weekdaysMin: "Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D [de] MMMM [de] YYYY",
                LLL: "D [de] MMMM [de] YYYY LT",
                LLLL: "dddd, D [de] MMMM [de] YYYY LT"
            },
            calendar: {
                sameDay: "[Hoje às] LT",
                nextDay: "[Amanhã às] LT",
                nextWeek: "dddd [às] LT",
                lastDay: "[Ontem às] LT",
                lastWeek: function () {
                    return 0 === this.day() || 6 === this.day() ? "[Último] dddd [às] LT" : "[Última] dddd [às] LT"
                },
                sameElse: "L"
            },
            relativeTime: {
                future: "em %s",
                past: "%s atrás",
                s: "segundos",
                m: "um minuto",
                mm: "%d minutos",
                h: "uma hora",
                hh: "%d horas",
                d: "um dia",
                dd: "%d dias",
                M: "um mês",
                MM: "%d meses",
                y: "um ano",
                yy: "%d anos"
            },
            ordinal: "%dº",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n) {
            var i = {mm: "minute", hh: "ore", dd: "zile", MM: "luni", yy: "ani"}, a = " ";
            return (e % 100 >= 20 || e >= 100 && e % 100 === 0) && (a = " de "), e + a + i[n]
        }

        return e.lang("ro", {
            months: "ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),
            monthsShort: "ian_feb_mar_apr_mai_iun_iul_aug_sep_oct_noi_dec".split("_"),
            weekdays: "duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),
            weekdaysShort: "Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),
            weekdaysMin: "Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD.MM.YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY H:mm",
                LLLL: "dddd, D MMMM YYYY H:mm"
            },
            calendar: {
                sameDay: "[azi la] LT",
                nextDay: "[mâine la] LT",
                nextWeek: "dddd [la] LT",
                lastDay: "[ieri la] LT",
                lastWeek: "[fosta] dddd [la] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "peste %s",
                past: "%s în urmă",
                s: "câteva secunde",
                m: "un minut",
                mm: t,
                h: "o oră",
                hh: t,
                d: "o zi",
                dd: t,
                M: "o lună",
                MM: t,
                y: "un an",
                yy: t
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n) {
            var i = e + " ";
            switch (n) {
                case"m":
                    return t ? "jedna minuta" : "jedne minute";
                case"mm":
                    return i += 1 === e ? "minuta" : 2 === e || 3 === e || 4 === e ? "minute" : "minuta";
                case"h":
                    return t ? "jedan sat" : "jednog sata";
                case"hh":
                    return i += 1 === e ? "sat" : 2 === e || 3 === e || 4 === e ? "sata" : "sati";
                case"dd":
                    return i += 1 === e ? "dan" : "dana";
                case"MM":
                    return i += 1 === e ? "mesec" : 2 === e || 3 === e || 4 === e ? "meseca" : "meseci";
                case"yy":
                    return i += 1 === e ? "godina" : 2 === e || 3 === e || 4 === e ? "godine" : "godina"
            }
        }

        return e.lang("rs", {
            months: "januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),
            monthsShort: "jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),
            weekdays: "nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),
            weekdaysShort: "ned._pon._uto._sre._čet._pet._sub.".split("_"),
            weekdaysMin: "ne_po_ut_sr_če_pe_su".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD. MM. YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd, D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[danas u] LT", nextDay: "[sutra u] LT", nextWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[u] [nedelju] [u] LT";
                        case 3:
                            return "[u] [sredu] [u] LT";
                        case 6:
                            return "[u] [subotu] [u] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[u] dddd [u] LT"
                    }
                }, lastDay: "[juče u] LT", lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                        case 3:
                            return "[prošlu] dddd [u] LT";
                        case 6:
                            return "[prošle] [subote] [u] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[prošli] dddd [u] LT"
                    }
                }, sameElse: "L"
            },
            relativeTime: {
                future: "za %s",
                past: "pre %s",
                s: "par sekundi",
                m: t,
                mm: t,
                h: t,
                hh: t,
                d: "dan",
                dd: t,
                M: "mesec",
                MM: t,
                y: "godinu",
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t) {
            var n = e.split("_");
            return t % 10 === 1 && t % 100 !== 11 ? n[0] : t % 10 >= 2 && 4 >= t % 10 && (10 > t % 100 || t % 100 >= 20) ? n[1] : n[2]
        }

        function n(e, n, i) {
            var a = {
                mm: "минута_минуты_минут",
                hh: "час_часа_часов",
                dd: "день_дня_дней",
                MM: "месяц_месяца_месяцев",
                yy: "год_года_лет"
            };
            return "m" === i ? n ? "минута" : "минуту" : e + " " + t(a[i], +e)
        }

        function i(e, t) {
            var n = {
                nominative: "январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),
                accusative: "января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")
            }, i = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t) ? "accusative" : "nominative";
            return n[i][e.month()]
        }

        function a(e, t) {
            var n = {
                nominative: "янв_фев_мар_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),
                accusative: "янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")
            }, i = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t) ? "accusative" : "nominative";
            return n[i][e.month()]
        }

        function r(e, t) {
            var n = {
                nominative: "воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),
                accusative: "воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")
            }, i = /\[ ?[Вв] ?(?:прошлую|следующую)? ?\] ?dddd/.test(t) ? "accusative" : "nominative";
            return n[i][e.day()]
        }

        return e.lang("ru", {
            months: i,
            monthsShort: a,
            weekdays: r,
            weekdaysShort: "вс_пн_вт_ср_чт_пт_сб".split("_"),
            weekdaysMin: "вс_пн_вт_ср_чт_пт_сб".split("_"),
            monthsParse: [/^янв/i, /^фев/i, /^мар/i, /^апр/i, /^ма[й|я]/i, /^июн/i, /^июл/i, /^авг/i, /^сен/i, /^окт/i, /^ноя/i, /^дек/i],
            longDateFormat: {
                LT: "HH:mm",
                L: "DD.MM.YYYY",
                LL: "D MMMM YYYY г.",
                LLL: "D MMMM YYYY г., LT",
                LLLL: "dddd, D MMMM YYYY г., LT"
            },
            calendar: {
                sameDay: "[Сегодня в] LT",
                nextDay: "[Завтра в] LT",
                lastDay: "[Вчера в] LT",
                nextWeek: function () {
                    return 2 === this.day() ? "[Во] dddd [в] LT" : "[В] dddd [в] LT"
                },
                lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[В прошлое] dddd [в] LT";
                        case 1:
                        case 2:
                        case 4:
                            return "[В прошлый] dddd [в] LT";
                        case 3:
                        case 5:
                        case 6:
                            return "[В прошлую] dddd [в] LT"
                    }
                },
                sameElse: "L"
            },
            relativeTime: {
                future: "через %s",
                past: "%s назад",
                s: "несколько секунд",
                m: n,
                mm: n,
                h: "час",
                hh: n,
                d: "день",
                dd: n,
                M: "месяц",
                MM: n,
                y: "год",
                yy: n
            },
            meridiem: function (e) {
                return 4 > e ? "ночи" : 12 > e ? "утра" : 17 > e ? "дня" : "вечера"
            },
            ordinal: function (e, t) {
                switch (t) {
                    case"M":
                    case"d":
                    case"DDD":
                        return e + "-й";
                    case"D":
                        return e + "-го";
                    case"w":
                    case"W":
                        return e + "-я";
                    default:
                        return e
                }
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e) {
            return e > 1 && 5 > e
        }

        function n(e, n, i, a) {
            var r = e + " ";
            switch (i) {
                case"s":
                    return n || a ? "pár sekúnd" : "pár sekundami";
                case"m":
                    return n ? "minúta" : a ? "minútu" : "minútou";
                case"mm":
                    return n || a ? r + (t(e) ? "minúty" : "minút") : r + "minútami";
                case"h":
                    return n ? "hodina" : a ? "hodinu" : "hodinou";
                case"hh":
                    return n || a ? r + (t(e) ? "hodiny" : "hodín") : r + "hodinami";
                case"d":
                    return n || a ? "deň" : "dňom";
                case"dd":
                    return n || a ? r + (t(e) ? "dni" : "dní") : r + "dňami";
                case"M":
                    return n || a ? "mesiac" : "mesiacom";
                case"MM":
                    return n || a ? r + (t(e) ? "mesiace" : "mesiacov") : r + "mesiacmi";
                case"y":
                    return n || a ? "rok" : "rokom";
                case"yy":
                    return n || a ? r + (t(e) ? "roky" : "rokov") : r + "rokmi"
            }
        }

        var i = "január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),
            a = "jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");
        return e.lang("sk", {
            months: i,
            monthsShort: a,
            monthsParse: function (e, t) {
                var n, i = [];
                for (n = 0; 12 > n; n++) i[n] = new RegExp("^" + e[n] + "$|^" + t[n] + "$", "i");
                return i
            }(i, a),
            weekdays: "nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),
            weekdaysShort: "ne_po_ut_st_št_pi_so".split("_"),
            weekdaysMin: "ne_po_ut_st_št_pi_so".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD.MM.YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[dnes o] LT", nextDay: "[zajtra o] LT", nextWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[v nedeľu o] LT";
                        case 1:
                        case 2:
                            return "[v] dddd [o] LT";
                        case 3:
                            return "[v stredu o] LT";
                        case 4:
                            return "[vo štvrtok o] LT";
                        case 5:
                            return "[v piatok o] LT";
                        case 6:
                            return "[v sobotu o] LT"
                    }
                }, lastDay: "[včera o] LT", lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[minulú nedeľu o] LT";
                        case 1:
                        case 2:
                            return "[minulý] dddd [o] LT";
                        case 3:
                            return "[minulú stredu o] LT";
                        case 4:
                        case 5:
                            return "[minulý] dddd [o] LT";
                        case 6:
                            return "[minulú sobotu o] LT"
                    }
                }, sameElse: "L"
            },
            relativeTime: {
                future: "za %s",
                past: "pred %s",
                s: n,
                m: n,
                mm: n,
                h: n,
                hh: n,
                d: n,
                dd: n,
                M: n,
                MM: n,
                y: n,
                yy: n
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t, n) {
            var i = e + " ";
            switch (n) {
                case"m":
                    return t ? "ena minuta" : "eno minuto";
                case"mm":
                    return i += 1 === e ? "minuta" : 2 === e ? "minuti" : 3 === e || 4 === e ? "minute" : "minut";
                case"h":
                    return t ? "ena ura" : "eno uro";
                case"hh":
                    return i += 1 === e ? "ura" : 2 === e ? "uri" : 3 === e || 4 === e ? "ure" : "ur";
                case"dd":
                    return i += 1 === e ? "dan" : "dni";
                case"MM":
                    return i += 1 === e ? "mesec" : 2 === e ? "meseca" : 3 === e || 4 === e ? "mesece" : "mesecev";
                case"yy":
                    return i += 1 === e ? "leto" : 2 === e ? "leti" : 3 === e || 4 === e ? "leta" : "let"
            }
        }

        return e.lang("sl", {
            months: "januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),
            monthsShort: "jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),
            weekdays: "nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),
            weekdaysShort: "ned._pon._tor._sre._čet._pet._sob.".split("_"),
            weekdaysMin: "ne_po_to_sr_če_pe_so".split("_"),
            longDateFormat: {
                LT: "H:mm",
                L: "DD. MM. YYYY",
                LL: "D. MMMM YYYY",
                LLL: "D. MMMM YYYY LT",
                LLLL: "dddd, D. MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[danes ob] LT", nextDay: "[jutri ob] LT", nextWeek: function () {
                    switch (this.day()) {
                        case 0:
                            return "[v] [nedeljo] [ob] LT";
                        case 3:
                            return "[v] [sredo] [ob] LT";
                        case 6:
                            return "[v] [soboto] [ob] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[v] dddd [ob] LT"
                    }
                }, lastDay: "[včeraj ob] LT", lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                        case 3:
                        case 6:
                            return "[prejšnja] dddd [ob] LT";
                        case 1:
                        case 2:
                        case 4:
                        case 5:
                            return "[prejšnji] dddd [ob] LT"
                    }
                }, sameElse: "L"
            },
            relativeTime: {
                future: "čez %s",
                past: "%s nazaj",
                s: "nekaj sekund",
                m: t,
                mm: t,
                h: t,
                hh: t,
                d: "en dan",
                dd: t,
                M: "en mesec",
                MM: t,
                y: "eno leto",
                yy: t
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("sq", {
            months: "Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),
            monthsShort: "Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),
            weekdays: "E Diel_E Hënë_E Marte_E Mërkure_E Enjte_E Premte_E Shtunë".split("_"),
            weekdaysShort: "Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),
            weekdaysMin: "D_H_Ma_Më_E_P_Sh".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Sot në] LT",
                nextDay: "[Neser në] LT",
                nextWeek: "dddd [në] LT",
                lastDay: "[Dje në] LT",
                lastWeek: "dddd [e kaluar në] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "në %s",
                past: "%s me parë",
                s: "disa sekonda",
                m: "një minut",
                mm: "%d minuta",
                h: "një orë",
                hh: "%d orë",
                d: "një ditë",
                dd: "%d ditë",
                M: "një muaj",
                MM: "%d muaj",
                y: "një vit",
                yy: "%d vite"
            },
            ordinal: "%d.",
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("sv", {
            months: "januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),
            monthsShort: "jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),
            weekdays: "söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),
            weekdaysShort: "sön_mån_tis_ons_tor_fre_lör".split("_"),
            weekdaysMin: "sö_må_ti_on_to_fr_lö".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "YYYY-MM-DD",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[Idag] LT",
                nextDay: "[Imorgon] LT",
                lastDay: "[Igår] LT",
                nextWeek: "dddd LT",
                lastWeek: "[Förra] dddd[en] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "om %s",
                past: "för %s sedan",
                s: "några sekunder",
                m: "en minut",
                mm: "%d minuter",
                h: "en timme",
                hh: "%d timmar",
                d: "en dag",
                dd: "%d dagar",
                M: "en månad",
                MM: "%d månader",
                y: "ett år",
                yy: "%d år"
            },
            ordinal: function (e) {
                var t = e % 10, n = 1 === ~~(e % 100 / 10) ? "e" : 1 === t ? "a" : 2 === t ? "a" : 3 === t ? "e" : "e";
                return e + n
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("ta", {
            months: "ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),
            monthsShort: "ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),
            weekdays: "ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),
            weekdaysShort: "ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),
            weekdaysMin: "ஞா_தி_செ_பு_வி_வெ_ச".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY, LT",
                LLLL: "dddd, D MMMM YYYY, LT"
            },
            calendar: {
                sameDay: "[இன்று] LT",
                nextDay: "[நாளை] LT",
                nextWeek: "dddd, LT",
                lastDay: "[நேற்று] LT",
                lastWeek: "[கடந்த வாரம்] dddd, LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s இல்",
                past: "%s முன்",
                s: "ஒரு சில விநாடிகள்",
                m: "ஒரு நிமிடம்",
                mm: "%d நிமிடங்கள்",
                h: "ஒரு மணி நேரம்",
                hh: "%d மணி நேரம்",
                d: "ஒரு நாள்",
                dd: "%d நாட்கள்",
                M: "ஒரு மாதம்",
                MM: "%d மாதங்கள்",
                y: "ஒரு வருடம்",
                yy: "%d ஆண்டுகள்"
            },
            ordinal: function (e) {
                return e + "வது"
            },
            meridiem: function (e) {
                return e >= 6 && 10 >= e ? " காலை" : e >= 10 && 14 >= e ? " நண்பகல்" : e >= 14 && 18 >= e ? " எற்பாடு" : e >= 18 && 20 >= e ? " மாலை" : e >= 20 && 24 >= e ? " இரவு" : e >= 0 && 6 >= e ? " வைகறை" : void 0
            },
            week: {dow: 0, doy: 6}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("th", {
            months: "มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),
            monthsShort: "มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),
            weekdays: "อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),
            weekdaysShort: "อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),
            weekdaysMin: "อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),
            longDateFormat: {
                LT: "H นาฬิกา m นาที",
                L: "YYYY/MM/DD",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY เวลา LT",
                LLLL: "วันddddที่ D MMMM YYYY เวลา LT"
            },
            meridiem: function (e) {
                return 12 > e ? "ก่อนเที่ยง" : "หลังเที่ยง"
            },
            calendar: {
                sameDay: "[วันนี้ เวลา] LT",
                nextDay: "[พรุ่งนี้ เวลา] LT",
                nextWeek: "dddd[หน้า เวลา] LT",
                lastDay: "[เมื่อวานนี้ เวลา] LT",
                lastWeek: "[วัน]dddd[ที่แล้ว เวลา] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "อีก %s",
                past: "%sที่แล้ว",
                s: "ไม่กี่วินาที",
                m: "1 นาที",
                mm: "%d นาที",
                h: "1 ชั่วโมง",
                hh: "%d ชั่วโมง",
                d: "1 วัน",
                dd: "%d วัน",
                M: "1 เดือน",
                MM: "%d เดือน",
                y: "1 ปี",
                yy: "%d ปี"
            }
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("tl-ph", {
            months: "Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),
            monthsShort: "Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),
            weekdays: "Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),
            weekdaysShort: "Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),
            weekdaysMin: "Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "MM/D/YYYY",
                LL: "MMMM D, YYYY",
                LLL: "MMMM D, YYYY LT",
                LLLL: "dddd, MMMM DD, YYYY LT"
            },
            calendar: {
                sameDay: "[Ngayon sa] LT",
                nextDay: "[Bukas sa] LT",
                nextWeek: "dddd [sa] LT",
                lastDay: "[Kahapon sa] LT",
                lastWeek: "dddd [huling linggo] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "sa loob ng %s",
                past: "%s ang nakalipas",
                s: "ilang segundo",
                m: "isang minuto",
                mm: "%d minuto",
                h: "isang oras",
                hh: "%d oras",
                d: "isang araw",
                dd: "%d araw",
                M: "isang buwan",
                MM: "%d buwan",
                y: "isang taon",
                yy: "%d taon"
            },
            ordinal: function (e) {
                return e
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        var t = {
            1: "'inci",
            5: "'inci",
            8: "'inci",
            70: "'inci",
            80: "'inci",
            2: "'nci",
            7: "'nci",
            20: "'nci",
            50: "'nci",
            3: "'üncü",
            4: "'üncü",
            100: "'üncü",
            6: "'ncı",
            9: "'uncu",
            10: "'uncu",
            30: "'uncu",
            60: "'ıncı",
            90: "'ıncı"
        };
        return e.lang("tr", {
            months: "Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),
            monthsShort: "Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),
            weekdays: "Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),
            weekdaysShort: "Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),
            weekdaysMin: "Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD.MM.YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd, D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[bugün saat] LT",
                nextDay: "[yarın saat] LT",
                nextWeek: "[haftaya] dddd [saat] LT",
                lastDay: "[dün] LT",
                lastWeek: "[geçen hafta] dddd [saat] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s sonra",
                past: "%s önce",
                s: "birkaç saniye",
                m: "bir dakika",
                mm: "%d dakika",
                h: "bir saat",
                hh: "%d saat",
                d: "bir gün",
                dd: "%d gün",
                M: "bir ay",
                MM: "%d ay",
                y: "bir yıl",
                yy: "%d yıl"
            },
            ordinal: function (e) {
                if (0 === e) return e + "'ıncı";
                var n = e % 10, i = e % 100 - n, a = e >= 100 ? 100 : null;
                return e + (t[n] || t[i] || t[a])
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("tzm-la", {
            months: "innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),
            monthsShort: "innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),
            weekdays: "asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),
            weekdaysShort: "asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),
            weekdaysMin: "asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[asdkh g] LT",
                nextDay: "[aska g] LT",
                nextWeek: "dddd [g] LT",
                lastDay: "[assant g] LT",
                lastWeek: "dddd [g] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "dadkh s yan %s",
                past: "yan %s",
                s: "imik",
                m: "minuḍ",
                mm: "%d minuḍ",
                h: "saɛa",
                hh: "%d tassaɛin",
                d: "ass",
                dd: "%d ossan",
                M: "ayowr",
                MM: "%d iyyirn",
                y: "asgas",
                yy: "%d isgasn"
            },
            week: {dow: 6, doy: 12}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("tzm", {
            months: "ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),
            monthsShort: "ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),
            weekdays: "ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),
            weekdaysShort: "ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),
            weekdaysMin: "ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "dddd D MMMM YYYY LT"
            },
            calendar: {
                sameDay: "[ⴰⵙⴷⵅ ⴴ] LT",
                nextDay: "[ⴰⵙⴽⴰ ⴴ] LT",
                nextWeek: "dddd [ⴴ] LT",
                lastDay: "[ⴰⵚⴰⵏⵜ ⴴ] LT",
                lastWeek: "dddd [ⴴ] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",
                past: "ⵢⴰⵏ %s",
                s: "ⵉⵎⵉⴽ",
                m: "ⵎⵉⵏⵓⴺ",
                mm: "%d ⵎⵉⵏⵓⴺ",
                h: "ⵙⴰⵄⴰ",
                hh: "%d ⵜⴰⵙⵙⴰⵄⵉⵏ",
                d: "ⴰⵙⵙ",
                dd: "%d oⵙⵙⴰⵏ",
                M: "ⴰⵢoⵓⵔ",
                MM: "%d ⵉⵢⵢⵉⵔⵏ",
                y: "ⴰⵙⴳⴰⵙ",
                yy: "%d ⵉⵙⴳⴰⵙⵏ"
            },
            week: {dow: 6, doy: 12}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        function t(e, t) {
            var n = e.split("_");
            return t % 10 === 1 && t % 100 !== 11 ? n[0] : t % 10 >= 2 && 4 >= t % 10 && (10 > t % 100 || t % 100 >= 20) ? n[1] : n[2]
        }

        function n(e, n, i) {
            var a = {
                mm: "хвилина_хвилини_хвилин",
                hh: "година_години_годин",
                dd: "день_дні_днів",
                MM: "місяць_місяці_місяців",
                yy: "рік_роки_років"
            };
            return "m" === i ? n ? "хвилина" : "хвилину" : "h" === i ? n ? "година" : "годину" : e + " " + t(a[i], +e)
        }

        function i(e, t) {
            var n = {
                nominative: "січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),
                accusative: "січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")
            }, i = /D[oD]? *MMMM?/.test(t) ? "accusative" : "nominative";
            return n[i][e.month()]
        }

        function a(e, t) {
            var n = {
                    nominative: "неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),
                    accusative: "неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),
                    genitive: "неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")
                },
                i = /(\[[ВвУу]\]) ?dddd/.test(t) ? "accusative" : /\[?(?:минулої|наступної)? ?\] ?dddd/.test(t) ? "genitive" : "nominative";
            return n[i][e.day()]
        }

        function r(e) {
            return function () {
                return e + "о" + (11 === this.hours() ? "б" : "") + "] LT"
            }
        }

        return e.lang("uk", {
            months: i,
            monthsShort: "січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),
            weekdays: a,
            weekdaysShort: "нд_пн_вт_ср_чт_пт_сб".split("_"),
            weekdaysMin: "нд_пн_вт_ср_чт_пт_сб".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD.MM.YYYY",
                LL: "D MMMM YYYY р.",
                LLL: "D MMMM YYYY р., LT",
                LLLL: "dddd, D MMMM YYYY р., LT"
            },
            calendar: {
                sameDay: r("[Сьогодні "),
                nextDay: r("[Завтра "),
                lastDay: r("[Вчора "),
                nextWeek: r("[У] dddd ["),
                lastWeek: function () {
                    switch (this.day()) {
                        case 0:
                        case 3:
                        case 5:
                        case 6:
                            return r("[Минулої] dddd [").call(this);
                        case 1:
                        case 2:
                        case 4:
                            return r("[Минулого] dddd [").call(this)
                    }
                },
                sameElse: "L"
            },
            relativeTime: {
                future: "за %s",
                past: "%s тому",
                s: "декілька секунд",
                m: n,
                mm: n,
                h: "годину",
                hh: n,
                d: "день",
                dd: n,
                M: "місяць",
                MM: n,
                y: "рік",
                yy: n
            },
            meridiem: function (e) {
                return 4 > e ? "ночі" : 12 > e ? "ранку" : 17 > e ? "дня" : "вечора"
            },
            ordinal: function (e, t) {
                switch (t) {
                    case"M":
                    case"d":
                    case"DDD":
                    case"w":
                    case"W":
                        return e + "-й";
                    case"D":
                        return e + "-го";
                    default:
                        return e
                }
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("uz", {
            months: "январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),
            monthsShort: "янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),
            weekdays: "Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),
            weekdaysShort: "Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),
            weekdaysMin: "Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM YYYY",
                LLL: "D MMMM YYYY LT",
                LLLL: "D MMMM YYYY, dddd LT"
            },
            calendar: {
                sameDay: "[Бугун соат] LT [да]",
                nextDay: "[Эртага] LT [да]",
                nextWeek: "dddd [куни соат] LT [да]",
                lastDay: "[Кеча соат] LT [да]",
                lastWeek: "[Утган] dddd [куни соат] LT [да]",
                sameElse: "L"
            },
            relativeTime: {
                future: "Якин %s ичида",
                past: "Бир неча %s олдин",
                s: "фурсат",
                m: "бир дакика",
                mm: "%d дакика",
                h: "бир соат",
                hh: "%d соат",
                d: "бир кун",
                dd: "%d кун",
                M: "бир ой",
                MM: "%d ой",
                y: "бир йил",
                yy: "%d йил"
            },
            week: {dow: 1, doy: 7}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("vn", {
            months: "tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),
            monthsShort: "Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),
            weekdays: "chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),
            weekdaysShort: "CN_T2_T3_T4_T5_T6_T7".split("_"),
            weekdaysMin: "CN_T2_T3_T4_T5_T6_T7".split("_"),
            longDateFormat: {
                LT: "HH:mm",
                L: "DD/MM/YYYY",
                LL: "D MMMM [năm] YYYY",
                LLL: "D MMMM [năm] YYYY LT",
                LLLL: "dddd, D MMMM [năm] YYYY LT",
                l: "DD/M/YYYY",
                ll: "D MMM YYYY",
                lll: "D MMM YYYY LT",
                llll: "ddd, D MMM YYYY LT"
            },
            calendar: {
                sameDay: "[Hôm nay lúc] LT",
                nextDay: "[Ngày mai lúc] LT",
                nextWeek: "dddd [tuần tới lúc] LT",
                lastDay: "[Hôm qua lúc] LT",
                lastWeek: "dddd [tuần rồi lúc] LT",
                sameElse: "L"
            },
            relativeTime: {
                future: "%s tới",
                past: "%s trước",
                s: "vài giây",
                m: "một phút",
                mm: "%d phút",
                h: "một giờ",
                hh: "%d giờ",
                d: "một ngày",
                dd: "%d ngày",
                M: "một tháng",
                MM: "%d tháng",
                y: "một năm",
                yy: "%d năm"
            },
            ordinal: function (e) {
                return e
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("zh-cn", {
            months: "一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),
            monthsShort: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),
            weekdays: "星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),
            weekdaysShort: "周日_周一_周二_周三_周四_周五_周六".split("_"),
            weekdaysMin: "日_一_二_三_四_五_六".split("_"),
            longDateFormat: {
                LT: "Ah点mm",
                L: "YYYY-MM-DD",
                LL: "YYYY年MMMD日",
                LLL: "YYYY年MMMD日LT",
                LLLL: "YYYY年MMMD日ddddLT",
                l: "YYYY-MM-DD",
                ll: "YYYY年MMMD日",
                lll: "YYYY年MMMD日LT",
                llll: "YYYY年MMMD日ddddLT"
            },
            meridiem: function (e, t) {
                var n = 100 * e + t;
                return 600 > n ? "凌晨" : 900 > n ? "早上" : 1130 > n ? "上午" : 1230 > n ? "中午" : 1800 > n ? "下午" : "晚上"
            },
            calendar: {
                sameDay: function () {
                    return 0 === this.minutes() ? "[今天]Ah[点整]" : "[今天]LT"
                }, nextDay: function () {
                    return 0 === this.minutes() ? "[明天]Ah[点整]" : "[明天]LT"
                }, lastDay: function () {
                    return 0 === this.minutes() ? "[昨天]Ah[点整]" : "[昨天]LT"
                }, nextWeek: function () {
                    var t, n;
                    return t = e().startOf("week"), n = this.unix() - t.unix() >= 604800 ? "[下]" : "[本]", 0 === this.minutes() ? n + "dddAh点整" : n + "dddAh点mm"
                }, lastWeek: function () {
                    var t, n;
                    return t = e().startOf("week"), n = this.unix() < t.unix() ? "[上]" : "[本]", 0 === this.minutes() ? n + "dddAh点整" : n + "dddAh点mm"
                }, sameElse: "LL"
            },
            ordinal: function (e, t) {
                switch (t) {
                    case"d":
                    case"D":
                    case"DDD":
                        return e + "日";
                    case"M":
                        return e + "月";
                    case"w":
                    case"W":
                        return e + "周";
                    default:
                        return e
                }
            },
            relativeTime: {
                future: "%s内",
                past: "%s前",
                s: "几秒",
                m: "1分钟",
                mm: "%d分钟",
                h: "1小时",
                hh: "%d小时",
                d: "1天",
                dd: "%d天",
                M: "1个月",
                MM: "%d个月",
                y: "1年",
                yy: "%d年"
            },
            week: {dow: 1, doy: 4}
        })
    }), function (e) {
        e(it)
    }(function (e) {
        return e.lang("zh-tw", {
            months: "一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),
            monthsShort: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),
            weekdays: "星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),
            weekdaysShort: "週日_週一_週二_週三_週四_週五_週六".split("_"),
            weekdaysMin: "日_一_二_三_四_五_六".split("_"),
            longDateFormat: {
                LT: "Ah點mm",
                L: "YYYY年MMMD日",
                LL: "YYYY年MMMD日",
                LLL: "YYYY年MMMD日LT",
                LLLL: "YYYY年MMMD日ddddLT",
                l: "YYYY年MMMD日",
                ll: "YYYY年MMMD日",
                lll: "YYYY年MMMD日LT",
                llll: "YYYY年MMMD日ddddLT"
            },
            meridiem: function (e, t) {
                var n = 100 * e + t;
                return 900 > n ? "早上" : 1130 > n ? "上午" : 1230 > n ? "中午" : 1800 > n ? "下午" : "晚上"
            },
            calendar: {
                sameDay: "[今天]LT",
                nextDay: "[明天]LT",
                nextWeek: "[下]ddddLT",
                lastDay: "[昨天]LT",
                lastWeek: "[上]ddddLT",
                sameElse: "L"
            },
            ordinal: function (e, t) {
                switch (t) {
                    case"d":
                    case"D":
                    case"DDD":
                        return e + "日";
                    case"M":
                        return e + "月";
                    case"w":
                    case"W":
                        return e + "週";
                    default:
                        return e
                }
            },
            relativeTime: {
                future: "%s內",
                past: "%s前",
                s: "幾秒",
                m: "一分鐘",
                mm: "%d分鐘",
                h: "一小時",
                hh: "%d小時",
                d: "一天",
                dd: "%d天",
                M: "一個月",
                MM: "%d個月",
                y: "一年",
                yy: "%d年"
            }
        })
    }), it.lang("en"), _t ? (module.exports = it, nt(!0)) : "function" == typeof define && define.amd ? define("moment", ["require", "exports", "module"], function (t, n, i) {
        return i.config && i.config() && i.config().noGlobal !== !0 && nt(i.config().noGlobal === e), it
    }) : nt()
}).call(this), function (e) {
    e.fn.jTweetsAnywhere = function (t) {
        var t = e.extend({
            username: "rockstargames",
            list: null,
            searchParams: null,
            count: 0,
            tweetProfileImagePresent: null,
            tweetFilter: defaultTweetFilter,
            showTweetFeed: !0,
            showFollowButton: !1,
            showConnectButton: !1,
            showLoginInfo: !1,
            showTweetBox: !1,
            mainDecorator: defaultMainDecorator,
            tweetFeedDecorator: defaultTweetFeedDecorator,
            tweetDecorator: defaultTweetDecorator,
            tweetProfileImageDecorator: defaultTweetProfileImageDecorator,
            tweetBodyDecorator: defaultTweetBodyDecorator,
            tweetUsernameDecorator: defaultTweetUsernameDecorator,
            tweetTextDecorator: defaultTweetTextDecorator,
            tweetAttributesDecorator: defaultTweetAttributesDecorator,
            tweetTimestampDecorator: defaultTweetTimestampDecorator,
            tweetSourceDecorator: defaultTweetSourceDecorator,
            tweetGeoLocationDecorator: defaultTweetGeoLocationDecorator,
            tweetInReplyToDecorator: defaultTweetInReplyToDecorator,
            tweetRetweeterDecorator: defaultTweetRetweeterDecorator,
            tweetFeedControlsDecorator: defaultTweetFeedControlsDecorator,
            tweetFeedControlsMoreBtnDecorator: defaultTweetFeedControlsMoreBtnDecorator,
            tweetFeedControlsPrevBtnDecorator: defaultTweetFeedControlsPrevBtnDecorator,
            tweetFeedControlsNextBtnDecorator: defaultTweetFeedControlsNextBtnDecorator,
            tweetFeedAutorefreshTriggerDecorator: defaultTweetFeedAutorefreshTriggerDecorator,
            tweetFeedAutorefreshTriggerContentDecorator: defaultTweetFeedAutorefreshTriggerContentDecorator,
            connectButtonDecorator: defaultConnectButtonDecorator,
            loginInfoDecorator: defaultLoginInfoDecorator,
            loginInfoContentDecorator: defaultLoginInfoContentDecorator,
            followButtonDecorator: defaultFollowButtonDecorator,
            tweetBoxDecorator: defaultTweetBoxDecorator,
            linkDecorator: defaultLinkDecorator,
            usernameDecorator: defaultUsernameDecorator,
            hashtagDecorator: defaultHashtagDecorator,
            loadingDecorator: defaultLoadingDecorator,
            errorDecorator: defaultErrorDecorator,
            noDataDecorator: defaultNoDataDecorator,
            tweetTimestampFormatter: defaultTweetTimestampFormatter,
            tweetTimestampTooltipFormatter: defaultTweetTimestampTooltipFormatter,
            tweetVisualizer: defaultTweetVisualizer,
            loadingIndicatorVisualizer: defaultLoadingIndicatorVisualizer,
            autorefreshTriggerVisualizer: defaultAutorefreshTriggerVisualizer,
            onDataRequestHandler: defaultOnDataRequestHandler,
            onRateLimitDataHandler: defaultOnRateLimitDataHandler,
            _tweetFeedConfig: {
                expandHovercards: !1,
                showTimestamp: {refreshInterval: 0},
                showSource: !1,
                showGeoLocation: !0,
                showInReplyTo: !0,
                showProfileImages: null,
                showUserScreenNames: null,
                showUserFullNames: !1,
                includeRetweets: !0,
                completed: "tweetsLoaded",
                paging: {mode: "none", _limit: 0, _offset: 0},
                autorefresh: {mode: "none", interval: 60, duration: 3600, _startTime: null, _triggerElement: null},
                _pageParam: 0,
                _maxId: null,
                _recLevel: 0,
                _noData: !1,
                _clearBeforePopulate: !1
            },
            _tweetBoxConfig: {
                counter: !0,
                width: 515,
                height: 65,
                label: "What's happening?",
                defaultContent: "",
                onTweet: function () {
                }
            },
            _connectButtonConfig: {size: "medium"},
            _baseSelector: null,
            _baseElement: null,
            _tweetFeedElement: null,
            _tweetFeedControlsElement: null,
            _followButtonElement: null,
            _loginInfoElement: null,
            _connectButtonElement: null,
            _tweetBoxElement: null,
            _loadingIndicatorElement: null,
            _noDataElement: null,
            _tweetsCache: [],
            _autorefreshTweetsCache: [],
            _stats: {
                dataRequestCount: 0,
                rateLimitPreventionCount: 0,
                rateLimit: {remaining_hits: 150, hourly_limit: 150}
            }
        }, t);
        if (t.mainDecorator) return t._baseSelector = this.selector, "string" != typeof t.username && (t.searchParams || (t.searchParams = ["q=from:" + t.username.join(" OR from:")]), t.username = t.username[0]), "object" == typeof t.showTweetFeed && e.extend(!0, t._tweetFeedConfig, t.showTweetFeed), "object" == typeof t.showTweetBox && (t._tweetBoxConfig = t.showTweetBox, t.showTweetBox = !0), "object" == typeof t.showConnectButton && (t._connectButtonConfig = t.showConnectButton, t.showConnectButton = !0), null == t._tweetFeedConfig.showProfileImages && (t._tweetFeedConfig.showProfileImages = t.tweetProfileImagePresent), null == t._tweetFeedConfig.showProfileImages && (t._tweetFeedConfig.showProfileImages = (t.list || t.searchParams) && t.tweetProfileImageDecorator), null == t._tweetFeedConfig.showUserScreenNames && ((t.list || t.searchParams) && (t._tweetFeedConfig.showUserScreenNames = !0), t.tweetUsernameDecorator || (t._tweetFeedConfig.showUserScreenNames = !1)), null == t._tweetFeedConfig.showUserFullNames && ((t.list || t.searchParams) && (t._tweetFeedConfig.showUserFullNames = !0), t.tweetUsernameDecorator || (t._tweetFeedConfig.showUserFullNames = !1)), t.count = validateRange(t.count, 0, t.searchParams ? 100 : 20), t._tweetFeedConfig.autorefresh.interval = Math.max(30, t._tweetFeedConfig.autorefresh.interval), t._tweetFeedConfig.paging._offset = 0, t._tweetFeedConfig.paging._limit = t.count, 0 != t.count && t.showTweetFeed || (t.tweetFeedDecorator = null, t.tweetFeedControlsDecorator = null), "none" == t._tweetFeedConfig.paging.mode && (t.tweetFeedControlsDecorator = null), t.showFollowButton || (t.followButtonDecorator = null), t.showTweetBox || (t.tweetBoxDecorator = null), t.showConnectButton || (t.connectButtonDecorator = null), t.showLoginInfo || (t.loginInfoDecorator = null), t._tweetFeedConfig.showTimestamp || (t.tweetTimestampDecorator = null), t._tweetFeedConfig.showSource || (t.tweetSourceDecorator = null), t._tweetFeedConfig.showGeoLocation || (t.tweetGeoLocationDecorator = null), t._tweetFeedConfig.showInReplyTo || (t.tweetInReplyToDecorator = null), e.ajaxSetup({cache: !0}), this.each(function () {
            t._baseElement = e(this), t._tweetFeedElement = t.tweetFeedDecorator ? e(t.tweetFeedDecorator(t)) : null, t._tweetFeedControlsElement = t.tweetFeedControlsDecorator ? e(t.tweetFeedControlsDecorator(t)) : null, t._followButtonElement = t.followButtonDecorator ? e(t.followButtonDecorator(t)) : null, t._tweetBoxElement = t.tweetBoxDecorator ? e(t.tweetBoxDecorator(t)) : null, t._connectButtonElement = t.connectButtonDecorator ? e(t.connectButtonDecorator(t)) : null, t._loginInfoElement = t.loginInfoDecorator ? e(t.loginInfoDecorator(t)) : null, t.mainDecorator(t), populateTweetFeed(t), populateAnywhereControls(t), bindEventHandlers(t), t._tweetFeedConfig.autorefresh._startTime = (new Date).getTime(), startAutorefresh(t), startTimestampRefresh(t)
        })
    }, defaultMainDecorator = function (e) {
        e._tweetFeedElement && e._baseElement.append(e._tweetFeedElement), e._tweetFeedControlsElement && e._baseElement.append(e._tweetFeedControlsElement), e._connectButtonElement && e._baseElement.append(e._connectButtonElement), e._loginInfoElement && e._baseElement.append(e._loginInfoElement), e._followButtonElement && e._baseElement.append(e._followButtonElement), e._tweetBoxElement && e._baseElement.append(e._tweetBoxElement)
    }, defaultTweetFeedControlsDecorator = function (e) {
        var t = "";
        return "prev-next" == e._tweetFeedConfig.paging.mode ? (e.tweetFeedControlsPrevBtnDecorator && (t += e.tweetFeedControlsPrevBtnDecorator(e)), e.tweetFeedControlsNextBtnDecorator && (t += e.tweetFeedControlsNextBtnDecorator(e))) : "endless-scroll" == e._tweetFeedConfig.paging.mode || e.tweetFeedControlsMoreBtnDecorator && (t += e.tweetFeedControlsMoreBtnDecorator(e)), '<div class="jta-tweet-list-controls">' + t + "</div>"
    }, defaultTweetFeedControlsMoreBtnDecorator = function () {
        return '<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-more">More</span>'
    }, defaultTweetFeedControlsPrevBtnDecorator = function () {
        return '<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-prev">Prev</span>'
    }, defaultTweetFeedControlsNextBtnDecorator = function () {
        return '<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-next">Next</span>'
    }, defaultTweetFeedAutorefreshTriggerDecorator = function (e, t) {
        var n = "";
        return t.tweetFeedAutorefreshTriggerContentDecorator && (n = t.tweetFeedAutorefreshTriggerContentDecorator(e, t)), '<li class="jta-tweet-list-autorefresh-trigger">' + n + "</li>"
    }, defaultTweetFeedAutorefreshTriggerContentDecorator = function (e) {
        var t = "" + e + " new " + (e > 1 ? " tweets" : " tweet");
        return '<span class="jta-tweet-list-autorefresh-trigger-content">' + t + "</span>"
    }, defaultTweetFeedDecorator = function () {
        return '<ul class="jta-tweet-list"></ul>'
    }, defaultTweetDecorator = function (e, t) {
        var n = "";
        return t._tweetFeedConfig.showProfileImages && (n += t.tweetProfileImageDecorator(e, t)), t.tweetBodyDecorator && (n += t.tweetBodyDecorator(e, t)), n += '<div class="jta-clear">&nbsp;</div>', '<li class="jta-tweet-list-item">' + n + "</li>"
    }, defaultTweetProfileImageDecorator = function (e) {
        var t = e.retweeted_status || e, n = t.user ? t.user.screen_name : !1 || t.from_user,
            i = t.user ? t.user.profile_image_url : !1 || t.profile_image_url,
            a = '<a class="jta-tweet-profile-image-link" href="http://twitter.com/' + n + '" target="_blank"><img src="' + i + '" alt="' + n + '"' + (isAnywherePresent() ? "" : ' title="' + n + '"') + "/></a>";
        return '<div class="jta-tweet-profile-image">' + a + "</div>"
    }, defaultTweetBodyDecorator = function (e, t) {
        var n = "";
        return t.tweetTextDecorator && (n += t.tweetTextDecorator(e, t)), t.tweetAttributesDecorator && (n += t.tweetAttributesDecorator(e, t)), '<div class="jta-tweet-body ' + (t._tweetFeedConfig.showProfileImages ? "jta-tweet-body-list-profile-image-present" : "") + '">' + n + "</div>"
    }, defaultTweetTextDecorator = function (e, t) {
        var n = e.text;
        return e.retweeted_status && (t._tweetFeedConfig.showUserScreenNames || null == t._tweetFeedConfig.showUserScreenNames || t._tweetFeedConfig.showUserFullNames || null == t._tweetFeedConfig.showUserFullNames) && (n = e.retweeted_status.text), t.linkDecorator && (n = t.linkDecorator(n, t)), t.usernameDecorator && (n = t.usernameDecorator(n, t)), t.hashtagDecorator && (n = t.hashtagDecorator(n, t)), (t._tweetFeedConfig.showUserScreenNames || t._tweetFeedConfig.showUserFullNames || e.retweeted_status && (null == t._tweetFeedConfig.showUserScreenNames || null == t._tweetFeedConfig.showUserFullNames)) && (n = t.tweetUsernameDecorator(e, t) + " " + n), '<span class="jta-tweet-text">' + n + "</span>"
    }, defaultTweetUsernameDecorator = function (e, t) {
        var n, i = e.retweeted_status || e, a = i.user ? i.user.screen_name : !1 || i.from_user,
            r = i.user ? i.user.name : null;
        a && (t._tweetFeedConfig.showUserScreenNames || null == t._tweetFeedConfig.showUserScreenNames && e.retweeted_status) && (n = '<span class="jta-tweet-user-screen-name"><a class="jta-tweet-user-screen-name-link" href="http://twitter.com/' + a + '" target="_blank">' + a + "</a></span>");
        var s;
        r && (t._tweetFeedConfig.showUserFullNames || null == t._tweetFeedConfig.showUserFullNames && e.retweeted_status) && (s = '<span class="jta-tweet-user-full-name">' + (n ? " (" : "") + '<a class="jta-tweet-user-full-name-link" href="http://twitter.com/' + a + '" name="' + a + '" target="_blank">' + r + "</a>" + (n ? ")" : "") + "</span>");
        var o = "";
        return n && (o += n), s && (n && (o += " "), o += s), (n || s) && (o = '<span class="jta-tweet-user-name">' + (e.retweeted_status ? "RT " : "") + o + "</span>"), o
    }, defaultTweetAttributesDecorator = function (e, t) {
        var n = "";
        return (t.tweetTimestampDecorator || t.tweetSourceDecorator || t.tweetGeoLocationDecorator || t.tweetInReplyToDecorator || e.retweeted_status && t.tweetRetweeterDecorator) && (n += '<span class="jta-tweet-attributes">', t.tweetTimestampDecorator && (n += t.tweetTimestampDecorator(e, t)), t.tweetSourceDecorator && (n += t.tweetSourceDecorator(e, t)), t.tweetGeoLocationDecorator && (n += t.tweetGeoLocationDecorator(e, t)), t.tweetInReplyToDecorator && (n += t.tweetInReplyToDecorator(e, t)), e.retweeted_status && t.tweetRetweeterDecorator && (n += t.tweetRetweeterDecorator(e, t)), n += "</span>"), n
    }, defaultTweetTimestampDecorator = function (e, t) {
        var n = e.retweeted_status || e, i = formatDate(n.created_at), a = t.tweetTimestampFormatter(i),
            r = t.tweetTimestampTooltipFormatter(i), s = n.user ? n.user.screen_name : !1 || n.from_user,
            o = '<span class="jta-tweet-timestamp"><a class="jta-tweet-timestamp-link" data-timestamp="' + i + '" href="http://twitter.com/' + s + "/status/" + n.id + '" target="_blank" title="' + r + '">' + a + "</a></span>";
        return o
    }, defaultTweetTimestampTooltipFormatter = function (e) {
        var t = new Date(e);
        return t.toLocaleString()
    }, defaultTweetTimestampFormatter = function (e) {
        var t = new Date, n = parseInt((t.getTime() - Date.parse(e)) / 1e3), i = "";
        if (60 > n) i += n + " second" + (1 == n ? "" : "s") + " ago"; else if (3600 > n) {
            var a = parseInt((n + 30) / 60);
            i += a + " minute" + (1 == a ? "" : "s") + " ago"
        } else if (86400 > n) {
            var a = parseInt((n + 1800) / 3600);
            i += a + " hour" + (1 == a ? "" : "s") + " ago"
        } else {
            var r = new Date(e), s = "AM", o = r.getHours();
            o > 12 && (o -= 12, s = "PM");
            var l = (r.getMinutes(), ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]);
            i += l[r.getMonth()] + " " + r.getDate(), r.getFullYear() < t.getFullYear() && (i += ", " + r.getFullYear());
            var a = parseInt((n + 43200) / 86400);
            i += " (" + a + " day" + (1 == a ? "" : "s") + " ago)"
        }
        return i
    }, exTimestampFormatter = function (e) {
        var t = parseInt(((new Date).getTime() - Date.parse(e)) / 1e3), n = "";
        if (60 > t) n += "less than a minute ago"; else if (3600 > t) {
            var i = parseInt((t + 30) / 60);
            n += i + " minute" + (1 == i ? "" : "s") + " ago"
        } else if (86400 > t) {
            var i = parseInt((t + 1800) / 3600);
            n += "about " + i + " hour" + (1 == i ? "" : "s") + " ago"
        } else {
            var i = parseInt((t + 43200) / 86400);
            n += "about " + i + " day" + (1 == i ? "" : "s") + " ago";
            var a = new Date(e), r = "AM", s = a.getHours();
            s > 12 && (s -= 12, r = "PM");
            var o = a.getMinutes(), l = (10 > o ? "0" : "") + o;
            n += " (" + s + ":" + l + " " + r + " " + (a.getMonth() + 1) + "/" + a.getDate() + "/" + a.getFullYear() + ")"
        }
        return n
    }, defaultTweetSourceDecorator = function (e) {
        var t = e.retweeted_status || e,
            n = t.source.replace(/\&lt\;/gi, "<").replace(/\&gt\;/gi, ">").replace(/\&quot\;/gi, '"'),
            i = '<span class="jta-tweet-source"> via <span class="jta-tweet-source-link">' + n + "</span></span>";
        return i
    }, defaultTweetGeoLocationDecorator = function (e) {
        var t, n = "", i = e.retweeted_status || e;
        if (i.geo && i.geo.coordinates ? t = i.geo.coordinates.join() : i.place && i.place.full_name && (t = i.place.full_name), t) {
            var a = "here";
            i.place && i.place.full_name && (a = i.place.full_name);
            var r = "http://maps.google.com/maps?q=" + t;
            n = '<span class="jta-tweet-location"> from <a class="jta-tweet-location-link" href="' + r + '" target="_blank">' + a + "</a></span>"
        }
        return n
    }, defaultTweetInReplyToDecorator = function (e) {
        var t = e.retweeted_status || e, n = "";
        return t.in_reply_to_status_id && t.in_reply_to_screen_name && (n = '<span class="jta-tweet-inreplyto"> <a class="jta-tweet-inreplyto-link" href="http://twitter.com/' + t.in_reply_to_screen_name + "/status/" + t.in_reply_to_status_id + '" target="_blank">in reply to ' + t.in_reply_to_screen_name + "</a></span>"), n
    }, defaultTweetRetweeterDecorator = function (e) {
        var t = "";
        if (e.retweeted_status) {
            var n = e.user ? e.user.screen_name : !1 || e.from_user, i = (e.retweeted_status.retweet_count || 0) - 1,
                a = '<a class="jta-tweet-retweeter-link" href="http://twitter.com/' + n + '" target="_blank">' + n + "</a>",
                r = " and " + i + (i > 1 ? " others" : " other");
            t = '<br/><span class="jta-tweet-retweeter">Retweeted by ' + a + (i > 0 ? r : "") + "</span>"
        }
        return t
    }, defaultConnectButtonDecorator = function () {
        return '<div class="jta-connect-button"></div>'
    }, defaultLoginInfoDecorator = function () {
        return '<div class="jta-login-info"></div>'
    }, defaultLoginInfoContentDecorator = function (e, t) {
        var n = "";
        if (t.isConnected()) {
            var i = t.currentUser.data("screen_name"), a = t.currentUser.data("profile_image_url");
            n = '<div class="jta-login-info-profile-image"><a href="http://twitter.com/' + i + '" target="_blank"><img src="' + a + '" alt="' + i + '" title="' + i + '"/></a></div><div class="jta-login-info-block"><div class="jta-login-info-screen-name"><a href="http://twitter.com/' + i + '" target="_blank">' + i + '</a></div><div class="jta-login-info-sign-out">Sign out</div></div><div class="jta-clear">&nbsp;</div>'
        }
        return n
    }, defaultFollowButtonDecorator = function () {
        return '<div class="jta-follow-button"></div>'
    }, defaultTweetBoxDecorator = function () {
        return '<div class="jta-tweet-box"></div>'
    }, defaultLinkDecorator = function (e) {
        return e ? e.replace(/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi, '<a href="$1" class="jta-tweet-a jta-tweet-link" target="_blank" rel="nofollow">$1</a>') : ""
    }, defaultUsernameDecorator = function (e) {
        return isAnywherePresent() ? e : e.replace(/@([a-zA-Z0-9_]+)/gi, '@<a href="http://twitter.com/$1" class="jta-tweet-a twitter-anywhere-user" target="_blank" rel="nofollow">$1</a>')
    }, defaultHashtagDecorator = function (e) {
        return e.replace(/#([a-zA-Z0-9_]+)/gi, '<a href="https://twitter.com/search?q=%23$1" class="jta-tweet-a jta-tweet-hashtag" title="#$1" target="_blank" rel="nofollow">#$1</a>')
    }, defaultLoadingDecorator = function () {
        return '<li class="jta-loading" rel="localize[Loading]">loading ...</li>'
    }, defaultErrorDecorator = function (e) {
        return '<li class="jta-error" rel="localize[TweetError]">ERROR: ' + e + "</li>"
    }, defaultNoDataDecorator = function () {
        return '<li class="jta-nodata" rel="localize[NoData]">No data</li>'
    }, defaultTweetFilter = function () {
        return !0
    }, defaultTweetVisualizer = function (e, t, n) {
        e[n](t)
    }, defaultLoadingIndicatorVisualizer = function (e, t, n, i) {
        defaultVisualizer(e, t, "append", "fadeIn", 600, "fadeOut", 200, i)
    }, defaultAutorefreshTriggerVisualizer = function (e, t, n, i) {
        defaultVisualizer(e, t, "prepend", "slideDown", 600, "fadeOut", 200, i)
    }, defaultVisualizer = function (e, t, n, i, a, r, s, o) {
        var l = function () {
            o && o()
        };
        e ? (t.hide(), e[n](t), t[i](a, l)) : t[r](s, function () {
            t.remove(), l()
        })
    }, defaultOnDataRequestHandler = function () {
        return !0
    }, defaultOnRateLimitDataHandler = function () {
    }, updateLoginInfoElement = function (t, n) {
        t._loginInfoElement && t.loginInfoContentDecorator && (t._loginInfoElement.children().remove(), t._loginInfoElement.append(t.loginInfoContentDecorator(t, n)), e(t._baseSelector + " .jta-login-info-sign-out").bind("click", function () {
            twttr.anywhere.signOut()
        }))
    }, getFeedUrl = function () {
        return url = "../common/GetTweets.aspx"
    }, isAnywherePresent = function () {
        return "undefined" != typeof twttr
    }, clearTweetFeed = function (e) {
        e._tweetFeedElement && e._tweetFeedElement.empty()
    }, populateTweetFeed = function (t) {
        t.tweetDecorator && t._tweetFeedElement && getPagedTweets(t, function (t, n) {
            n._tweetFeedConfig._clearBeforePopulate && clearTweetFeed(n), hideLoadingIndicator(n, function () {
                e.each(t, function (t, i) {
                    n.tweetVisualizer(n._tweetFeedElement, e(n.tweetDecorator(i, n)), "append", n)
                }), n._tweetFeedConfig._noData && n.noDataDecorator && !n._tweetFeedConfig._noDataElement && (n._tweetFeedConfig._noDataElement = e(n.noDataDecorator(n)), n._tweetFeedElement.append(n._tweetFeedConfig._noDataElement)), n._tweetFeedConfig._clearBeforePopulate && n._tweetFeedElement.scrollTop(0), addHovercards(n), executeCompleted(n)
            })
        })
    }, populateTweetFeed2 = function (t) {
        t._tweetFeedElement && t._autorefreshTweetsCache.length > 0 && ("trigger-insert" == t._tweetFeedConfig.autorefresh.mode ? t._tweetFeedConfig.autorefresh._triggerElement ? t.tweetFeedAutorefreshTriggerContentDecorator && t._tweetFeedConfig.autorefresh._triggerElement.html(t.tweetFeedAutorefreshTriggerContentDecorator(t._autorefreshTweetsCache.length, t)) : t.tweetFeedAutorefreshTriggerDecorator && (t._tweetFeedConfig.autorefresh._triggerElement = e(t.tweetFeedAutorefreshTriggerDecorator(t._autorefreshTweetsCache.length, t)), t._tweetFeedConfig.autorefresh._triggerElement.bind("click", function () {
            t.autorefreshTriggerVisualizer(null, t._tweetFeedConfig.autorefresh._triggerElement, t, function () {
                insertTriggerTweets(t)
            }), t._tweetFeedConfig.autorefresh._triggerElement = null
        }), t.autorefreshTriggerVisualizer(t._tweetFeedElement, t._tweetFeedConfig.autorefresh._triggerElement, t)) : insertTriggerTweets(t))
    }, insertTriggerTweets = function (t) {
        if (t.tweetDecorator && t._autorefreshTweetsCache.length > 0) {
            for (; t._autorefreshTweetsCache.length > 0;) {
                var n = t._autorefreshTweetsCache.pop();
                t._tweetsCache.unshift(n), t._tweetFeedConfig.paging._offset++, t.tweetVisualizer(t._tweetFeedElement, e(t.tweetDecorator(n, t)), "prepend", t)
            }
            addHovercards(t)
        }
    }, addHovercards = function (e) {
        isAnywherePresent() && twttr.anywhere(function (t) {
            t(e._baseSelector + " .jta-tweet-list").hovercards({expanded: e._tweetFeedConfig.expandHovercards}), t(e._baseSelector + " .jta-tweet-profile-image img").hovercards({
                expanded: e._tweetFeedConfig.expandHovercards,
                username: function (e) {
                    return e.alt
                }
            }), t(e._baseSelector + " .jta-tweet-retweeter-link").hovercards({
                expanded: e._tweetFeedConfig.expandHovercards,
                username: function (e) {
                    return e.text
                }
            }), t(e._baseSelector + " .jta-tweet-user-screen-name-link").hovercards({
                expanded: e._tweetFeedConfig.expandHovercards,
                username: function (e) {
                    return e.text
                }
            }), t(e._baseSelector + " .jta-tweet-user-full-name-link").hovercards({
                expanded: e._tweetFeedConfig.expandHovercards,
                username: function (e) {
                    return e.name
                }
            })
        })
    }, populateAnywhereControls = function (t) {
        isAnywherePresent() && twttr.anywhere(function (n) {
            if (t.tweetBoxDecorator && n(t._baseSelector + " .jta-tweet-box").tweetBox(t._tweetBoxConfig), t.followButtonDecorator && n(t._baseSelector + " .jta-follow-button").followButton(t.username), t.connectButtonDecorator) {
                var i = e.extend({
                    authComplete: function () {
                        updateLoginInfoElement(t, n)
                    }, signOut: function () {
                        updateLoginInfoElement(t, n)
                    }
                }, t._connectButtonConfig);
                n(t._baseSelector + " .jta-connect-button").connectButton(i), updateLoginInfoElement(t, n)
            }
        })
    }, bindEventHandlers = function (t) {
        t.tweetFeedControlsDecorator && ("prev-next" == t._tweetFeedConfig.paging.mode ? (e(t._baseSelector + " .jta-tweet-list-controls-button-prev").bind("click", function () {
            !isLoading(t) && t._tweetFeedConfig.paging._offset > 0 && prevPage(t, !0)
        }), e(t._baseSelector + " .jta-tweet-list-controls-button-next").bind("click", function () {
            isLoading(t) || nextPage(t, !0)
        })) : "endless-scroll" == t._tweetFeedConfig.paging.mode ? t._tweetFeedElement.bind("scroll", function () {
            isLoading(t) || e(this)[0].scrollHeight - e(this).scrollTop() != e(this).outerHeight() || nextPage(t, !1)
        }) : e(t._baseSelector + " .jta-tweet-list-controls-button-more").bind("click", function () {
            isLoading(t) || nextPage(t, !1)
        }))
    }, nextPage = function (e, t) {
        doPage(e, t, Math.min(e._tweetFeedConfig.paging._offset + e._tweetFeedConfig.paging._limit, e._tweetsCache.length))
    }, prevPage = function (e, t) {
        doPage(e, t, Math.max(0, e._tweetFeedConfig.paging._offset - e._tweetFeedConfig.paging._limit))
    }, doPage = function (e, t, n) {
        e._tweetFeedConfig.paging._offset = n, e._tweetFeedConfig._clearBeforePopulate = t, populateTweetFeed(e)
    }, startAutorefresh = function (e) {
        "none" != e._tweetFeedConfig.autorefresh.mode && "prev-next" != e._tweetFeedConfig.paging.mode && 0 != e._tweetFeedConfig.autorefresh.duration && (e._tweetFeedConfig.autorefresh.duration < 0 || (new Date).getTime() - e._tweetFeedConfig.autorefresh._startTime <= 1e3 * e._tweetFeedConfig.autorefresh.duration) && window.setTimeout(function () {
            processAutorefresh(e)
        }, 1e3 * e._tweetFeedConfig.autorefresh.interval)
    }, stopAutorefresh = function (e) {
        e._tweetFeedConfig.autorefresh.duration = 0
    }, processAutorefresh = function (t) {
        0 != t._tweetFeedConfig.autorefresh.duration && (getRateLimitedData(t, !0, getFeedUrl(t, !1), function (t, n) {
            var i = (t.results || t).slice(0);
            return i.error ? void showError(n) : (i.reverse(), e.each(i, function (e, t) {
                isTweetInCache(t, n) || n.tweetFilter(t, n) && n._autorefreshTweetsCache.unshift(t)
            }), void populateTweetFeed2(n))
        }), startAutorefresh(t))
    }, startTimestampRefresh = function (e) {
        e.tweetTimestampDecorator && "object" == typeof e._tweetFeedConfig.showTimestamp && e._tweetFeedConfig.showTimestamp.refreshInterval > 0 && window.setTimeout(function () {
            processTimestampRefresh(e)
        }, 1e3 * e._tweetFeedConfig.showTimestamp.refreshInterval)
    }, processTimestampRefresh = function (t) {
        e.each(t._tweetFeedElement.find(".jta-tweet-timestamp-link"), function (n, i) {
            var a = e(i).attr("data-timestamp");
            e(i).html(t.tweetTimestampFormatter(a))
        }), startTimestampRefresh(t)
    }, isTweetInCache = function (e, t) {
        for (var n = t._tweetsCache.length, i = 0; n > i; i++) if (e.id == t._tweetsCache[i].id) return !0;
        return !1
    }, showLoadingIndicator = function (t) {
        t._tweetFeedElement && t.loadingDecorator && !t._loadingIndicatorElement && (t._loadingIndicatorElement = e(t.loadingDecorator(t)), t.loadingIndicatorVisualizer(t._tweetFeedElement, t._loadingIndicatorElement, t, null), t._tweetFeedElement.scrollTop(1e6))
    }, hideLoadingIndicator = function (e, t) {
        e._loadingIndicatorElement ? (e.loadingIndicatorVisualizer(null, e._loadingIndicatorElement, e, t), e._loadingIndicatorElement = null) : t && t()
    }, isLoading = function (e) {
        return null != e._loadingIndicatorElement
    }, formatDate = function (e) {
        return e.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i, "$1,$2$4$3")
    }, validateRange = function (e, t, n) {
        return t > e && (e = t), e > n && (e = n), e
    }, showError = function (e, t) {
        e.errorDecorator && e._tweetFeedElement && (hideLoadingIndicator(e, null), e._tweetFeedElement.append(e.errorDecorator(t, e))), executeCompleted(e)
    }, executeCompleted = function (e) {
        var t = window[e._tweetFeedConfig.completed], n = "function" == typeof t;
        n && t()
    }, getPagedTweets = function (e, t) {
        e._tweetFeedConfig._recLevel = 0, getRecPagedTweets(e, e._tweetFeedConfig.paging._offset, e._tweetFeedConfig.paging._limit, t)
    }, getRecPagedTweets = function (t, n, i, a) {
        if (++t._tweetFeedConfig._recLevel, n + i <= t._tweetsCache.length || t._tweetFeedConfig._recLevel > 3 || t._tweetFeedConfig._noData) {
            n + i > t._tweetsCache.length && (i = Math.max(0, t._tweetsCache.length - n));
            for (var r = [], s = 0; i > s; s++) r[s] = t._tweetsCache[n + s];
            a(r, t)
        } else ++t._tweetFeedConfig._pageParam, getRateLimitedData(t, !1, getFeedUrl(t, !0), function (t, r) {
            var s = t.results || t;
            if (0 == s.length) r._tweetFeedConfig._noData = !0; else {
                if (s.error) return void showError(r);
                e.each(s, function (e, t) {
                    t.id_str && (t.id = t.id_str), t.in_reply_to_status_id_str && (t.in_reply_to_status_id = t.in_reply_to_status_id_str), r._tweetFeedConfig._maxId || (r._tweetFeedConfig._maxId = t.id), r.tweetFilter(t, r) && r._tweetsCache.push(t)
                })
            }
            getRecPagedTweets(r, n, i, a)
        })
    }, getRateLimitedData = function (e, t, n, i) {
        getData(e, t, n, i)
    }, getData = function (t, n, i, a) {
        return t._stats.dataRequestCount++, t.onDataRequestHandler(t._stats, t) ? (n || showLoadingIndicator(t), void e.ajax({
            url: i,
            dataType: "json",
            type: "GET",
            timeout: 8e3,
            global: !1,
            error: function (e) {
                showError(t, e.Message)
            },
            success: function (e) {
                a(e, t)
            }
        })) : void hideLoadingIndicator(t, null)
    }
}(jQuery), define("jTweetsAnywhere", ["jquery"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)), function () {
    var e = this, t = e._, n = {}, i = Array.prototype, a = Object.prototype, r = Function.prototype, s = i.push,
        o = i.slice, l = i.concat, c = a.toString, d = a.hasOwnProperty, u = i.forEach, h = i.map, f = i.reduce,
        p = i.reduceRight, m = i.filter, g = i.every, v = i.some, _ = i.indexOf, b = i.lastIndexOf, y = Array.isArray,
        w = Object.keys, S = r.bind, C = function (e) {
            return e instanceof C ? e : this instanceof C ? void (this._wrapped = e) : new C(e)
        };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = C), exports._ = C) : e._ = C, C.VERSION = "1.6.0";
    var k = C.each = C.forEach = function (e, t, i) {
        if (null == e) return e;
        if (u && e.forEach === u) e.forEach(t, i); else if (e.length === +e.length) {
            for (var a = 0, r = e.length; r > a; a++) if (t.call(i, e[a], a, e) === n) return
        } else for (var s = C.keys(e), a = 0, r = s.length; r > a; a++) if (t.call(i, e[s[a]], s[a], e) === n) return;
        return e
    };
    C.map = C.collect = function (e, t, n) {
        var i = [];
        return null == e ? i : h && e.map === h ? e.map(t, n) : (k(e, function (e, a, r) {
            i.push(t.call(n, e, a, r))
        }), i)
    };
    var T = "Reduce of empty array with no initial value";
    C.reduce = C.foldl = C.inject = function (e, t, n, i) {
        var a = arguments.length > 2;
        if (null == e && (e = []), f && e.reduce === f) return i && (t = C.bind(t, i)), a ? e.reduce(t, n) : e.reduce(t);
        if (k(e, function (e, r, s) {
            a ? n = t.call(i, n, e, r, s) : (n = e, a = !0)
        }), !a) throw new TypeError(T);
        return n
    }, C.reduceRight = C.foldr = function (e, t, n, i) {
        var a = arguments.length > 2;
        if (null == e && (e = []), p && e.reduceRight === p) return i && (t = C.bind(t, i)), a ? e.reduceRight(t, n) : e.reduceRight(t);
        var r = e.length;
        if (r !== +r) {
            var s = C.keys(e);
            r = s.length
        }
        if (k(e, function (o, l, c) {
            l = s ? s[--r] : --r, a ? n = t.call(i, n, e[l], l, c) : (n = e[l], a = !0)
        }), !a) throw new TypeError(T);
        return n
    }, C.find = C.detect = function (e, t, n) {
        var i;
        return L(e, function (e, a, r) {
            return t.call(n, e, a, r) ? (i = e, !0) : void 0
        }), i
    }, C.filter = C.select = function (e, t, n) {
        var i = [];
        return null == e ? i : m && e.filter === m ? e.filter(t, n) : (k(e, function (e, a, r) {
            t.call(n, e, a, r) && i.push(e)
        }), i)
    }, C.reject = function (e, t, n) {
        return C.filter(e, function (e, i, a) {
            return !t.call(n, e, i, a)
        }, n)
    }, C.every = C.all = function (e, t, i) {
        t || (t = C.identity);
        var a = !0;
        return null == e ? a : g && e.every === g ? e.every(t, i) : (k(e, function (e, r, s) {
            return (a = a && t.call(i, e, r, s)) ? void 0 : n
        }), !!a)
    };
    var L = C.some = C.any = function (e, t, i) {
        t || (t = C.identity);
        var a = !1;
        return null == e ? a : v && e.some === v ? e.some(t, i) : (k(e, function (e, r, s) {
            return a || (a = t.call(i, e, r, s)) ? n : void 0
        }), !!a)
    };
    C.contains = C.include = function (e, t) {
        return null == e ? !1 : _ && e.indexOf === _ ? -1 != e.indexOf(t) : L(e, function (e) {
            return e === t
        })
    }, C.invoke = function (e, t) {
        var n = o.call(arguments, 2), i = C.isFunction(t);
        return C.map(e, function (e) {
            return (i ? t : e[t]).apply(e, n)
        })
    }, C.pluck = function (e, t) {
        return C.map(e, C.property(t))
    }, C.where = function (e, t) {
        return C.filter(e, C.matches(t))
    }, C.findWhere = function (e, t) {
        return C.find(e, C.matches(t))
    }, C.max = function (e, t, n) {
        if (!t && C.isArray(e) && e[0] === +e[0] && e.length < 65535) return Math.max.apply(Math, e);
        var i = -1 / 0, a = -1 / 0;
        return k(e, function (e, r, s) {
            var o = t ? t.call(n, e, r, s) : e;
            o > a && (i = e, a = o)
        }), i
    }, C.min = function (e, t, n) {
        if (!t && C.isArray(e) && e[0] === +e[0] && e.length < 65535) return Math.min.apply(Math, e);
        var i = 1 / 0, a = 1 / 0;
        return k(e, function (e, r, s) {
            var o = t ? t.call(n, e, r, s) : e;
            a > o && (i = e, a = o)
        }), i
    }, C.shuffle = function (e) {
        var t, n = 0, i = [];
        return k(e, function (e) {
            t = C.random(n++), i[n - 1] = i[t], i[t] = e
        }), i
    }, C.sample = function (e, t, n) {
        return null == t || n ? (e.length !== +e.length && (e = C.values(e)), e[C.random(e.length - 1)]) : C.shuffle(e).slice(0, Math.max(0, t))
    };
    var E = function (e) {
        return null == e ? C.identity : C.isFunction(e) ? e : C.property(e)
    };
    C.sortBy = function (e, t, n) {
        return t = E(t), C.pluck(C.map(e, function (e, i, a) {
            return {value: e, index: i, criteria: t.call(n, e, i, a)}
        }).sort(function (e, t) {
            var n = e.criteria, i = t.criteria;
            if (n !== i) {
                if (n > i || void 0 === n) return 1;
                if (i > n || void 0 === i) return -1
            }
            return e.index - t.index
        }), "value")
    };
    var M = function (e) {
        return function (t, n, i) {
            var a = {};
            return n = E(n), k(t, function (r, s) {
                var o = n.call(i, r, s, t);
                e(a, o, r)
            }), a
        }
    };
    C.groupBy = M(function (e, t, n) {
        C.has(e, t) ? e[t].push(n) : e[t] = [n]
    }), C.indexBy = M(function (e, t, n) {
        e[t] = n
    }), C.countBy = M(function (e, t) {
        C.has(e, t) ? e[t]++ : e[t] = 1
    }), C.sortedIndex = function (e, t, n, i) {
        n = E(n);
        for (var a = n.call(i, t), r = 0, s = e.length; s > r;) {
            var o = r + s >>> 1;
            n.call(i, e[o]) < a ? r = o + 1 : s = o
        }
        return r
    }, C.toArray = function (e) {
        return e ? C.isArray(e) ? o.call(e) : e.length === +e.length ? C.map(e, C.identity) : C.values(e) : []
    }, C.size = function (e) {
        return null == e ? 0 : e.length === +e.length ? e.length : C.keys(e).length
    }, C.first = C.head = C.take = function (e, t, n) {
        return null == e ? void 0 : null == t || n ? e[0] : 0 > t ? [] : o.call(e, 0, t)
    }, C.initial = function (e, t, n) {
        return o.call(e, 0, e.length - (null == t || n ? 1 : t))
    }, C.last = function (e, t, n) {
        return null == e ? void 0 : null == t || n ? e[e.length - 1] : o.call(e, Math.max(e.length - t, 0))
    }, C.rest = C.tail = C.drop = function (e, t, n) {
        return o.call(e, null == t || n ? 1 : t)
    }, C.compact = function (e) {
        return C.filter(e, C.identity)
    };
    var I = function (e, t, n) {
        return t && C.every(e, C.isArray) ? l.apply(n, e) : (k(e, function (e) {
            C.isArray(e) || C.isArguments(e) ? t ? s.apply(n, e) : I(e, t, n) : n.push(e)
        }), n)
    };
    C.flatten = function (e, t) {
        return I(e, t, [])
    }, C.without = function (e) {
        return C.difference(e, o.call(arguments, 1))
    }, C.partition = function (e, t) {
        var n = [], i = [];
        return k(e, function (e) {
            (t(e) ? n : i).push(e)
        }), [n, i]
    }, C.uniq = C.unique = function (e, t, n, i) {
        C.isFunction(t) && (i = n, n = t, t = !1);
        var a = n ? C.map(e, n, i) : e, r = [], s = [];
        return k(a, function (n, i) {
            (t ? i && s[s.length - 1] === n : C.contains(s, n)) || (s.push(n), r.push(e[i]))
        }), r
    }, C.union = function () {
        return C.uniq(C.flatten(arguments, !0))
    }, C.intersection = function (e) {
        var t = o.call(arguments, 1);
        return C.filter(C.uniq(e), function (e) {
            return C.every(t, function (t) {
                return C.contains(t, e)
            })
        })
    }, C.difference = function (e) {
        var t = l.apply(i, o.call(arguments, 1));
        return C.filter(e, function (e) {
            return !C.contains(t, e)
        })
    }, C.zip = function () {
        for (var e = C.max(C.pluck(arguments, "length").concat(0)), t = new Array(e), n = 0; e > n; n++) t[n] = C.pluck(arguments, "" + n);
        return t
    }, C.object = function (e, t) {
        if (null == e) return {};
        for (var n = {}, i = 0, a = e.length; a > i; i++) t ? n[e[i]] = t[i] : n[e[i][0]] = e[i][1];
        return n
    }, C.indexOf = function (e, t, n) {
        if (null == e) return -1;
        var i = 0, a = e.length;
        if (n) {
            if ("number" != typeof n) return i = C.sortedIndex(e, t), e[i] === t ? i : -1;
            i = 0 > n ? Math.max(0, a + n) : n
        }
        if (_ && e.indexOf === _) return e.indexOf(t, n);
        for (; a > i; i++) if (e[i] === t) return i;
        return -1
    }, C.lastIndexOf = function (e, t, n) {
        if (null == e) return -1;
        var i = null != n;
        if (b && e.lastIndexOf === b) return i ? e.lastIndexOf(t, n) : e.lastIndexOf(t);
        for (var a = i ? n : e.length; a--;) if (e[a] === t) return a;
        return -1
    }, C.range = function (e, t, n) {
        arguments.length <= 1 && (t = e || 0, e = 0), n = arguments[2] || 1;
        for (var i = Math.max(Math.ceil((t - e) / n), 0), a = 0, r = new Array(i); i > a;) r[a++] = e, e += n;
        return r
    };
    var P = function () {
    };
    C.bind = function (e, t) {
        var n, i;
        if (S && e.bind === S) return S.apply(e, o.call(arguments, 1));
        if (!C.isFunction(e)) throw new TypeError;
        return n = o.call(arguments, 2), i = function () {
            if (!(this instanceof i)) return e.apply(t, n.concat(o.call(arguments)));
            P.prototype = e.prototype;
            var a = new P;
            P.prototype = null;
            var r = e.apply(a, n.concat(o.call(arguments)));
            return Object(r) === r ? r : a
        }
    }, C.partial = function (e) {
        var t = o.call(arguments, 1);
        return function () {
            for (var n = 0, i = t.slice(), a = 0, r = i.length; r > a; a++) i[a] === C && (i[a] = arguments[n++]);
            for (; n < arguments.length;) i.push(arguments[n++]);
            return e.apply(this, i)
        }
    }, C.bindAll = function (e) {
        var t = o.call(arguments, 1);
        if (0 === t.length) throw new Error("bindAll must be passed function names");
        return k(t, function (t) {
            e[t] = C.bind(e[t], e)
        }), e
    }, C.memoize = function (e, t) {
        var n = {};
        return t || (t = C.identity), function () {
            var i = t.apply(this, arguments);
            return C.has(n, i) ? n[i] : n[i] = e.apply(this, arguments)
        }
    }, C.delay = function (e, t) {
        var n = o.call(arguments, 2);
        return setTimeout(function () {
            return e.apply(null, n)
        }, t)
    }, C.defer = function (e) {
        return C.delay.apply(C, [e, 1].concat(o.call(arguments, 1)))
    }, C.throttle = function (e, t, n) {
        var i, a, r, s = null, o = 0;
        n || (n = {});
        var l = function () {
            o = n.leading === !1 ? 0 : C.now(), s = null, r = e.apply(i, a), i = a = null
        };
        return function () {
            var c = C.now();
            o || n.leading !== !1 || (o = c);
            var d = t - (c - o);
            return i = this, a = arguments, 0 >= d ? (clearTimeout(s), s = null, o = c, r = e.apply(i, a), i = a = null) : s || n.trailing === !1 || (s = setTimeout(l, d)), r
        }
    }, C.debounce = function (e, t, n) {
        var i, a, r, s, o, l = function () {
            var c = C.now() - s;
            t > c ? i = setTimeout(l, t - c) : (i = null, n || (o = e.apply(r, a), r = a = null))
        };
        return function () {
            r = this, a = arguments, s = C.now();
            var c = n && !i;
            return i || (i = setTimeout(l, t)), c && (o = e.apply(r, a), r = a = null), o
        }
    }, C.once = function (e) {
        var t, n = !1;
        return function () {
            return n ? t : (n = !0, t = e.apply(this, arguments), e = null, t)
        }
    }, C.wrap = function (e, t) {
        return C.partial(t, e)
    }, C.compose = function () {
        var e = arguments;
        return function () {
            for (var t = arguments, n = e.length - 1; n >= 0; n--) t = [e[n].apply(this, t)];
            return t[0]
        }
    }, C.after = function (e, t) {
        return function () {
            return --e < 1 ? t.apply(this, arguments) : void 0
        }
    }, C.keys = function (e) {
        if (!C.isObject(e)) return [];
        if (w) return w(e);
        var t = [];
        for (var n in e) C.has(e, n) && t.push(n);
        return t
    }, C.values = function (e) {
        for (var t = C.keys(e), n = t.length, i = new Array(n), a = 0; n > a; a++) i[a] = e[t[a]];
        return i
    }, C.pairs = function (e) {
        for (var t = C.keys(e), n = t.length, i = new Array(n), a = 0; n > a; a++) i[a] = [t[a], e[t[a]]];
        return i
    }, C.invert = function (e) {
        for (var t = {}, n = C.keys(e), i = 0, a = n.length; a > i; i++) t[e[n[i]]] = n[i];
        return t
    }, C.functions = C.methods = function (e) {
        var t = [];
        for (var n in e) C.isFunction(e[n]) && t.push(n);
        return t.sort()
    }, C.extend = function (e) {
        return k(o.call(arguments, 1), function (t) {
            if (t) for (var n in t) e[n] = t[n]
        }), e
    }, C.pick = function (e) {
        var t = {}, n = l.apply(i, o.call(arguments, 1));
        return k(n, function (n) {
            n in e && (t[n] = e[n])
        }), t
    }, C.omit = function (e) {
        var t = {}, n = l.apply(i, o.call(arguments, 1));
        for (var a in e) C.contains(n, a) || (t[a] = e[a]);
        return t
    }, C.defaults = function (e) {
        return k(o.call(arguments, 1), function (t) {
            if (t) for (var n in t) void 0 === e[n] && (e[n] = t[n])
        }), e
    }, C.clone = function (e) {
        return C.isObject(e) ? C.isArray(e) ? e.slice() : C.extend({}, e) : e
    }, C.tap = function (e, t) {
        return t(e), e
    };
    var D = function (e, t, n, i) {
        if (e === t) return 0 !== e || 1 / e == 1 / t;
        if (null == e || null == t) return e === t;
        e instanceof C && (e = e._wrapped), t instanceof C && (t = t._wrapped);
        var a = c.call(e);
        if (a != c.call(t)) return !1;
        switch (a) {
            case"[object String]":
                return e == String(t);
            case"[object Number]":
                return e != +e ? t != +t : 0 == e ? 1 / e == 1 / t : e == +t;
            case"[object Date]":
            case"[object Boolean]":
                return +e == +t;
            case"[object RegExp]":
                return e.source == t.source && e.global == t.global && e.multiline == t.multiline && e.ignoreCase == t.ignoreCase
        }
        if ("object" != typeof e || "object" != typeof t) return !1;
        for (var r = n.length; r--;) if (n[r] == e) return i[r] == t;
        var s = e.constructor, o = t.constructor;
        if (s !== o && !(C.isFunction(s) && s instanceof s && C.isFunction(o) && o instanceof o) && "constructor" in e && "constructor" in t) return !1;
        n.push(e), i.push(t);
        var l = 0, d = !0;
        if ("[object Array]" == a) {
            if (l = e.length, d = l == t.length) for (; l-- && (d = D(e[l], t[l], n, i));) ;
        } else {
            for (var u in e) if (C.has(e, u) && (l++, !(d = C.has(t, u) && D(e[u], t[u], n, i)))) break;
            if (d) {
                for (u in t) if (C.has(t, u) && !l--) break;
                d = !l
            }
        }
        return n.pop(), i.pop(), d
    };
    C.isEqual = function (e, t) {
        return D(e, t, [], [])
    }, C.isEmpty = function (e) {
        if (null == e) return !0;
        if (C.isArray(e) || C.isString(e)) return 0 === e.length;
        for (var t in e) if (C.has(e, t)) return !1;
        return !0
    }, C.isElement = function (e) {
        return !(!e || 1 !== e.nodeType)
    }, C.isArray = y || function (e) {
        return "[object Array]" == c.call(e)
    }, C.isObject = function (e) {
        return e === Object(e)
    }, k(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function (e) {
        C["is" + e] = function (t) {
            return c.call(t) == "[object " + e + "]"
        }
    }), C.isArguments(arguments) || (C.isArguments = function (e) {
        return !(!e || !C.has(e, "callee"))
    }), "function" != typeof /./ && (C.isFunction = function (e) {
        return "function" == typeof e
    }), C.isFinite = function (e) {
        return isFinite(e) && !isNaN(parseFloat(e))
    }, C.isNaN = function (e) {
        return C.isNumber(e) && e != +e
    }, C.isBoolean = function (e) {
        return e === !0 || e === !1 || "[object Boolean]" == c.call(e)
    }, C.isNull = function (e) {
        return null === e
    }, C.isUndefined = function (e) {
        return void 0 === e
    }, C.has = function (e, t) {
        return d.call(e, t)
    }, C.noConflict = function () {
        return e._ = t, this
    }, C.identity = function (e) {
        return e
    }, C.constant = function (e) {
        return function () {
            return e
        }
    }, C.property = function (e) {
        return function (t) {
            return t[e]
        }
    }, C.matches = function (e) {
        return function (t) {
            if (t === e) return !0;
            for (var n in e) if (e[n] !== t[n]) return !1;
            return !0
        }
    }, C.times = function (e, t, n) {
        for (var i = Array(Math.max(0, e)), a = 0; e > a; a++) i[a] = t.call(n, a);
        return i
    }, C.random = function (e, t) {
        return null == t && (t = e, e = 0), e + Math.floor(Math.random() * (t - e + 1))
    }, C.now = Date.now || function () {
        return (new Date).getTime()
    };
    var A = {escape: {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;"}};
    A.unescape = C.invert(A.escape);
    var R = {
        escape: new RegExp("[" + C.keys(A.escape).join("") + "]", "g"),
        unescape: new RegExp("(" + C.keys(A.unescape).join("|") + ")", "g")
    };
    C.each(["escape", "unescape"], function (e) {
        C[e] = function (t) {
            return null == t ? "" : ("" + t).replace(R[e], function (t) {
                return A[e][t]
            })
        }
    }), C.result = function (e, t) {
        if (null == e) return void 0;
        var n = e[t];
        return C.isFunction(n) ? n.call(e) : n
    }, C.mixin = function (e) {
        k(C.functions(e), function (t) {
            var n = C[t] = e[t];
            C.prototype[t] = function () {
                var e = [this._wrapped];
                return s.apply(e, arguments), U.call(this, n.apply(C, e))
            }
        })
    };
    var x = 0;
    C.uniqueId = function (e) {
        var t = ++x + "";
        return e ? e + t : t
    }, C.templateSettings = {evaluate: /<%([\s\S]+?)%>/g, interpolate: /<%=([\s\S]+?)%>/g, escape: /<%-([\s\S]+?)%>/g};
    var N = /(.)^/, O = {"'": "'", "\\": "\\", "\r": "r", "\n": "n", "	": "t", "\u2028": "u2028", "\u2029": "u2029"},
        F = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    C.template = function (e, t, n) {
        var i;
        n = C.defaults({}, n, C.templateSettings);
        var a = new RegExp([(n.escape || N).source, (n.interpolate || N).source, (n.evaluate || N).source].join("|") + "|$", "g"),
            r = 0, s = "__p+='";
        e.replace(a, function (t, n, i, a, o) {
            return s += e.slice(r, o).replace(F, function (e) {
                return "\\" + O[e]
            }), n && (s += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'"), i && (s += "'+\n((__t=(" + i + "))==null?'':__t)+\n'"), a && (s += "';\n" + a + "\n__p+='"), r = o + t.length, t
        }), s += "';\n", n.variable || (s = "with(obj||{}){\n" + s + "}\n"), s = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + s + "return __p;\n";
        try {
            i = new Function(n.variable || "obj", "_", s)
        } catch (o) {
            throw o.source = s, o
        }
        if (t) return i(t, C);
        var l = function (e) {
            return i.call(this, e, C)
        };
        return l.source = "function(" + (n.variable || "obj") + "){\n" + s + "}", l
    }, C.chain = function (e) {
        return C(e).chain()
    };
    var U = function (e) {
        return this._chain ? C(e).chain() : e
    };
    C.mixin(C), k(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (e) {
        var t = i[e];
        C.prototype[e] = function () {
            var n = this._wrapped;
            return t.apply(n, arguments), "shift" != e && "splice" != e || 0 !== n.length || delete n[0], U.call(this, n)
        }
    }), k(["concat", "join", "slice"], function (e) {
        var t = i[e];
        C.prototype[e] = function () {
            return U.call(this, t.apply(this._wrapped, arguments))
        }
    }), C.extend(C.prototype, {
        chain: function () {
            return this._chain = !0, this
        }, value: function () {
            return this._wrapped
        }
    }), "function" == typeof define && define.amd && define("underscore", [], function () {
        return C
    })
}.call(this), function (e, t) {
    if ("function" == typeof define && define.amd) define("backbone", ["underscore", "jquery", "exports"], function (n, i, a) {
        e.Backbone = t(e, a, n, i)
    }); else if ("undefined" != typeof exports) {
        var n = require("underscore");
        t(e, exports, n)
    } else e.Backbone = t(e, {}, e._, e.jQuery || e.Zepto || e.ender || e.$)
}(this, function (e, t, n, i) {
    {
        var a = e.Backbone, r = [], s = (r.push, r.slice);
        r.splice
    }
    t.VERSION = "1.1.2", t.$ = i, t.noConflict = function () {
        return e.Backbone = a, this
    }, t.emulateHTTP = !1, t.emulateJSON = !1;
    var o = t.Events = {
        on: function (e, t, n) {
            if (!c(this, "on", e, [t, n]) || !t) return this;
            this._events || (this._events = {});
            var i = this._events[e] || (this._events[e] = []);
            return i.push({callback: t, context: n, ctx: n || this}), this
        }, once: function (e, t, i) {
            if (!c(this, "once", e, [t, i]) || !t) return this;
            var a = this, r = n.once(function () {
                a.off(e, r), t.apply(this, arguments)
            });
            return r._callback = t, this.on(e, r, i)
        }, off: function (e, t, i) {
            var a, r, s, o, l, d, u, h;
            if (!this._events || !c(this, "off", e, [t, i])) return this;
            if (!e && !t && !i) return this._events = void 0, this;
            for (o = e ? [e] : n.keys(this._events), l = 0, d = o.length; d > l; l++) if (e = o[l], s = this._events[e]) {
                if (this._events[e] = a = [], t || i) for (u = 0, h = s.length; h > u; u++) r = s[u], (t && t !== r.callback && t !== r.callback._callback || i && i !== r.context) && a.push(r);
                a.length || delete this._events[e]
            }
            return this
        }, trigger: function (e) {
            if (!this._events) return this;
            var t = s.call(arguments, 1);
            if (!c(this, "trigger", e, t)) return this;
            var n = this._events[e], i = this._events.all;
            return n && d(n, t), i && d(i, arguments), this
        }, stopListening: function (e, t, i) {
            var a = this._listeningTo;
            if (!a) return this;
            var r = !t && !i;
            i || "object" != typeof t || (i = this), e && ((a = {})[e._listenId] = e);
            for (var s in a) e = a[s], e.off(t, i, this), (r || n.isEmpty(e._events)) && delete this._listeningTo[s];
            return this
        }
    }, l = /\s+/, c = function (e, t, n, i) {
        if (!n) return !0;
        if ("object" == typeof n) {
            for (var a in n) e[t].apply(e, [a, n[a]].concat(i));
            return !1
        }
        if (l.test(n)) {
            for (var r = n.split(l), s = 0, o = r.length; o > s; s++) e[t].apply(e, [r[s]].concat(i));
            return !1
        }
        return !0
    }, d = function (e, t) {
        var n, i = -1, a = e.length, r = t[0], s = t[1], o = t[2];
        switch (t.length) {
            case 0:
                for (; ++i < a;) (n = e[i]).callback.call(n.ctx);
                return;
            case 1:
                for (; ++i < a;) (n = e[i]).callback.call(n.ctx, r);
                return;
            case 2:
                for (; ++i < a;) (n = e[i]).callback.call(n.ctx, r, s);
                return;
            case 3:
                for (; ++i < a;) (n = e[i]).callback.call(n.ctx, r, s, o);
                return;
            default:
                for (; ++i < a;) (n = e[i]).callback.apply(n.ctx, t);
                return
        }
    }, u = {listenTo: "on", listenToOnce: "once"};
    n.each(u, function (e, t) {
        o[t] = function (t, i, a) {
            var r = this._listeningTo || (this._listeningTo = {}), s = t._listenId || (t._listenId = n.uniqueId("l"));
            return r[s] = t, a || "object" != typeof i || (a = this), t[e](i, a, this), this
        }
    }), o.bind = o.on, o.unbind = o.off, n.extend(t, o);
    var h = t.Model = function (e, t) {
        var i = e || {};
        t || (t = {}), this.cid = n.uniqueId("c"), this.attributes = {}, t.collection && (this.collection = t.collection), t.parse && (i = this.parse(i, t) || {}), i = n.defaults({}, i, n.result(this, "defaults")), this.set(i, t), this.changed = {}, this.initialize.apply(this, arguments)
    };
    n.extend(h.prototype, o, {
        changed: null, validationError: null, idAttribute: "id", initialize: function () {
        }, toJSON: function () {
            return n.clone(this.attributes)
        }, sync: function () {
            return t.sync.apply(this, arguments)
        }, get: function (e) {
            return this.attributes[e]
        }, escape: function (e) {
            return n.escape(this.get(e))
        }, has: function (e) {
            return null != this.get(e)
        }, set: function (e, t, i) {
            var a, r, s, o, l, c, d, u;
            if (null == e) return this;
            if ("object" == typeof e ? (r = e, i = t) : (r = {})[e] = t, i || (i = {}), !this._validate(r, i)) return !1;
            s = i.unset, l = i.silent, o = [], c = this._changing, this._changing = !0, c || (this._previousAttributes = n.clone(this.attributes), this.changed = {}), u = this.attributes, d = this._previousAttributes, this.idAttribute in r && (this.id = r[this.idAttribute]);
            for (a in r) t = r[a], n.isEqual(u[a], t) || o.push(a), n.isEqual(d[a], t) ? delete this.changed[a] : this.changed[a] = t, s ? delete u[a] : u[a] = t;
            if (!l) {
                o.length && (this._pending = i);
                for (var h = 0, f = o.length; f > h; h++) this.trigger("change:" + o[h], this, u[o[h]], i)
            }
            if (c) return this;
            if (!l) for (; this._pending;) i = this._pending, this._pending = !1, this.trigger("change", this, i);
            return this._pending = !1, this._changing = !1, this
        }, unset: function (e, t) {
            return this.set(e, void 0, n.extend({}, t, {unset: !0}))
        }, clear: function (e) {
            var t = {};
            for (var i in this.attributes) t[i] = void 0;
            return this.set(t, n.extend({}, e, {unset: !0}))
        }, hasChanged: function (e) {
            return null == e ? !n.isEmpty(this.changed) : n.has(this.changed, e)
        }, changedAttributes: function (e) {
            if (!e) return this.hasChanged() ? n.clone(this.changed) : !1;
            var t, i = !1, a = this._changing ? this._previousAttributes : this.attributes;
            for (var r in e) n.isEqual(a[r], t = e[r]) || ((i || (i = {}))[r] = t);
            return i
        }, previous: function (e) {
            return null != e && this._previousAttributes ? this._previousAttributes[e] : null
        }, previousAttributes: function () {
            return n.clone(this._previousAttributes)
        }, fetch: function (e) {
            e = e ? n.clone(e) : {}, void 0 === e.parse && (e.parse = !0);
            var t = this, i = e.success;
            return e.success = function (n) {
                return t.set(t.parse(n, e), e) ? (i && i(t, n, e), void t.trigger("sync", t, n, e)) : !1
            }, F(this, e), this.sync("read", this, e)
        }, save: function (e, t, i) {
            var a, r, s, o = this.attributes;
            if (null == e || "object" == typeof e ? (a = e, i = t) : (a = {})[e] = t, i = n.extend({validate: !0}, i), a && !i.wait) {
                if (!this.set(a, i)) return !1
            } else if (!this._validate(a, i)) return !1;
            a && i.wait && (this.attributes = n.extend({}, o, a)), void 0 === i.parse && (i.parse = !0);
            var l = this, c = i.success;
            return i.success = function (e) {
                l.attributes = o;
                var t = l.parse(e, i);
                return i.wait && (t = n.extend(a || {}, t)), n.isObject(t) && !l.set(t, i) ? !1 : (c && c(l, e, i), void l.trigger("sync", l, e, i))
            }, F(this, i), r = this.isNew() ? "create" : i.patch ? "patch" : "update", "patch" === r && (i.attrs = a), s = this.sync(r, this, i), a && i.wait && (this.attributes = o), s
        }, destroy: function (e) {
            e = e ? n.clone(e) : {};
            var t = this, i = e.success, a = function () {
                t.trigger("destroy", t, t.collection, e)
            };
            if (e.success = function (n) {
                (e.wait || t.isNew()) && a(), i && i(t, n, e), t.isNew() || t.trigger("sync", t, n, e)
            }, this.isNew()) return e.success(), !1;
            F(this, e);
            var r = this.sync("delete", this, e);
            return e.wait || a(), r
        }, url: function () {
            var e = n.result(this, "urlRoot") || n.result(this.collection, "url") || O();
            return this.isNew() ? e : e.replace(/([^\/])$/, "$1/") + encodeURIComponent(this.id)
        }, parse: function (e) {
            return e
        }, clone: function () {
            return new this.constructor(this.attributes)
        }, isNew: function () {
            return !this.has(this.idAttribute)
        }, isValid: function (e) {
            return this._validate({}, n.extend(e || {}, {validate: !0}))
        }, _validate: function (e, t) {
            if (!t.validate || !this.validate) return !0;
            e = n.extend({}, this.attributes, e);
            var i = this.validationError = this.validate(e, t) || null;
            return i ? (this.trigger("invalid", this, i, n.extend(t, {validationError: i})), !1) : !0
        }
    });
    var f = ["keys", "values", "pairs", "invert", "pick", "omit"];
    n.each(f, function (e) {
        h.prototype[e] = function () {
            var t = s.call(arguments);
            return t.unshift(this.attributes), n[e].apply(n, t)
        }
    });
    var p = t.Collection = function (e, t) {
        t || (t = {}), t.model && (this.model = t.model), void 0 !== t.comparator && (this.comparator = t.comparator), this._reset(), this.initialize.apply(this, arguments), e && this.reset(e, n.extend({silent: !0}, t))
    }, m = {add: !0, remove: !0, merge: !0}, g = {add: !0, remove: !1};
    n.extend(p.prototype, o, {
        model: h, initialize: function () {
        }, toJSON: function (e) {
            return this.map(function (t) {
                return t.toJSON(e)
            })
        }, sync: function () {
            return t.sync.apply(this, arguments)
        }, add: function (e, t) {
            return this.set(e, n.extend({merge: !1}, t, g))
        }, remove: function (e, t) {
            var i = !n.isArray(e);
            e = i ? [e] : n.clone(e), t || (t = {});
            var a, r, s, o;
            for (a = 0, r = e.length; r > a; a++) o = e[a] = this.get(e[a]), o && (delete this._byId[o.id], delete this._byId[o.cid], s = this.indexOf(o), this.models.splice(s, 1), this.length--, t.silent || (t.index = s, o.trigger("remove", o, this, t)), this._removeReference(o, t));
            return i ? e[0] : e
        }, set: function (e, t) {
            t = n.defaults({}, t, m), t.parse && (e = this.parse(e, t));
            var i = !n.isArray(e);
            e = i ? e ? [e] : [] : n.clone(e);
            var a, r, s, o, l, c, d, u = t.at, f = this.model, p = this.comparator && null == u && t.sort !== !1,
                g = n.isString(this.comparator) ? this.comparator : null, v = [], _ = [], b = {}, y = t.add,
                w = t.merge, S = t.remove, C = !p && y && S ? [] : !1;
            for (a = 0, r = e.length; r > a; a++) {
                if (l = e[a] || {}, s = l instanceof h ? o = l : l[f.prototype.idAttribute || "id"], c = this.get(s)) S && (b[c.cid] = !0), w && (l = l === o ? o.attributes : l, t.parse && (l = c.parse(l, t)), c.set(l, t), p && !d && c.hasChanged(g) && (d = !0)), e[a] = c; else if (y) {
                    if (o = e[a] = this._prepareModel(l, t), !o) continue;
                    v.push(o), this._addReference(o, t)
                }
                o = c || o, !C || !o.isNew() && b[o.id] || C.push(o), b[o.id] = !0
            }
            if (S) {
                for (a = 0, r = this.length; r > a; ++a) b[(o = this.models[a]).cid] || _.push(o);
                _.length && this.remove(_, t)
            }
            if (v.length || C && C.length) if (p && (d = !0), this.length += v.length, null != u) for (a = 0, r = v.length; r > a; a++) this.models.splice(u + a, 0, v[a]); else {
                C && (this.models.length = 0);
                var k = C || v;
                for (a = 0, r = k.length; r > a; a++) this.models.push(k[a])
            }
            if (d && this.sort({silent: !0}), !t.silent) {
                for (a = 0, r = v.length; r > a; a++) (o = v[a]).trigger("add", o, this, t);
                (d || C && C.length) && this.trigger("sort", this, t)
            }
            return i ? e[0] : e
        }, reset: function (e, t) {
            t || (t = {});
            for (var i = 0, a = this.models.length; a > i; i++) this._removeReference(this.models[i], t);
            return t.previousModels = this.models, this._reset(), e = this.add(e, n.extend({silent: !0}, t)), t.silent || this.trigger("reset", this, t), e
        }, push: function (e, t) {
            return this.add(e, n.extend({at: this.length}, t))
        }, pop: function (e) {
            var t = this.at(this.length - 1);
            return this.remove(t, e), t
        }, unshift: function (e, t) {
            return this.add(e, n.extend({at: 0}, t))
        }, shift: function (e) {
            var t = this.at(0);
            return this.remove(t, e), t
        }, slice: function () {
            return s.apply(this.models, arguments)
        }, get: function (e) {
            return null == e ? void 0 : this._byId[e] || this._byId[e.id] || this._byId[e.cid]
        }, at: function (e) {
            return this.models[e]
        }, where: function (e, t) {
            return n.isEmpty(e) ? t ? void 0 : [] : this[t ? "find" : "filter"](function (t) {
                for (var n in e) if (e[n] !== t.get(n)) return !1;
                return !0
            })
        }, findWhere: function (e) {
            return this.where(e, !0)
        }, sort: function (e) {
            if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
            return e || (e = {}), n.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(n.bind(this.comparator, this)), e.silent || this.trigger("sort", this, e), this
        }, pluck: function (e) {
            return n.invoke(this.models, "get", e)
        }, fetch: function (e) {
            e = e ? n.clone(e) : {}, void 0 === e.parse && (e.parse = !0);
            var t = e.success, i = this;
            return e.success = function (n) {
                var a = e.reset ? "reset" : "set";
                i[a](n, e), t && t(i, n, e), i.trigger("sync", i, n, e)
            }, F(this, e), this.sync("read", this, e)
        }, create: function (e, t) {
            if (t = t ? n.clone(t) : {}, !(e = this._prepareModel(e, t))) return !1;
            t.wait || this.add(e, t);
            var i = this, a = t.success;
            return t.success = function (e, n) {
                t.wait && i.add(e, t), a && a(e, n, t)
            }, e.save(null, t), e
        }, parse: function (e) {
            return e
        }, clone: function () {
            return new this.constructor(this.models)
        }, _reset: function () {
            this.length = 0, this.models = [], this._byId = {}
        }, _prepareModel: function (e, t) {
            if (e instanceof h) return e;
            t = t ? n.clone(t) : {}, t.collection = this;
            var i = new this.model(e, t);
            return i.validationError ? (this.trigger("invalid", this, i.validationError, t), !1) : i
        }, _addReference: function (e) {
            this._byId[e.cid] = e, null != e.id && (this._byId[e.id] = e), e.collection || (e.collection = this), e.on("all", this._onModelEvent, this)
        }, _removeReference: function (e) {
            this === e.collection && delete e.collection, e.off("all", this._onModelEvent, this)
        }, _onModelEvent: function (e, t, n, i) {
            ("add" !== e && "remove" !== e || n === this) && ("destroy" === e && this.remove(t, i), t && e === "change:" + t.idAttribute && (delete this._byId[t.previous(t.idAttribute)], null != t.id && (this._byId[t.id] = t)), this.trigger.apply(this, arguments))
        }
    });
    var v = ["forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain", "sample"];
    n.each(v, function (e) {
        p.prototype[e] = function () {
            var t = s.call(arguments);
            return t.unshift(this.models), n[e].apply(n, t)
        }
    });
    var _ = ["groupBy", "countBy", "sortBy", "indexBy"];
    n.each(_, function (e) {
        p.prototype[e] = function (t, i) {
            var a = n.isFunction(t) ? t : function (e) {
                return e.get(t)
            };
            return n[e](this.models, a, i)
        }
    });
    var b = t.View = function (e) {
        this.cid = n.uniqueId("view"), e || (e = {}), n.extend(this, n.pick(e, w)), this._ensureElement(), this.initialize.apply(this, arguments), this.delegateEvents()
    }, y = /^(\S+)\s*(.*)$/, w = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"];
    n.extend(b.prototype, o, {
        tagName: "div", $: function (e) {
            return this.$el.find(e)
        }, initialize: function () {
        }, render: function () {
            return this
        }, remove: function () {
            return this.$el.remove(), this.stopListening(), this
        }, setElement: function (e, n) {
            return this.$el && this.undelegateEvents(), this.$el = e instanceof t.$ ? e : t.$(e), this.el = this.$el[0], n !== !1 && this.delegateEvents(), this
        }, delegateEvents: function (e) {
            if (!e && !(e = n.result(this, "events"))) return this;
            this.undelegateEvents();
            for (var t in e) {
                var i = e[t];
                if (n.isFunction(i) || (i = this[e[t]]), i) {
                    var a = t.match(y), r = a[1], s = a[2];
                    i = n.bind(i, this), r += ".delegateEvents" + this.cid, "" === s ? this.$el.on(r, i) : this.$el.on(r, s, i)
                }
            }
            return this
        }, undelegateEvents: function () {
            return this.$el.off(".delegateEvents" + this.cid), this
        }, _ensureElement: function () {
            if (this.el) this.setElement(n.result(this, "el"), !1); else {
                var e = n.extend({}, n.result(this, "attributes"));
                this.id && (e.id = n.result(this, "id")), this.className && (e["class"] = n.result(this, "className"));
                var i = t.$("<" + n.result(this, "tagName") + ">").attr(e);
                this.setElement(i, !1)
            }
        }
    }), t.sync = function (e, i, a) {
        var r = C[e];
        n.defaults(a || (a = {}), {emulateHTTP: t.emulateHTTP, emulateJSON: t.emulateJSON});
        var s = {type: r, dataType: "json"};
        if (a.url || (s.url = n.result(i, "url") || O()), null != a.data || !i || "create" !== e && "update" !== e && "patch" !== e || (s.contentType = "application/json", s.data = JSON.stringify(a.attrs || i.toJSON(a))), a.emulateJSON && (s.contentType = "application/x-www-form-urlencoded", s.data = s.data ? {model: s.data} : {}), a.emulateHTTP && ("PUT" === r || "DELETE" === r || "PATCH" === r)) {
            s.type = "POST", a.emulateJSON && (s.data._method = r);
            var o = a.beforeSend;
            a.beforeSend = function (e) {
                return e.setRequestHeader("X-HTTP-Method-Override", r), o ? o.apply(this, arguments) : void 0
            }
        }
        "GET" === s.type || a.emulateJSON || (s.processData = !1), "PATCH" === s.type && S && (s.xhr = function () {
            return new ActiveXObject("Microsoft.XMLHTTP")
        });
        var l = a.xhr = t.ajax(n.extend(s, a));
        return i.trigger("request", i, l, a), l
    };
    var S = !("undefined" == typeof window || !window.ActiveXObject || window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent),
        C = {create: "POST", update: "PUT", patch: "PATCH", "delete": "DELETE", read: "GET"};
    t.ajax = function () {
        return t.$.ajax.apply(t.$, arguments)
    };
    var k = t.Router = function (e) {
        e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments)
    }, T = /\((.*?)\)/g, L = /(\(\?)?:\w+/g, E = /\*\w+/g, M = /[\-{}\[\]+?.,\\\^$|#\s]/g;
    n.extend(k.prototype, o, {
        initialize: function () {
        }, route: function (e, i, a) {
            n.isRegExp(e) || (e = this._routeToRegExp(e)), n.isFunction(i) && (a = i, i = ""), a || (a = this[i]);
            var r = this;
            return t.history.route(e, function (n) {
                var s = r._extractParameters(e, n);
                r.execute(a, s), r.trigger.apply(r, ["route:" + i].concat(s)), r.trigger("route", i, s), t.history.trigger("route", r, i, s)
            }), this
        }, execute: function (e, t) {
            e && e.apply(this, t)
        }, navigate: function (e, n) {
            return t.history.navigate(e, n), this
        }, _bindRoutes: function () {
            if (this.routes) {
                this.routes = n.result(this, "routes");
                for (var e, t = n.keys(this.routes); null != (e = t.pop());) this.route(e, this.routes[e])
            }
        }, _routeToRegExp: function (e) {
            return e = e.replace(M, "\\$&").replace(T, "(?:$1)?").replace(L, function (e, t) {
                return t ? e : "([^/?]+)"
            }).replace(E, "([^?]*?)"), new RegExp("^" + e + "(?:\\?([\\s\\S]*))?$")
        }, _extractParameters: function (e, t) {
            var i = e.exec(t).slice(1);
            return n.map(i, function (e, t) {
                return t === i.length - 1 ? e || null : e ? decodeURIComponent(e) : null
            })
        }
    });
    var I = t.History = function () {
        this.handlers = [], n.bindAll(this, "checkUrl"), "undefined" != typeof window && (this.location = window.location, this.history = window.history)
    }, P = /^[#\/]|\s+$/g, D = /^\/+|\/+$/g, A = /msie [\w.]+/, R = /\/$/, x = /#.*$/;
    I.started = !1, n.extend(I.prototype, o, {
        interval: 50, atRoot: function () {
            return this.location.pathname.replace(/[^\/]$/, "$&/") === this.root
        }, getHash: function (e) {
            var t = (e || this).location.href.match(/#(.*)$/);
            return t ? t[1] : ""
        }, getFragment: function (e, t) {
            if (null == e) if (this._hasPushState || !this._wantsHashChange || t) {
                e = decodeURI(this.location.pathname + this.location.search);
                var n = this.root.replace(R, "");
                e.indexOf(n) || (e = e.slice(n.length))
            } else e = this.getHash();
            return e.replace(P, "")
        }, start: function (e) {
            if (I.started) throw new Error("Backbone.history has already been started");
            I.started = !0, this.options = n.extend({root: "/"}, this.options, e), this.root = this.options.root, this._wantsHashChange = this.options.hashChange !== !1, this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
            var i = this.getFragment(), a = document.documentMode,
                r = A.exec(navigator.userAgent.toLowerCase()) && (!a || 7 >= a);
            if (this.root = ("/" + this.root + "/").replace(D, "/"), r && this._wantsHashChange) {
                var s = t.$('<iframe src="javascript:0" tabindex="-1">');
                this.iframe = s.hide().appendTo("body")[0].contentWindow, this.navigate(i)
            }
            this._hasPushState ? t.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !r ? t.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), this.fragment = i;
            var o = this.location;
            if (this._wantsHashChange && this._wantsPushState) {
                if (!this._hasPushState && !this.atRoot()) return this.fragment = this.getFragment(null, !0), this.location.replace(this.root + "#" + this.fragment), !0;
                this._hasPushState && this.atRoot() && o.hash && (this.fragment = this.getHash().replace(P, ""), this.history.replaceState({}, document.title, this.root + this.fragment))
            }
            return this.options.silent ? void 0 : this.loadUrl()
        }, stop: function () {
            t.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), this._checkUrlInterval && clearInterval(this._checkUrlInterval), I.started = !1
        }, route: function (e, t) {
            this.handlers.unshift({route: e, callback: t})
        }, checkUrl: function () {
            var e = this.getFragment();
            return e === this.fragment && this.iframe && (e = this.getFragment(this.getHash(this.iframe))), e === this.fragment ? !1 : (this.iframe && this.navigate(e), void this.loadUrl())
        }, loadUrl: function (e) {
            return e = this.fragment = this.getFragment(e), n.any(this.handlers, function (t) {
                return t.route.test(e) ? (t.callback(e), !0) : void 0
            })
        }, navigate: function (e, t) {
            if (!I.started) return !1;
            t && t !== !0 || (t = {trigger: !!t});
            var n = this.root + (e = this.getFragment(e || ""));
            if (e = e.replace(x, ""), this.fragment !== e) {
                if (this.fragment = e, "" === e && "/" !== n && (n = n.slice(0, -1)), this._hasPushState) this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, n); else {
                    if (!this._wantsHashChange) return this.location.assign(n);
                    this._updateHash(this.location, e, t.replace), this.iframe && e !== this.getFragment(this.getHash(this.iframe)) && (t.replace || this.iframe.document.open().close(), this._updateHash(this.iframe.location, e, t.replace))
                }
                return t.trigger ? this.loadUrl(e) : void 0
            }
        }, _updateHash: function (e, t, n) {
            if (n) {
                var i = e.href.replace(/(javascript:|#).*$/, "");
                e.replace(i + "#" + t)
            } else e.hash = "#" + t
        }
    }), t.history = new I;
    var N = function (e, t) {
        var i, a = this;
        i = e && n.has(e, "constructor") ? e.constructor : function () {
            return a.apply(this, arguments)
        }, n.extend(i, a, t);
        var r = function () {
            this.constructor = i
        };
        return r.prototype = a.prototype, i.prototype = new r, e && n.extend(i.prototype, e), i.__super__ = a.prototype, i
    };
    h.extend = p.extend = k.extend = b.extend = I.extend = N;
    var O = function () {
        throw new Error('A "url" property or function must be specified')
    }, F = function (e, t) {
        var n = t.error;
        t.error = function (i) {
            n && n(e, i, t), e.trigger("error", e, i, t)
        }
    };
    return t
}), define("utils", ["jquery", "backbone", "underscore", "moment"], function (e, t, n, i) {
    function a(e, t, n) {
        var i = null != e && void 0 != e && null != n && void 0 != n,
            a = i && e.toString().indexOf("RGSC_RAISE_UI_EVENT") > -1 && n.toString().indexOf('"EventId":3') > -1 && n.toString().indexOf('"Action":"Debug"') > -1;
        return a
    }

    function r(e, t) {
        var n = null != e && void 0 != e && null != t && void 0 != t,
            i = n && (e.toString().indexOf("RGSC_JS_FINISH_SIGN_IN") > -1 || e.toString().indexOf("RGSC_SIGN_IN") > -1) && t.toString().indexOf("json") > -1;
        return i
    }

    function s(e, t) {
        if ("undefined" == typeof e || !e.length) return e;
        var n = new RegExp("([\"'])(" + t + ")\\1 *: *([\"']).+?\\3", "ig"), i = "$1$2$1:$3***$3", a = e.replace(n, i),
            r = new RegExp("(%3C)(" + t + ")(%3E).+?(%3C%2F\\2%3E)", "ig");
        return i = "$1$2$3***$4", a.replace(r, i)
    }

    globals.headerHeight = "63px", globals.headerHeightBtm = "60px";
    var o = {};
    o.initDownloaderLauncher = function () {
        e("#launcherStyle").find(".headerText").html(o.processLauncherText(globals.titleDisplayName))
    }, o.getAvatarUrl = function (e, t) {
        var n = "";
        return (32 == t || "32" == t) && (n = "32x32/"), (128 == t || "128" == t) && (n = "128x128/"), void 0 == e || "" == e || "undefined" == e || e.match(/default.png$/) ? globals.avatarUrl + n + "default.png" : globals.avatarUrl + n + o.getLastStringSegment(e, "/", 2)
    }, o.getScBaseUrl = function () {
        return globals.scBaseUrl || "http://socialclub.rockstargames.com/"
    }, o.getSecureScBaseUrl = function () {
        return o.getScBaseUrl().replace("http://", "https://")
    }, String.prototype.chunk = function (e) {
        for (var t = [], n = 0, i = this.length; i > n; n += e) t.push(this.substr(n, e));
        return t
    }, String.prototype.format = function () {
        var e = arguments;
        return this.replace(/{(\d+)}/g, function (t, n) {
            return void 0 != typeof e[n] ? e[n] : t
        })
    }, e.fn.preload = function () {
        this.each(function () {
            e("<img/>")[0].src = this
        })
    }, o.pubsub = n.extend({}, t.Events), Backbone.View.prototype.close = function () {
        this.remove(), this.off(), this.stopListening(), this.onClose && this.onClose()
    }, o.renderCompiledTemplate = function (e, t) {
        return t || (t = {}), t.scBaseUrl || (t.scBaseUrl = o.getScBaseUrl()), t.secureScBaseUrl || (t.secureScBaseUrl = o.getSecureScBaseUrl()), e(t)
    }, o.getApiUrl = function (e) {
        return void 0 != e && "/" == e.charAt(0) && (e = e.substr(1)), o.urlCombine(globals.apiUrl, e)
    }, o.isAjaxXml = function (e) {
        var t = e.dataTypes[0];
        return "xml" === t || "text" === t && "application/xml" === e.accepts.text
    }, o.ConvertDateString = function (e, t) {
        var n = parseInt(e);
        1e10 > n && (n *= 1e3);
        var i = new Date;
        i.setTime(n);
        var a, r = new Date(i.toLocaleString()), s = r.getDate();
        if (isNaN(s)) a = i.toLocaleString(); else {
            var o = r.getMonth();
            o++;
            var l = r.getFullYear();
            if (a = l + "-" + o + "-" + s, t) {
                var c = r.getHours(), d = r.getMinutes(), u = "AM";
                c > 11 && (u = "PM"), c > 12 && (c -= 12), 0 == c && (c = 12), 10 > c && (c = "0" + c), 10 > d && (d = "0" + d);
                var h = c + ":" + d + " " + u;
                a += " " + h
            }
        }
        return a
    }, o.localizedDate = function (e, t) {
        return i.lang(globals.titlelang), i(e).format(t)
    }, o.localizedDateFromUnix = function (e, t) {
        return i.lang(globals.titlelang), i.unix(e).format(t)
    }, o.stripRegion = function (e) {
        if ("undefined" == typeof e || !e.length) return e;
        switch (e) {
            case"pt-BR":
            case"es-MX":
                return e.replace(/-/, "_").toLowerCase();
            default:
                return e.split("-")[0]
        }
    }, o.toLower = function (e) {
        return null === e || "string" != typeof e ? e : e.toLowerCase()
    }, o.addCommas = function (e) {
        e = Math.round(e, 0), e += "";
        for (var t = e.split("."), n = t[0], i = /(\d+)(\d{3})/; i.test(n);) n = n.replace(i, "$1,$2");
        return n
    }, o.processLauncherText = function (e) {
        var t = /(https?:\/\/[^\s]+)/g;
        return o.jhtmlEncode(decodeURI(e)).replace(t, function (e) {
            return '<a class="RGSCLoadExt" href="' + e + '">' + e + "</a>"
        }).replace(/\r\n/g, "<br>")
    }, o.jsToDll = function (e) {
        return e.replace(/RGSC_/g, "RGSC_JS_") + "_ASYNC_RESULT"
    }, o.getCaretPosition = function (e) {
        var t = 0;
        if (document.selection) {
            e.focus();
            var n = document.selection.createRange();
            n.moveStart("character", -e.value.length), t = n.text.length
        } else (e.selectionStart || "0" == e.selectionStart) && (t = e.selectionStart);
        return t
    }, o.setCaretPosition = function (e, t) {
        if (e.setSelectionRange) e.focus(), e.setSelectionRange(t, t); else if (e.createTextRange) {
            var n = e.createTextRange();
            n.collapse(!0), n.moveEnd("character", t), n.moveStart("character", t), n.select()
        }
    }, o.getLastStringSegment = function (e, t, n) {
        if (e) {
            var i = e.split(t);
            return i.length > n ? i[i.length - 2] + t + i[i.length - 1] : e
        }
        return ""
    };
    var l = !1;
    return o.logType = {error: "error", debug: "debug"}, o.logController = {
        debug: "debug",
        friend: "friend",
        crew: "crew",
        profile: "profile",
        privacy: "privacy",
        messaging: "messaging",
        lanoire: "lan",
        mp3: "mp3",
        gta5: "gta5"
    }, o.WriteDebugLog = function (e, t, n, i, c, d) {
        if (!a(e, t, n) && (d || !r(e, t, n))) {
            var u = null != e && void 0 != e && null != n && void 0 != n && (e.toString().indexOf("RGSC_SET_TEXT_BOX_HAS_FOCUS") > -1 && n.toString().indexOf('"IsPassword":true') > -1 || n.toString().search(/["']password["'] *:/gi) > -1 || n.toString().search(/["']email["'] *:/gi) > -1);
            u && (n = s(n, "text"), n = s(n, "password"), n = s(n, "email"), n = s(n, "zipcode"));
            var h = o.formatLogData(e, t, n);
            if (l ? (null != console && void 0 != console && void 0 != console.log && console.log(e + ": " + t + "=" + n), o.UpdateDebugTable(h)) : o.pubsub.trigger("debug:UpdateDebugTable", h), globals.isLog) {
                var f = encodeURI((h.minutes + "," + h.seconds + "," + h.ms + "," + h.method + "," + h.key + "," + h.value).replace(/\"/g, "'"));
                o.pubsub.trigger("setupEnvUtils:launcherDebugEvent", f)
            }
            o.WriteErrorLogFile(h, i, c, d)
        }
    }, o.WriteDllLog = function (e, t, n, i, a) {
        "object" == typeof n && (n = JSON.stringify(n)), o.WriteDebugLog(e, t, n, i, a, !0)
    }, globals.debugLog = "", o.WriteErrorLogFile = function (t, n, i, a) {
        var r;
        i = i || o.logController.debug;
        var s = t.method;
        "undefined" != typeof t.key && t.key.length && (s += " | " + t.key), "undefined" != typeof t.value && t.value.length && (s += ": " + t.value), !globals.logJs || n !== o.logType.error && "Error" !== t.key || (r = '{ "logData":"' + encodeURIComponent(s) + '" }', e.ajax({
            type: "POST",
            url: o.getApiUrl("api/" + i + "/writeerrorlogfile"),
            data: r,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            silentFail: !0,
            disableSlowMsg: !0
        })), globals.fullLog && a && (globals.debugLog += s + "; ")
    }, o.formatLogData = function (e, t, n) {
        var i = new Date;
        return {
            minutes: i.getMinutes(),
            seconds: i.getSeconds(),
            ms: i.getMilliseconds(),
            method: o.jhtmlEncode(e),
            key: o.jhtmlEncode(t),
            value: o.jhtmlEncode(n)
        }
    }, o.storeLanAuthValue = function (e) {
        globals.authTokenLan = e
    }, o.getLanAuthValue = function () {
        return globals.authTokenLan
    }, o.SortSelect = function (t) {
        var n = e(t);
        n.length > 0 && n.each(function (t, n) {
            var i = e(n).val(), a = e("option", e(n)), r = [];
            a.each(function () {
                r.push({val: e(this).val(), text: e(this).text()})
            }), r.humanSort();
            for (var t = 0, s = r.length; s > t; t++) e(a[t]).val(r[t].val).text(r[t].text);
            e(n).val(i)
        })
    }, o.jhtmlEncode = function (t) {
        return t ? e("<div />").text(t).html().replace("'", "&#39;") : ""
    }, o.jhtmlDecode = function (t) {
        return t ? e("<div />").html(t).text() : ""
    }, o.stripHTMLNewLine = function (e) {
        return e.replace(/<br ?\/?>/gi, "")
    }, Array.prototype.humanSort = function () {
        return this.sort(function (e, t) {
            var n, i;
            n = "- " == e.text.substring(0, 2) ? e.text.substring(2).split(/(\d+)/) : e.text.split(/(\d+)/), i = "- " == t.text.substring(0, 2) ? t.text.substring(2).split(/(\d+)/) : t.text.split(/(\d+)/);
            for (var a = 0; a < Math.max(n.length, i.length); a++) if (n[a] != i[a]) {
                var r = isNaN(parseInt(n[a], 10)) ? n[a] : parseInt(n[a], 10),
                    s = isNaN(parseInt(i[a], 10)) ? i[a] : parseInt(i[a], 10);
                return void 0 == r || void 0 == s ? n.length - i.length : s > r ? -1 : 1
            }
            return 0
        })
    }, o.createCookie = function (e, t, n) {
        if (n) {
            var i = new Date;
            i.setTime(i.getTime() + 24 * n * 60 * 60 * 1e3);
            var a = "; expires=" + i.toGMTString()
        } else var a = "";
        document.cookie = e + "=" + t + a + "; path=/"
    }, o.readCookie = function (e) {
        for (var t = e + "=", n = document.cookie.split(";"), i = 0; i < n.length; i++) {
            for (var a = n[i]; " " == a.charAt(0);) a = a.substring(1, a.length);
            if (0 == a.indexOf(t)) return a.substring(t.length, a.length)
        }
        return null
    }, o.eraseCookie = function (e) {
        o.createCookie(e, "", -1)
    }, o.getUrlVars = function (e) {
        for (var t, n = [], i = window.location.href.slice(window.location.href.indexOf("?") + 1).split("&"), a = 0; a < i.length; a++) {
            if (t = i[a].split("="), e === t[0]) return t[1];
            n.push(t[0]), n[t[0]] = t[1]
        }
        return null != e ? "" : n
    }, o.secondsToTime = function (e) {
        var t = Math.floor(e / 3600), n = e % 3600, i = Math.floor(n / 60), a = n % 60, r = Math.ceil(a);
        return t + "h " + i + "m " + r + "s"
    }, o.msToTime = function (e) {
        var t = e % 1e3;
        e = (e - t) / 1e3;
        var n = e % 60;
        e = (e - n) / 60;
        var i = e % 60, a = (e - i) / 60;
        return a + "h " + i + "m " + n + "s"
    }, o.metersToMiles = function (e) {
        var t = .000621371192 * e;
        t = t.toFixed(2);
        var n = 1 == t ? " mile" : " miles";
        return t.toString() + n
    }, o.kphToMph = function (e) {
        var t = .621371 * e;
        return t = t.toFixed(2), t.toString() + " mph"
    }, o.metersToFeet = function (e) {
        var t = 3.2808399 * e;
        t = t.toFixed(2);
        var n = " ft";
        return t.toString() + n
    }, o.formatMoney = function (e) {
        return e > 0 ? "$" + o.abbreviateNumber(e) : "$" + e
    }, o.formatMeters = function (e) {
        return e + " meters"
    }, o.formatPercent = function (e) {
        var t = parseInt(e, 10);
        return t.toString() + "%"
    }, o.decimalToInt = function (e) {
        if ("undefined" == typeof e || "" === e) return 0;
        var t = parseFloat(e);
        return Math.floor(t)
    }, o.abbreviateNumber = function (e) {
        var t, n = Math.pow(10, 12), i = Math.pow(10, 9), a = Math.pow(10, 6), r = Math.abs(e);
        if (1e3 > r) return e.toString();
        var s, o;
        return a > r ? (s = 1, o = "K") : i > r ? (s = 2, o = "M") : n > r ? (s = 3, o = "B") : (s = 4, o = "T"), t = parseFloat(e / Math.pow(1e3, s)).toFixed(1), t.toString() + o
    }, o.expandDashString = function (e) {
        var t = "";
        if (void 0 != e && e.indexOf("-") > -1) for (var n = e.split(","), i = 0; i < n.length; i++) if (n[i].indexOf("-") > 0) for (var a = n[i].split("-"), r = a[0]; r <= a[1]; r++) t += "," + r; else t += "," + n[i];
        return "" != t ? t.substring(1) : e
    }, o.pausecomp = function (e) {
        for (e += (new Date).getTime(); new Date < e;) ;
    }, o.countKeys = function (e) {
        var t = 0;
        for (var n in e) e.hasOwnProperty(n) && t++;
        return t
    }, o.isStoreV2Enabled = function () {
        var t = ["gta5"];
        return e.inArray(globals.titleName, t) > -1
    }, o.isEntitlementsV2Enabled = function () {
        var t = ["gta5"];
        return e.inArray(globals.titleName, t) > -1
    }, o.isLauncherV2Enabled = function () {
        var t = ["gta5"];
        return e.inArray(globals.titleName, t) > -1
    }, o.isSteamV2Enabled = function () {
        var t = ["gta5"];
        return e.inArray(globals.titleName, t) > -1
    }, o.areChunkedVoucherCodesEnabled = function () {
        var t = ["lanoire", "mp3", "gta5"];
        return e.inArray(globals.titleName, t) > -1
    }, o.isGameSupported = function () {
        var t = ["lanoire", "mp3", "gta5"];
        return e.inArray(globals.titleName, t) > -1
    }, o.crewImage404 = function () {
        var t = globals.baseUrl + "images/emblems/128x128/rockstar1.png";
        t != this.src && (this.src = t), e(this).off("error")
    }, o.removeLoading = function (t) {
        var n = e("#" + t).find(".loadingMask");
        n.length ? n.fadeOut(600, function () {
            e(this).find("span.loading").spinner("stop"), n.removeClass("noMask")
        }) : e("#" + t).find("span.loading").spinner("stop").fadeOut()
    }, o.getButtonHtml = function (e, t, n, i) {
        var a = "";
        return void 0 != i && i.length && (a = 'id="' + i + '"'), '<a href="#" {3} class="btn btnLarge {0} btn1" data="{1}">{2}</a>'.format(e || "", n.toString() || "", o.processLauncherText(t || ""), a)
    }, o.parseUri = function (e) {
        var t = document.createElement("a");
        return t.href = e, t
    }, o.urlCombine = function (e, t) {
        return void 0 != e && e.length ? void 0 != t && t.length ? ("/" == e.charAt(e.length - 1) && (e = e.substr(e, e.length - 1)), "/" == t.charAt(0) && (t = t.substr(1)), e + "/" + t) : e : t
    }, o.errorCode = function (e) {
        return e
    }, o.formatDob = function (e, t, n) {
        return void 0 === e || void 0 === t || void 0 === n ? "" : e + "-" + t + "-" + n
    }, o.GetBase64AvatarSrc = function (e) {
        return void 0 != e && "undefined" != e && e.length > 0 ? "data:image/png;base64," + e : o.getAvatarUrl()
    }, o.HideNonSteamFeatures = function () {
        "lanoire" != globals.titleName && "mp3" != globals.titleName && (e("#formSignIn #autoSignIn").closest("fieldset").hide(), e(".formSignIn #signinAction fieldset.options").hide(), e("#profileSettings").find(".editAutoSignIn").parent().hide(), e("#profileSettings").find(".deleteLocalUserData").parent().hide())
    }, o.ShowInvisibleMask = function (t, n) {
        void 0 != t && (t.each(function () {
            var t = e(this);
            t.data("maskTxt", t.text()), t.text(n)
        }), t.addClass("invisMask")), e("#invisibleMask").show(), setTimeout(o.HideInvisibleMask, 1e4)
    }, o.HideInvisibleMask = function () {
        var t = e(".invisMask");
        t.length && (t.each(function () {
            var t = e(this), n = t.data("maskTxt");
            void 0 != n && n.length && t.text(n)
        }), t.removeClass("invisMask")), e("#invisibleMask").hide()
    }, l && e(document).ready(function () {
        function t() {
            var t = e("#divDebugLog");
            return t.hasClass("tablet") ? (t.fadeToggle("fast", "linear"), !1) : (t.animate({top: globals.top}, 400, "easeOutQuart"), e("div.panel.active").css({top: globals.headerHeight}), !1)
        }

        e(document).on("click", "span.version", function () {
            var t = e("#divDebugLog"), n = e("div.panel.active");
            return o.WriteDebugLog("debugLog", "activePanel", n.attr("id")), t.hasClass("tablet") ? t.fadeToggle("fast", "linear") : (n.css({top: globals.top}), t.show().animate({top: globals.headerHeight}, 400, "easeOutQuart")), !1
        }), e("#debugReturnLink").click(t), e("#debugReload").click(function (e) {
            e.preventDefault(), window.location.reload()
        }), e("#debugFileName").val(+new Date), e("#debugSaveToFile").click(function () {
            var t = '{ "fileName":"' + e("#debugFileName").val() + '", "logData":"' + encodeURIComponent(e("#debugMessages").html().replace(/\"/g, "'").substring(0, 102300)) + '" }';
            return o.WriteDebugLog("debugSaveToFile", "fileName, length", e("#debugFileName").val() + "," + t.length), e.ajax({
                type: "POST",
                url: "api/debug/writedebuglogfile",
                data: t,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (t) {
                    o.WriteDebugLog("debugSaveToFile", "data", t), "undefined" == typeof t || null == t || (o.WriteDebugLog("debugSaveToFile", "FILE SAVED", e("#debugFileName").val()), e("#debugFileName").val(+new Date))
                },
                error: function (e, t, n) {
                    o.WriteDebugLog("debugSaveToFile", "ERROR", n), o.WriteDebugLog("debugSaveToFile", "ERROR status", t), o.WriteDebugLog("debugSaveToFile", "ERROR responseText", e.responseText, o.logType.error, o.logController[globals.titleName])
                }
            }), !1
        })
    }), o.UpdateDebugTable = function (t) {
        e("#debugTable").append("<tr><td>" + t.minutes + ":" + t.seconds + ":" + t.ms + " " + t.method + "</td><td>" + t.key + "</td><td>" + t.value + "</td></tr>")
    }, o.AjaxRequestAborted = function (e) {
        return "abort" === e || "TypeError: Cannot read property 'send' of undefined" === e
    }, o.ToggleCompareFriendElements = function (t) {
        "success" === t ? (e("#comparedFriendInfo").show(), e(".pointsFriend").show()) : (e("#comparedFriendInfo").hide(), e(".pointsFriend").hide())
    }, o.ActiveFriendsMenuId = function () {
        var t = e("#friendsPanel").find(".sideMenu a.on");
        return t.length ? t.attr("id") : void 0
    }, o
}), function (e, t) {
    function n(t, n) {
        var a, r, s, o = t.nodeName.toLowerCase();
        return "area" === o ? (a = t.parentNode, r = a.name, t.href && r && "map" === a.nodeName.toLowerCase() ? (s = e("img[usemap=#" + r + "]")[0], !!s && i(s)) : !1) : (/input|select|textarea|button|object/.test(o) ? !t.disabled : "a" === o ? t.href || n : n) && i(t)
    }

    function i(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function () {
            return "hidden" === e.css(this, "visibility")
        }).length
    }

    var a = 0, r = /^ui-id-\d+$/;
    e.ui = e.ui || {}, e.extend(e.ui, {
        version: "1.10.4",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), e.fn.extend({
        focus: function (t) {
            return function (n, i) {
                return "number" == typeof n ? this.each(function () {
                    var t = this;
                    setTimeout(function () {
                        e(t).focus(), i && i.call(t)
                    }, n)
                }) : t.apply(this, arguments)
            }
        }(e.fn.focus), scrollParent: function () {
            var t;
            return t = e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function () {
                return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
            }).eq(0) : this.parents().filter(function () {
                return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
            }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t
        }, zIndex: function (n) {
            if (n !== t) return this.css("zIndex", n);
            if (this.length) for (var i, a, r = e(this[0]); r.length && r[0] !== document;) {
                if (i = r.css("position"), ("absolute" === i || "relative" === i || "fixed" === i) && (a = parseInt(r.css("zIndex"), 10), !isNaN(a) && 0 !== a)) return a;
                r = r.parent()
            }
            return 0
        }, uniqueId: function () {
            return this.each(function () {
                this.id || (this.id = "ui-id-" + ++a)
            })
        }, removeUniqueId: function () {
            return this.each(function () {
                r.test(this.id) && e(this).removeAttr("id")
            })
        }
    }), e.extend(e.expr[":"], {
        data: e.expr.createPseudo ? e.expr.createPseudo(function (t) {
            return function (n) {
                return !!e.data(n, t)
            }
        }) : function (t, n, i) {
            return !!e.data(t, i[3])
        }, focusable: function (t) {
            return n(t, !isNaN(e.attr(t, "tabindex")))
        }, tabbable: function (t) {
            var i = e.attr(t, "tabindex"), a = isNaN(i);
            return (a || i >= 0) && n(t, !a)
        }
    }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function (n, i) {
        function a(t, n, i, a) {
            return e.each(r, function () {
                n -= parseFloat(e.css(t, "padding" + this)) || 0, i && (n -= parseFloat(e.css(t, "border" + this + "Width")) || 0), a && (n -= parseFloat(e.css(t, "margin" + this)) || 0)
            }), n
        }

        var r = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"], s = i.toLowerCase(), o = {
            innerWidth: e.fn.innerWidth,
            innerHeight: e.fn.innerHeight,
            outerWidth: e.fn.outerWidth,
            outerHeight: e.fn.outerHeight
        };
        e.fn["inner" + i] = function (n) {
            return n === t ? o["inner" + i].call(this) : this.each(function () {
                e(this).css(s, a(this, n) + "px")
            })
        }, e.fn["outer" + i] = function (t, n) {
            return "number" != typeof t ? o["outer" + i].call(this, t) : this.each(function () {
                e(this).css(s, a(this, t, !0, n) + "px")
            })
        }
    }), e.fn.addBack || (e.fn.addBack = function (e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function (t) {
        return function (n) {
            return arguments.length ? t.call(this, e.camelCase(n)) : t.call(this)
        }
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.support.selectstart = "onselectstart" in document.createElement("div"), e.fn.extend({
        disableSelection: function () {
            return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function (e) {
                e.preventDefault()
            })
        }, enableSelection: function () {
            return this.unbind(".ui-disableSelection")
        }
    }), e.extend(e.ui, {
        plugin: {
            add: function (t, n, i) {
                var a, r = e.ui[t].prototype;
                for (a in i) r.plugins[a] = r.plugins[a] || [], r.plugins[a].push([n, i[a]])
            }, call: function (e, t, n) {
                var i, a = e.plugins[t];
                if (a && e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType) for (i = 0; i < a.length; i++) e.options[a[i][0]] && a[i][1].apply(e.element, n)
            }
        }, hasScroll: function (t, n) {
            if ("hidden" === e(t).css("overflow")) return !1;
            var i = n && "left" === n ? "scrollLeft" : "scrollTop", a = !1;
            return t[i] > 0 ? !0 : (t[i] = 1, a = t[i] > 0, t[i] = 0, a)
        }
    })
}(jQuery), function (e, t) {
    var n = 0, i = Array.prototype.slice, a = e.cleanData;
    e.cleanData = function (t) {
        for (var n, i = 0; null != (n = t[i]); i++) try {
            e(n).triggerHandler("remove")
        } catch (r) {
        }
        a(t)
    }, e.widget = function (t, n, i) {
        var a, r, s, o, l = {}, c = t.split(".")[0];
        t = t.split(".")[1], a = c + "-" + t, i || (i = n, n = e.Widget), e.expr[":"][a.toLowerCase()] = function (t) {
            return !!e.data(t, a)
        }, e[c] = e[c] || {}, r = e[c][t], s = e[c][t] = function (e, t) {
            return this._createWidget ? void (arguments.length && this._createWidget(e, t)) : new s(e, t)
        }, e.extend(s, r, {
            version: i.version,
            _proto: e.extend({}, i),
            _childConstructors: []
        }), o = new n, o.options = e.widget.extend({}, o.options), e.each(i, function (t, i) {
            return e.isFunction(i) ? void (l[t] = function () {
                var e = function () {
                    return n.prototype[t].apply(this, arguments)
                }, a = function (e) {
                    return n.prototype[t].apply(this, e)
                };
                return function () {
                    var t, n = this._super, r = this._superApply;
                    return this._super = e, this._superApply = a, t = i.apply(this, arguments), this._super = n, this._superApply = r, t
                }
            }()) : void (l[t] = i)
        }), s.prototype = e.widget.extend(o, {widgetEventPrefix: r ? o.widgetEventPrefix || t : t}, l, {
            constructor: s,
            namespace: c,
            widgetName: t,
            widgetFullName: a
        }), r ? (e.each(r._childConstructors, function (t, n) {
            var i = n.prototype;
            e.widget(i.namespace + "." + i.widgetName, s, n._proto)
        }), delete r._childConstructors) : n._childConstructors.push(s), e.widget.bridge(t, s)
    }, e.widget.extend = function (n) {
        for (var a, r, s = i.call(arguments, 1), o = 0, l = s.length; l > o; o++) for (a in s[o]) r = s[o][a], s[o].hasOwnProperty(a) && r !== t && (n[a] = e.isPlainObject(r) ? e.isPlainObject(n[a]) ? e.widget.extend({}, n[a], r) : e.widget.extend({}, r) : r);
        return n
    }, e.widget.bridge = function (n, a) {
        var r = a.prototype.widgetFullName || n;
        e.fn[n] = function (s) {
            var o = "string" == typeof s, l = i.call(arguments, 1), c = this;
            return s = !o && l.length ? e.widget.extend.apply(null, [s].concat(l)) : s, this.each(o ? function () {
                var i, a = e.data(this, r);
                return a ? e.isFunction(a[s]) && "_" !== s.charAt(0) ? (i = a[s].apply(a, l), i !== a && i !== t ? (c = i && i.jquery ? c.pushStack(i.get()) : i, !1) : void 0) : e.error("no such method '" + s + "' for " + n + " widget instance") : e.error("cannot call methods on " + n + " prior to initialization; attempted to call method '" + s + "'")
            } : function () {
                var t = e.data(this, r);
                t ? t.option(s || {})._init() : e.data(this, r, new a(s, this))
            }), c
        }
    }, e.Widget = function () {
    }, e.Widget._childConstructors = [], e.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {disabled: !1, create: null},
        _createWidget: function (t, i) {
            i = e(i || this.defaultElement || this)[0], this.element = e(i), this.uuid = n++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this.bindings = e(), this.hoverable = e(), this.focusable = e(), i !== this && (e.data(i, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function (e) {
                    e.target === i && this.destroy()
                }
            }), this.document = e(i.style ? i.ownerDocument : i.document || i), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
        },
        _getCreateOptions: e.noop,
        _getCreateEventData: e.noop,
        _create: e.noop,
        _init: e.noop,
        destroy: function () {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
        },
        _destroy: e.noop,
        widget: function () {
            return this.element
        },
        option: function (n, i) {
            var a, r, s, o = n;
            if (0 === arguments.length) return e.widget.extend({}, this.options);
            if ("string" == typeof n) if (o = {}, a = n.split("."), n = a.shift(), a.length) {
                for (r = o[n] = e.widget.extend({}, this.options[n]), s = 0; s < a.length - 1; s++) r[a[s]] = r[a[s]] || {}, r = r[a[s]];
                if (n = a.pop(), 1 === arguments.length) return r[n] === t ? null : r[n];
                r[n] = i
            } else {
                if (1 === arguments.length) return this.options[n] === t ? null : this.options[n];
                o[n] = i
            }
            return this._setOptions(o), this
        },
        _setOptions: function (e) {
            var t;
            for (t in e) this._setOption(t, e[t]);
            return this
        },
        _setOption: function (e, t) {
            return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
        },
        enable: function () {
            return this._setOption("disabled", !1)
        },
        disable: function () {
            return this._setOption("disabled", !0)
        },
        _on: function (t, n, i) {
            var a, r = this;
            "boolean" != typeof t && (i = n, n = t, t = !1), i ? (n = a = e(n), this.bindings = this.bindings.add(n)) : (i = n, n = this.element, a = this.widget()), e.each(i, function (i, s) {
                function o() {
                    return t || r.options.disabled !== !0 && !e(this).hasClass("ui-state-disabled") ? ("string" == typeof s ? r[s] : s).apply(r, arguments) : void 0
                }

                "string" != typeof s && (o.guid = s.guid = s.guid || o.guid || e.guid++);
                var l = i.match(/^(\w+)\s*(.*)$/), c = l[1] + r.eventNamespace, d = l[2];
                d ? a.delegate(d, c, o) : n.bind(c, o)
            })
        },
        _off: function (e, t) {
            t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.unbind(t).undelegate(t)
        },
        _delay: function (e, t) {
            function n() {
                return ("string" == typeof e ? i[e] : e).apply(i, arguments)
            }

            var i = this;
            return setTimeout(n, t || 0)
        },
        _hoverable: function (t) {
            this.hoverable = this.hoverable.add(t), this._on(t, {
                mouseenter: function (t) {
                    e(t.currentTarget).addClass("ui-state-hover")
                }, mouseleave: function (t) {
                    e(t.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function (t) {
            this.focusable = this.focusable.add(t), this._on(t, {
                focusin: function (t) {
                    e(t.currentTarget).addClass("ui-state-focus")
                }, focusout: function (t) {
                    e(t.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function (t, n, i) {
            var a, r, s = this.options[t];
            if (i = i || {}, n = e.Event(n), n.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), n.target = this.element[0], r = n.originalEvent) for (a in r) a in n || (n[a] = r[a]);
            return this.element.trigger(n, i), !(e.isFunction(s) && s.apply(this.element[0], [n].concat(i)) === !1 || n.isDefaultPrevented())
        }
    }, e.each({show: "fadeIn", hide: "fadeOut"}, function (t, n) {
        e.Widget.prototype["_" + t] = function (i, a, r) {
            "string" == typeof a && (a = {effect: a});
            var s, o = a ? a === !0 || "number" == typeof a ? n : a.effect || n : t;
            a = a || {}, "number" == typeof a && (a = {duration: a}), s = !e.isEmptyObject(a), a.complete = r, a.delay && i.delay(a.delay), s && e.effects && e.effects.effect[o] ? i[t](a) : o !== t && i[o] ? i[o](a.duration, a.easing, r) : i.queue(function (n) {
                e(this)[t](), r && r.call(i[0]), n()
            })
        }
    })
}(jQuery), function (e) {
    var t = !1;
    e(document).mouseup(function () {
        t = !1
    }), e.widget("ui.mouse", {
        version: "1.10.4",
        options: {cancel: "input,textarea,button,select,option", distance: 1, delay: 0},
        _mouseInit: function () {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function (e) {
                return t._mouseDown(e)
            }).bind("click." + this.widgetName, function (n) {
                return !0 === e.data(n.target, t.widgetName + ".preventClickEvent") ? (e.removeData(n.target, t.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1) : void 0
            }), this.started = !1
        },
        _mouseDestroy: function () {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function (n) {
            if (!t) {
                this._mouseStarted && this._mouseUp(n), this._mouseDownEvent = n;
                var i = this, a = 1 === n.which,
                    r = "string" == typeof this.options.cancel && n.target.nodeName ? e(n.target).closest(this.options.cancel).length : !1;
                return a && !r && this._mouseCapture(n) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
                    i.mouseDelayMet = !0
                }, this.options.delay)), this._mouseDistanceMet(n) && this._mouseDelayMet(n) && (this._mouseStarted = this._mouseStart(n) !== !1, !this._mouseStarted) ? (n.preventDefault(), !0) : (!0 === e.data(n.target, this.widgetName + ".preventClickEvent") && e.removeData(n.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (e) {
                    return i._mouseMove(e)
                }, this._mouseUpDelegate = function (e) {
                    return i._mouseUp(e)
                }, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), n.preventDefault(), t = !0, !0)) : !0
            }
        },
        _mouseMove: function (t) {
            return e.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button ? this._mouseUp(t) : this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
        },
        _mouseUp: function (t) {
            return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), !1
        },
        _mouseDistanceMet: function (e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function () {
            return this.mouseDelayMet
        },
        _mouseStart: function () {
        },
        _mouseDrag: function () {
        },
        _mouseStop: function () {
        },
        _mouseCapture: function () {
            return !0
        }
    })
}(jQuery), function (e, t) {
    function n(e, t, n) {
        return [parseFloat(e[0]) * (f.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (f.test(e[1]) ? n / 100 : 1)]
    }

    function i(t, n) {
        return parseInt(e.css(t, n), 10) || 0
    }

    function a(t) {
        var n = t[0];
        return 9 === n.nodeType ? {
            width: t.width(),
            height: t.height(),
            offset: {top: 0, left: 0}
        } : e.isWindow(n) ? {
            width: t.width(),
            height: t.height(),
            offset: {top: t.scrollTop(), left: t.scrollLeft()}
        } : n.preventDefault ? {width: 0, height: 0, offset: {top: n.pageY, left: n.pageX}} : {
            width: t.outerWidth(),
            height: t.outerHeight(),
            offset: t.offset()
        }
    }

    e.ui = e.ui || {};
    var r, s = Math.max, o = Math.abs, l = Math.round, c = /left|center|right/, d = /top|center|bottom/,
        u = /[\+\-]\d+(\.[\d]+)?%?/, h = /^\w+/, f = /%$/, p = e.fn.position;
    e.position = {
        scrollbarWidth: function () {
            if (r !== t) return r;
            var n, i,
                a = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                s = a.children()[0];
            return e("body").append(a), n = s.offsetWidth, a.css("overflow", "scroll"), i = s.offsetWidth, n === i && (i = a[0].clientWidth), a.remove(), r = n - i
        }, getScrollInfo: function (t) {
            var n = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"),
                i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"),
                a = "scroll" === n || "auto" === n && t.width < t.element[0].scrollWidth,
                r = "scroll" === i || "auto" === i && t.height < t.element[0].scrollHeight;
            return {width: r ? e.position.scrollbarWidth() : 0, height: a ? e.position.scrollbarWidth() : 0}
        }, getWithinInfo: function (t) {
            var n = e(t || window), i = e.isWindow(n[0]), a = !!n[0] && 9 === n[0].nodeType;
            return {
                element: n,
                isWindow: i,
                isDocument: a,
                offset: n.offset() || {left: 0, top: 0},
                scrollLeft: n.scrollLeft(),
                scrollTop: n.scrollTop(),
                width: i ? n.width() : n.outerWidth(),
                height: i ? n.height() : n.outerHeight()
            }
        }
    }, e.fn.position = function (t) {
        if (!t || !t.of) return p.apply(this, arguments);
        t = e.extend({}, t);
        var r, f, m, g, v, _, b = e(t.of), y = e.position.getWithinInfo(t.within), w = e.position.getScrollInfo(y),
            S = (t.collision || "flip").split(" "), C = {};
        return _ = a(b), b[0].preventDefault && (t.at = "left top"), f = _.width, m = _.height, g = _.offset, v = e.extend({}, g), e.each(["my", "at"], function () {
            var e, n, i = (t[this] || "").split(" ");
            1 === i.length && (i = c.test(i[0]) ? i.concat(["center"]) : d.test(i[0]) ? ["center"].concat(i) : ["center", "center"]), i[0] = c.test(i[0]) ? i[0] : "center", i[1] = d.test(i[1]) ? i[1] : "center", e = u.exec(i[0]), n = u.exec(i[1]), C[this] = [e ? e[0] : 0, n ? n[0] : 0], t[this] = [h.exec(i[0])[0], h.exec(i[1])[0]]
        }), 1 === S.length && (S[1] = S[0]), "right" === t.at[0] ? v.left += f : "center" === t.at[0] && (v.left += f / 2), "bottom" === t.at[1] ? v.top += m : "center" === t.at[1] && (v.top += m / 2), r = n(C.at, f, m), v.left += r[0], v.top += r[1], this.each(function () {
            var a, c, d = e(this), u = d.outerWidth(), h = d.outerHeight(), p = i(this, "marginLeft"),
                _ = i(this, "marginTop"), k = u + p + i(this, "marginRight") + w.width,
                T = h + _ + i(this, "marginBottom") + w.height, L = e.extend({}, v),
                E = n(C.my, d.outerWidth(), d.outerHeight());
            "right" === t.my[0] ? L.left -= u : "center" === t.my[0] && (L.left -= u / 2), "bottom" === t.my[1] ? L.top -= h : "center" === t.my[1] && (L.top -= h / 2), L.left += E[0], L.top += E[1], e.support.offsetFractions || (L.left = l(L.left), L.top = l(L.top)), a = {
                marginLeft: p,
                marginTop: _
            }, e.each(["left", "top"], function (n, i) {
                e.ui.position[S[n]] && e.ui.position[S[n]][i](L, {
                    targetWidth: f,
                    targetHeight: m,
                    elemWidth: u,
                    elemHeight: h,
                    collisionPosition: a,
                    collisionWidth: k,
                    collisionHeight: T,
                    offset: [r[0] + E[0], r[1] + E[1]],
                    my: t.my,
                    at: t.at,
                    within: y,
                    elem: d
                })
            }), t.using && (c = function (e) {
                var n = g.left - L.left, i = n + f - u, a = g.top - L.top, r = a + m - h, l = {
                    target: {element: b, left: g.left, top: g.top, width: f, height: m},
                    element: {element: d, left: L.left, top: L.top, width: u, height: h},
                    horizontal: 0 > i ? "left" : n > 0 ? "right" : "center",
                    vertical: 0 > r ? "top" : a > 0 ? "bottom" : "middle"
                };
                u > f && o(n + i) < f && (l.horizontal = "center"), h > m && o(a + r) < m && (l.vertical = "middle"), l.important = s(o(n), o(i)) > s(o(a), o(r)) ? "horizontal" : "vertical", t.using.call(this, e, l)
            }), d.offset(e.extend(L, {using: c}))
        })
    }, e.ui.position = {
        fit: {
            left: function (e, t) {
                var n, i = t.within, a = i.isWindow ? i.scrollLeft : i.offset.left, r = i.width,
                    o = e.left - t.collisionPosition.marginLeft, l = a - o, c = o + t.collisionWidth - r - a;
                t.collisionWidth > r ? l > 0 && 0 >= c ? (n = e.left + l + t.collisionWidth - r - a, e.left += l - n) : e.left = c > 0 && 0 >= l ? a : l > c ? a + r - t.collisionWidth : a : l > 0 ? e.left += l : c > 0 ? e.left -= c : e.left = s(e.left - o, e.left)
            }, top: function (e, t) {
                var n, i = t.within, a = i.isWindow ? i.scrollTop : i.offset.top, r = t.within.height,
                    o = e.top - t.collisionPosition.marginTop, l = a - o, c = o + t.collisionHeight - r - a;
                t.collisionHeight > r ? l > 0 && 0 >= c ? (n = e.top + l + t.collisionHeight - r - a, e.top += l - n) : e.top = c > 0 && 0 >= l ? a : l > c ? a + r - t.collisionHeight : a : l > 0 ? e.top += l : c > 0 ? e.top -= c : e.top = s(e.top - o, e.top)
            }
        }, flip: {
            left: function (e, t) {
                var n, i, a = t.within, r = a.offset.left + a.scrollLeft, s = a.width,
                    l = a.isWindow ? a.scrollLeft : a.offset.left, c = e.left - t.collisionPosition.marginLeft,
                    d = c - l, u = c + t.collisionWidth - s - l,
                    h = "left" === t.my[0] ? -t.elemWidth : "right" === t.my[0] ? t.elemWidth : 0,
                    f = "left" === t.at[0] ? t.targetWidth : "right" === t.at[0] ? -t.targetWidth : 0,
                    p = -2 * t.offset[0];
                0 > d ? (n = e.left + h + f + p + t.collisionWidth - s - r, (0 > n || n < o(d)) && (e.left += h + f + p)) : u > 0 && (i = e.left - t.collisionPosition.marginLeft + h + f + p - l, (i > 0 || o(i) < u) && (e.left += h + f + p))
            }, top: function (e, t) {
                var n, i, a = t.within, r = a.offset.top + a.scrollTop, s = a.height,
                    l = a.isWindow ? a.scrollTop : a.offset.top, c = e.top - t.collisionPosition.marginTop, d = c - l,
                    u = c + t.collisionHeight - s - l, h = "top" === t.my[1],
                    f = h ? -t.elemHeight : "bottom" === t.my[1] ? t.elemHeight : 0,
                    p = "top" === t.at[1] ? t.targetHeight : "bottom" === t.at[1] ? -t.targetHeight : 0,
                    m = -2 * t.offset[1];
                0 > d ? (i = e.top + f + p + m + t.collisionHeight - s - r, e.top + f + p + m > d && (0 > i || i < o(d)) && (e.top += f + p + m)) : u > 0 && (n = e.top - t.collisionPosition.marginTop + f + p + m - l, e.top + f + p + m > u && (n > 0 || o(n) < u) && (e.top += f + p + m))
            }
        }, flipfit: {
            left: function () {
                e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments)
            }, top: function () {
                e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments)
            }
        }
    }, function () {
        var t, n, i, a, r, s = document.getElementsByTagName("body")[0], o = document.createElement("div");
        t = document.createElement(s ? "div" : "body"), i = {
            visibility: "hidden",
            width: 0,
            height: 0,
            border: 0,
            margin: 0,
            background: "none"
        }, s && e.extend(i, {position: "absolute", left: "-1000px", top: "-1000px"});
        for (r in i) t.style[r] = i[r];
        t.appendChild(o), n = s || document.documentElement, n.insertBefore(t, n.firstChild), o.style.cssText = "position: absolute; left: 10.7432222px;", a = e(o).offset().left, e.support.offsetFractions = a > 10 && 11 > a, t.innerHTML = "", n.removeChild(t)
    }()
}(jQuery), function (e) {
    e.widget("ui.autocomplete", {
        version: "1.10.4",
        defaultElement: "<input>",
        options: {
            appendTo: null,
            autoFocus: !1,
            delay: 300,
            minLength: 1,
            position: {my: "left top", at: "left bottom", collision: "none"},
            source: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            response: null,
            search: null,
            select: null
        },
        requestIndex: 0,
        pending: 0,
        _create: function () {
            var t, n, i, a = this.element[0].nodeName.toLowerCase(), r = "textarea" === a, s = "input" === a;
            this.isMultiLine = r ? !0 : s ? !1 : this.element.prop("isContentEditable"), this.valueMethod = this.element[r || s ? "val" : "text"], this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), this._on(this.element, {
                keydown: function (a) {
                    if (this.element.prop("readOnly")) return t = !0, i = !0, void (n = !0);
                    t = !1, i = !1, n = !1;
                    var r = e.ui.keyCode;
                    switch (a.keyCode) {
                        case r.PAGE_UP:
                            t = !0, this._move("previousPage", a);
                            break;
                        case r.PAGE_DOWN:
                            t = !0, this._move("nextPage", a);
                            break;
                        case r.UP:
                            t = !0, this._keyEvent("previous", a);
                            break;
                        case r.DOWN:
                            t = !0, this._keyEvent("next", a);
                            break;
                        case r.ENTER:
                        case r.NUMPAD_ENTER:
                            this.menu.active && (t = !0, a.preventDefault(), this.menu.select(a));
                            break;
                        case r.TAB:
                            this.menu.active && this.menu.select(a);
                            break;
                        case r.ESCAPE:
                            this.menu.element.is(":visible") && (this._value(this.term), this.close(a), a.preventDefault());
                            break;
                        default:
                            n = !0, this._searchTimeout(a)
                    }
                }, keypress: function (i) {
                    if (t) return t = !1, void ((!this.isMultiLine || this.menu.element.is(":visible")) && i.preventDefault());
                    if (!n) {
                        var a = e.ui.keyCode;
                        switch (i.keyCode) {
                            case a.PAGE_UP:
                                this._move("previousPage", i);
                                break;
                            case a.PAGE_DOWN:
                                this._move("nextPage", i);
                                break;
                            case a.UP:
                                this._keyEvent("previous", i);
                                break;
                            case a.DOWN:
                                this._keyEvent("next", i)
                        }
                    }
                }, input: function (e) {
                    return i ? (i = !1, void e.preventDefault()) : void this._searchTimeout(e)
                }, focus: function () {
                    this.selectedItem = null, this.previous = this._value()
                }, blur: function (e) {
                    return this.cancelBlur ? void delete this.cancelBlur : (clearTimeout(this.searching), this.close(e), void this._change(e))
                }
            }), this._initSource(), this.menu = e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role: null}).hide().data("ui-menu"), this._on(this.menu.element, {
                mousedown: function (t) {
                    t.preventDefault(), this.cancelBlur = !0, this._delay(function () {
                        delete this.cancelBlur
                    });
                    var n = this.menu.element[0];
                    e(t.target).closest(".ui-menu-item").length || this._delay(function () {
                        var t = this;
                        this.document.one("mousedown", function (i) {
                            i.target === t.element[0] || i.target === n || e.contains(n, i.target) || t.close()
                        })
                    })
                }, menufocus: function (t, n) {
                    if (this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type))) return this.menu.blur(), void this.document.one("mousemove", function () {
                        e(t.target).trigger(t.originalEvent)
                    });
                    var i = n.item.data("ui-autocomplete-item");
                    !1 !== this._trigger("focus", t, {item: i}) ? t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(i.value) : this.liveRegion.text(i.value)
                }, menuselect: function (e, t) {
                    var n = t.item.data("ui-autocomplete-item"), i = this.previous;
                    this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = i, this._delay(function () {
                        this.previous = i, this.selectedItem = n
                    })), !1 !== this._trigger("select", e, {item: n}) && this._value(n.value), this.term = this._value(), this.close(e), this.selectedItem = n
                }
            }), this.liveRegion = e("<span>", {
                role: "status",
                "aria-live": "polite"
            }).addClass("ui-helper-hidden-accessible").insertBefore(this.element), this._on(this.window, {
                beforeunload: function () {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _destroy: function () {
            clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove()
        },
        _setOption: function (e, t) {
            this._super(e, t), "source" === e && this._initSource(), "appendTo" === e && this.menu.element.appendTo(this._appendTo()), "disabled" === e && t && this.xhr && this.xhr.abort()
        },
        _appendTo: function () {
            var t = this.options.appendTo;
            return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t
        },
        _initSource: function () {
            var t, n, i = this;
            e.isArray(this.options.source) ? (t = this.options.source, this.source = function (n, i) {
                i(e.ui.autocomplete.filter(t, n.term))
            }) : "string" == typeof this.options.source ? (n = this.options.source, this.source = function (t, a) {
                i.xhr && i.xhr.abort(), i.xhr = e.ajax({
                    url: n, data: t, dataType: "json", success: function (e) {
                        a(e)
                    }, error: function () {
                        a([])
                    }
                })
            }) : this.source = this.options.source
        },
        _searchTimeout: function (e) {
            clearTimeout(this.searching), this.searching = this._delay(function () {
                this.term !== this._value() && (this.selectedItem = null, this.search(null, e))
            }, this.options.delay)
        },
        search: function (e, t) {
            return e = null != e ? e : this._value(), this.term = this._value(), e.length < this.options.minLength ? this.close(t) : this._trigger("search", t) !== !1 ? this._search(e) : void 0
        },
        _search: function (e) {
            this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({term: e}, this._response())
        },
        _response: function () {
            var t = ++this.requestIndex;
            return e.proxy(function (e) {
                t === this.requestIndex && this.__response(e), this.pending--, this.pending || this.element.removeClass("ui-autocomplete-loading")
            }, this)
        },
        __response: function (e) {
            e && (e = this._normalize(e)), this._trigger("response", null, {content: e}), !this.options.disabled && e && e.length && !this.cancelSearch ? (this._suggest(e), this._trigger("open")) : this._close()
        },
        close: function (e) {
            this.cancelSearch = !0, this._close(e)
        },
        _close: function (e) {
            this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", e))
        },
        _change: function (e) {
            this.previous !== this._value() && this._trigger("change", e, {item: this.selectedItem})
        },
        _normalize: function (t) {
            return t.length && t[0].label && t[0].value ? t : e.map(t, function (t) {
                return "string" == typeof t ? {label: t, value: t} : e.extend({
                    label: t.label || t.value,
                    value: t.value || t.label
                }, t)
            })
        },
        _suggest: function (t) {
            var n = this.menu.element.empty();
            this._renderMenu(n, t), this.isNewMenu = !0, this.menu.refresh(), n.show(), this._resizeMenu(), n.position(e.extend({of: this.element}, this.options.position)), this.options.autoFocus && this.menu.next()
        },
        _resizeMenu: function () {
            var e = this.menu.element;
            e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()))
        },
        _renderMenu: function (t, n) {
            var i = this;
            e.each(n, function (e, n) {
                i._renderItemData(t, n)
            })
        },
        _renderItemData: function (e, t) {
            return this._renderItem(e, t).data("ui-autocomplete-item", t)
        },
        _renderItem: function (t, n) {
            return e("<li>").append(e("<a>").text(n.label)).appendTo(t)
        },
        _move: function (e, t) {
            return this.menu.element.is(":visible") ? this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e) ? (this._value(this.term), void this.menu.blur()) : void this.menu[e](t) : void this.search(null, t)
        },
        widget: function () {
            return this.menu.element
        },
        _value: function () {
            return this.valueMethod.apply(this.element, arguments)
        },
        _keyEvent: function (e, t) {
            (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(e, t), t.preventDefault())
        }
    }), e.extend(e.ui.autocomplete, {
        escapeRegex: function (e) {
            return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
        }, filter: function (t, n) {
            var i = new RegExp(e.ui.autocomplete.escapeRegex(n), "i");
            return e.grep(t, function (e) {
                return i.test(e.label || e.value || e)
            })
        }
    }), e.widget("ui.autocomplete", e.ui.autocomplete, {
        options: {
            messages: {
                noResults: "No search results.",
                results: function (e) {
                    return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                }
            }
        }, __response: function (e) {
            var t;
            this._superApply(arguments), this.options.disabled || this.cancelSearch || (t = e && e.length ? this.options.messages.results(e.length) : this.options.messages.noResults, this.liveRegion.text(t))
        }
    })
}(jQuery), function (e) {
    e.widget("ui.menu", {
        version: "1.10.4",
        defaultElement: "<ul>",
        delay: 300,
        options: {
            icons: {submenu: "ui-icon-carat-1-e"},
            menus: "ul",
            position: {my: "left top", at: "right top"},
            role: "menu",
            blur: null,
            focus: null,
            select: null
        },
        _create: function () {
            this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                role: this.options.role,
                tabIndex: 0
            }).bind("click" + this.eventNamespace, e.proxy(function (e) {
                this.options.disabled && e.preventDefault()
            }, this)), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), this._on({
                "mousedown .ui-menu-item > a": function (e) {
                    e.preventDefault()
                }, "click .ui-state-disabled > a": function (e) {
                    e.preventDefault()
                }, "click .ui-menu-item:has(a)": function (t) {
                    var n = e(t.target).closest(".ui-menu-item");
                    !this.mouseHandled && n.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), n.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && e(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)))
                }, "mouseenter .ui-menu-item": function (t) {
                    var n = e(t.currentTarget);
                    n.siblings().children(".ui-state-active").removeClass("ui-state-active"), this.focus(t, n)
                }, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function (e, t) {
                    var n = this.active || this.element.children(".ui-menu-item").eq(0);
                    t || this.focus(e, n)
                }, blur: function (t) {
                    this._delay(function () {
                        e.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t)
                    })
                }, keydown: "_keydown"
            }), this.refresh(), this._on(this.document, {
                click: function (t) {
                    e(t.target).closest(".ui-menu").length || this.collapseAll(t), this.mouseHandled = !1
                }
            })
        },
        _destroy: function () {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () {
                var t = e(this);
                t.data("ui-menu-submenu-carat") && t.remove()
            }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")
        },
        _keydown: function (t) {
            function n(e) {
                return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
            }

            var i, a, r, s, o, l = !0;
            switch (t.keyCode) {
                case e.ui.keyCode.PAGE_UP:
                    this.previousPage(t);
                    break;
                case e.ui.keyCode.PAGE_DOWN:
                    this.nextPage(t);
                    break;
                case e.ui.keyCode.HOME:
                    this._move("first", "first", t);
                    break;
                case e.ui.keyCode.END:
                    this._move("last", "last", t);
                    break;
                case e.ui.keyCode.UP:
                    this.previous(t);
                    break;
                case e.ui.keyCode.DOWN:
                    this.next(t);
                    break;
                case e.ui.keyCode.LEFT:
                    this.collapse(t);
                    break;
                case e.ui.keyCode.RIGHT:
                    this.active && !this.active.is(".ui-state-disabled") && this.expand(t);
                    break;
                case e.ui.keyCode.ENTER:
                case e.ui.keyCode.SPACE:
                    this._activate(t);
                    break;
                case e.ui.keyCode.ESCAPE:
                    this.collapse(t);
                    break;
                default:
                    l = !1, a = this.previousFilter || "", r = String.fromCharCode(t.keyCode), s = !1, clearTimeout(this.filterTimer), r === a ? s = !0 : r = a + r, o = new RegExp("^" + n(r), "i"), i = this.activeMenu.children(".ui-menu-item").filter(function () {
                        return o.test(e(this).children("a").text())
                    }), i = s && -1 !== i.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : i, i.length || (r = String.fromCharCode(t.keyCode), o = new RegExp("^" + n(r), "i"), i = this.activeMenu.children(".ui-menu-item").filter(function () {
                        return o.test(e(this).children("a").text())
                    })), i.length ? (this.focus(t, i), i.length > 1 ? (this.previousFilter = r, this.filterTimer = this._delay(function () {
                        delete this.previousFilter
                    }, 1e3)) : delete this.previousFilter) : delete this.previousFilter
            }
            l && t.preventDefault()
        },
        _activate: function (e) {
            this.active.is(".ui-state-disabled") || (this.active.children("a[aria-haspopup='true']").length ? this.expand(e) : this.select(e))
        },
        refresh: function () {
            var t, n = this.options.icons.submenu, i = this.element.find(this.options.menus);
            this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length), i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({
                role: this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }).each(function () {
                var t = e(this), i = t.prev("a"),
                    a = e("<span>").addClass("ui-menu-icon ui-icon " + n).data("ui-menu-submenu-carat", !0);
                i.attr("aria-haspopup", "true").prepend(a), t.attr("aria-labelledby", i.attr("id"))
            }), t = i.add(this.element), t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({
                tabIndex: -1,
                role: this._itemRole()
            }), t.children(":not(.ui-menu-item)").each(function () {
                var t = e(this);
                /[^\-\u2014\u2013\s]/.test(t.text()) || t.addClass("ui-widget-content ui-menu-divider")
            }), t.children(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !e.contains(this.element[0], this.active[0]) && this.blur()
        },
        _itemRole: function () {
            return {menu: "menuitem", listbox: "option"}[this.options.role]
        },
        _setOption: function (e, t) {
            "icons" === e && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu), this._super(e, t)
        },
        focus: function (e, t) {
            var n, i;
            this.blur(e, e && "focus" === e.type), this._scrollIntoView(t), this.active = t.first(), i = this.active.children("a").addClass("ui-state-focus"), this.options.role && this.element.attr("aria-activedescendant", i.attr("id")), this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"), e && "keydown" === e.type ? this._close() : this.timer = this._delay(function () {
                this._close()
            }, this.delay), n = t.children(".ui-menu"), n.length && e && /^mouse/.test(e.type) && this._startOpening(n), this.activeMenu = t.parent(), this._trigger("focus", e, {item: t})
        },
        _scrollIntoView: function (t) {
            var n, i, a, r, s, o;
            this._hasScroll() && (n = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0, i = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0, a = t.offset().top - this.activeMenu.offset().top - n - i, r = this.activeMenu.scrollTop(), s = this.activeMenu.height(), o = t.height(), 0 > a ? this.activeMenu.scrollTop(r + a) : a + o > s && this.activeMenu.scrollTop(r + a - s + o))
        },
        blur: function (e, t) {
            t || clearTimeout(this.timer), this.active && (this.active.children("a").removeClass("ui-state-focus"), this.active = null, this._trigger("blur", e, {item: this.active}))
        },
        _startOpening: function (e) {
            clearTimeout(this.timer), "true" === e.attr("aria-hidden") && (this.timer = this._delay(function () {
                this._close(), this._open(e)
            }, this.delay))
        },
        _open: function (t) {
            var n = e.extend({of: this.active}, this.options.position);
            clearTimeout(this.timer), this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"), t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(n)
        },
        collapseAll: function (t, n) {
            clearTimeout(this.timer), this.timer = this._delay(function () {
                var i = n ? this.element : e(t && t.target).closest(this.element.find(".ui-menu"));
                i.length || (i = this.element), this._close(i), this.blur(t), this.activeMenu = i
            }, this.delay)
        },
        _close: function (e) {
            e || (e = this.active ? this.active.parent() : this.element), e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active")
        },
        collapse: function (e) {
            var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            t && t.length && (this._close(), this.focus(e, t))
        },
        expand: function (e) {
            var t = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
            t && t.length && (this._open(t.parent()), this._delay(function () {
                this.focus(e, t)
            }))
        },
        next: function (e) {
            this._move("next", "first", e)
        },
        previous: function (e) {
            this._move("prev", "last", e)
        },
        isFirstItem: function () {
            return this.active && !this.active.prevAll(".ui-menu-item").length
        },
        isLastItem: function () {
            return this.active && !this.active.nextAll(".ui-menu-item").length
        },
        _move: function (e, t, n) {
            var i;
            this.active && (i = "first" === e || "last" === e ? this.active["first" === e ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[e + "All"](".ui-menu-item").eq(0)), i && i.length && this.active || (i = this.activeMenu.children(".ui-menu-item")[t]()), this.focus(n, i)
        },
        nextPage: function (t) {
            var n, i, a;
            return this.active ? void (this.isLastItem() || (this._hasScroll() ? (i = this.active.offset().top, a = this.element.height(), this.active.nextAll(".ui-menu-item").each(function () {
                return n = e(this), n.offset().top - i - a < 0
            }), this.focus(t, n)) : this.focus(t, this.activeMenu.children(".ui-menu-item")[this.active ? "last" : "first"]()))) : void this.next(t)
        },
        previousPage: function (t) {
            var n, i, a;
            return this.active ? void (this.isFirstItem() || (this._hasScroll() ? (i = this.active.offset().top, a = this.element.height(), this.active.prevAll(".ui-menu-item").each(function () {
                return n = e(this), n.offset().top - i + a > 0
            }), this.focus(t, n)) : this.focus(t, this.activeMenu.children(".ui-menu-item").first()))) : void this.next(t)
        },
        _hasScroll: function () {
            return this.element.outerHeight() < this.element.prop("scrollHeight")
        },
        select: function (t) {
            this.active = this.active || e(t.target).closest(".ui-menu-item");
            var n = {item: this.active};
            this.active.has(".ui-menu").length || this.collapseAll(t, !0), this._trigger("select", t, n)
        }
    })
}(jQuery), function (e, t) {
    var n = "ui-effects-";
    e.effects = {effect: {}}, function (e, t) {
        function n(e, t, n) {
            var i = u[t.type] || {};
            return null == e ? n || !t.def ? null : t.def : (e = i.floor ? ~~e : parseFloat(e), isNaN(e) ? t.def : i.mod ? (e + i.mod) % i.mod : 0 > e ? 0 : i.max < e ? i.max : e)
        }

        function i(t) {
            var n = c(), i = n._rgba = [];
            return t = t.toLowerCase(), p(l, function (e, a) {
                var r, s = a.re.exec(t), o = s && a.parse(s), l = a.space || "rgba";
                return o ? (r = n[l](o), n[d[l].cache] = r[d[l].cache], i = n._rgba = r._rgba, !1) : void 0
            }), i.length ? ("0,0,0,0" === i.join() && e.extend(i, r.transparent), n) : r[t]
        }

        function a(e, t, n) {
            return n = (n + 1) % 1, 1 > 6 * n ? e + (t - e) * n * 6 : 1 > 2 * n ? t : 2 > 3 * n ? e + (t - e) * (2 / 3 - n) * 6 : e
        }

        var r,
            s = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
            o = /^([\-+])=\s*(\d+\.?\d*)/, l = [{
                re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                parse: function (e) {
                    return [e[1], e[2], e[3], e[4]]
                }
            }, {
                re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                parse: function (e) {
                    return [2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4]]
                }
            }, {
                re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/, parse: function (e) {
                    return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)]
                }
            }, {
                re: /#([a-f0-9])([a-f0-9])([a-f0-9])/, parse: function (e) {
                    return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)]
                }
            }, {
                re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                space: "hsla",
                parse: function (e) {
                    return [e[1], e[2] / 100, e[3] / 100, e[4]]
                }
            }], c = e.Color = function (t, n, i, a) {
                return new e.Color.fn.parse(t, n, i, a)
            }, d = {
                rgba: {
                    props: {
                        red: {idx: 0, type: "byte"},
                        green: {idx: 1, type: "byte"},
                        blue: {idx: 2, type: "byte"}
                    }
                },
                hsla: {
                    props: {
                        hue: {idx: 0, type: "degrees"},
                        saturation: {idx: 1, type: "percent"},
                        lightness: {idx: 2, type: "percent"}
                    }
                }
            }, u = {"byte": {floor: !0, max: 255}, percent: {max: 1}, degrees: {mod: 360, floor: !0}}, h = c.support = {},
            f = e("<p>")[0], p = e.each;
        f.style.cssText = "background-color:rgba(1,1,1,.5)", h.rgba = f.style.backgroundColor.indexOf("rgba") > -1, p(d, function (e, t) {
            t.cache = "_" + e, t.props.alpha = {idx: 3, type: "percent", def: 1}
        }), c.fn = e.extend(c.prototype, {
            parse: function (a, s, o, l) {
                if (a === t) return this._rgba = [null, null, null, null], this;
                (a.jquery || a.nodeType) && (a = e(a).css(s), s = t);
                var u = this, h = e.type(a), f = this._rgba = [];
                return s !== t && (a = [a, s, o, l], h = "array"), "string" === h ? this.parse(i(a) || r._default) : "array" === h ? (p(d.rgba.props, function (e, t) {
                    f[t.idx] = n(a[t.idx], t)
                }), this) : "object" === h ? (a instanceof c ? p(d, function (e, t) {
                    a[t.cache] && (u[t.cache] = a[t.cache].slice())
                }) : p(d, function (t, i) {
                    var r = i.cache;
                    p(i.props, function (e, t) {
                        if (!u[r] && i.to) {
                            if ("alpha" === e || null == a[e]) return;
                            u[r] = i.to(u._rgba)
                        }
                        u[r][t.idx] = n(a[e], t, !0)
                    }), u[r] && e.inArray(null, u[r].slice(0, 3)) < 0 && (u[r][3] = 1, i.from && (u._rgba = i.from(u[r])))
                }), this) : void 0
            }, is: function (e) {
                var t = c(e), n = !0, i = this;
                return p(d, function (e, a) {
                    var r, s = t[a.cache];
                    return s && (r = i[a.cache] || a.to && a.to(i._rgba) || [], p(a.props, function (e, t) {
                        return null != s[t.idx] ? n = s[t.idx] === r[t.idx] : void 0
                    })), n
                }), n
            }, _space: function () {
                var e = [], t = this;
                return p(d, function (n, i) {
                    t[i.cache] && e.push(n)
                }), e.pop()
            }, transition: function (e, t) {
                var i = c(e), a = i._space(), r = d[a], s = 0 === this.alpha() ? c("transparent") : this,
                    o = s[r.cache] || r.to(s._rgba), l = o.slice();
                return i = i[r.cache], p(r.props, function (e, a) {
                    var r = a.idx, s = o[r], c = i[r], d = u[a.type] || {};
                    null !== c && (null === s ? l[r] = c : (d.mod && (c - s > d.mod / 2 ? s += d.mod : s - c > d.mod / 2 && (s -= d.mod)), l[r] = n((c - s) * t + s, a)))
                }), this[a](l)
            }, blend: function (t) {
                if (1 === this._rgba[3]) return this;
                var n = this._rgba.slice(), i = n.pop(), a = c(t)._rgba;
                return c(e.map(n, function (e, t) {
                    return (1 - i) * a[t] + i * e
                }))
            }, toRgbaString: function () {
                var t = "rgba(", n = e.map(this._rgba, function (e, t) {
                    return null == e ? t > 2 ? 1 : 0 : e
                });
                return 1 === n[3] && (n.pop(), t = "rgb("), t + n.join() + ")"
            }, toHslaString: function () {
                var t = "hsla(", n = e.map(this.hsla(), function (e, t) {
                    return null == e && (e = t > 2 ? 1 : 0), t && 3 > t && (e = Math.round(100 * e) + "%"), e
                });
                return 1 === n[3] && (n.pop(), t = "hsl("), t + n.join() + ")"
            }, toHexString: function (t) {
                var n = this._rgba.slice(), i = n.pop();
                return t && n.push(~~(255 * i)), "#" + e.map(n, function (e) {
                    return e = (e || 0).toString(16), 1 === e.length ? "0" + e : e
                }).join("")
            }, toString: function () {
                return 0 === this._rgba[3] ? "transparent" : this.toRgbaString()
            }
        }), c.fn.parse.prototype = c.fn, d.hsla.to = function (e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]];
            var t, n, i = e[0] / 255, a = e[1] / 255, r = e[2] / 255, s = e[3], o = Math.max(i, a, r),
                l = Math.min(i, a, r), c = o - l, d = o + l, u = .5 * d;
            return t = l === o ? 0 : i === o ? 60 * (a - r) / c + 360 : a === o ? 60 * (r - i) / c + 120 : 60 * (i - a) / c + 240, n = 0 === c ? 0 : .5 >= u ? c / d : c / (2 - d), [Math.round(t) % 360, n, u, null == s ? 1 : s]
        }, d.hsla.from = function (e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]];
            var t = e[0] / 360, n = e[1], i = e[2], r = e[3], s = .5 >= i ? i * (1 + n) : i + n - i * n, o = 2 * i - s;
            return [Math.round(255 * a(o, s, t + 1 / 3)), Math.round(255 * a(o, s, t)), Math.round(255 * a(o, s, t - 1 / 3)), r]
        }, p(d, function (i, a) {
            var r = a.props, s = a.cache, l = a.to, d = a.from;
            c.fn[i] = function (i) {
                if (l && !this[s] && (this[s] = l(this._rgba)), i === t) return this[s].slice();
                var a, o = e.type(i), u = "array" === o || "object" === o ? i : arguments, h = this[s].slice();
                return p(r, function (e, t) {
                    var i = u["object" === o ? e : t.idx];
                    null == i && (i = h[t.idx]), h[t.idx] = n(i, t)
                }), d ? (a = c(d(h)), a[s] = h, a) : c(h)
            }, p(r, function (t, n) {
                c.fn[t] || (c.fn[t] = function (a) {
                    var r, s = e.type(a), l = "alpha" === t ? this._hsla ? "hsla" : "rgba" : i, c = this[l](),
                        d = c[n.idx];
                    return "undefined" === s ? d : ("function" === s && (a = a.call(this, d), s = e.type(a)), null == a && n.empty ? this : ("string" === s && (r = o.exec(a), r && (a = d + parseFloat(r[2]) * ("+" === r[1] ? 1 : -1))), c[n.idx] = a, this[l](c)))
                })
            })
        }), c.hook = function (t) {
            var n = t.split(" ");
            p(n, function (t, n) {
                e.cssHooks[n] = {
                    set: function (t, a) {
                        var r, s, o = "";
                        if ("transparent" !== a && ("string" !== e.type(a) || (r = i(a)))) {
                            if (a = c(r || a), !h.rgba && 1 !== a._rgba[3]) {
                                for (s = "backgroundColor" === n ? t.parentNode : t; ("" === o || "transparent" === o) && s && s.style;) try {
                                    o = e.css(s, "backgroundColor"), s = s.parentNode
                                } catch (l) {
                                }
                                a = a.blend(o && "transparent" !== o ? o : "_default")
                            }
                            a = a.toRgbaString()
                        }
                        try {
                            t.style[n] = a
                        } catch (l) {
                        }
                    }
                }, e.fx.step[n] = function (t) {
                    t.colorInit || (t.start = c(t.elem, n), t.end = c(t.end), t.colorInit = !0), e.cssHooks[n].set(t.elem, t.start.transition(t.end, t.pos))
                }
            })
        }, c.hook(s), e.cssHooks.borderColor = {
            expand: function (e) {
                var t = {};
                return p(["Top", "Right", "Bottom", "Left"], function (n, i) {
                    t["border" + i + "Color"] = e
                }), t
            }
        }, r = e.Color.names = {
            aqua: "#00ffff",
            black: "#000000",
            blue: "#0000ff",
            fuchsia: "#ff00ff",
            gray: "#808080",
            green: "#008000",
            lime: "#00ff00",
            maroon: "#800000",
            navy: "#000080",
            olive: "#808000",
            purple: "#800080",
            red: "#ff0000",
            silver: "#c0c0c0",
            teal: "#008080",
            white: "#ffffff",
            yellow: "#ffff00",
            transparent: [null, null, null, 0],
            _default: "#ffffff"
        }
    }(jQuery), function () {
        function n(t) {
            var n, i,
                a = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle,
                r = {};
            if (a && a.length && a[0] && a[a[0]]) for (i = a.length; i--;) n = a[i], "string" == typeof a[n] && (r[e.camelCase(n)] = a[n]); else for (n in a) "string" == typeof a[n] && (r[n] = a[n]);
            return r
        }

        function i(t, n) {
            var i, a, s = {};
            for (i in n) a = n[i], t[i] !== a && (r[i] || (e.fx.step[i] || !isNaN(parseFloat(a))) && (s[i] = a));
            return s
        }

        var a = ["add", "remove", "toggle"], r = {
            border: 1,
            borderBottom: 1,
            borderColor: 1,
            borderLeft: 1,
            borderRight: 1,
            borderTop: 1,
            borderWidth: 1,
            margin: 1,
            padding: 1
        };
        e.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function (t, n) {
            e.fx.step[n] = function (e) {
                ("none" !== e.end && !e.setAttr || 1 === e.pos && !e.setAttr) && (jQuery.style(e.elem, n, e.end), e.setAttr = !0)
            }
        }), e.fn.addBack || (e.fn.addBack = function (e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }), e.effects.animateClass = function (t, r, s, o) {
            var l = e.speed(r, s, o);
            return this.queue(function () {
                var r, s = e(this), o = s.attr("class") || "", c = l.children ? s.find("*").addBack() : s;
                c = c.map(function () {
                    var t = e(this);
                    return {el: t, start: n(this)}
                }), r = function () {
                    e.each(a, function (e, n) {
                        t[n] && s[n + "Class"](t[n])
                    })
                }, r(), c = c.map(function () {
                    return this.end = n(this.el[0]), this.diff = i(this.start, this.end), this
                }), s.attr("class", o), c = c.map(function () {
                    var t = this, n = e.Deferred(), i = e.extend({}, l, {
                        queue: !1, complete: function () {
                            n.resolve(t)
                        }
                    });
                    return this.el.animate(this.diff, i), n.promise()
                }), e.when.apply(e, c.get()).done(function () {
                    r(), e.each(arguments, function () {
                        var t = this.el;
                        e.each(this.diff, function (e) {
                            t.css(e, "")
                        })
                    }), l.complete.call(s[0])
                })
            })
        }, e.fn.extend({
            addClass: function (t) {
                return function (n, i, a, r) {
                    return i ? e.effects.animateClass.call(this, {add: n}, i, a, r) : t.apply(this, arguments)
                }
            }(e.fn.addClass), removeClass: function (t) {
                return function (n, i, a, r) {
                    return arguments.length > 1 ? e.effects.animateClass.call(this, {remove: n}, i, a, r) : t.apply(this, arguments)
                }
            }(e.fn.removeClass), toggleClass: function (n) {
                return function (i, a, r, s, o) {
                    return "boolean" == typeof a || a === t ? r ? e.effects.animateClass.call(this, a ? {add: i} : {remove: i}, r, s, o) : n.apply(this, arguments) : e.effects.animateClass.call(this, {toggle: i}, a, r, s)
                }
            }(e.fn.toggleClass), switchClass: function (t, n, i, a, r) {
                return e.effects.animateClass.call(this, {add: n, remove: t}, i, a, r)
            }
        })
    }(), function () {
        function i(t, n, i, a) {
            return e.isPlainObject(t) && (n = t, t = t.effect), t = {effect: t}, null == n && (n = {}), e.isFunction(n) && (a = n, i = null, n = {}), ("number" == typeof n || e.fx.speeds[n]) && (a = i, i = n, n = {}), e.isFunction(i) && (a = i, i = null), n && e.extend(t, n), i = i || n.duration, t.duration = e.fx.off ? 0 : "number" == typeof i ? i : i in e.fx.speeds ? e.fx.speeds[i] : e.fx.speeds._default, t.complete = a || n.complete, t
        }

        function a(t) {
            return !t || "number" == typeof t || e.fx.speeds[t] ? !0 : "string" != typeof t || e.effects.effect[t] ? e.isFunction(t) ? !0 : "object" != typeof t || t.effect ? !1 : !0 : !0
        }

        e.extend(e.effects, {
            version: "1.10.4", save: function (e, t) {
                for (var i = 0; i < t.length; i++) null !== t[i] && e.data(n + t[i], e[0].style[t[i]])
            }, restore: function (e, i) {
                var a, r;
                for (r = 0; r < i.length; r++) null !== i[r] && (a = e.data(n + i[r]), a === t && (a = ""), e.css(i[r], a))
            }, setMode: function (e, t) {
                return "toggle" === t && (t = e.is(":hidden") ? "show" : "hide"), t
            }, getBaseline: function (e, t) {
                var n, i;
                switch (e[0]) {
                    case"top":
                        n = 0;
                        break;
                    case"middle":
                        n = .5;
                        break;
                    case"bottom":
                        n = 1;
                        break;
                    default:
                        n = e[0] / t.height
                }
                switch (e[1]) {
                    case"left":
                        i = 0;
                        break;
                    case"center":
                        i = .5;
                        break;
                    case"right":
                        i = 1;
                        break;
                    default:
                        i = e[1] / t.width
                }
                return {x: i, y: n}
            }, createWrapper: function (t) {
                if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                var n = {width: t.outerWidth(!0), height: t.outerHeight(!0), "float": t.css("float")},
                    i = e("<div></div>").addClass("ui-effects-wrapper").css({
                        fontSize: "100%",
                        background: "transparent",
                        border: "none",
                        margin: 0,
                        padding: 0
                    }), a = {width: t.width(), height: t.height()}, r = document.activeElement;
                try {
                    r.id
                } catch (s) {
                    r = document.body
                }
                return t.wrap(i), (t[0] === r || e.contains(t[0], r)) && e(r).focus(), i = t.parent(), "static" === t.css("position") ? (i.css({position: "relative"}), t.css({position: "relative"})) : (e.extend(n, {
                    position: t.css("position"),
                    zIndex: t.css("z-index")
                }), e.each(["top", "left", "bottom", "right"], function (e, i) {
                    n[i] = t.css(i), isNaN(parseInt(n[i], 10)) && (n[i] = "auto")
                }), t.css({
                    position: "relative",
                    top: 0,
                    left: 0,
                    right: "auto",
                    bottom: "auto"
                })), t.css(a), i.css(n).show()
            }, removeWrapper: function (t) {
                var n = document.activeElement;
                return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === n || e.contains(t[0], n)) && e(n).focus()), t
            }, setTransition: function (t, n, i, a) {
                return a = a || {}, e.each(n, function (e, n) {
                    var r = t.cssUnit(n);
                    r[0] > 0 && (a[n] = r[0] * i + r[1])
                }), a
            }
        }), e.fn.extend({
            effect: function () {
                function t(t) {
                    function i() {
                        e.isFunction(r) && r.call(a[0]), e.isFunction(t) && t()
                    }

                    var a = e(this), r = n.complete, o = n.mode;
                    (a.is(":hidden") ? "hide" === o : "show" === o) ? (a[o](), i()) : s.call(a[0], n, i)
                }

                var n = i.apply(this, arguments), a = n.mode, r = n.queue, s = e.effects.effect[n.effect];
                return e.fx.off || !s ? a ? this[a](n.duration, n.complete) : this.each(function () {
                    n.complete && n.complete.call(this)
                }) : r === !1 ? this.each(t) : this.queue(r || "fx", t)
            }, show: function (e) {
                return function (t) {
                    if (a(t)) return e.apply(this, arguments);
                    var n = i.apply(this, arguments);
                    return n.mode = "show", this.effect.call(this, n)
                }
            }(e.fn.show), hide: function (e) {
                return function (t) {
                    if (a(t)) return e.apply(this, arguments);
                    var n = i.apply(this, arguments);
                    return n.mode = "hide", this.effect.call(this, n)
                }
            }(e.fn.hide), toggle: function (e) {
                return function (t) {
                    if (a(t) || "boolean" == typeof t) return e.apply(this, arguments);
                    var n = i.apply(this, arguments);
                    return n.mode = "toggle", this.effect.call(this, n)
                }
            }(e.fn.toggle), cssUnit: function (t) {
                var n = this.css(t), i = [];
                return e.each(["em", "px", "%", "pt"], function (e, t) {
                    n.indexOf(t) > 0 && (i = [parseFloat(n), t])
                }), i
            }
        })
    }(), function () {
        var t = {};
        e.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function (e, n) {
            t[n] = function (t) {
                return Math.pow(t, e + 2)
            }
        }), e.extend(t, {
            Sine: function (e) {
                return 1 - Math.cos(e * Math.PI / 2)
            }, Circ: function (e) {
                return 1 - Math.sqrt(1 - e * e)
            }, Elastic: function (e) {
                return 0 === e || 1 === e ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin((80 * (e - 1) - 7.5) * Math.PI / 15)
            }, Back: function (e) {
                return e * e * (3 * e - 2)
            }, Bounce: function (e) {
                for (var t, n = 4; e < ((t = Math.pow(2, --n)) - 1) / 11;) ;
                return 1 / Math.pow(4, 3 - n) - 7.5625 * Math.pow((3 * t - 2) / 22 - e, 2)
            }
        }), e.each(t, function (t, n) {
            e.easing["easeIn" + t] = n, e.easing["easeOut" + t] = function (e) {
                return 1 - n(1 - e)
            }, e.easing["easeInOut" + t] = function (e) {
                return .5 > e ? n(2 * e) / 2 : 1 - n(-2 * e + 2) / 2
            }
        })
    }()
}(jQuery), define("jquery-ui", ["jquery"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)), function (e) {
    "function" == typeof define && define.amd ? define("common/jquery.mousewheel", ["jquery"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    function t(t) {
        var s = t || window.event, o = l.call(arguments, 1), c = 0, u = 0, h = 0, f = 0, p = 0, m = 0;
        if (t = e.event.fix(s), t.type = "mousewheel", "detail" in s && (h = -1 * s.detail), "wheelDelta" in s && (h = s.wheelDelta), "wheelDeltaY" in s && (h = s.wheelDeltaY), "wheelDeltaX" in s && (u = -1 * s.wheelDeltaX), "axis" in s && s.axis === s.HORIZONTAL_AXIS && (u = -1 * h, h = 0), c = 0 === h ? u : h, "deltaY" in s && (h = -1 * s.deltaY, c = h), "deltaX" in s && (u = s.deltaX, 0 === h && (c = -1 * u)), 0 !== h || 0 !== u) {
            if (1 === s.deltaMode) {
                var g = e.data(this, "mousewheel-line-height");
                c *= g, h *= g, u *= g
            } else if (2 === s.deltaMode) {
                var v = e.data(this, "mousewheel-page-height");
                c *= v, h *= v, u *= v
            }
            if (f = Math.max(Math.abs(h), Math.abs(u)), (!r || r > f) && (r = f, i(s, f) && (r /= 40)), i(s, f) && (c /= 40, u /= 40, h /= 40), c = Math[c >= 1 ? "floor" : "ceil"](c / r), u = Math[u >= 1 ? "floor" : "ceil"](u / r), h = Math[h >= 1 ? "floor" : "ceil"](h / r), d.settings.normalizeOffset && this.getBoundingClientRect) {
                var _ = this.getBoundingClientRect();
                p = t.clientX - _.left, m = t.clientY - _.top
            }
            return t.deltaX = u, t.deltaY = h, t.deltaFactor = r, t.offsetX = p, t.offsetY = m, t.deltaMode = 0, o.unshift(t, c, u, h), a && clearTimeout(a), a = setTimeout(n, 200), (e.event.dispatch || e.event.handle).apply(this, o)
        }
    }

    function n() {
        r = null
    }

    function i(e, t) {
        return d.settings.adjustOldDeltas && "mousewheel" === e.type && t % 120 === 0
    }

    var a, r, s = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
        o = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
        l = Array.prototype.slice;
    if (e.event.fixHooks) for (var c = s.length; c;) e.event.fixHooks[s[--c]] = e.event.mouseHooks;
    var d = e.event.special.mousewheel = {
        version: "3.1.12", setup: function () {
            if (this.addEventListener) for (var n = o.length; n;) this.addEventListener(o[--n], t, !1); else this.onmousewheel = t;
            e.data(this, "mousewheel-line-height", d.getLineHeight(this)), e.data(this, "mousewheel-page-height", d.getPageHeight(this))
        }, teardown: function () {
            if (this.removeEventListener) for (var n = o.length; n;) this.removeEventListener(o[--n], t, !1); else this.onmousewheel = null;
            e.removeData(this, "mousewheel-line-height"), e.removeData(this, "mousewheel-page-height")
        }, getLineHeight: function (t) {
            var n = e(t), i = n["offsetParent" in e.fn ? "offsetParent" : "parent"]();
            return i.length || (i = e("body")), parseInt(i.css("fontSize"), 10) || parseInt(n.css("fontSize"), 10) || 16
        }, getPageHeight: function (t) {
            return e(t).height()
        }, settings: {adjustOldDeltas: !0, normalizeOffset: !0}
    };
    e.fn.extend({
        mousewheel: function (e) {
            return e ? this.bind("mousewheel", e) : this.trigger("mousewheel")
        }, unmousewheel: function (e) {
            return this.unbind("mousewheel", e)
        }
    })
}), function (e) {
    "function" == typeof define && define.amd ? define("common/jquery.caret", ["jquery"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    var t = "length", n = "createRange", i = "duplicate";
    e.fn.caret = function (e, a) {
        if ("undefined" == typeof this[0] || this.is(":hidden") || "hidden" === this.css("visibility")) return this;
        var r, s, o, l, c, d, u, h, f, p = document.selection, m = this[0], g = m.scrollTop, v = !1, _ = !0;
        try {
            v = "undefined" != typeof m.selectionStart
        } catch (b) {
            _ = !1
        }
        return "object" == typeof e && e.start && e.end ? (s = e.start, l = e.end) : "number" == typeof e && "number" == typeof a && (s = e, l = a), _ && "undefined" != typeof s ? (v ? (m.selectionStart = s, m.selectionEnd = l) : (c = m.createTextRange(), c.collapse(!0), c.moveStart("character", s), c.moveEnd("character", l - s), c.select()), (this.is(":visible") || "hidden" !== this.css("visibility")) && (this.is(":focus") || this.focus()), m.scrollTop = g, this) : (v ? (r = m.selectionStart, o = m.selectionEnd) : p ? "TEXTAREA" === m.tagName ? (f = this.val(), d = p[n](), u = d[i](), u.moveToElementText(m), u.setEndPoint("EndToEnd", d), r = u.text.replace(/\r/g, "\n")[t], o = r + d.text.replace(/\r/g, "\n")[t]) : (f = this.val().replace(/\r/g, "\n"), d = p[n]()[i](), d.moveEnd("character", f[t]), r = "" === d.text ? f[t] : f.lastIndexOf(d.text), d = p[n]()[i](), d.moveStart("character", -f[t]), o = d.text[t]) : (r = 0, o = (m.value || "").length), h = (m.value || "").substring(r, o), {
            start: r,
            end: o,
            text: h,
            replace: function (e) {
                return m.value.substring(0, r) + e + m.value.substring(o, m.value[t])
            }
        })
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/jquery.keyboard", ["jquery", "jquery-ui", "common/jquery.mousewheel", "common/jquery.caret"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard = function (t, n) {
        var i, a = this;
        a.version = "1.18.12", a.$el = e(t), a.el = t, a.$el.data("keyboard", a), a.init = function () {
            a.options = i = e.extend(!0, {}, e.keyboard.defaultOptions, n), a.shiftActive = a.altActive = a.metaActive = a.sets = a.capsLock = !1, a.lastKeyset = [!1, !1, !1], a.rows = ["", "-shift", "-alt", "-alt-shift"], e('<!--[if lte IE 8]><script>jQuery("body").addClass("oldie");</script><![endif]--><!--[if IE]><script>jQuery("body").addClass("ie");</script><![endif]-->').appendTo("body").remove(), a.msie = e("body").hasClass("oldie"), a.allie = e("body").hasClass("ie"), a.inPlaceholder = a.$el.attr("placeholder") || "", a.watermark = "undefined" != typeof document.createElement("input").placeholder && "" !== a.inPlaceholder, a.regex = e.keyboard.comboRegex, a.decimal = /^\./.test(i.display.dec) ? !0 : !1, a.repeatTime = 1e3 / (i.repeatRate || 20), i.preventDoubleEventTime = i.preventDoubleEventTime || 100, a.isOpen = !1, a.wheel = e.isFunction(e.fn.mousewheel), a.alwaysAllowed = [20, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46], a.$keyboard = [], a.lastCaret = {
                start: 0,
                end: 0
            }, a.temp = ["", 0, 0], e.each("initialized beforeVisible visible hidden canceled accepted beforeClose".split(" "), function (t, n) {
                e.isFunction(i[n]) && a.$el.bind(n + ".keyboard", i[n])
            }), i.alwaysOpen && (i.stayOpen = !0), e(document).bind("mousedown keyup touchstart checkkeyboard ".split(" ").join(".keyboard "), function (t) {
                if (!a.opening && (a.escClose(t), t.target && e(t.target).hasClass("ui-keyboard-input"))) {
                    var n = e(t.target).data("keyboard");
                    n === a && n.options.openOn && n.focusOn()
                }
            }), a.$el.addClass("ui-keyboard-input " + i.css.input).attr({
                "aria-haspopup": "true",
                role: "textbox"
            }), (a.$el.is(":disabled") || a.$el.attr("readonly") && !a.$el.hasClass("ui-keyboard-lockedinput")) && a.$el.addClass("ui-keyboard-nokeyboard"), i.openOn && a.$el.bind(i.openOn + ".keyboard", function () {
                a.focusOn()
            }), a.watermark || "" !== a.$el.val() || "" === a.inPlaceholder || "" === a.$el.attr("placeholder") || a.$el.addClass("ui-keyboard-placeholder").val(a.inPlaceholder), a.$el.trigger("initialized.keyboard", [a, a.el]), i.alwaysOpen && a.reveal()
        }, a.setCurrent = function () {
            e(".ui-keyboard-has-focus").removeClass("ui-keyboard-has-focus"), e(".ui-keyboard-input-current").removeClass("ui-keyboard-input-current"), a.$el.addClass("ui-keyboard-input-current"), a.$keyboard.addClass("ui-keyboard-has-focus"), a.isCurrent(!0), a.isOpen = !0
        }, a.isCurrent = function (t) {
            var n = e.keyboard.currentKeyboard || !1;
            return t ? n = e.keyboard.currentKeyboard = a.el : t === !1 && n === a.el && (n = e.keyboard.currentKeyboard = ""), n === a.el
        }, a.isVisible = function () {
            return a.$keyboard && a.$keyboard.length ? a.$keyboard.is(":visible") : !1
        }, a.focusOn = function () {
            a.$el.is(":visible") && setTimeout(function () {
                "number" != a.$el.attr("type") && (a.lastCaret = a.$el.caret())
            }, 20), a.isVisible() || (clearTimeout(a.timer), a.reveal()), i.alwaysOpen && a.setCurrent()
        }, a.reveal = function () {
            var t, n;
            return a.opening = !0, e(".ui-keyboard").not(".ui-keyboard-always-open").remove(), a.$el.is(":disabled") || a.$el.attr("readonly") && !a.$el.hasClass("ui-keyboard-lockedinput") ? void a.$el.addClass("ui-keyboard-nokeyboard") : (a.$el.removeClass("ui-keyboard-nokeyboard"), i.openOn && a.$el.unbind(i.openOn + ".keyboard"), (!a.$keyboard || a.$keyboard && (!a.$keyboard.length || e.contains(document.body, a.$keyboard[0]))) && a.startup(), a.watermark || a.el.value !== a.inPlaceholder || a.$el.removeClass("ui-keyboard-placeholder").val(""), a.originalContent = a.$el.val(), a.$preview.val(a.originalContent), i.acceptValid && a.checkValid(), i.resetDefault && (a.shiftActive = a.altActive = a.metaActive = !1, a.showKeySet()), i.appendLocally || "body" !== i.appendTo || a.$keyboard.css({
                position: "absolute",
                left: 0,
                top: 0
            }), a.$el.trigger("beforeVisible.keyboard", [a, a.el]), a.setCurrent(), a.$keyboard.show(), i.usePreview && a.msie && ("undefined" == typeof a.width && (a.$preview.hide(), a.width = Math.ceil(a.$keyboard.width()), a.$preview.show()), a.$preview.width(a.width)), a.position = i.position, e.ui && e.ui.position && !e.isEmptyObject(a.position) && (a.position.of = a.position.of || a.$el.data("keyboardPosition") || a.$el, a.position.collision = a.position.collision || "flipfit flipfit", a.$keyboard.position(a.position)), a.checkDecimal(), a.lineHeight = parseInt(a.$preview.css("lineHeight"), 10) || parseInt(a.$preview.css("font-size"), 10) + 4, i.caretToEnd && (n = a.originalContent.length, a.lastCaret = {
                start: n,
                end: n
            }), a.allie && (n = a.lastCaret.start || a.originalContent.length, t = {
                start: n,
                end: n
            }, a.lastCaret || (a.lastCaret = t), 0 === a.lastCaret.end && a.lastCaret.start > 0 && (a.lastCaret.end = a.lastCaret.start), a.lastCaret.start < 0 && (a.lastCaret = t)), setTimeout(function () {
                a.opening = !1, i.initialFocus && a.$preview.focus().caret(a.lastCaret), a.$el.trigger("visible.keyboard", [a, a.el])
            }, 10), a)
        }, a.startup = function () {
            a.$keyboard && a.$keyboard.length || ("custom" === i.layout && (i.layoutHash = "custom" + a.customHash()), a.layout = "custom" === i.layout ? i.layoutHash : i.layout, "undefined" == typeof e.keyboard.builtLayouts[a.layout] && (e.isFunction(i.create) && i.create(a), a.$keyboard.length || a.buildKeyboard()), a.$keyboard = e.keyboard.builtLayouts[a.layout].$keyboard.clone(), i.usePreview ? (a.$preview = a.$el.clone(!1).removeAttr("id").removeClass("ui-keyboard-placeholder ui-keyboard-input").addClass("ui-keyboard-preview " + i.css.input).removeAttr("aria-haspopup").attr("tabindex", "-1").show(), "number" == a.$preview.attr("type") && a.$preview.attr("type", "text"), e("<div />").addClass("ui-keyboard-preview-wrapper").append(a.$preview).prependTo(a.$keyboard)) : (a.$preview = a.$el, e.isEmptyObject(a.position) || (i.position.at = i.position.at2))), a.preview = a.$preview[0], a.$decBtn = a.$keyboard.find(".ui-keyboard-dec"), (i.enterNavigation || "TEXTAREA" === a.el.tagName) && a.alwaysAllowed.push(13), i.lockInput && a.$preview.addClass("ui-keyboard-lockedinput").attr({readonly: "readonly"}), a.bindKeyboard(), a.$keyboard.appendTo(i.appendLocally ? a.$el.parent() : i.appendTo || "body"), a.bindKeys(), e.ui && e.ui.position && !e.isEmptyObject(a.position) && e(window).bind("resize.keyboard", function () {
                a.isVisible() && a.$keyboard.position(a.position)
            })
        }, a.bindKeyboard = function () {
            var t = e.keyboard.builtLayouts[a.layout];
            a.$preview.unbind("keypress keyup keydown mouseup touchend ".split(" ").join(".keyboard ")).bind("keypress.keyboard", function (n) {
                var r = a.lastKey = String.fromCharCode(n.charCode || n.which);
                if (a.$lastKey = [], a.checkCaret && (a.lastCaret = a.$preview.caret()), a.capsLock = r >= 65 && 90 >= r && !n.shiftKey || r >= 97 && 122 >= r && n.shiftKey ? !0 : !1, i.restrictInput) {
                    if ((8 === n.which || 0 === n.which) && e.inArray(n.keyCode, a.alwaysAllowed)) return;
                    -1 === e.inArray(r, t.acceptedKeys) && n.preventDefault()
                } else if ((n.ctrlKey || n.metaKey) && (97 === n.which || 99 === n.which || 118 === n.which || n.which >= 120 && n.which <= 122)) return;
                t.hasMappedKeys && t.mappedKeys.hasOwnProperty(r) && (a.lastKey = t.mappedKeys[r], a.insertText(a.lastKey), n.preventDefault()), a.checkMaxLength()
            }).bind("keyup.keyboard", function (t) {
                switch (t.which) {
                    case 9:
                        if (a.tab && i.tabNavigation && !i.lockInput) {
                            a.shiftActive = t.shiftKey;
                            var n = e.keyboard.keyaction.tab(a);
                            if (a.tab = !1, !n) return !1
                        } else t.preventDefault();
                        break;
                    case 27:
                        return a.close(), !1
                }
                clearTimeout(a.throttled), a.throttled = setTimeout(function () {
                    a.isVisible() && a.checkCombos()
                }, 100), a.checkMaxLength(), e.isFunction(i.change) && i.change(e.Event("change"), a, a.el), a.$el.trigger("change.keyboard", [a, a.el])
            }).bind("keydown.keyboard", function (t) {
                switch (t.which) {
                    case 8:
                        e.keyboard.keyaction.bksp(a, null, t), t.preventDefault();
                        break;
                    case 9:
                        return i.tabNavigation ? (a.tab = !0, !1) : (a.tab = !0, !1);
                    case 13:
                        e.keyboard.keyaction.enter(a, null, t);
                        break;
                    case 20:
                        a.shiftActive = a.capsLock = !a.capsLock, a.showKeySet(this);
                        break;
                    case 86:
                        if (t.ctrlKey || t.metaKey) {
                            if (i.preventPaste) return void t.preventDefault();
                            a.checkCombos()
                        }
                }
            }).bind("mouseup.keyboard touchend.keyboard", function () {
                a.checkCaret && (a.lastCaret = a.$preview.caret())
            }), a.$keyboard.bind("mousedown.keyboard click.keyboard touchstart.keyboard", function (t) {
                t.stopPropagation(), a.isCurrent() || (a.reveal(), e(document).trigger("checkkeyboard.keyboard"))
            }), i.preventPaste && (a.$preview.bind("contextmenu.keyboard", function (e) {
                e.preventDefault()
            }), a.$el.bind("contextmenu.keyboard", function (e) {
                e.preventDefault()
            }))
        }, a.bindKeys = function () {
            var t = (i.keyBinding + " repeater mouseenter mouseleave touchstart mousewheel mouseup click ").split(" ").join(".keyboard ") + "mouseleave mousedown touchstart touchend touchmove touchcancel ".split(" ").join(".kb ");
            a.$allKeys = a.$keyboard.find("button.ui-keyboard-button").unbind(t).bind(i.keyBinding.split(" ").join(".keyboard ") + ".keyboard repeater.keyboard", function (t) {
                if (!a.$keyboard.is(":visible")) return !1;
                var n, r = e(this), s = r.attr("data-action"), o = (new Date).getTime();
                if (s = ":" === s ? ":" : s.split(":")[0], !(o - (a.lastEventTime || 0) < i.preventDoubleEventTime)) {
                    if (a.lastEventTime = o, a.$preview.focus(), a.$lastKey = r, a.lastKey = r.attr("data-curtxt"), a.checkCaret && a.$preview.caret(a.lastCaret), s.match("meta") && (s = "meta"), e.keyboard.keyaction.hasOwnProperty(s) && e(this).hasClass("ui-keyboard-actionkey")) {
                        if (e.keyboard.keyaction[s](a, this, t) === !1) return !1
                    } else "undefined" != typeof s && (n = a.lastKey = a.wheel && !e(this).hasClass("ui-keyboard-actionkey") ? a.lastKey : s, a.insertText(n), a.capsLock || i.stickyShift || t.shiftKey || (a.shiftActive = !1, a.showKeySet(this)));
                    a.$preview.focus().caret(a.lastCaret), a.checkCombos(), a.checkMaxLength(), e.isFunction(i.change) && i.change(e.Event("change"), a, a.el), a.$el.trigger("change.keyboard", [a, a.el]), t.preventDefault()
                }
            }).bind("mouseenter.keyboard mouseleave.keyboard touchstart.keyboard", function (t) {
                if (a.isCurrent()) {
                    var n = e(this), r = n.data("layers") || a.getLayers(n);
                    n.data("layers", r = e.grep(r, function (t, n) {
                        return e.inArray(t, r) === n
                    })), "mouseenter" !== t.type && "touchstart" !== t.type || "password" === a.el.type || n.hasClass(i.css.buttonDisabled) || n.addClass(i.css.buttonHover).attr("title", function (e, n) {
                        return a.wheel && "" === n && a.sets && r.length > 1 && "touchstart" !== t.type ? i.wheelMessage : n
                    }), "mouseleave" === t.type && (n.data({
                        curtxt: n.data("original"),
                        curnum: 0
                    }), n.removeClass("password" === a.el.type ? "" : i.css.buttonHover).attr("title", function (e, t) {
                        return t === i.wheelMessage ? "" : t
                    }).find("span").html(n.data("original")))
                }
            }).bind("mousewheel.keyboard", function (t, n) {
                if (a.wheel) {
                    n = n || t.deltaY;
                    var i, r, s = e(this);
                    return r = s.data("layers") || a.getLayers(s), r.length > 1 ? (i = s.data("curnum") + (n > 0 ? -1 : 1), i > r.length - 1 && (i = 0), 0 > i && (i = r.length - 1)) : i = 0, s.data({
                        curnum: i,
                        layers: r,
                        curtxt: r[i]
                    }), s.find("span").html(r[i]), !1
                }
            }).bind("mouseup.keyboard mouseleave.kb touchend.kb touchmove.kb touchcancel.kb", function (t) {
                return /(mouseleave|touchend|touchcancel)/.test(t.type) ? e(this).removeClass(i.css.buttonHover) : (a.isVisible() && a.isCurrent() && a.$preview.focus(), a.checkCaret && a.$preview.caret(a.lastCaret)), a.mouseRepeat = [!1, ""], clearTimeout(a.repeater), !1
            }).bind("click.keyboard", function () {
                return !1
            }).not(".ui-keyboard-actionkey").add(".ui-keyboard-tab, .ui-keyboard-bksp, .ui-keyboard-space, .ui-keyboard-enter", a.$keyboard).bind("mousedown.kb touchstart.kb", function () {
                if (0 !== i.repeatRate) {
                    var t = e(this);
                    a.mouseRepeat = [!0, t], setTimeout(function () {
                        a.mouseRepeat[0] && a.mouseRepeat[1] === t && a.repeatKey(t)
                    }, i.repeatDelay)
                }
                return !1
            })
        }, a.insertText = function (e) {
            var t, n, i, r = a.$preview.val(), s = a.$preview.caret(), o = a.$preview.scrollLeft(),
                l = a.$preview.scrollTop(), c = r.length;
            s.end < s.start && (s.end = s.start), s.start > c && (s.end = s.start = c), "TEXTAREA" === a.preview.tagName && (a.msie && "\n" === r.substr(s.start, 1) && (s.start += 1, s.end += 1), i = r.split("\n").length - 1, a.preview.scrollTop = i > 0 ? a.lineHeight * i : l), t = "bksp" === e && s.start === s.end ? !0 : !1, e = "bksp" === e ? "" : e, n = s.start + (t ? -1 : e.length), o += parseInt(a.$preview.css("fontSize"), 10) * ("bksp" === e ? -1 : 1), a.$preview.val(a.$preview.val().substr(0, s.start - (t ? 1 : 0)) + e + a.$preview.val().substr(s.end)).scrollLeft(o).caret(n, n), a.lastCaret = {
                start: n,
                end: n
            }
        }, a.checkMaxLength = function () {
            var e, t = a.$preview.val();
            i.maxLength !== !1 && t.length > i.maxLength && (e = Math.min(a.$preview.caret().start, i.maxLength), a.$preview.val(t.substring(0, i.maxLength)), a.$preview.caret(e, e), a.lastCaret = {
                start: e,
                end: e
            }), a.$decBtn.length && a.checkDecimal()
        }, a.repeatKey = function (e) {
            e.trigger("repeater.keyboard"), a.mouseRepeat[0] && (a.repeater = setTimeout(function () {
                a.repeatKey(e)
            }, a.repeatTime))
        }, a.showKeySet = function (e) {
            var t = "", n = (a.shiftActive ? 1 : 0) + (a.altActive ? 2 : 0);
            return a.shiftActive || (a.capsLock = !1), a.metaActive ? (t = e && e.name && /meta/.test(e.name) ? e.name : "", "" === t ? t = a.metaActive === !0 ? "" : a.metaActive : a.metaActive = t, (!i.stickyShift && a.lastKeyset[2] !== a.metaActive || (a.shiftActive || a.altActive) && !a.$keyboard.find(".ui-keyboard-keyset-" + t + a.rows[n]).length) && (a.shiftActive = a.altActive = !1)) : !i.stickyShift && a.lastKeyset[2] !== a.metaActive && a.shiftActive && (a.shiftActive = a.altActive = !1), n = (a.shiftActive ? 1 : 0) + (a.altActive ? 2 : 0), t = 0 !== n || a.metaActive ? "" === t ? "" : "-" + t : "-default", a.$keyboard.find(".ui-keyboard-keyset" + t + a.rows[n]).length ? (a.$keyboard.find(".ui-keyboard-alt, .ui-keyboard-shift, .ui-keyboard-actionkey[class*=meta]").removeClass(i.css.buttonAction).end().find(".ui-keyboard-alt")[a.altActive ? "addClass" : "removeClass"](i.css.buttonAction).end().find(".ui-keyboard-shift")[a.shiftActive ? "addClass" : "removeClass"](i.css.buttonAction).end().find(".ui-keyboard-lock")[a.capsLock ? "addClass" : "removeClass"](i.css.buttonAction).end().find(".ui-keyboard-keyset").hide().end().find(".ui-keyboard-keyset" + t + a.rows[n]).show().end().find(".ui-keyboard-actionkey.ui-keyboard" + t).addClass(i.css.buttonAction), void (a.lastKeyset = [a.shiftActive, a.altActive, a.metaActive])) : (a.shiftActive = a.lastKeyset[0], a.altActive = a.lastKeyset[1], void (a.metaActive = a.lastKeyset[2]))
        }, a.checkCombos = function () {
            if (!a.isVisible()) return a.$preview.val();
            var t, n, r, s, o = a.$preview.val(), l = a.$preview.caret(), c = e.keyboard.builtLayouts[a.layout],
                d = o.length;
            if (l.end < l.start && (l.end = l.start), l.start > d && (l.end = l.start = d), a.msie && "\n" === o.substr(l.start, 1) && (l.start += 1, l.end += 1), i.useCombos && (a.msie ? o = o.replace(a.regex, function (e, t, n) {
                return i.combos.hasOwnProperty(t) ? i.combos[t][n] || e : e
            }) : a.$preview.length && (r = l.start - (l.start - 2 >= 0 ? 2 : 0), a.$preview.caret(r, l.end), s = (a.$preview.caret().text || "").replace(a.regex, function (e, t, n) {
                return i.combos.hasOwnProperty(t) ? i.combos[t][n] || e : e
            }), a.$preview.val(a.$preview.caret().replace(s)), o = a.$preview.val())), i.restrictInput && "" !== o) {
                for (r = o, n = c.acceptedKeys.length, t = 0; n > t; t++) "" !== r && (s = c.acceptedKeys[t], o.indexOf(s) >= 0 && (/[\[|\]|\\|\^|\$|\.|\||\?|\*|\+|\(|\)|\{|\}]/g.test(s) && (s = "\\" + s), r = r.replace(new RegExp(s, "g"), "")));
                "" !== r && (o = o.replace(r, ""))
            }
            return l.start += o.length - d, l.end += o.length - d, a.$preview.val(o), a.$preview.caret(l.start, l.end), a.preview.scrollTop = a.lineHeight * (o.substring(0, l.start).split("\n").length - 1), a.lastCaret = {
                start: l.start,
                end: l.end
            }, i.acceptValid && a.checkValid(), o
        }, a.checkValid = function () {
            var e = !0;
            i.validate && "function" == typeof i.validate && (e = i.validate(a, a.$preview.val(), !1)), a.$keyboard.find(".ui-keyboard-accept")[e ? "removeClass" : "addClass"]("ui-keyboard-invalid-input")[e ? "addClass" : "removeClass"]("ui-keyboard-valid-input")
        }, a.checkDecimal = function () {
            a.decimal && /\./g.test(a.preview.value) || !a.decimal && /\,/g.test(a.preview.value) ? a.$decBtn.attr({
                disabled: "disabled",
                "aria-disabled": "true"
            }).removeClass(i.css.buttonDefault + " " + i.css.buttonHover).addClass(i.css.buttonDisabled) : a.$decBtn.removeAttr("disabled").attr({"aria-disabled": "false"}).addClass(i.css.buttonDefault).removeClass(i.css.buttonDisabled)
        }, a.getLayers = function (t) {
            var n, i;
            return n = t.attr("data-pos"), i = t.closest(".ui-keyboard").find('button[data-pos="' + n + '"]').map(function () {
                return e(this).find("> span").html()
            }).get()
        }, a.switchInput = function (t, n) {
            if ("function" == typeof i.switchInput) i.switchInput(a, t, n); else {
                a.$keyboard.hide();
                var r, s = !1,
                    o = e("button, input, textarea, a:not(.dk_toggle.dk_label), .dk_container").filter(":visible"),
                    l = o.index(a.$el) + (t ? 1 : -1);
                if (a.$keyboard.show(), l > o.length - 1 && (s = i.stopAtEnd, l = 0), 0 > l && (s = i.stopAtEnd, l = o.length - 1), !s) {
                    if (n = a.close(n), !n) return;
                    r = o.eq(l).data("keyboard"), r && r.options.openOn.length ? r.focusOn() : o.eq(l).focus()
                }
            }
            return !1
        }, a.close = function (t) {
            if (a.isOpen) {
                clearTimeout(a.throttled);
                var n = t ? a.checkCombos() : a.originalContent;
                if (t && i.validate && "function" == typeof i.validate && !i.validate(a, n, !0) && (n = a.originalContent, t = !1, i.cancelClose)) return;
                a.isCurrent(!1), a.isOpen = !1, a.$preview.val(n), a.$el.removeClass("ui-keyboard-input-current ui-keyboard-autoaccepted").addClass(t ? t === !0 ? "" : "ui-keyboard-autoaccepted" : "").trigger(i.alwaysOpen ? "" : "beforeClose.keyboard", [a, a.el, t || !1]).val(n).scrollTop(a.el.scrollHeight).trigger(t ? "accepted.keyboard" : "canceled.keyboard", [a, a.el]).trigger(i.alwaysOpen ? "inactive.keyboard" : "hidden.keyboard", [a, a.el]).blur(), i.openOn && (a.timer = setTimeout(function () {
                    a.$el.bind(i.openOn + ".keyboard", function () {
                        a.focusOn()
                    }), e(":focus")[0] === a.el && a.$el.blur()
                }, 500)), !i.alwaysOpen && a.$keyboard && (a.$keyboard.remove(), a.$keyboard = []), a.watermark || "" !== a.el.value || "" === a.inPlaceholder || a.$el.addClass("ui-keyboard-placeholder").val(a.inPlaceholder), a.$el.trigger("change")
            }
            return !!t
        }, a.accept = function () {
            return a.close(!0)
        }, a.escClose = function (e) {
            return e && "keyup" === e.type ? 27 === e.which ? a.close() : "" : void (a.isOpen && (!a.isCurrent() && a.isOpen || a.isOpen && e.target !== a.el && !i.stayOpen) && (a.allie && e.preventDefault(), a.close(i.autoAccept ? "true" : !1)))
        }, a.keyBtn = e("<button />").attr({
            role: "button",
            type: "button",
            "aria-disabled": "false",
            tabindex: "-1"
        }).addClass("ui-keyboard-button"), a.addKey = function (t, n, r) {
            var s, o, l, c, d, u = r === !0 ? t : i.display[n] || t, h = r === !0 ? t.charCodeAt(0) : t;
            return /\(.+\)/.test(u) && (c = u.replace(/\(([^()]+)\)/, ""), l = u.match(/\(([^()]+)\)/)[1], u = c, d = c.split(":"), c = "" !== d[0] && d.length > 1 ? d[0] : c, e.keyboard.builtLayouts[a.layout].mappedKeys[l] = c), d = u.split(":"), "" === d[0] && "" === d[1] && (u = ":"), u = "" !== d[0] && d.length > 1 ? e.trim(d[0]) : u, s = d.length > 1 ? e.trim(d[1]).replace(/_/g, " ") || "" : "", o = u.length > 1 ? " ui-keyboard-widekey" : "", o += r ? "" : " ui-keyboard-actionkey", a.keyBtn.clone().attr({
                "data-value": u,
                name: h,
                "data-pos": a.temp[1] + "," + a.temp[2],
                title: s,
                "data-action": t,
                "data-original": u,
                "data-curtxt": u,
                "data-curnum": 0
            }).addClass(("" === h ? "" : "ui-keyboard-" + h + o + " ") + i.css.buttonDefault).html("<span>" + u + "</span>").appendTo(a.temp[0])
        }, a.customHash = function () {
            var e, t, n, a, r, s = i.customLayout, o = [], l = [];
            for (t in s) s.hasOwnProperty(t) && o.push(s[t]);
            if (l = l.concat.apply(l, o).join(" "), n = 0, r = l.length, 0 === r) return n;
            for (e = 0; r > e; e++) a = l.charCodeAt(e), n = (n << 5) - n + a, n &= n;
            return n
        }, a.buildKeyboard = function () {
            var t, n, r, s, o, l, c, d, u, h = 0,
                f = e.keyboard.builtLayouts[a.layout] = {mappedKeys: {}, acceptedKeys: []}, p = f.acceptedKeys = [],
                m = e("<div />").addClass("ui-keyboard " + i.css.container + (i.alwaysOpen ? " ui-keyboard-always-open" : "")).attr({role: "textbox"}).hide();
            return "custom" !== i.layout && e.keyboard.layouts.hasOwnProperty(i.layout) || (i.layout = "custom", e.keyboard.layouts.custom = i.customLayout || {"default": ["{cancel}"]}), e.each(e.keyboard.layouts[i.layout], function (f, g) {
                if ("" !== f) for (h++, s = e("<div />").attr("name", f).addClass("ui-keyboard-keyset ui-keyboard-keyset-" + f).appendTo(m)["default" === f ? "show" : "hide"](), r = 0; r < g.length; r++) {
                    for (l = e.trim(g[r]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g, "{$1:$2}"), d = l.split(/\s+/), c = 0; c < d.length; c++) if (a.temp = [s, r, c], o = !1, 0 !== d[c].length) if (/^\{\S+\}$/.test(d[c])) {
                        if (n = d[c].match(/^\{(\S+)\}$/)[1].toLowerCase(), /\!\!/.test(n) && (n = n.replace("!!", ""), o = !0), /^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/.test(n) && (u = parseFloat(n.replace(/,/, ".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/)[1] || 0), e("<span>&nbsp;</span>").width(n.match("px") ? u + "px" : 2 * u + "em").addClass("ui-keyboard-button ui-keyboard-spacer").appendTo(s)), /^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/.test(n) && (u = /:/.test(n) ? parseFloat(n.replace(/,/, ".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/)[1] || 0) : "", a.addKey("", " ").addClass(i.css.buttonDisabled + " " + i.css.buttonEmpty).attr("aria-disabled", !0).width(u ? n.match("px") ? u + "px" : 2 * u + "em" : "")), /^meta\d+\:?(\w+)?/.test(n)) {
                            a.addKey(n, n);
                            continue
                        }
                        switch (n) {
                            case"a":
                            case"accept":
                                a.addKey("accept", n).addClass(i.css.buttonAction);
                                break;
                            case"alt":
                            case"altgr":
                                a.addKey("alt", "alt");
                                break;
                            case"b":
                            case"bksp":
                                a.addKey("bksp", n);
                                break;
                            case"c":
                            case"cancel":
                                a.addKey("cancel", n).addClass(i.css.buttonAction);
                                break;
                            case"combo":
                                a.addKey("combo", "combo").addClass(i.css.buttonAction);
                                break;
                            case"dec":
                                p.push(a.decimal ? "." : ","), a.addKey("dec", "dec");
                                break;
                            case"e":
                            case"enter":
                                a.addKey("enter", n).addClass(i.css.buttonAction);
                                break;
                            case"s":
                            case"shift":
                                a.addKey("shift", n);
                                break;
                            case"sign":
                                p.push("-"), a.addKey("sign", "sign");
                                break;
                            case"space":
                                p.push(" "), a.addKey("space", "space");
                                break;
                            case"t":
                            case"tab":
                                a.addKey("tab", n);
                                break;
                            default:
                                e.keyboard.keyaction.hasOwnProperty(n) && a.addKey(n, n)[o ? "addClass" : "removeClass"](i.css.buttonAction)
                        }
                    } else t = d[c], p.push(":" === t ? t : t.split(":")[0]), a.addKey(t, t, !0);
                    s.find(".ui-keyboard-button:last").after('<br class="ui-keyboard-button-endrow">')
                }
            }), h > 1 && (a.sets = !0), f.hasMappedKeys = !e.isEmptyObject(f.mappedKeys), f.$keyboard = m, m
        }, a.destroy = function () {
            e(document).unbind("mousedown.keyboard keyup.keyboard touchstart.keyboard"), a.$keyboard.length && a.$keyboard.remove();
            var t = e.trim(i.openOn + " accepted beforeClose canceled change contextmenu hidden initialized keydown keypress keyup visible ").split(" ").join(".keyboard ");
            a.$el.removeClass("ui-keyboard-input ui-keyboard-lockedinput ui-keyboard-placeholder ui-keyboard-notallowed ui-keyboard-always-open " + i.css.input).removeAttr("aria-haspopup").removeAttr("role").unbind(t + ".keyboard").removeData("keyboard")
        }, a.init()
    }, e.keyboard.keyaction = {
        accept: function (e) {
            return e.close(!0), !1
        }, alt: function (e, t) {
            e.altActive = !e.altActive, e.showKeySet(t)
        }, bksp: function (e) {
            e.insertText("bksp")
        }, cancel: function (e) {
            return e.close(), !1
        }, clear: function (e) {
            e.$preview.val("")
        }, combo: function (e) {
            var t = !e.options.useCombos;
            return e.options.useCombos = t, e.$keyboard.find(".ui-keyboard-combo").toggleClass(e.options.css.buttonAction, t), t && e.checkCombos(), !1
        }, dec: function (e) {
            e.insertText(e.decimal ? "." : ",")
        }, "default": function (e, t) {
            e.shiftActive = e.altActive = e.metaActive = !1, e.showKeySet(t)
        }, enter: function (t, n, i) {
            var a = t.el.tagName, r = t.options;
            return i.shiftKey ? r.enterNavigation ? t.switchInput(!i[r.enterMod], !0) : t.close(!0) : r.enterNavigation && ("TEXTAREA" !== a || i[r.enterMod]) ? t.switchInput(!i[r.enterMod], r.autoAccept ? "true" : !1) : void ("TEXTAREA" === a && e(i.target).closest("button").length && t.insertText(" \n"))
        }, lock: function (e, t) {
            e.lastKeyset[0] = e.shiftActive = e.capsLock = !e.capsLock, e.showKeySet(t)
        }, left: function (e) {
            var t = e.$preview.caret();
            t.start - 1 >= 0 && (e.lastCaret = {start: t.start - 1, end: t.start - 1})
        }, meta: function (t, n) {
            t.metaActive = e(n).hasClass(t.options.css.buttonAction) ? !1 : !0, t.showKeySet(n)
        }, next: function (e) {
            return e.switchInput(!0, e.options.autoAccept), !1
        }, prev: function (e) {
            return e.switchInput(!1, e.options.autoAccept), !1
        }, right: function (e) {
            var t = e.$preview.caret();
            t.start + 1 <= e.$preview.val().length && (e.lastCaret = {start: t.start + 1, end: t.start + 1})
        }, shift: function (e, t) {
            e.lastKeyset[0] = e.shiftActive = !e.shiftActive, e.showKeySet(t)
        }, sign: function (e) {
            /^\-?\d*\.?\d*$/.test(e.$preview.val()) && e.$preview.val(-1 * e.$preview.val())
        }, space: function (e) {
            e.insertText(" ")
        }, tab: function (e) {
            var t = e.el.tagName, n = e.options;
            return "INPUT" === t ? n.tabNavigation ? e.switchInput(!e.shiftActive, !0) : !1 : void e.insertText("	")
        }
    }, e.keyboard.builtLayouts = {}, e.keyboard.layouts = {
        alpha: {
            "default": ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} a b c d e f g h i j [ ] \\", "k l m n o p q r s ; ' {enter}", "{shift} t u v w x y z , . / {shift}", "{accept} {space} {cancel}"],
            shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} A B C D E F G H I J { } |", 'K L M N O P Q R S : " {enter}', "{shift} T U V W X Y Z < > ? {shift}", "{accept} {space} {cancel}"]
        },
        qwerty: {
            "default": ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w e r t y u i o p [ ] \\", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {space} {cancel}"],
            shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W E R T Y U I O P { } |", 'A S D F G H J K L : " {enter}', "{shift} Z X C V B N M < > ? {shift}", "{accept} {space} {cancel}"]
        },
        international: {
            "default": ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w e r t y u i o p [ ] \\", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"],
            shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W E R T Y U I O P { } |", 'A S D F G H J K L : " {enter}', "{shift} Z X C V B N M < > ? {shift}", "{accept} {alt} {space} {alt} {cancel}"],
            alt: ["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}", "{tab} ä å é ® þ ü ú í ó ö « » ¬", "á ß ð f g h j k ø ¶ ´ {enter}", "{shift} æ x © v b ñ µ ç > ¿ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
            "alt-shift": ["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}", "{tab} Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦", "Ä § Ð F G H J K Ø ° ¨ {enter}", "{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}", "{accept} {alt} {space} {alt} {cancel}"]
        },
        colemak: {
            "default": ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w f p g j l u y ; [ ] \\", "{bksp} a r s t d h n e i o ' {enter}", "{shift} z x c v b k m , . / {shift}", "{accept} {space} {cancel}"],
            shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W F P G J L U Y : { } |", '{bksp} A R S T D H N E I O " {enter}', "{shift} Z X C V B K M < > ? {shift}", "{accept} {space} {cancel}"]
        },
        dvorak: {
            "default": ["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}", "{tab} ' , . p y f g c r l / = \\", "a o e u i d h t n s - {enter}", "{shift} ; q j k x b m w v z {shift}", "{accept} {space} {cancel}"],
            shift: ["~ ! @ # $ % ^ & * ( ) { } {bksp}", '{tab} " < > P Y F G C R L ? + |', "A O E U I D H T N S _ {enter}", "{shift} : Q J K X B M W V Z {shift}", "{accept} {space} {cancel}"]
        },
        num: {"default": ["= ( ) {b}", "{clear} / * -", "7 8 9 +", "4 5 6 {sign}", "1 2 3 %", "0 . {a} {c}"]}
    }, e.keyboard.defaultOptions = {
        layout: "qwerty",
        customLayout: null,
        position: {of: null, my: "center top", at: "center top", at2: "center bottom"},
        usePreview: !0,
        alwaysOpen: !1,
        initialFocus: !0,
        stayOpen: !1,
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "Accept:Accept (Shift-Enter)",
            alt: "Alt:⌥ AltGr",
            b: "⌫:Backspace",
            bksp: "Bksp:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "Cancel:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "⏎:Enter",
            empty: " ",
            enter: "Enter:Enter ⏎",
            left: "←",
            lock: "Lock:⇪ Caps Lock",
            next: "Next ⇨",
            prev: "⇦ Prev",
            right: "→",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        },
        wheelMessage: "Use mousewheel to see other keys",
        css: {
            input: "ui-widget-content ui-corner-all",
            container: "ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",
            buttonDefault: "ui-state-default ui-corner-all",
            buttonHover: "ui-state-hover",
            buttonAction: "ui-state-active",
            buttonDisabled: "ui-state-disabled",
            buttonEmpty: "ui-keyboard-empty"
        },
        autoAccept: !1,
        lockInput: !1,
        restrictInput: !1,
        acceptValid: !1,
        cancelClose: !0,
        tabNavigation: !1,
        enterNavigation: !1,
        enterMod: "altKey",
        stopAtEnd: !0,
        appendLocally: !1,
        appendTo: "body",
        stickyShift: !0,
        preventPaste: !1,
        caretToEnd: !1,
        maxLength: !1,
        repeatDelay: 500,
        repeatRate: 20,
        resetDefault: !1,
        openOn: "focus",
        keyBinding: "mousedown touchstart",
        useCombos: !0,
        combos: {
            "`": {a: "à", A: "À", e: "è", E: "È", i: "ì", I: "Ì", o: "ò", O: "Ò", u: "ù", U: "Ù", y: "ỳ", Y: "Ỳ"},
            "'": {a: "á", A: "Á", e: "é", E: "É", i: "í", I: "Í", o: "ó", O: "Ó", u: "ú", U: "Ú", y: "ý", Y: "Ý"},
            '"': {a: "ä", A: "Ä", e: "ë", E: "Ë", i: "ï", I: "Ï", o: "ö", O: "Ö", u: "ü", U: "Ü", y: "ÿ", Y: "Ÿ"},
            "^": {a: "â", A: "Â", e: "ê", E: "Ê", i: "î", I: "Î", o: "ô", O: "Ô", u: "û", U: "Û", y: "ŷ", Y: "Ŷ"},
            "~": {
                a: "ã",
                A: "Ã",
                e: "ẽ",
                E: "Ẽ",
                i: "ĩ",
                I: "Ĩ",
                o: "õ",
                O: "Õ",
                u: "ũ",
                U: "Ũ",
                y: "ỹ",
                Y: "Ỹ",
                n: "ñ",
                N: "Ñ"
            }
        },
        validate: function () {
            return !0
        }
    }, e.keyboard.comboRegex = /([`\'~\^\"ao])([a-z])/gim, e.keyboard.currentKeyboard = "", e.fn.keyboard = function (t) {
        return this.each(function () {
            e(this).data("keyboard") || new e.keyboard(this, t)
        })
    }, e.fn.getkeyboard = function () {
        return this.data("keyboard")
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/chinese", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts.chinese = {
        "default": ["~ ㄅ ㄉ ˇ ˋ ㄓ ˊ ॱ ㄚ ㄞ ㄢ ㄦ = {bksp}", "{tab} ㄆ ㄊ ㄍ ㄐ ㄔ ㄗ ㄧ ㄛ ㄟ ㄣ [ ] \\", "ㄇ ㄋ ㄎ ㄑ ㄕ ㄘ ㄨ ㄜ ㄠ ㄤ ' {enter}", "{shift} ㄈ ㄌ ㄏ ㄒ ㄖ ㄙ ㄩ ㄝ ㄡ ㄥ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ["ˋ 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w e r t y u i o p [ ] \\", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["~ ㄅ ㄉ ˇ ˋ ㄓ ˊ ॱ ㄚ ㄞ ㄢ ㄦ = {bksp}", "{tab} ㄆ ㄊ ㄍ ㄐ ㄔ ㄗ ㄧ ㄛ ㄟ ㄣ [ ] \\", "ㄇ ㄋ ㄎ ㄑ ㄕ ㄘ ㄨ ㄜ ㄠ ㄤ ' {enter}", "{shift} ㄈ ㄌ ㄏ ㄒ ㄖ ㄙ ㄩ ㄝ ㄡ ㄥ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        "alt-shift": ["ˋ 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w e r t y u i o p [ ] \\", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.chinese = {
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "接受:Accept (Shift-Enter)",
            alt: "Alt:Alternate Graphemes",
            b: "←:Backspace",
            bksp: "Bksp:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "取消:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "↵:Enter",
            enter: "Enter:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "使用滑鼠滾輪來檢視其它按鍵。"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/french", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["french-azerty-1"] = {
        "default": ["² & é \" ' ( - è _ ç à ) = {bksp}", "{tab} a z e r t y u i o p ^ $", "q s d f g h j k l m  ù * {enter}", "{shift} < w x c v b n , ; : ! {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ["{sp:1} 1 2 3 4 5 6 7 8 9 0 ° + {bksp}", "{tab} A Z E R T Y U I O P ¨ £", "Q S D F G H J K L M % µ {enter}", "{shift} > W X C V B N ? . / § {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["² & ~ # { [ | ` \\ ^ @ ] } {bksp}", "{tab} a z € r t y u i o p ^ ¤", "q s d f g h j k l m  ù * {enter}", "{shift} < w x c v b n , ; : ! {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        "alt-shift": ["{sp:1} 1 ~ # { [ | ` \\ ^ @ ] } {bksp}", "{tab} A Z € R T Y U I O P ¨ ¤", "Q S D F G H J K L M % µ {enter}", "{shift} > W X C V B N ? . / § {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, e.keyboard.layouts["french-azerty-2"] = {
        "default": ["² & é \" ' ( - è _ ç à ) = {b}", "{t} a z e r t y u i o p ^ $", "q s d f g h j k l m  ù * {e}", "{s} < w x c v b n , ; : ! {s}", "{a} {alt} {space} {alt} {c}"],
        shift: ["{sp:1} 1 2 3 4 5 6 7 8 9 0 ° + {b}", "{t} A Z E R T Y U I O P ¨ £", "Q S D F G H J K L M % µ {e}", "{s} > W X C V B N ? . / § {s}", "{accept} {alt} {space} {alt} {c}"],
        alt: ["² & ~ # { [ | ` \\ ^ @ ] } {b}", "{t} a z € r t y u i o p ^ ¤", "q s d f g h j k l m  ù * {e}", "{s} < w x c v b n , ; : ! {s}", "{a} {alt} {space} {alt} {c}"],
        "alt-shift": ["{sp:1} 1 ~ # { [ | ` \\ ^ @ ] } {b}", "{t} A Z € R T Y U I O P ¨ ¤", "Q S D F G H J K L M % µ {e}", "{s} > W X C V B N ? . / § {s}", "{a} {alt} {space} {alt} {c}"]
    }, e.keyboard.layouts["french-bepo-V1.0rc2"] = {
        "default": ['$ " « » ( ) @ + - / * = % {b}', "{t} b é p o è ˆ v d l j z w", "a u i e , c t s r n m ç {enter}", "{s} ê à y x . k ' q g h f {s}", "{a} {alt} {space} {alt} {c}"],
        shift: ["# 1 2 3 4 5 6 7 8 9 0 ° ` {b}", "{t} B É P O È ! V D L J Z W", "A U I E ; C T S R N M Ç {enter}", "{s} Ê À Y X : K ? Q G H F {s}", "{a} {alt} {space} {alt} {c}"],
        alt: ["– — < > [ ] ^ ± − ÷ × ≠ ‰ {b}", "{t} | ´ & œ ` ¡ ˇ ð / ĳ ə ˘", "æ ù ¨ € ’ © þ ß ® ~ ¯ ¸ {enter}", "{s} / \\ { } … ~ ¿ ° µ † ˛ {s}", "{a} {alt} {space} {alt} {c}"],
        "alt-shift": ["¶ „ “ ” ≤ ≥ {empty} ¬ ¼ ½ ¾ ′ ″ {b}", "{t} ¦ ˝ § Œ ` ¡ {empty} Ð {empty} Ĳ Ə ˘", "Æ Ù ˙ ¤ ̛ ſ Þ ẞ ™ {empty} º , {enter}", "{s} {empty} {empty} ‘ ’ · {empty} ̉ ̣ {empty} ‡ ª {s}", "{a} {alt} {space} {alt} {c}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.french = {
        display: {
            a: "✔:Valider (Shift-Enter)",
            accept: "Valider:Valider (Shift-Enter)",
            alt: "AltGr:Charactère alternatif",
            b: "←:Suppr arrière",
            bksp: "←Suppr:Suppr arrière",
            c: "✖:Annuler",
            cancel: "Annuler:Annuler (Échap)",
            clear: "C:Effacer",
            combo: "ö:Bacsuler les touches combo",
            dec: ".:Decimal",
            e: "↵:Entrée",
            enter: "Entrée:Entrée",
            lock: "⇪ Verr Mag:Verouillage majuscule",
            s: "⇧:Majuscule",
            shift: "Maj:Majuscule",
            sign: "±:Change de signe",
            space: "&nbsp;:Espace",
            t: "⇥:Tabulation",
            tab: "⇥ Tab:Tabulation"
        }, wheelMessage: "Utiliser la molette de la souris pour voir les autres lettres"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/german", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["german-qwertz-1"] = {
        "default": ["̂ 1 2 3 4 5 6 7 8 9 0 ß ́ {bksp}", "{tab} q w e r t z u i o p ü +", "a s d f g h j k l ö ä # {enter}", "{shift} < y x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ['° ! " § $ % & / ( ) = ? ̀ {bksp}', "{tab} Q W E R T Z U I O P Ü *", "A S D F G H J K L Ö Ä ' {enter}", "{shift} > Y X C V B N M ; : _ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["̂ 1 ² ³ 4 5 6 { [ ] } \\ ́ {bksp}", "{tab} @ w € r t z u i o p ü ̃", "a s d f g h j k l ö ä # {enter}", "{shift} | y x c v b n µ , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, e.keyboard.layouts["german-qwertz-2"] = {
        "default": ["§ 1 2 3 4 5 6 7 8 9 0 ' ̂ {bksp}", "{tab} q w e r t z u i o p ü ̈", "a s d f g h j k l ö ä $ {enter}", "{shift} < y x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ['° + " * ç % & / ( ) = ? ̀ {bksp}', "{tab} Q W E R T Z U I O P è !", "A S D F G H J K L é à £ {enter}", "{shift} > Y X C V B N M ; : _ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["§ | @ # 4 5 ¬ ¦ ¢ 9 0 ́ ̃ {bksp}", "{tab} q w € r t z u i o p [ ]", "a s d f g h j k l ö { } {enter}", "{shift} \\ y x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.german = {
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "Best.:Accept (Shift-Enter)",
            alt: "Alt Gr:Alternate Graphemes",
            b: "←:Backspace",
            bksp: "Rück:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "Abbr.:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "↵:Enter",
            enter: "Enter:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "Use mousewheel to see other keys"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/japanese", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["japanese-kana"] = {
        "default": ["あ か さ た な は ま や ら わ {bksp}", "い き し ち に ひ み ゆ り を {tab}", "う く す つ ぬ ふ む よ る ん {enter}", "え け せ て ね へ め ! れ ゙ {shift}", "お こ そ と の ほ も ? ろ ゚ {alt}", "{accept} {space} {cancel}"],
        shift: ["1 2 3 4 5 6 7 8 9 0 {bksp}", "ぁ ぃ ぅ ぇ ぉ ､ ｡ ･ ー ~ {tab}", "ゃ ゅ ょ っ $ ｢ ｣ … ( ) {enter}", "♪ ￥ {empty} {empty} {empty} {empty} {empty} {empty} {empty} {empty} {shift}", "{empty} {empty} {empty} {empty} {empty} {empty} {empty} {empty} {empty} {empty} {alt}", "{accept} {space} {cancel}"],
        alt: ["1 2 3 4 5 6 7 8 9 0 {bksp}", "q w e r t y u i o p {tab}", "a s d f g h j k l ;  {enter}", "z x c v b n m , . / {shift}", "` - = [ ] \\ ' {empty} {empty} {empty} {alt}", "{accept} {space} {cancel}"],
        "alt-shift": ["! @ # $ % ^ & * ( ) {bksp}", "Q W E R T Y U I O P {tab}", "A S D F G H J K L :  {enter}", "Z X C V B N M < > ? {shift}", '~ _ + { } | " {empty} {empty} {empty} {alt}', "{accept} {space} {cancel}"]
    }, e.keyboard.layouts["japanese-qwerty"] = {
        "default": ["1 2 3 4 5 6 7 8 9 0 - ^ ¥ {bksp}", "{tab} q w e r t y u i o p @ [", "a s d f g h j k l ; : ] {enter}", "{shift} z x c v b n m , . / \\ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ["! \" # $ % & ' ( ) ́ = ~ | {bksp}", "{tab} Q W E R T Y U I O P ` {", "A S D F G H J K L + * } {enter}", "{shift} Z X C V B N M < > ? _ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["ぬ ふ あ う え お や ゆ よ わ ほ へ ｰ {bksp}", "{tab} た て い す か ん な に ら せ ﾞ ﾟ", "ち と し は き く ま の り れ け む {enter}", "{shift} つ さ そ ひ こ み も ね る め ろ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        "alt-shift": ["́ ́ ぁ ぅ ぇ ぉ ゃ ゅ ょ を ́ ́ ́ {bksp}", "{tab} ́ ́ ぃ ́ ́ ́ ́ ́ ́ ́ ́ ｢", "́ ́ ́ ́ ́ ́ ́ ́ ́ ́ ヶ ｣ {enter}", "{shift} っ ́ ́ ́ ́ ́ ́ ､ ｡ ･ ¦ {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.japanese = {
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "OK:Accept (Shift-Enter)",
            alt: "Alt:Roma-ji | Hiragana/Kana",
            b: "←:Backspace",
            bksp: "Bksp:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "Cancel:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "↵:Enter",
            enter: "Enter:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Shift:Katakana |Hiragana",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "マウスホイールで他のキーを表示"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/polish", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["polish-qwerty"] = {
        "default": ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w e r t y u i o p [ ] °", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W E R T Y U I O P { } |", 'A S D F G H J K L : " {enter}', "{shift} Z X C V B N M < > ? {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w ę r t y € i ó p [ ] °", 'ą ś d f g h j k ł : " {enter}', "{shift} ż ź ć v b ń m , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.polish = {
        display: {
            a: "✔:Akceptuj (Shift-Enter)",
            accept: "Akc.:Akceptuj (Shift-Enter)",
            alt: "Alt:Polskie znaki",
            b: "←:Cofnij",
            bksp: "Bksp:Cofnij",
            c: "✖:Anuluj (Esc)",
            cancel: "Anul.:Anuluj (Esc)",
            clear: "C:Czyść",
            combo: "ö:Klawisze kombo",
            dec: ".:Dziesiętny",
            e: "↵:Enter",
            enter: "Enter:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Zmień znak",
            space: "&nbsp;:Spacja",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "Użyj rolki aby zobaczyć pozozstałe klawisze"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/portuguese", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["portuguese-qwerty"] = {
        "default": ["\\ 1 2 3 4 5 6 7 8 9 0 ' « {bksp}", "{tab} q w e r t y u i o p + ´", "a s d f g h j k l ç º ~ {enter}", "{shift} < z x c v b n m , . - {shift}", "{cancel} {space} {alt} {accept}"],
        shift: ['| ! " # $ % & / ( ) = ? » {bksp}', "{tab} Q W E R T Y U I O P * `", "A S D F G H J K L Ç ª ^ {enter}", "{shift} > Z X C V B N M ; : _ {shift}", "{cancel} {space} {alt} {accept}"],
        alt: ["\\ 1 @ £ § € 6 { [ ] } ' « {bksp}", "{tab} q w € r t y u i o p ̈ ´", "a s d f g h j k l ç º ~ {enter}", "{shift} < z x c v b n m , . - {shift}", "{cancel} {space} {alt} {accept}"],
        "alt-shift": ['| ! " # $ % & / ( ) = ? » {bksp}', "{tab} Q W € R T Y U I O P ̈ `", "A S D F G H J K L Ç ª ^ {enter}", "{shift} > Z X C V B N M ; : _ {shift}", "{cancel} {space} {alt} {accept}"]
    }, e.extend(!0, e.keyboard.defaultOptions.combos, {
        "´": {
            a: "á",
            A: "Á",
            e: "é",
            E: "É",
            i: "í",
            I: "Í",
            o: "ó",
            O: "Ó",
            u: "ú",
            U: "Ú",
            y: "ý",
            Y: "Ý"
        }
    }), e.keyboard.defaultOptions.combos["'"] = {}, e.keyboard.comboRegex = /([`\'~\^\"ao\u00b4])([a-z])/gim, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.portuguese = {
        display: {
            a: "✔:Aceite (Shift-Enter)",
            accept: "Aceit:Concluir (Shift-Enter)",
            alt: "AltGr:Carateres Adicionais/CTRL+ALT",
            b: "←:Retroceder",
            bksp: "Bksp:Retroceder",
            c: "✖:Cancelar/Escape (Esc)",
            cancel: "Anule:Cancelar/Escape(Esc)",
            clear: "C:Limpar",
            combo: "ö:Acentuação Automática",
            dec: ".:Decimal",
            e: "↵:Introduzir/Mudar de Linha",
            enter: "Enter:Introduzir/Mudar de Linha",
            lock: "⇪ Lock:CapsLock/Maiúsculas",
            s: "⇧:Shift/Maiúsculas",
            shift: "Shift:Maiúsculas-Minúsculas",
            sign: "±:Mudar Sinal",
            space: "&nbsp;:Espaço",
            t: "⇥:Tab/Tabela/Avançar",
            tab: "⇥ Tab:Tabela/Avançar"
        }, wheelMessage: "Use a roda do rato/navegador para ver mais teclas"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/russian", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["russian-qwerty"] = {
        "default": ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w e r t y u i o p [ ] \\", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W E R T Y U I O P { } |", 'A S D F G H J K L : " {enter}', "{shift} Z X C V B N M < > ? {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["ё 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} й ц у к е н г ш щ з х ъ \\", "ф ы в а п р о л д ж э {enter}", "{shift} я ч с м и т ь б ю . {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        "alt-shift": ['Ё ! " № ; € : ? * ( ) _ + {bksp}', "{tab} Й Ц У К Е Н Г Ш Щ З Х Ъ /", "Ф Ы В А П Р О Л Д Ж Э {enter}", "{shift} Я Ч С М И Т Ь Б Ю , {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.russian = {
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "Принять:Accept (Shift-Enter)",
            alt: "AltGr:Alternate Graphemes",
            b: "←:Backspace",
            bksp: "Bksp:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "Отмена:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "↵:Enter",
            enter: "Enter:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "Use mousewheel to see other keys"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/spanish", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["spanish-qwerty"] = {
        "default": ["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}", "{tab} q w e r t y u i o p ́ +", "a s d f g h j k l ñ { } {enter}", "{shift} < z x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ['° ! " # $ % & / ( ) = ? ¡ {bksp}', "{tab} Q W E R T Y U I O P ̈ *", "A S D F G H J K L Ñ [ ] {enter}", "{shift} > Z X C V B N M ; : _ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["¬ 1 2 3 4 5 6 7 8 9 0 \\ ¿ {bksp}", "{tab} @ w e r t y u i o p ́ ̃", "a s d f g h j k l ñ ̂ ̀ {enter}", "{shift} < z x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        "alt-shift": ['° ! " # $ % & / ( ) = ? ¡ {bksp}', "{tab} Q W E R T Y U I O P ̈ *", "A S D F G H J K L Ñ [ ] {enter}", "{shift} > Z X C V B N M ; : _ {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, e.keyboard.layouts["spanish-qwerty-sp"] = {
        "default": ["º 1 2 3 4 5 6 7 8 9 0 ' ¡ {bksp}", "{tab} q w e r t y u i o p ̀ +", "a s d f g h j k l ñ ́ ç {enter}", "{shift} < z x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ['ª ! " · $ % & / ( ) = ? ¿ {bksp}', "{tab} Q W E R T Y U I O P ^ *", "A S D F G H J K L Ñ ̈ Ç {enter}", "{shift} > Z X C V B N M ; : _ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["\\ | @ # 4 5 ¬ 7 8 9 0 ' ¡ {bksp}", "{tab} q w e r t y u i o p [ ]", "a s d f g h j k l ñ { } {enter}", "{shift} | z x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        "alt-shift": ['ª ! " · $ % & / ( ) = ? ¿ {bksp}', "{tab} Q W E R T Y U I O P [ ]", "A S D F G H J K L Ñ { } {enter}", "{shift} > Z X C V B N M ; : _ {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.spanish = {
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "Acep.:Accept (Shift-Enter)",
            alt: "Alt:Alternate Graphemes",
            b: "←:Backspace",
            bksp: "Borrar:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "Cancel.:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "↵:Enter",
            enter: "Enter:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "Utilice la rueda del mouse para ver otras teclas"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/italian", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["standard-italian"] = {
        "default": ["\\ 1 2 3 4 5 6 7 8 9 0 ́ ì ù {bksp}", "{tab} q w e r t y u i o p è +", "a s d f g h j k l ò à {enter}", "{shift} z x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ['| ! " £ $ % & / ( ) = ? ‸ § {bksp}', "{tab} Q W E R T Y U I O P é *", "A S D F G H J K L ç ° {enter}", "{shift} Z X C V B N M ; : _ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        alt: ["\\ 1 2 3 4 € 6 7 8 9 0 ́ ì ù {bksp}", "{tab} q w € r t y u i o p [ ]", "a s d f g h j k l @ # {enter}", "{shift} z x c v b n m , . - {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        "alt-shift": ['| ! " £ $ % & / ( ) = ? ‸ § {bksp}', "{tab} Q W E R T Y U I O P { }", "A S D F G H J K L ç ° {enter}", "{shift} Z X C V B N M ; : _ {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.italian = {
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "Conferma:Accept (Shift-Enter)",
            alt: "Alt:Alternate Graphemes",
            b: "←:Backspace",
            bksp: "Bksp:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "Annulla:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "↵:Enter",
            enter: "Invio:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Maiusc:Shift",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "Usa la rotella del mouse per vedere altri tasti"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/korean", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["standard-2-beolsik"] = {
        "default": ["~ 1 2 3 4 5 6 7 8 9 0 - = \\ {bksp}", "{tab} ㅂ ㅈ ㄷ ㄱ ㅅ ㅛ ㅕ ㅑ ㅐ ㅔ [ ]", "ㅁ ㄴ ㅇ ㄹ ㅎ ㅗ ㅓ ㅏ ㅣ ; ' {enter}", "{shift} ㅋ ㅌ ㅊ ㅍ ㅠ ㅜ ㅡ , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        shift: ["ˋ ! @ # $ % ^ & * ( ) _ + | {bksp}", "{tab} ㅃ ㅉ ㄲ ㄲ ㅆ ㅅ ㅛ ㅕ ㅒ ㅖ { }", 'ㅁ ㄴ ㅇ ㄹ ㅎ ㅗ ㅓ ㅏ ㅣ : " {enter}', "{shift} ㅋ ㅌ ㅊ ㅍ ㅠ ㅜ ㅡ < > ? {shift}", "{accept} {alt} {space} {alt} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.korean = {
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "확인:Accept (Shift-Enter)",
            alt: "Alt:Alternate Graphemes",
            b: "←:Backspace",
            bksp: "Bksp:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "취소:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "↵:Enter",
            enter: "Enter:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "다른 키를 보려면 마우스 휠을 이용하십시오"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/keyboard/mexican", ["jquery", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.keyboard.layouts["mexican-qwerty"] = {
        "default": ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} x x x r t y u i o p [ ] \\", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {space} {cancel}"],
        shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W E R T Y U I O P { } |", 'A S D F G H J K L : " {enter}', "{shift} Z X C V B N M < > ? {shift}", "{accept} {space} {cancel}"]
    }, "undefined" == typeof e.keyboard.language && (e.keyboard.language = {}), e.keyboard.language.mexican = {
        display: {
            a: "✔:Accept (Shift-Enter)",
            accept: "Acep.:Accept (Shift-Enter)",
            alt: "Alt:Alternate Graphemes",
            b: "←:Backspace",
            bksp: "Retr:BKsp",
            c: "✖:Cancel (Esc)",
            cancel: "Anular:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "↵:Enter",
            enter: "Enter:Enter",
            lock: "⇪ Lock:Caps Lock",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Change Sign",
            space: "&nbsp;:Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab"
        }, wheelMessage: "Utilice la rueda del mouse para ver otras teclas"
    }
}), function (e) {
    "function" == typeof define && define.amd ? define("common/jquery.keyboard.extension-autocomplete", ["jquery", "jquery-ui", "common/jquery.keyboard"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
}(function (e) {
    e.fn.addAutocomplete = function () {
        return this.each(function () {
            var t = e(this).data("keyboard");
            t && (t.autocomplete_new_version = function (e) {
                return e[0] = parseInt(e[0], 10), e[0] > 1 || 1 === e[0] && parseInt(e[1], 10) >= 9
            }(e.ui.version.split(".")), t.autocomplete_init = function () {
                t.options.alwaysOpen && t.isVisible() && t.autocomplete_setup(), t.$el.bind("visible.keyboard", function () {
                    t.autocomplete_setup()
                }).bind("change.keyboard", function () {
                    t.hasAutocomplete && t.isVisible() && t.$el.val(t.$preview.val()).trigger("keydown.autocomplete")
                }).bind("hidden.keyboard", function () {
                    t.$el.autocomplete("close")
                }).bind("autocompleteopen", function () {
                    t.hasAutocomplete && t.$autocomplete.menu.element.position({
                        of: t.$keyboard,
                        my: "right top",
                        at: "left top",
                        collision: "flip"
                    })
                }).bind("autocompleteselect", function (e, n) {
                    var i = n.item.value;
                    t.hasAutocomplete && "" !== i && (t.$preview.val(i).focus(), t.lastCaret = {
                        start: i.length,
                        end: i.length
                    })
                })
            }, t.autocomplete_setup = function () {
                t.$autocomplete = t.$el.data("autocomplete") || t.$el.data("uiAutocomplete"), t.hasAutocomplete = "undefined" == typeof t.$autocomplete ? !1 : t.$autocomplete.options.disabled ? !1 : !0, t.hasAutocomplete && (t.$preview.bind("keydown", function (e) {
                    return t.autocomplete_input(e)
                }), t.$allKeys.bind("mouseup mousedown mouseleave touchstart touchend touchcancel", function (e) {
                    t.autocomplete_input(e)
                }))
            }, t.autocomplete_input = function (n) {
                var i, a = e.ui.keyCode;
                switch (n.keyCode) {
                    case a.PAGE_UP:
                        t.$autocomplete._move("previousPage", n), n.preventDefault();
                        break;
                    case a.PAGE_DOWN:
                        t.$autocomplete._move("nextPage", n), n.preventDefault();
                        break;
                    case a.UP:
                        t.$autocomplete._move("previous", n), n.preventDefault();
                        break;
                    case a.DOWN:
                        t.$autocomplete._move("next", n), n.preventDefault();
                        break;
                    case a.ENTER:
                    case a.NUMPAD_ENTER:
                        i = t.$autocomplete.menu.element.find("#ui-active-menuitem,.ui-state-focus").text() || "", "" !== i && t.$preview.val(i), t.autocomplete_new_version && t.$autocomplete.menu.select(n);
                        break;
                    default:
                        clearTimeout(t.$autocomplete.searching), t.$autocomplete.searching = setTimeout(function () {
                            t.$autocomplete.term !== t.$autocomplete.element.val() && (t.$autocomplete.selectedItem = null, t.$autocomplete.search(null, n))
                        }, t.$autocomplete.options.delay)
                }
            }, t.origEscClose = t.escClose, t.escClose = function (n) {
                (!t.hasAutocomplete || "ui-active-menuitem" !== n.target.id && !e(n.target).closest("ul").hasClass("ui-autocomplete")) && t.origEscClose(n)
            }, t.autocomplete_init())
        })
    }
}), define("common/virtualKeyboard", ["utils", "underscore", "common/keyboard/chinese", "common/keyboard/french", "common/keyboard/german", "common/keyboard/japanese", "common/keyboard/polish", "common/keyboard/portuguese", "common/keyboard/russian", "common/keyboard/spanish", "common/keyboard/italian", "common/keyboard/korean", "common/keyboard/mexican", "common/jquery.keyboard", "common/jquery.keyboard.extension-autocomplete"], function (e, t) {
    function n() {
        var e = $.data(document.body, "virtualKeyboard");
        return void 0 != e ? e : !1
    }

    function i(e, t) {
        e ? l.showVirtualKeyboard(t) : l.closeVirtualKeyboard()
    }

    function a(e) {
        return e.hasClass("ui-autocomplete-input")
    }

    function r(e) {
        var t = null;
        return "recaptcha_response_field" == e.attr("id") && $("body").hasClass("launcher") && (t = "#recaptcha_challenge_image"), t
    }

    function s() {
        var e = t.find(l.langConfig, function (e) {
            return e.id == globals.titlelang
        });
        if ("undefined" != typeof e && "undefined" != typeof $.keyboard.language[e.name]) {
            l.layout = e.layout;
            var n = $.keyboard.language[e.name];
            $.extend(!0, $.keyboard.defaultOptions, n)
        }
    }

    function o(e) {
        s(), void 0 == e ? e = n() : l.setInputElement(e);
        var t = a(e), i = "focus", o = {
            layout: l.layout,
            position: {
                of: r(e),
                my: "left top",
                at: t ? "right top" : "left bottom",
                at2: t ? "right top" : "left bottom"
            },
            initialFocus: !0,
            usePreview: !1,
            autoAccept: !0,
            enterNavigation: !0,
            tabNavigation: !0,
            openOn: i,
            css: {
                input: "ui-widget-content ui-corner-all",
                container: "ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",
                buttonDefault: "ui-state-default ui-corner-all",
                buttonHover: "ui-state-hover",
                buttonAction: "ui-state-active",
                buttonDisabled: "ui-state-disabled"
            }
        };
        t && $(document).one("beforeVisible.keyboard", function (e, t, n) {
            $(n).addAutocomplete()
        }), e.on("initialized.keyboard", function () {
            $(this).trigger(i + ".keyboard")
        }), e.keyboard(o)
    }

    var l = {
        layout: "qwerty",
        langConfig: [{id: "en-US", name: "english", layout: "qwerty"}, {
            id: "de-DE",
            name: "german",
            layout: "german-qwertz-1"
        }, {id: "es-MX", name: "mexican", layout: "mexican-qwerty"}, {
            id: "es-ES",
            name: "spanish",
            layout: "spanish-qwerty"
        }, {id: "fr-FR", name: "french", layout: "french-azerty-1"}, {
            id: "ja-JP",
            name: "japanese",
            layout: "qwerty"
        }, {id: "pl-PL", name: "polish", layout: "polish-qwerty"}, {
            id: "pt-BR",
            name: "portuguese",
            layout: "portuguese-qwerty"
        }, {id: "ru-RU", name: "russian", layout: "russian-qwerty"}, {
            id: "zh-TW",
            name: "chinese",
            layout: "qwerty"
        }, {id: "it-IT", name: "italian", layout: "standard-italian"}, {
            id: "ko-KR",
            name: "korean",
            layout: "standard-2-beolsik"
        }]
    };
    return l.setInputElement = function (e) {
        $.data(document.body, "virtualKeyboard", e)
    }, l.isActive = function () {
        var e = n();
        return 0 != e && e.getkeyboard() && e.getkeyboard().isVisible()
    }, l.showVirtualKeyboard = function (e) {
        void 0 == e && (e = n()), e && void 0 == e.getkeyboard() && o(e)
    }, l.closeVirtualKeyboard = function () {
        var e = n();
        e && e.getkeyboard() && e.getkeyboard().close()
    }, l.destroyKeyboard = function () {
        var e = n();
        if (void 0 != e) {
            var t = e.getkeyboard();
            void 0 != t && e.getkeyboard().destroy()
        }
    }, e.pubsub.on("virtualKeyboard", i), l
}), function (e) {
    function t(e, t) {
        "undefined" != typeof log && (new Date).getTime() % 10 == 0 && log("redraw: this should only be happening when the spinner is visible");
        var n, i = e.data("spinner");
        if (i) {
            if (!e.is(":visible")) return void e.spinner("stop");
            i.options.frame >= i.options.frames && (i.options.frame = 1), n = "-" + i.options.frame * i.options.width + "px 0px", e.css("background-position", n), i.options.frame++
        } else clearInterval(t)
    }

    var n = {
        init: function (n) {
            return this.each(function () {
                var i, a = e(this), r = a.data("spinner"), s = {speed: 25, width: 32, height: 32};
                n = e.extend({}, s, n), r || (a.data("spinner", {options: n}), r = a.data("spinner")), a.height(r.options.height), a.width(r.options.width), r.options.image ? (a.css("background-image", "url(" + r.options.image + ")"), a.css("background-position", "0px 0px"), a.css("background-repeat", "no-repeat")) : r.options.image = a.css("background-image"), r.options.frames || (i = new Image, i.src = r.options.image, i.onload = function () {
                    r.options.frames = i.width / r.options.width
                }), r.options.endTime || (r.options.endTime = (new Date).getTime() + 6e4), r.options.frame = 1, r.options.animation = setInterval(function () {
                    t(a, r.options.animation), (new Date).getTime() > r.options.endTime && clearInterval(r.options.animation)
                }, r.options.speed)
            })
        }, stop: function () {
            return this.each(function () {
                var t = e(this), n = t.data("spinner");
                n && (clearInterval(n.options.animation), t.removeData("spinner"))
            })
        }, attachToMouse: function () {
            return this.each(function () {
                var t = e(this);
                e("body").mousemove(function (e) {
                    t.is(":hidden") && t.show(), t.css({top: e.pageY - 25 + "px", left: e.pageX + 10 + "px"})
                })
            })
        }
    };
    e.fn.spinner = function (t) {
        return n[t] ? n[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? (e.error("Method " + t + " does not exist on jQuery.spinner"), null) : n.init.apply(this, arguments)
    }
}(jQuery), define("spinner", ["jquery"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)), define("jquery.setup.environment.utils", ["jquery", "underscore", "utils", "common/virtualKeyboard", "spinner"], function (e, t, n, i) {
    function a(e, t, n, i, a, r) {
        if (w.isLauncher) e.css(t), "function" == typeof a && a.call(e); else {
            if ("undefined" != typeof r && !y.isScuiVisible()) return r || e.css(t), void ("function" == typeof a && a.call(e));
            e.animate(t, n, i, a)
        }
    }

    function r() {
        var t = e("#activation").hasClass("pending");
        w.isLauncher && !t && y.quitGame(), y.clearActivePanel(function () {
            e("#serverError").removeClass("active"), t ? (e("#activation").removeClass("pending"), e("#buttonCancel").is(":visible") ? e("#buttonCancel").click() : w.isLauncher ? y.quitGame() : y.requestUiState(!1)) : y.requestUiState(!1)
        })
    }

    function s(t) {
        y.toggleContentOff(t.find("#headerLogin"), {bottom: w.headerHeightBtm}, 200, "easeInQuart", function () {
            a(e("#headerLoginOptions"), {top: "24px"}, 200, "easeOutQuart"), a(e("#mainNav span"), {
                top: "0",
                opacity: 1
            }, 200)
        }), t.find("#headerLoginUser").show()
    }

    function o(t) {
        y.toggleContentOff(t.find("#headerLoginOptions"), {top: "-35px"}, 200, "easeInQuart", function () {
            y.toggleContentOn(e("#headerLogin"), {bottom: "12px"}, 200, "easeOutQuart")
        }), t.find("span.username").empty(), e("#signedInUser, #deleteProfileNickname, #headerLoginUser span.username").html(""), e("img.largeAvatar").attr("src", n.getAvatarUrl()), e("img.smallAvatar").attr("src", n.getAvatarUrl("", 32))
    }

    function l() {
        return e.ajax({url: w.localUrl + "?_=" + (new Date).getTime(), type: "HEAD", async: !1, silentFail: !0})
    }

    function c(e) {
        function t() {
            w.hasConnection = !1, w.hasInternet = !1, e.reject("NoInternet", "1004.1")
        }

        function n() {
            w.hasConnection = !1, w.hasInternet = !0, e.reject("SC_Down", "2000.43")
        }

        var i = document, a = "script", r = w.amUrl + "?_=" + (new Date).getTime(), s = i.createElement(a),
            o = i.getElementsByTagName(a)[0];
        s.onerror = t, s.onload = n, s.src = r, o.parentNode.insertBefore(s, o)
    }

    function d() {
        e("#launcherStyle").show(function () {
            n.isGameSupported() && require(["common/games/" + w.titleName], u)
        })
    }

    function u(t) {
        var n = t.GetLauncherConfig ? t.GetLauncherConfig() : {};
        if (n.images && n.imgInterval && n.images.length) {
            t.displayGameLogo && t.displayGameLogo();
            var i = e("#launcherPics").empty();
            e(n.images).each(function () {
                i.append(e("<li>").append(e("<img>", {src: w.baseUrl + this})))
            }), h(n.imgInterval)
        }
    }

    function h(t) {
        var n = e("#launcherPics"), i = n.find("li:first").addClass("active"), a = setInterval(function () {
            return y.isLauncherUiActive() ? (i.removeClass("active"), i = i.next(), i.length || (i = n.find("li:first")), void i.addClass("active")) : void clearInterval(a)
        }, t)
    }

    function f(e, t, n) {
        var i = {EventId: e, Data: {Action: t}};
        "undefined" != typeof n && (i.Data.Parameter = n);
        var a = JSON.stringify(i);
        a = a.replace(/","/gi, '", "'), y.CallGameMethod("RGSC_RAISE_UI_EVENT", a, "RGSC_RAISE_UI_EVENT_DEMO")
    }

    function p(e) {
        return {Authorization: 'SCAUTH val="' + e + '"'}
    }

    function m(e) {
        return {Authorization: 'SCAUTH8 val="' + e + '"'}
    }

    function g(e, n, i, a) {
        var r = "";
        n.indexOf(w.baseAssetUrl) < 0 && (n = w.baseAssetUrl + n);
        var s = getLocalizationKey(e, n), o = getLocalizationCache();
        return t.has(o, s) ? r = o[s] : a || (y.GetLocalizedTextXML(n), r = g(e, n, i, !0)), r.length || null == i || (r = i), r
    }

    function v(t, i) {
        var a = e("#achievementsData2");
        if (a.html(""), t) {
            if (t.NumAchievements > 0) {
                var r = [];
                e("#awardsOverview").html(t.NumAchievementsAwarded + " / " + t.NumAchievements), e("#awardsPoints").html(t.NumPointsAwarded), e("#statsPanel .totalPts").html(t.NumPointsAwarded), e.each(t.Achievements, function (e, t) {
                    var s = "";
                    t.DateAchieved > 0 && (s = n.localizedDateFromUnix(t.DateAchieved, "YYYY-MM-DD"));
                    var o = "";
                    if (i && i.find("Achievement[Id='" + t.Id + "']").length) {
                        var l = i.find("Achievement[Id='" + t.Id + "']").attr("DateAchieved");
                        n.WriteDebugLog("LoadGameAchievements", "compareDateAchieved id, date", t.Id + "," + l), o = l.split("T")[0], o = n.localizedDate(o, "YYYY-MM-DD")
                    }
                    var c, d = "";
                    t.Achieved ? c = t.Description : (c = t.HowTo, d = t.Visible ? " class='dimLayer'" : " class='dimLayer dimLayerHidden'");
                    var u = [];
                    if (" class='dimLayer dimLayerHidden'" == d) u.push("<tr" + d + ">"), u.push("<td class='image'><img class='avatar' src='" + w.baseUrl + "images/hidden.png' alt='' width='48' height='48'/></td>"), u.push("<td><h6>" + y.getText("HiddenAccomplishment", "HomeSignin") + "</h6><p>????</p></td>"), u.push("<td class='pointsFriend'>"), u.push("</td>"), u.push("<td class='points'></td>"), u.push("</tr>"); else try {
                        u.push("<tr" + d + ">"), u.push("<td class='image'><img class='avatar' src='" + y.GetAchievementImage(t.Id) + "' alt='' width='48' height='48'/></td>"), u.push("<td><h6>" + t.Name + "</h6><p>" + c + "</p></td>"), u.push("<td class='pointsFriend'>"), u.push("<span" + (o ? " class='unlocked'" : "") + "></span>"), u.push("<p>" + o + "</p></td>"), u.push("<td class='points'>"), u.push("<span" + (s ? " class='unlocked'" : "") + "></span>"), u.push("<p>" + s + "</p></td>"), u.push("</tr>")
                    } catch (h) {
                        u = [], u.push("<tr" + d + ">"), u.push("<td class='image'><img class='avatar' src='" + w.baseUrl + "images/temp-achievements-icon.gif' alt='' width='48' height='48'/></td>"), u.push("<td><h6>" + t.Name + "</h6><p>" + c + "</p></td>"), u.push("<td class='pointsFriend'>"), u.push("<span" + (o ? " class='unlocked'" : "") + "></span>"), u.push("<p>" + o + "</p></td>"), u.push("<td class='points'>"), u.push("<span" + (s ? " class='unlocked'" : "") + "></span>"), u.push("<p>" + s + "</p></td>"), u.push("</tr>")
                    }
                    r = r.concat(u), 0 == e ? y.removeLoading("statsPanel") : e % 10 == 0 && (a.append(r.join("")), r = [])
                }), r.length > 0 && a.append(r.join("")), r = null
            } else n.WriteDebugLog("LoadGameAchievements", "achievementsList", "achievementsList.NumAchievements = 0");
            y.hideStats() || (e("#statsLink2").removeClass("disabled"), e("#onlineStatsLink").removeClass("disabled"))
        }
        a = null, y.initHeaderMenu(!0), e("body").css("cursor", "default"), y.resetScrollbar("#statsPanel"), i = null, y.removeLoading("statsPanel")
    }

    function _(e) {
        var t = {
            HasFocus: e.hasFocus,
            Text: void 0 != e.text ? e.text : "",
            ForwardToGame: void 0 != e.forwardToGame ? e.forwardToGame : !0,
            IsPassword: void 0 != e.isPassword ? e.isPassword : void 0 != e.$el && "password" == e.$el.attr("type")
        };
        void 0 == e.maxLength && void 0 != e.$el && (e.maxLength = Number(e.$el.attr("maxlength")), isNaN(e.maxLength) && (e.maxLength = 0)), t.MaxNumChars = e.maxLength || 255, void 0 != e.prompt && (t.Prompt = e.prompt), y.CallGameMethod("RGSC_SET_TEXT_BOX_HAS_FOCUS", JSON.stringify(t), "RGSC_SET_TEXT_BOX_HAS_FOCUS_DEMO")
    }

    function b(e) {
        var t = document.createElement("a");
        return t.href = e, t.hostname
    }

    var y = {};
    "undefined" == typeof window.globals && (window.globals = {});
    var w = window.globals;
    y.CallGameMethod = function (t, i, a, r) {
        null != i && "object" == typeof i && (i = JSON.stringify(i)), n.WriteDllLog(t, "jsonData", i);
        var s, o = window[t];
        if ("function" == typeof o) try {
            return "RGSC_UI_STATE_RESPONSE" != t || 1 == w.waitingResponse ? ("RGSC_UI_STATE_RESPONSE" == t && (n.WriteDebugLog(t, "waitingResponse", w.waitingResponse), w.waitingResponse = !1), s = o(i), e.parseJSON(s)) : s
        } catch (l) {
            return "RGSC_GET_AVATAR" !== t && n.WriteDebugLog(t, "error " + l.name, l.message, n.logType.error, n.logController[w.titleName]), s
        } else if (null != a) {
            if (o = window[a], "function" == typeof o) {
                if ("RGSC_GET_PROFILE_LIST" == a) i = null, n.WriteDebugLog("CallGameMethod1:" + a, "jsonData", i), s = o(i), "string" == typeof s && (s = JSON.parse(s)); else if (n.WriteDebugLog("CallGameMethod1:" + a, "jsonData", i), s = o(i), "string" == typeof s) try {
                    s = JSON.parse(s)
                } catch (l) {
                    return s
                }
                return s
            }
            if (null != r && (o = window[r], "function" == typeof o)) return n.WriteDebugLog("CallGameMethod2:" + r, "jsonData", i), s = o(i), "string" == typeof s && (s = JSON.parse(s)), s
        }
        return s
    }, y.CallGameMethodAsync = function (t, i, a, r) {
        var s = new e.Deferred, o = !1, l = t;
        if (w.asyncEnabled && (l += "_ASYNC", o = !0, "function" != typeof window[l] && (l = t, o = !1)), o) {
            var c = n.jsToDll(t), d = {fn: c, dfd: s};
            n.pubsub.trigger("callGameMethodAsyncStarted", d)
        }
        var u = y.CallGameMethod(l, i, a, r);
        return o || s.resolve(u), s.promise()
    }, y.requestUiState = function (e) {
        if (void 0 == e && (e = !1), e || !w.isLauncher) {
            var t = {Visible: e};
            y.CallGameMethod("RGSC_REQUEST_UI_STATE", JSON.stringify(t), "RGSC_REQUEST_UI_STATE_DEMO")
        }
    }, y.closeModalsAndHideMenu = function () {
        "undefined" != typeof window.amd.modals.ConfirmModalView && window.amd.modals.ConfirmModalView.cancel(), "undefined" != typeof window.amd.store.ProductInfoView && window.amd.store.ProductInfoView.onClose(), e("#headerLoginOptionsDrop").hide(), e("#headerLoginOptionsButton").removeClass("active")
    }, y.hideUI = function () {
        var t = e("div.panel.active");
        t.length && t.stop().css("top", ""), y.hideHeaderMenu(), e("html").removeAttr("style"), e("#notificationPanel").css("top", 0), e("#scuiPanelInstruction").removeAttr("style"), y.closeModalsAndHideMenu(), n.pubsub.trigger("virtualKeyboard", !1), n.WriteDebugLog("setupEnvUtils.hideUI", "UI now hidden")
    }, y.PrePopulateData = function () {
        y.LoadLocalizedValues()
    }, y.toggleContentOn = function (e, t, n, i, r) {
        a(e, t, n, i, r, !0)
    }, y.toggleContentOff = function (e, t, n, i, r) {
        a(e, t, n, i, r, !1)
    }, y.requestMultiplayerPresenceInfo = function (t) {
        var n = {RequestId: w.account.RockstarId, Players: []};
        e.each(t, function (e, t) {
            n.Players.push({RockstarId: t})
        }), y.CallGameMethod("RGSC_REQUEST_PLAYER_MULTIPLAYER_PRESENCE_INFO", n, "RGSC_REQUEST_PLAYER_MULTIPLAYER_PRESENCE_INFO_DEMO")
    }, y.setupTextInputGameNotifications = function (t) {
        t.off("focusin.textEntry").on("focusin.textEntry", function () {
            var t = e(this), n = e("label[for=" + t.attr("id") + "]"), i = void 0;
            n.length && (i = n.text());
            var a = {hasFocus: !0, text: t.val(), prompt: i, $el: t};
            y.setupTextEntry(a)
        }).off("focusout.textEntry").on("focusout.textEntry", function () {
            var t = e(this);
            _({hasFocus: !1, text: t.val(), $el: t, forwardToGame: !0})
        })
    }, y.setupInputElementEvents = function () {
        y.setupTextInputGameNotifications(e("input:text, input:password, textarea"))
    }, y.initTextEntryForReCaptcha = function () {
        e("div.reCaptchaContainer").off("focusin.textEntry", '#recaptcha_area input[type="text"]').on("focusin.textEntry", '#recaptcha_area input[type="text"]', function () {
            var t = e(this), n = t.attr("placeholder");
            n.length || (n = void 0);
            var i = !1, a = {hasFocus: !0, text: t.val(), prompt: n, $el: t, forwardToGame: i};
            y.setupTextEntry(a)
        }).off("focusout.textEntry", '#recaptcha_area input[type="text"]').on("focusout.textEntry", '#recaptcha_area input[type="text"]', function () {
            var t = !1, n = e(this), i = {hasFocus: !1, text: n.val(), $el: n, forwardToGame: t};
            y.setupTextEntry(i)
        })
    }, y.clearActivePanel = function (t) {
        e("#headerLoginOptionsDrop").is(":visible") && e("#headerLoginOptionsButton").click();
        var i = e("div.panel.active");
        if (i.filter("#launcherStyle").length && e("body").removeClass(w.launcherClass), i.length) {
            var a = i.height() + 4;
            y.toggleContentOff(i, {top: "-" + a + "px"}, 200, "easeInQuart", function () {
                n.WriteDebugLog("toggleContentOff", "complete", e(this).attr("id")), e(this).removeClass("active").css("top", ""), "function" == typeof t && t()
            })
        } else e("#loginPanelsWrapper").hasClass("active") ? y.toggleContentOff(e("#loginPanelsWrapper"), {top: w.top}, 200, "easeInQuart", function () {
            e(this).removeClass("active").css("top", ""), e("#loginPanels > div").hide(), "function" == typeof t && t()
        }) : "function" == typeof t && t()
    }, y.showModal = function () {
        e("body").addClass("modal")
    }, y.hideModal = function () {
        e("body").removeClass("modal")
    }, y.showFatalError = function (t) {
        n.WriteDebugLog("showFatalError", t.errorCode, t.message), y.isScuiVisible() && e.when(y.checkConnectionAsync()).fail(function (e, i) {
            "NoInternet" == e && t.codeDesc.indexOf("1000.1") >= 0 && (t.message = y.getErrorWithCode(i).Message), i = n.errorCode(i), t.codeDesc = y.getError("Error") + ":" + i, t.message = (t.message || "") + "<br><br>" + y.getError(e), t.message = t.message.replace(/1000.1/, i)
        }).always(function (e) {
            return "NoInternet" !== e && "SC_Down" !== e && void 0 !== t.errorFunction ? void t.errorFunction(t.errorCode, t.message, t.contentEl, t.supportText, t.codeDesc) : void y.loadErrorPanel(t)
        })
    }, y.loadErrorPanel = function (t) {
        y.clearActivePanel(function () {
            t = t || {}, e("#confirmModal").find(".statusbar").remove(), y.hideModal(), y.closeModalsAndHideMenu();
            var i = e("#serverError");
            y.setUpLoadingPanel("#serverError"), void 0 != t.title && t.title.length && i.find(".serverErrorTitle").html(t.title), void 0 != t.message && t.message.length && i.find(".errorDescription").html(t.message), void 0 != t.supportText && t.supportText.length && i.find(".errorSubMessage").html(t.supportText), t.codeDesc && i.find(".errorCodeDescription").html(t.codeDesc), i.find(".errorContainer").data("antiscroll").refresh(), i.find(".content").show(), w.isLauncher ? (e("#buttonServerErrorHome").hide(), e("#buttonServerErrorClose").unbind("click").click(r)) : e("#buttonServerErrorClose").unbind("click").click(r), w.waitingResponse && (n.WriteDebugLog("showFatalError", "calling RGSC_UI_STATE_RESPONSE", ""), y.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible": true }', "RGSC_UI_STATE_RESPONSE_DEMO"))
        })
    }, y.showGenericFatalError = function (e, t, n, i) {
        var a = {errorCode: e, message: t, supportText: n, codeDesc: i};
        y.showFatalError(a)
    }, y.setUpLoadingPanel = function (t, i) {
        n.WriteDebugLog("setUpLoadingPanel", "activeSetUpPanel", t);
        var a = e(t);
        e("#headerLoginOptionsDrop").is(":visible") && e("#headerLoginOptionsButton").click(), a.hasClass("active") ? y.setUpLoading(t, i) : (y.setUpLoading(t), y.showPanel(a, i))
    }, y.setUpLoading = function (t, i) {
        n.WriteDebugLog("setUpLoading", "activeSetUpPanel", t);
        var a = e(t);
        a.find(".loadingMask:first").show(), a.find("span.loading:first").spinner("stop").spinner({
            height: 32,
            width: 32,
            speed: 80,
            image: w.baseUrl + "images/spinners/spinner32x32black.png",
            frames: 12
        }).fadeIn(), "function" == typeof i && i()
    }, y.showPanel = function (t, i) {
        y.clearActivePanel(function () {
            t.addClass("active"), e("#launcherStyle").hasClass("active") && (e("body").addClass(w.launcherClass), n.initDownloaderLauncher());
            var a = t.height() > w.panelHeight + 4 ? "0px" : w.headerHeight;
            n.WriteDebugLog("setUpLoadingPanel", "active added", t.attr("id")), y.toggleContentOn(t, {top: a}, 400, "easeOutQuart", function () {
                "function" == typeof i && i()
            })
        })
    }, y.removeLoading = function (e) {
        n.removeLoading(e)
    }, y.isHeaderRequired = function () {
        var t = e("#storePanel").hasClass("active");
        return !t
    }, y.resetScrollbar = function (t) {
        n.WriteDebugLog("resetScrollbar", "control", t);
        var i = e(e(t + " .box-wrap").length ? t + " .box-wrap" : t + ".box-wrap");
        i.length && i.data("antiscroll") && (n.WriteDebugLog("resetScrollbar", "Control RESET", t), i.each(function () {
            e(this).data("antiscroll").refresh();
            var t = e("#friendsList"), n = e("#friendInvitesList"), i = e("#blockListPlayercards");
            if (t.is(":visible") || n.is(":visible") || i.is(":visible")) {
                var a = 0, r = t.find("div.profileButton").length, s = n.find("div.profileButton").length,
                    o = i.find("div.profileButton").length;
                r % 20 == 0 && r--, s % 20 == 0 && s--, o % 20 == 0 && o--, "block" == t.css("display") ? a = parseInt(r / 20, 10) : "block" == n.css("display") ? a = parseInt(s / 20, 10) : "block" == i.css("display") && (a = parseInt(o / 20, 10));
                var l = 490 * a * (1 + (.016 - 2e-4 * a) * a);
                e(this).data("antiscroll") && e(this).data("antiscroll").vertical && (e(this).data("antiscroll").vertical.innerEl.scrollTop = l)
            }
            if (!e("input").is(":focus")) {
                var c = e(this).closest(".panel"), d = c.scrollTop();
                e(this).find(".antiscroll-inner").attr("tabindex", "-1").css("position", "fixed").focus().css("position", ""), c.scrollTop(d)
            }
        }))
    }, y.CloseUI = function () {
        n.WriteDebugLog("CloseUI()", "", ""), w.localProfileCreation && !y.isSignedIn() ? e("#lnkSkipAccount").click() : (y.setupTextEntry({hasFocus: !1}), y.requestUiState(!1))
    }, y.showMessagePanel = function (t, n, i, a) {
        return y.clearActivePanel(function () {
            a ? e("#buttonOkMessage").show().bind("click", a) : e("#buttonOkMessage").hide().unbind("click"), e("#messagePanel #messageTitle").html(t), e("#messagePanel #messageShortDesc").html(n), e("#messagePanel #messageLongDesc").html(i), y.setUpLoadingPanel("#messagePanel")
        }), !1
    }, y.forceLoginForm = function (t) {
        var n = t || e("#signInProfile");
        n.data("forceLoginForm", !0)
    }, y.resetForceLoginForm = function (t) {
        var n = t || e("#signInProfile");
        n.removeData("forceLoginForm")
    }, y.isForceLoginForm = function (t) {
        var n = t || e("#signInProfile");
        return n.data("forceLoginForm") === !0
    }, y.CreateAccountSuccessSetup = function (t) {
        e("#submitAvatarWrapper span.loading").spinner("stop"), e("#submitAvatarWrapper span, #onlinePolicies, .previousPanel, #termsTextContainer, #signUpReCaptchaContainer").hide(), e("#avatarPanelInner").empty();
        var n = e("#signUpConfirm");
        t ? (n.find("#signUpConfirmGreeting span.nickname").html(e("#signUpNickname").val()), n.find("h1").text(y.getText("Success", "Register")), n.find("#signUpConfirmText, #signUpConfirmGreeting").show(), n.find("#signUpConfirmButton").show(), n.find(".pagination").show(), e("#avatar").hide(), y.updatePlayerListCounts("", "", "", "")) : (n.find("h1").text(y.getText("ServerError", "Errors")), n.find("#signUpConfirmText, #signUpConfirmGreeting").hide(), n.find("#signUpConfirmButton").hide(), n.find(".pagination").hide()), n.fadeIn(), n.find("#signUpConfirmButton").focus()
    }, y.setSelected = function (t) {
        e("#mainNav .on").removeClass("on"), e(".sideMenu").find(".on").removeClass("on"), e(t).addClass("on")
    }, y.setSelectedSide = function (t) {
        var n = e(t);
        n.parents(".sideMenu").find(".on").removeClass("on"), n.addClass("on")
    }, y.EnableSendMessageButton = function (t) {
        var n = e("#newMessageName");
        t > 0 && void 0 != n.attr("data-rockstarId") && "" != n.attr("data-rockstarId") ? e(".sendMessage").removeAttr("disabled") : e(".sendMessage").attr("disabled", "disabled")
    }, y.messagesListQuery = function () {
        var t = e("#messagesPanel");
        y.closeModalsAndHideMenu(), t.find("div.content").removeAttr("style"), y.setUpLoadingPanel("#messagesPanel", function () {
            t.attr("class", "panel active messages");
            var i = e("#messagesList").data("PageIndex");
            void 0 === i && (i = 0, e("#messagesList").data("PageIndex", i)), n.pubsub.trigger("setup:GetMessages", i)
        })
    }, y.setupSignedInOptionsLauncher = function () {
        y.clearActivePanel(function () {
            n.WriteDebugLog("setupSignedInOptionsLauncher"), w.receiveMsgEnabled = !0, y.showLauncherUi(), n.pubsub.trigger("setupEnv:launcherCommand", "SetSpinnerText", {
                text: y.getError("Loading"),
                toggleMode: !0
            })
        })
    }, y.setUpSignedInOptions = function (t, i) {
        n.WriteDebugLog("setUpSignedInOptions", "signedIn,local", t + "," + i);
        var a = e("#header");
        if (a.find("#headerLoginOptionsDrop").is(":visible") && a.find("#headerLoginOptionsButton").click(), y.isSignedIn(t), w.isLauncher) return y.setupSignedInOptionsLauncher();
        if (t) {
            y.initHeaderMenu(!0), s(a), a.find("#menuSettings").hide(), a.find("#menuDeleteProfile").hide(), a.find("#socialButton").hide(), a.find("#storeButton").hide(), a.find("#menuMessages").parent().hide(), y.isLocal(i);
            var r = a.find("#headerLoginOptions i.status").removeClass("SCOnline SCOffline Local");
            if (i) a.find("#menuDeleteProfile").show(), r.addClass("Local"); else if (y.isOffline()) a.find("#menuDeleteProfile").show(), r.addClass("SCOffline"); else {
                if (a.find("#menuSettings").show(), a.find("#socialButton").removeAttr("style"), w.RosTitleVersion >= 11) {
                    if (n.isStoreV2Enabled()) {
                        var l = function () {
                            a.find("#storeButton").show()
                        }, c = null, d = function () {
                            a.find("#storeButton").show()
                        }, u = {ofAgeCallbkFn: l, underAgeCallbkFn: c, errorCallbkFn: d};
                        n.pubsub.trigger("setupEnvUtils:checkStoreAgeAppropriate", u)
                    }
                    y.isLogoutDisabled() ? a.find("#menuSignOut").hide() : a.find("#menuSignOut").show(), a.find("#menuMessages").parent().show(), e("#compareStats").css("display", "inherit"), y.CallGameMethod("RGSC_REQUEST_PLAYER_LIST_COUNTS", '{ "RequestId": 1 }', "RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE_DEMO")
                }
                r.addClass("SCOnline")
            }
        } else o(a), e("#compareStats").hide(), e("table.overview tbody").empty(), w.RosTitleVersion >= 11 && a.find("#socialButton").show(), e("#profileSettings").find("form")[0].reset(), e("#friendsPanel").find(".sideMenu .count").empty(), e("#landingFriendsList").empty();
        return !0
    }, y.isOffline = function (e) {
        var t = void 0 !== e ? !e : void 0;
        return !y.isOnline(t)
    }, y.isOnline = function (e) {
        return void 0 !== e && (w.isOnline = e), void 0 === w.isOnline && (w.isOnline = w.scsServiceEnabled), w.isOnline && (w.hasConnection = !0, w.hasInternet = !0), w.isOnline
    }, y.checkConnectionAsync = function () {
        var t = new e.Deferred;
        if (w.hasConnection || void 0 == w.connectionCheckTimeout) {
            w.connectionCheckTimeout = setTimeout(function () {
                w.connectionCheckTimeout = void 0
            }, 3e4);
            var n = l();
            n.done(t.resolve), n.fail(function () {
                c(t)
            })
        } else w.hasInternet ? t.reject("SC_Down", "2000.43") : t.reject("NoInternet", "1004.1");
        return t.promise()
    }, y.isLocal = function (e) {
        return void 0 !== e && (w.isLocal = e), w.isLocal
    }, y.isSignedIn = function (e) {
        return void 0 !== e && (w.isSignedIn = e), w.isSignedIn
    }, y.isScuiVisible = function () {
        return n.WriteDebugLog("isScuiVisible", "isScuiVisible", w.isScuiVisible), w.isScuiVisible
    }, y.isHeaderMenuVisible = function () {
        var t = e("#headerWrapper");
        return t.length > 0 && t.position().top >= 0 && t.is(":visible")
    }, y.showHeaderMenu = function (t, i) {
        return y.isScuiVisible() ? (n.WriteDebugLog("showHeaderMenu", "headerWrapper", "showing #headerWrapper since SCUI is visible"), void (t ? e("#headerWrapper").show().animate({top: "0"}, 400, "easeOutQuart", function () {
            "function" == typeof i && i()
        }) : e("#headerWrapper").show().css({top: "0"}))) : void n.WriteDebugLog("showHeaderMenu", "skipped", "SCUI not visible")
    }, y.hideHeaderMenu = function () {
        n.WriteDebugLog("hideHeaderMenu", "headerWrapper", "hiding #headerWrapper"), e("#headerWrapper").hide().css({top: "-80px;"})
    }, y.initHeaderMenu = function (t, i) {
        n.WriteDebugLog("initHeaderMenu", "showNavigation, enableSignIn", t + "," + i);
        var a = y.isScuiVisible(), r = e("#headerWrapper");
        if (a && !y.isHeaderMenuVisible() && y.showHeaderMenu(), w.isLauncher && (t = !1), t) {
            if (n.pubsub.trigger("setCloseInstructions"), a && e("#scuiPanelInstruction").delay(1e3).fadeIn("slow"), e("#mainNav").hide(), y.isSignedIn() && (w.account.Minor && e("#storeButton").hide(), "gta5" !== w.titleName && e("#headerLoginOptionsDrop #menuQuitGame").parent().remove(), !y.pendingAccountCompletion())) {
                var s = r.find("#header");
                s.find("li:not(.social)").removeAttr("disabled").removeClass("dimLayer"), s.find("h1").removeAttr("disabled").removeClass("dimLayer"), r.find("#headerLogin").find("a").removeAttr("disabled").removeClass("dimLayer"), r.find("#headerLoginOptionsButton").removeAttr("disabled").removeClass("dimLayer"), !y.isOffline() && w.RosTitleVersion >= 11 && w.scsServiceEnabled && w.accountsServiceEnabled && r.find("#headerLoginUser").removeAttr("disabled"), a && y.isOnline() && w.RosTitleVersion >= 11 && s.find("li.social").show(), a && e("#mainNav").show()
            }
        } else e("#mainNav").hide(), i ? r.find("#headerLogin").find("a").removeAttr("disabled").removeClass("dimLayer") : (r.find("#headerLogin").find("a").attr("disabled", "disabled").addClass("dimLayer"), e("#scuiPanelInstruction").removeAttr("style")), r.find("#header").find("h1").attr("disabled", "disabled").addClass("dimLayer"), r.find("#headerLoginOptionsButton").attr("disabled", "disabled").addClass("dimLayer"), r.find("#headerLoginUser").attr("disabled", "disabled")
    }, y.pendingAccountCompletion = function () {
        return e("#dob").hasClass("DOBUpdate") || e("#dob").hasClass("countryUpdate") || e("#dob").hasClass("DOBAndCountryUpdate")
    }, y.quitGame = function () {
        n.WriteDebugLog("Desktop.quitGame"), y.launcherWindowsEvent("Close")
    }, y.launcherWindowsEvent = function (e) {
        f(1, e)
    }, y.launcherUiEvent = function (e, t) {
        f(2, e, t)
    }, y.launcherNotifyEvent = function (e) {
        w.receiveMsgEnabled = !0, f(3, e)
    }, y.launcherDebugEvent = function (e) {
        f(3, "Debug", e)
    }, y.showLauncherUi = function () {
        if (!w.receiveMsgEnabled || y.isLauncherUiActive()) return void n.WriteDebugLog("showLauncherUi", "aborted", (!w.receiveMsgEnabled).toString() + " || " + y.isLauncherUiActive().toString());
        e("body").addClass(w.launcherClass), n.initDownloaderLauncher();
        var t = e("#launcherStyle");
        y.wasLauncherQuickLaunched() ? (t.removeClass("quick"), d()) : t.show(function () {
            y.showHeaderMenu(), y.setUpLoadingPanel("#launcherStyle"), d()
        })
    }, y.quickShowLauncherUi = function () {
        return n.WriteDebugLog("quickShowLauncherUi"), !w.receiveMsgEnabled || y.isAnyPanelActive() ? void n.WriteDebugLog("quickShowLauncherUi", "aborted") : (w.isScuiVisible = !0, e("body").addClass(w.launcherClass), n.initDownloaderLauncher(), void y.setUpLoading("#selectProfile", function () {
            var t = e("#launcherStyle"), n = t.height() > w.panelHeight + 4 ? "0px" : w.headerHeight;
            t.css({top: n}).show().addClass("active quick"), y.showHeaderMenu()
        }))
    }, y.isLauncherUiActive = function () {
        return e("#launcherStyle").hasClass("active") && !y.wasLauncherQuickLaunched()
    }, y.wasLauncherQuickLaunched = function () {
        return e("#launcherStyle").hasClass("quick")
    }, y.isAnyPanelActive = function () {
        return e("div.panel.active").length
    }, y.GetAuthHeaderAsync = function (t) {
        var i = new e.Deferred;
        if (void 0 == t) {
            n.WriteDebugLog("GetAuthHeaderAsync");
            var a = y.getCredsAsync();
            a.done(function (e) {
                var t = "";
                if (n.WriteDebugLog("GetAuthHeaderAsync", "promise done", t), "undefined" != typeof e && "undefined" != typeof e.Ticket && e.Ticket.length) i.resolve(p(e.Ticket)); else {
                    var a = {iss: y.isSteam(), l: w.titlelang, f: ""};
                    "undefined" != typeof w.ticket && w.ticket.length ? (a.f = "fallback", n.WriteDebugLog("GetAuthHeaderAsync", "creds undefined or missing ticket", JSON.stringify(a) + w.debugLog, n.logType.error, n.logController[w.titleName]), w.debugLog = "", i.resolve(p(w.ticket))) : (n.WriteDebugLog("GetAuthHeaderAsync", "creds undefined or missing ticket", JSON.stringify(a) + w.debugLog, n.logType.error, n.logController[w.titleName]), w.debugLog = "", i.reject())
                }
            }), a.fail(function () {
                n.WriteDebugLog("GetAuthHeaderAsync", "getCredsAsync rejected", "", n.logType.error, n.logController[w.titleName]), i.reject()
            })
        } else i.resolve(p(t));
        return i.promise()
    }, y.GetAuthHeaderAsyncV8 = function (t) {
        var i = new e.Deferred;
        if (void 0 == t) {
            var a = y.getCredsAsync();
            a.done(function (e) {
                if ("undefined" != typeof e && "undefined" != typeof e.Ticket && e.Ticket.length) i.resolve(m(e.Ticket)); else {
                    var t = {iss: y.isSteam(), l: w.titlelang, f: ""};
                    "undefined" != typeof w.ticket && w.ticket.length ? (t.f = "fallback", n.WriteDebugLog("GetAuthHeaderAsyncV8", "creds undefined or missing ticket", JSON.stringify(t) + w.debugLog, n.logType.error, n.logController[w.titleName]), w.debugLog = "", i.resolve(m(w.ticket))) : (n.WriteDebugLog("GetAuthHeaderAsyncV8", "creds undefined or missing ticket", JSON.stringify(t) + w.debugLog, n.logType.error, n.logController[w.titleName]), w.debugLog = "", i.reject())
                }
            }), a.fail(function () {
                n.WriteDebugLog("GetAuthHeaderAsyncV8", "getCredsAsync rejected", "", n.logType.error, n.logController[w.titleName]), i.reject()
            })
        } else i.resolve(m(t));
        return i.promise()
    }, y.isSteam = function () {
        return "steam" === w.gamePlatform && w.steamAppId > 0 && "" !== w.steamAuthTicket && w.RosTitleVersion >= 11
    }, y.getAuthTokenFromHtml = function () {
        var t = void 0, n = e("#Auth");
        return n.length && (t = n.val()), t
    }, y.getAuthTokenFromVar = function () {
        return w.authToken
    }, y.getSyncHeader = function () {
        var e = y.getAuthTokenFromHtml() || y.getAuthTokenFromVar();
        return "undefined" != typeof e && e.length ? {Sync: e} : ("undefined" != typeof console && null != console && "undefined" != typeof console.log && null != console.log && console.log && console.log("sync header missing, this shouldn't happen! Need to debug!"), n.WriteDebugLog("getSyncHeader", "Sync header missing", "", n.logType.error, n.logController[w.titleName]), {})
    }, y.appendLanAuthHeader = function (e) {
        var t = n.getLanAuthValue();
        return "undefined" != typeof t && t.length || n.WriteDebugLog("getLanAuthHeader", "Auth header missing", "", n.logType.error, n.logController[w.titleName]), e.Auth = t, e
    }, y.getCombinedSyncHeaders = function (e) {
        var t = y.getSyncHeader();
        return {Sync: t.Sync, AuthVal: e}
    }, y.getCredsAsync = function () {
        n.WriteDebugLog("getCredsAsync");
        var e = y.CallGameMethodAsync("RGSC_GET_ROS_CREDENTIALS", null, "RGSC_GET_ROS_CREDENTIALS_DEMO");
        return e
    };
    var S = "loc.cache";
    return window.getLocalizationKey = function (e, t) {
        return t.toLowerCase() + ":" + e
    }, window.isLocalizationFileCached = function (n) {
        var i = e.data(document.body, S);
        if ("undefined" == typeof i) return !1;
        var a = n.toLowerCase(), r = t.find(i, function (e, t) {
            return 0 == t.toLowerCase().indexOf(a)
        });
        return "undefined" != typeof r
    }, window.getLocalizationCache = function () {
        var t = e.data(document.body, S);
        return "undefined" != typeof t ? t : {}
    }, window.setLocalizationCache = function (t) {
        e.data(document.body, S, t)
    }, window.appendLocalizationCache = function (e, n) {
        if (!isLocalizationFileCached(n)) {
            var i = t.map(e, function (e, t) {
                return [getLocalizationKey(t, n), e]
            });
            e = t.object(i);
            var a = getLocalizationCache(), r = t.extend({}, a, e);
            setLocalizationCache(r)
        }
    }, y.LoadLocalizedValues = function () {
        n.WriteDebugLog("LoadLocalizedValues", "globals.titleName", w.titleName);
        var i = ["shared/Errors", "shared/HomeSignin", "shared/Notifications", "shared/Register"],
            a = w.titlelang + ".xml";
        t.each(i, function (e) {
            y.GetLocalizedTextXML("xml/" + e + a)
        }), e("[rel*=localize]").localize("Register", {
            language: w.titlelang,
            pathPrefix: w.baseAssetUrl + "xml/Shared"
        }), n.isGameSupported() && e("#signUpConfirm [rel*=localize]").localize("General", {
            language: w.titlelang,
            pathPrefix: w.baseAssetUrl + "xml/" + w.titleName
        }), e("#dob").addClass("localized")
    }, y.GetLocalizedTextXML = function (t) {
        t.indexOf(w.baseAssetUrl) < 0 && (t = w.baseAssetUrl + t), e.ajax({
            url: t,
            type: "GET",
            async: !1,
            dataType: "xml",
            timeout: 5e3,
            silentFail: !0,
            success: function (n) {
                if ("undefined" != typeof n && n) {
                    var i = e.xml2json(n);
                    appendLocalizationCache(i, t)
                }
            }
        })
    }, y.getText = function (e, t, n, i) {
        return i = i || "Shared", g(e, "xml/" + i + "/" + t + w.titlelang + ".xml", n)
    }, y.getError = function (e) {
        return y.getText(e, "Errors")
    }, y.getRequestDescription = function (e, t) {
        if (void 0 != e && e.length) {
            var n = y.getError("request_" + e);
            if (void 0 != n && n.length) return " (" + n + ")"
        }
        if (window.debugLog) {
            var i = t;
            if (void 0 != i && i.length > 20) return i = i.substr(-20), " (debug: " + i + ")"
        }
        return ""
    }, y.getErrorWithCode = function (e, t) {
        "string" == typeof e && e.length || (e = n.errorCode("1000.1"));
        var i, a = void 0, r = e.split(".")[0], s = y.isScDownError(r);
        s ? i = y.getError("SC_Down") : (i = y.getError("errorcode_" + e), "" == i && (i = y.getError("errorcode_" + r))), (s || "1002" == r) && (a = y.getError("ErrorSupport")), "" == i && (i = y.getError("GenericServerError"));
        var o = y.getError("Error") + ":" + e + y.getRequestDescription(t);
        return {Message: i, SupportText: a, CodeDescription: o}
    }, y.isScDownError = function (e) {
        var t = !1;
        if ("undefined" == typeof e || "" === e) return !1;
        var n = [2e3, 2999], i = parseInt(e, 10);
        return i >= n[0] && i <= n[1] && (t = !0), t
    }, y.isLogoutDisabled = function () {
        return "gta5" == w.titleName.toLowerCase() && "steam" == w.gamePlatform
    }, y.isNewSigninFlowEnabled = function () {
        return "gta5" == w.titleName.toLowerCase()
    }, y.getProfileList = function () {
        return y.CallGameMethod("RGSC_GET_PROFILE_LIST", null, "RGSC_GET_PROFILE_LIST_DEMO")
    }, y.hasProfileListAsync = function () {
        var t = new e.Deferred, n = e("#existingProfiles").html().length > 0;
        if (n) return t.resolve(!0), t.promise();
        var i = y.getProfileListAsync();
        return i.done(function (e) {
            var n = e && e.NumProfiles > 0;
            t.resolve(n)
        }), i.fail(function () {
            t.resolve(!1)
        }), t.promise()
    }, y.getProfileListAsync = function () {
        var e = "RGSC_GET_PROFILE_LIST_DEMO";
        return w.asyncEnabled && (e = "RGSC_GET_PROFILE_LIST_ASYNC_DEMO"), y.CallGameMethodAsync("RGSC_GET_PROFILE_LIST", null, e)
    }, y.LoadGameAchievements = function (t, i) {
        n.WriteDebugLog("LoadGameAchievements", "achievementsList, $compareAchievementsXml", t + "," + i), e("#statsPanel #achievementsHeader").show(), e("body").css("cursor", "progress");
        var a;
        if (null == t) a = y.CallGameMethodAsync("RGSC_GET_ACHIEVEMENT_LIST", null, "RGSC_GET_ACHIEVEMENT_LIST_DEMO"); else {
            var r = e.Deferred();
            a = r.promise(), r.resolve(t)
        }
        a.done(function (e) {
            v(e, i)
        }), a.fail(function () {
            v(t, i)
        })
    }, y.GetAchievementImage = function (e) {
        if ("demo" == n.getUrlVars("mode")) return w.baseUrl + "images/temp-achievements-icon.png";
        if (w.RosTitleVersion >= 11) return "http://RGSC/RGSC_GET_ACHIEVEMENT_IMAGE/" + e;
        var t = RGSC_GET_ACHIEVEMENT_IMAGE('{ "AchievementId": ' + e + " }");
        return null != t && t.length > 0 ? n.GetBase64AvatarSrc(t) : w.baseUrl + "images/temp-achievements-icon.gif"
    }, y.launchExternalBrowserForUrl = function (e) {
        if ("onlive" == w.gamePlatform || "pcros" != w.platform) return void n.WriteDebugLog("RSGC_LAUNCH_EXTERNAL_WEB_BROWSER", "Error", "platform: " + w.gamePlatform);
        try {
            y.CallGameMethod("RSGC_LAUNCH_EXTERNAL_WEB_BROWSER", '{ "Url":"' + e + '"}', "RGSC_LAUNCH_EXTERNAL_WEB_BROWSER_DEMO")
        } catch (t) {
            n.WriteDebugLog("RSGC_LAUNCH_EXTERNAL_WEB_BROWSER", "Error", t.message, n.logType.error, n.logController[w.titleName])
        }
    }, y.launchExternalBrowser = function (t) {
        return t.preventDefault(), "onlive" != w.gamePlatform && "pcros" == w.platform && e(this).hasClass("RGSCLoadExt") ? (y.launchExternalBrowserForUrl(this.href), !1) : (n.WriteDebugLog("RSGC_LAUNCH_EXTERNAL_WEB_BROWSER", "Error", "platform: " + w.gamePlatform + ", has RGSCLoadExt class:" + !e(this).hasClass("RGSCLoadExt")), !1)
    }, y.launchExternalBrowserWithScAuth = function (t) {
        if (t && t.preventDefault(), "onlive" == w.gamePlatform || "pcros" != w.platform || !e(this).hasClass("RGSCLoadExtAuth")) return n.WriteDebugLog("RSGC_LAUNCH_EXTERNAL_WEB_BROWSER", "Error", "platform: " + w.gamePlatform + ", has RGSCLoadExtAuth class:" + !e(this).hasClass("RGSCLoadExtAuth")), !1;
        var i = this.href, a = y.GetAuthHeaderAsync();
        return a.done(function (t) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/profile/getscauthtoken"),
                headers: t,
                services: ["accounts"],
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !0,
                success: function (t) {
                    var n = e(t), a = n.find("Status");
                    if (a.length && "true" == a.text()) {
                        var r = n.find("ScAuthToken").text(), s = "ScAuthToken=" + encodeURIComponent(r),
                            o = -1 !== i.indexOf("?");
                        i += o ? "&" + s : "?" + s, y.launchExternalBrowserForUrl(i)
                    }
                }
            })
        }), !1
    }, y.setupTextEntry = function (e) {
        e.forwardToGame = void 0 != e.forwardToGame ? e.forwardToGame : !0, i.isActive() || _(e), e.hasFocus && i.setInputElement(e.$el), e.hasFocus && y.inGamePadMode() && !e.forwardToGame ? n.pubsub.trigger("virtualKeyboard", !0) : e.hasFocus && !y.inGamePadMode() ? i.destroyKeyboard() : e.hasFocus || n.pubsub.trigger("virtualKeyboard", !1)
    }, y.inGamePadMode = function () {
        return 1 == w.inputMethod
    }, y.isMyProfileVisible = function () {
        var t = e("#friendProfilePanel");
        return t.hasClass("active") && t.find("#user").is(":visible") && t.find(".user-data h3").length && t.find(".user-data h3").html() == w.account.Nickname
    }, y.removeAttr = function (t, n) {
        var i = e(t);
        i.removeAttr(n)
    }, y.mapLanguage = function (e) {
        var t;
        switch (e.toLowerCase()) {
            case"pt-pt":
                t = "pt-BR";
                break;
            case"zh-cht":
                t = "zh-TW";
                break;
            default:
                t = e
        }
        return n.WriteDebugLog("setupEnvUtils.mapLanguage:", e, t), t
    }, y.mapTitleDisplayName = function (e) {
        var t = e;
        switch (e) {
            case"GTA V":
            case"GTA5":
                t = "Grand Theft Auto V"
        }
        return t
    }, y.setCloseInstructions = function () {
        var t = y.inGamePadMode() ? "QuitMessageGamePad" : "QuitMessage", n = y.getText(t, "HomeSignin");
        e("#scuiPanelInstruction").html(n), e("#storePanel").find(".quitMessage").html(n)
    }, y.getOfflineSigninCount = function () {
        return localStorage.getItem("offlineSigninCount") ? parseInt(localStorage.getItem("offlineSigninCount"), 10) : 0
    }, y.setOfflineSigninCount = function (e) {
        return isNaN(e) ? !1 : localStorage.setItem("offlineSigninCount", e)
    }, y.incrementOfflineSigninCount = function () {
        var e = y.getOfflineSigninCount();
        y.setOfflineSigninCount(e++)
    }, y.setOffline = function (t) {
        n.WriteDebugLog("setOffline", "offline", t);
        var i = e("#homefeedPanel"), a = e("#header");
        if (t) {
            if (e("#menuMessages").parent().hide(), e("#offlineHomeImage").attr("src", w.baseUrl + "/images/rstar_logo.jpg"), y.isOffline(!0), w.OfflineOnly) {
                var r = i.find(".offlineMode");
                r.find(".offlineMessage").html(y.getText("offlineOnlyHome", "HomeSignin")), r.find("#retryConnection").hide()
            }
            if (i.addClass("offline"), e("body").addClass("offline"), w.localProfileCreation ? (a.find("#headerLogin .headerLoginText").hide(), a.find("#headerLogin .headerLoginTextOffline").show()) : (a.find("#joinClub").hide(), a.find("#headerLogin .headerLoginText").find('[rel="localize[Or]"]').hide()), i.find(".trends").hide(), i.find(".newsRow").hide(), !w.scsServiceEnabled) {
                var s = y.getText("NoServicesSignin", "HomeSignin");
                e("#signInProfile").find("div.offlineMode .offlineMsg").html(s), e("#selectProfile").find("div.offlineMode .offlineMsg").html(s), e("#homefeedPanel").find("div.offlineMode p.offlineMessage").text(y.getText("OnlineDisabled", "Errors"))
            }
            y.hideStats(), e("#landingFriends").find("h3").hide(), e("#landingFriends").find("#noFriends").hide()
        } else w.RosTitleVersion >= 11 && a.find("#socialButton").show(), y.isOnline(!0), i.removeClass("offline"), e("body").removeClass("offline"), a.find("#headerLogin .headerLoginText, #joinClub").removeAttr("style"), a.find("#headerLogin .headerLoginText").find('[rel="localize[Or]"]').removeAttr("style"), a.find("#headerLogin .headerLoginTextOffline").hide(), i.find(".contentWrapper").show(), i.find(".trends").show(), i.find(".newsRow").length > 0 && i.find(".newsRow").html().length > 0 && i.find(".newsRow").show(), e("#statsLink2").parent("li").show()
    }, y.updatePlayerListCounts = function (t, n, i, a) {
        e("#myFriendsLink").find("span.count").html(t), e("#friendInvitesLink").find("span.count").html(n), e("#gameInvitesLink").find("span.count").html(i), e("#blockListLink").find("span.count").html(a)
    }, y.updateUIAFterFriendInviteSent = function (e, t, i, a) {
        n.WriteDebugLog("updateUIAFterFriendInviteSent", "rockstarId", e);
        var r = y.getText("FriendRequestSent", "Social").replace("[PlayerNickname]", "<strong><em> " + t + " </em></strong>");
        n.pubsub.trigger("gamefunctions:InfoMessage", r), a.find(".friend.add.addFriend").remove();
        var s = a.find(".friend.remove.cancelFriendInvite");
        if (!(s.length > 0)) {
            var o = y.getText("Cancel", "Social");
            a.find(".playerOptions").prepend('<li class="friend remove cancelFriendInvite"><a href="#" class="tooltip"><span>' + o + "</span></a></li>"), n.pubsub.trigger("gameFnFriends:UpdateFriendStatus", {
                RockstarId: e,
                Relationship: 4
            }), y.UpdateFriendsCount("increment")
        }
    }, y.updateUIAFterFriendCancelInviteSent = function (t, i, a, r) {
        n.WriteDebugLog("updateUIAFterFriendCancelInviteSent", "rockstarId", t), n.pubsub.trigger("gameFnFriends:UpdateFriendStatus", {
            RockstarId: t,
            Relationship: 0
        }), e("#friendsList").find("div.profileButton[data-id='" + t + "']").remove();
        var s = y.getText("InviteDeleted", "Social").replace("[PlayerNickname]", "<strong><em> " + i + " </em></strong>");
        n.pubsub.trigger("gamefunctions:InfoMessage", s), r.find(".cancelFriendInvite").remove(), r.find(".friend.add.disabled").remove();
        var o = y.getText("Add", "Social");
        r.find(".playerOptions").prepend('<li class="friend add addFriend"><a href="#" class="tooltip"><span>' + o + "</span></a></li>"), y.UpdateFriendsCount("decrement")
    }, y.UpdateFriendsCount = function (t) {
        var i = e("#myFriendsLink .count"), a = 0;
        i.text() && (a = parseInt(i.text(), 10)), a = "increment" == t ? a + 1 : a - 1, n.WriteDebugLog("UpdateFriendsCount", "numFriends", a), i.text(a)
    }, y.TabIsActive = function (e) {
        return e.hasClass("on")
    }, y.isActivePanel = function (t) {
        var n = e(t);
        return n.length ? n.hasClass("active") : !1
    }, y.hideStats = function () {
        var t = "lanoire" !== w.titleName && y.isOffline() || "lanoire" !== w.titleName && !w.statsServiceEnabled;
        return t && (e("#statsLink2").parent("li").hide(), e("#onlineStatsLink").parent("li").hide()), t
    }, y.checkStoreAgeAppropriate = function (e) {
        function t() {
            var t = y.CallGameMethod("RGSC_GET_USER_STORE_AGE_APPROPRIATE_INFO", null, "RGSC_GET_USER_STORE_AGE_APPROPRIATE_INFO_DEMO");
            if ("string" == typeof t && (t = JSON.parse(t)), n.WriteDebugLog("checkStoreAgeAppropriate", "ageCheckResp", JSON.stringify(t)), t.Valid) clearInterval(a), t.AgeAppropriate ? ("function" == typeof e.ofAgeCallbkFn && e.ofAgeCallbkFn(), r = !1) : "function" == typeof e.underAgeCallbkFn && e.underAgeCallbkFn(); else {
                if (void 0 != i) return;
                i = setTimeout(function () {
                    clearInterval(a), r && "function" == typeof e.errorCallbkFn && e.errorCallbkFn()
                }, 3e3)
            }
        }

        var i, a = setInterval(t, 300), r = !0
    }, y.InternetConnectedStateAsync = function () {
        var t = new e.Deferred,
            n = y.CallGameMethodAsync("RGSC_INTERNET_CONNECTED_STATE", null, "RGSC_INTERNET_CONNECTED_STATE_DEMO");
        return n.done(function (e) {
            var n = void 0;
            "undefined" != typeof e && (n = e.Result), t.resolve(n)
        }), n.fail(function () {
            t.resolve(void 0)
        }), t.promise()
    }, y.LandingFriendsHaveBeenRetrieved = function () {
        var t = e("#landingFriends").find("#noFriends.emptySocial"), n = e("#landingFriendsList").find("li");
        return t.is(":visible") || n.length > 0
    }, y.isUrlWhitelisted = function (t) {
        var n = w.redirectUrlWhitelist.split(","), i = b(t), a = i.replace(/^\w*\.(?!\w+\s*\n)/i, "");
        return e.inArray(i, n) > -1 || e.inArray(a, n) > -1
    }, y.SetSignUpStepText = function (t) {
        e("#signUpSteps").find(".signUpStepCount").text(y.getText("NewStep" + t, "Register"))
    }, n.pubsub.on("setCloseInstructions", y.setCloseInstructions), n.pubsub.on("setupEnvUtils:launcherDebugEvent", y.launcherDebugEvent), n.pubsub.on("setupEnvUtils:checkStoreAgeAppropriate", y.checkStoreAgeAppropriate), n.pubsub.on("setupEnvUtils:launchExternalBrowserForUrl", y.launchExternalBrowserForUrl), y
}), define("common/formvalidation", ["jquery", "utils", "jquery.setup.environment.utils"], function (e, t, n) {
    function i(t) {
        return e("#" + t + "Checked").val() != e("#" + t).val()
    }

    function a() {
        var t = e("#signUpEmailConfirm");
        r("signUpEmail") && (t.val(""), e(".confirmemailerror").remove(), t.closest(".error").remove(), e(".confirmemailvalid").remove())
    }

    function r(t) {
        return e("#" + t + "Checked").val() != e("#" + t).val()
    }

    function s() {
        return e("div.active span.nickvalid").length || e("div.active span.nickerror").length
    }

    function o(e) {
        globals.authToken = e
    }

    var l = {};
    return l.SignInValidation = function (t) {
        var n = !0;
        l.clearErrorClasses();
        var i = e.trim(e("#signInEmail" + t).val());
        return globals.RosTitleVersion < 11 || !globals.isNLE || i.indexOf("@") > -1 ? l.EmailValidation("signInEmail" + t) || (n = !1) : l.NicknameValidation("signInEmail" + t, !0) || (n = !1), l.PasswordValidation("signInPassword" + t, "") || (n = !1), n
    }, l.CreateAccountValidation = function () {
        var t = !0;
        return 0 == e("#signUpCountry").children().length && (t = !1), l.DOBValidation(!0) || (t = !1), globals.underage ? t : (l.NicknameValidation("signUpNickname") ? 0 == e(".nickvalid").length && (t = !1) : t = !1, l.EmailValidation("signUpEmail") ? 0 == e(".emailvalid").length && (t = !1) : t = !1, l.ConfirmEmail(e("#signUpEmailConfirm")) ? 0 == e(".confirmemailvalid").length && (t = !1) : t = !1, l.PostalCodeValidation("signUpZip") || (t = !1), l.PasswordValidation("signUpPassword") || (t = !1), e(".pwerror").length > 0 && (t = !1), t && l.clearErrorClasses(), t)
    }, l.DOBValidation = function (t) {
        var i = !1, a = "", r = e("#monthOfBirth").find(":selected").val(),
            s = e("#dayOfBirth").find(":selected").val(), o = e("#yearOfBirth").find(":selected").val();
        if ("" == r || "" == s || "" == o) a = n.getError("EntryDOB"), i = !0; else if (l.isDate(r, s, o)) {
            if (t && l.calculate_age(r, s, o) < 13) return l.handleUnderAgeError(), !1
        } else a = n.getError("ValidDOB"), i = !0;
        return 1 == i ? (l.showError("dob", e("#yearOfBirth").parent(), a), !1) : (l.showValidTick(e("#yearOfBirth").parent(), "dob"), !0)
    }, l.handleUnderAgeError = function () {
        l.clearErrorClasses(), globals.underage = !0, e("#dk_container_monthOfBirth").addClass("disabled"), e("#dk_container_dayOfBirth").addClass("disabled"), e("#dk_container_yearOfBirth").addClass("disabled"), e("#signupDobContainer, #signupDetailsContainer .clearfix, #signupCountryContainer, #dob p.intro").hide();
        var t = n.getText("GenericError1", "Errors").replace("[url]", "http://www.rockstargames.com/privacy/?locale=" + globals.titlelang.split("-")[0]);
        l.showError("dob", e("#yearOfBirth").parent(), t), e("#submitDOB").attr("disabled", "disabled")
    }, l.isDate = function (e, t, n) {
        var i = new Date(e + "/" + t + "/" + n);
        return i.getMonth() + 1 == e && i.getDate() == t && i.getFullYear() == n
    }, l.isDateString = function (e) {
        return e && !isNaN(e) && "undefined" != typeof e.getDate
    }, l.calculate_age = function (e, t, n) {
        var i = new Date, a = i.getFullYear(), r = i.getMonth(), s = i.getDate(), o = a - n;
        return e - 1 > r && o--, e - 1 == r && t > s && o--, o
    }, l.EmailValidation = function (t, i) {
        var s, o = e("#" + t), c = !1, d = !1,
            u = /^[A-Za-z0-9_-]+([.'][A-Za-z0-9_-]+)*@[A-Za-z0-9]+([-.][A-Za-z0-9]+)*\.[A-Za-z]{2,}$/, h = "",
            f = e.trim(o.val());
        return !r(t) && f.length > 0 ? !0 : (e(".emailvalid").remove(), o.parent().find(".error").remove(), a(), "" == f ? (h = n.getError("EntryEmail"), c = !0) : u.test(f) || (h = n.getError("ValidEmail"), c = !0), void 0 != i && (s = e("#" + i), s.length && !s.val().length && (d = !0, h = n.getError("ErrorUpdate"))), 1 == c ? (l.showError("email", o, h), e("#" + t + "Checked").val(e("#" + t).val()), !1) : 1 == d && void 0 != s ? (l.showError("pw", s, h), !1) : ("signUpEmail" == t && (l.CheckEmail(t), e("#" + t + "Checked").val(e("#" + t).val())), e(".errors .emailerror").length ? !1 : ("editEmail" == t && l.showValidTick(o, "email"), !0)))
    }, l.CheckEmail = function (n) {
        if (r(n)) {
            e("#verifyEmailSpinner").spinner("stop").spinner({
                height: 32,
                width: 32,
                speed: 80,
                image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                frames: 12
            }).show(), e("#checkEmail").show();
            var i = '{ "email":"' + e("#" + n).val() + '","env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + " }";
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/checkemail"),
                services: ["accounts", "registration"],
                data: i,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                requestDescription: "EmailAvailable",
                success: function (t, i) {
                    "success" == i && l.EmailExists(n, "false" == e(t).find("Status").text()), e("#checkEmail").hide()
                },
                complete: function () {
                    e("#verifyEmailSpinner").spinner("stop").hide()
                }
            })
        }
    }, l.ConfirmEmail = function (t) {
        var i = e.trim(e("#formAccountDetails #signUpEmail").val()), a = e.trim(t.val());
        if (a.toLowerCase() === i.toLowerCase()) return "" != i && l.showValidTick(t, "confirmemail"), !0;
        var r = n.getError("EmailDoesNotMatch");
        return l.showError("confirmemail", t, r), !1
    }, l.PasswordValidation = function (t, i) {
        var a = !1, r = e("#" + t), s = e.trim(r.val()), o = "";
        if (0 == s.length) o = n.getError("EntryPassword"), a = !0; else if ("signUpPassword" != t && "editNewPassword" != t || !(s.length < 8 || s.length > 16)) {
            if (s.length < 1 || s.length > 30) o = n.getError("SignInPasswordCount"), a = !0; else if ("signInPasswordProfile" != t) if (void 0 !== i && e("#" + i).length && r.val() != e("#" + i).val()) o = n.getError("ConfirmMatch"), e("#" + i).after('<span class="error"></span>'), a = !0; else {
                var c = /^(?=.*[0-9])(?=.*[A-Z])^([a-zA-Z0-9_*;\.\-\!\$\^]{8,16})$/;
                c.test(s) || (o = n.getError("InvalidPasswordNew"), a = !0)
            }
        } else o = n.getError("PasswordCount"), a = !0;
        return 1 == a ? (l.showError("pw", r, o), !1) : (("signUpPassword" == t || "editNewPassword" == t) && l.showValidTick(r, "pw"), !0)
    }, l.AvatarValidation = function (t) {
        l.clearErrorClasses();
        var i = e("#" + t).attr("src");
        return i.match(/blank.gif$/) || i.match(/default.png$/) ? (e("#lblAvatarError").after('<span class="errorText">' + n.getError("SelectAvatar") + "</span>"), e("#signUpAvatarForm").find("span.errorText").after('<span class="error"></span>'), !1) : !0
    }, l.NicknameValidation = function (t, a) {
        var r = e("#" + t), s = !1, o = r.val(), c = "";
        return !i(t) && o.length > 0 ? !0 : (e(".nickvalid").remove(), r.parent().find(".error").remove(), e("#altNicksContainer").is(":visible") && !i(t) ? !1 : ("" == o ? (c = n.getError("EnterNick"), s = !0) : o.length < 6 || o.length > 16 ? (c = n.getError("NickChar"), s = !0) : o.match(/^([a-zA-Z0-9_\.\-]{6,16})$/) || (c = n.getError("NickInvalid"), s = !0), s || "signUpNickname" != t || l.CheckNickname(t), e("#" + t + "Checked").val(e("#" + t).val()), 1 == s ? (l.showError("nick", r, c), !1) : e(".errors .nickerror").length ? !1 : ("signUpNickname" != t && l.showValidTick(r, "nick", a), !0)))
    }, l.SearchNicknameRegExValidation = function (e) {
        return e.match(/^([a-zA-Z0-9_\.\-]{3,16})$/) ? !0 : !1
    }, l.LocalNicknameValidation = function () {
        var t = e("#createProfileNickname"), i = t.closest("form").find(".errors"), a = e.trim(t.val().toLowerCase()),
            r = !1;
        return e("#existingProfiles").children().each(function () {
            var t = e(this).find("span.profilenickname");
            t.length && t.html().toLowerCase() == a && (r = !0)
        }), 1 == r ? (i.append('<span class="errorText">' + n.getError("NickExists") + "</span>"), t.after('<span class="error"></span>'), !1) : !0
    }, l.NicknameExists = function (t, i, a) {
        var r = e("#" + t);
        i ? (l.showError("nick", r, n.getError("NickExists")), l.DisplayAltNicknames(a, t)) : l.showValidTick(r, "nick")
    }, l.DisplayAltNicknames = function (t, i) {
        var a, r = e(t).find("NickNames"), s = "", o = e("#" + i);
        r.find("string").each(function () {
            s += '<li><a href="#" title="Select name">' + e(this).text() + "</a></li>"
        }), a = '<div id="altNicksContainer"><h3>' + n.getText("Alternatives", "Register") + ':</h3><div><ul id="altNicks">', a += s + "</ul></div></div>", o.parent().append(a), o.val(""), o.attr("placeholder", n.getText("WhyNotTry", "Register")), e("#altNicks li a").click(function (t) {
            t.preventDefault(), o.val(e(t.currentTarget).text()), e("#altNicksContainer").remove(), o.attr("placeholder", ""), l.showValidTick(o, "nick")
        })
    }, l.PasswordInvalid = function (t, i) {
        var a = e("#" + t);
        i ? l.showError("pw", a, n.getError("InvalidPasswordNew")) : l.showValidTick(a, "pw")
    }, l.EmailExists = function (t, i) {
        var a = e("#" + t);
        i ? l.showError("email", a, n.getError("EmailExists")) : l.showValidTick(a, "email")
    }, l.UpdateProfileValidation = function () {
        var t = !0;
        return l.clearErrorClasses(), l.EmailValidation("editEmail", "editEmailPassword") || (t = !1), e("#editNewPassword").val() && (e("#editOldPassword").val() ? l.PasswordValidation("editNewPassword", "editConfNewPassword") || (t = !1) : (e("#editOldPassword").before('<span class="errorText">' + n.getError("EntryPassword") + "</span>"), e("#editOldPassword").after('<span class="error"></span>'), t = !1)), t
    }, l.UpdateEmailValidation = function () {
        var e = !0;
        return l.clearErrorClasses(), l.EmailValidation("editEmail", "editEmailPassword") || (e = !1), e
    }, l.UpdateNicknameValidation = function () {
        var t = !0;
        return l.clearErrorClasses(), l.NicknameValidation("editName") || (t = !1), t && l.CheckNickname("editName"), e("#nameForm span.error").length > 0 && e("#nameForm span.error").is(":visible") && (t = !1), t
    }, l.CheckNickname = function (a) {
        var r = e("#" + a);
        if (e("#altNicksContainer").remove(), r.attr("placeholder", ""), i(a) || !s()) {
            e("#verifyNickSpinner").spinner("stop").spinner({
                height: 32,
                width: 32,
                speed: 80,
                image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                frames: 12
            }).css("display", "block"), o();
            var c = '{ "nickname":"' + r.val() + '", "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + " }",
                d = "editName" != a;
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/checknickname"),
                services: ["accounts", "registration"],
                data: c,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                async: d,
                requestDescription: "NicknameAvailable",
                silentFail: !0,
                error: function (n, i, a) {
                    var s;
                    if (t.AjaxRequestAborted(a)) s = t.errorCode("1002"); else {
                        var o = n.responseText, c = e.xml2json(o);
                        s = c.Message
                    }
                    l.CheckNicknameError(s, r), e("#verifyNickSpinner").spinner("stop").hide()
                },
                success: function (t, i) {
                    if ("success" == i) {
                        var s = e(t);
                        o(s.find("AuthToken").text());
                        var c = s.find("Error").attr("Code");
                        "InvalidArgument" == c || "Profane" == c ? l.showError("nick", r, n.getError("NickInvalid")) : l.NicknameExists(a, "false" == s.find("Status").text(), t)
                    }
                    e("#verifyNickSpinner").spinner("stop").hide()
                },
                complete: function (t, n) {
                    e("#" + a + "Checked").val(e("#" + a).val()), "success" !== n && (e(".nickvalid").remove(), null != globals.account && e("#editName").val(globals.account.Nickname))
                }
            })
        }
    }, l.CheckNicknameError = function (i, a) {
        var r = n.getErrorWithCode(i), s = e(".errors .nickerror");
        return i == t.errorCode("1002") ? t.pubsub.trigger("setupEnv:showServiceAlert") : i !== t.errorCode("5001.27") && i !== t.errorCode("5004.27") && (r.Message = r.Message + (r.CodeDescription ? " " + r.CodeDescription : "")), s.length ? (s.html(r.Message), l.showError("nick", a, r.Message)) : (e(".nickvalid").remove(), l.showError("nick", a, r.Message)), t.WriteDebugLog("CheckNicknameError", i, r.Message + "; " + r.SupportText + "; " + r.CodeDescription), void 0 === i || "1000.1" === i ? void n.showGenericFatalError(i, r.Message, r.SupportText, r.CodeDescription) : void 0
    }, l.UpdatePasswordValidation = function () {
        var t = !0;
        return l.clearErrorClasses(), e("#editOldPassword").val() ? l.PasswordValidation("editNewPassword", "editConfNewPassword") || (t = !1) : (e("#passwordForm .errors").append('<span class="errorText">' + n.getError("EntryPassword") + "</span>"), e("#editOldPassword").after('<span class="error"></span>'), t = !1), t && e("span.error, span.errorText").remove(), t
    }, l.ActivationCodeValidation = function (t, i) {
        if (l.clearErrorClasses(), e("div.errorText:not(.emailerror, .nickerror, div.errorCode)").remove(), i) {
            var a = e("#legalActivation"), r = e("#formActivation").find("input:checkbox:checked");
            if (void 0 != r && !r.length) return a.find(".legal").after('<span class="errorText">' + n.getError("ActivationLegalCheck") + "</span>").after('<span class="error"></span>'), a.focus(), !1
        }
        var s = e("#activationCode"), o = e.trim(s.val());
        return 0 == o.length ? (s.after(t ? '<span class="errorText">' + n.getError("EnterRedemption") + "</span>" : '<span class="errorText">' + n.getError("EnterActivation") + "</span>"), s.after('<span class="error"></span>').focus(), !1) : o.match(/^[a-zA-Z0-9-]+$/) ? !0 : (s.after(t ? '<span class="errorText">' + n.getText("i39", "Activation") + "</span>" : '<span class="errorText">' + n.getText("i33", "Activation") + "</span>"), s.after('<span class="error"></span>').focus(), !1)
    }, l.PostalCodeValidation = function (t) {
        var i = e("#" + t);
        if (i.length && i.val().length) {
            var a = /^.{1,10}$/, r = e.trim(i.val());
            if (-1 == r.search(a)) {
                var s = n.getError("InvalidZip");
                return i.before('<span class="errorText">' + s + "</span>"), i.after('<span class="error" title="' + s + '"></span>'), !1
            }
        }
        return !0
    }, l.clearErrorClasses = function () {
        e("span.error:not(.emailerror,.nickerror,.pwerror,.doberror)").remove(), globals.underage ? e("span.errorText:not(.doberror)").remove() : e("span.errorText").remove()
    }, l.showError = function (t, n, i) {
        n.parent().find("." + t + "valid").remove();
        var a = e(".errors ." + t + "error"), r = n.parent().find(".error");
        if (a.length) a.html(i); else {
            var s = n.closest("form").find(".errors");
            s.append('<span class="' + t + 'error errorText">' + i + "</span>")
        }
        r.length || n.after('<span class="error"></span>')
    }, l.showValidTick = function (t, n, i) {
        e(".errors ." + n + "error").remove(), t.parent().find(".error").remove();
        var a = e("." + n + "valid");
        a.length || i || t.after('<span class="' + n + 'valid"></span>'), l.EnableSubmit()
    }, l.EnableSubmit = function () {
        var t = !!e(".dobvalid").length, n = !!e(".nickvalid").length, i = !!e(".emailvalid").length,
            a = !!e(".confirmemailvalid").length, r = !!(t && n && i && a);
        r && e("#submitDOB").removeAttr("disabled")
    }, l
}), define("domReady", [], function () {
    function e(e) {
        var t;
        for (t = 0; t < e.length; t += 1) e[t](c)
    }

    function t() {
        var t = d;
        l && t.length && (d = [], e(t))
    }

    function n() {
        l || (l = !0, s && clearInterval(s), t())
    }

    function i(e) {
        return l ? e(c) : d.push(e), i
    }

    var a, r, s, o = "undefined" != typeof window && window.document, l = !o, c = o ? document : null, d = [];
    if (o) {
        if (document.addEventListener) document.addEventListener("DOMContentLoaded", n, !1), window.addEventListener("load", n, !1); else if (window.attachEvent) {
            window.attachEvent("onload", n), r = document.createElement("div");
            try {
                a = null === window.frameElement
            } catch (u) {
            }
            r.doScroll && a && window.external && (s = setInterval(function () {
                try {
                    r.doScroll(), n()
                } catch (e) {
                }
            }, 30))
        }
        "complete" === document.readyState && n()
    }
    return i.version = "2.0.1", i.load = function (e, t, n, a) {
        a.isBuild ? n(null) : i(n)
    }, i
}), define("common/reCaptcha", ["jquery", "utils", "jquery.setup.environment.utils"], function (e, t, n) {
    function i(e) {
        return "object" != typeof window.Recaptcha || null == window.Recaptcha ? (t.WriteDebugLog("isRecaptchaLoaded", "ERROR", "Google ReCaptcha property not available on window object"), !1) : "string" == typeof e && "function" != typeof window.Recaptcha[e] ? (t.WriteDebugLog("isRecaptchaLoaded", "ERROR", "Google ReCaptcha function (" + e + ") not available on window.ReCaptcha object"), !1) : "object" == typeof e ? (t.WriteDebugLog("isRecaptchaLoaded", "ERROR", "func parameter is invalid: object passed rather than a string"), !1) : !0
    }

    function a() {
        i("destroy") && window.Recaptcha.destroy()
    }

    function r(e, t, n) {
        i("create") && window.Recaptcha.create(e, t, n)
    }

    function s(e, t, n) {
        i("reload") && window.Recaptcha.reload(e, t, n)
    }

    function o() {
        i("focus_response_field") && window.Recaptcha.focus_response_field()
    }

    function l(e) {
        var t = "";
        switch (e) {
            case"incorrect-captcha-sol":
                t = n.getText("ReCaptchaError1", "HomeSignin");
                break;
            case"captcha-timeout":
                t = n.getText("ReCaptchaError2", "HomeSignin");
                break;
            case"recaptcha-not-reachable":
                t = n.getText("ReCaptchaError3", "HomeSignin");
                break;
            default:
                t = n.getText("ReCaptchaError4", "HomeSignin")
        }
        return t
    }

    var c = {}, d = {}, u = "clean", h = ["red", "white", "blackglass", "clean"], f = "1px solid rgb(255, 0, 0)",
        p = "1px solid #3C3C3C";
    return c.InitReCaptcha = function (t, i, a) {
        var r = t.attr("id");
        c.init({
            publicKey: globals.reCaptchaPublicKey,
            elementId: r,
            tabIndex: i,
            lang: globals.titlelang,
            callback: function () {
                "signUpReCaptchaInput" == r && (a.show(), t.parent().show()), e("#recaptcha_privacy").find("a").addClass("RGSCLoadExt"), e("#recaptcha_response_field").attr("placeholder", n.getText("RecaptchaResponsePlaceholder", "Register")), e("#recaptcha_privacy a").text(n.getText("RecaptchaTerms", "Register"))
            }
        })
    }, c.init = function (n) {
        function a() {
            i() && (clearInterval(s), r(n.publicKey, n.elementId, {
                tabindex: n.tabIndex,
                theme: n.theme,
                lang: n.lang,
                callback: n.callback
            })), setTimeout(function () {
                clearInterval(s)
            }, 3e3)
        }

        if (void 0 === n || void 0 === n.publicKey || void 0 === n.elementId) return void t.WriteDebugLog("reCaptcha.init", "ERROR", "failed due to missing required options");
        void 0 !== n.theme && "" != n.theme && e.inArray(n.theme, h) || (n.theme = u), void 0 === n.tabIndex && (n.tabIndex = 1), (void 0 === n.lang || 2 != n.lang.length) && (n.lang = "en"), d = n;
        var s = setInterval(a, 300)
    }, c.remove = function () {
        globals.showSignInRecaptcha = !1, e("#signInReCaptchaInput").empty(), e("#signInProfile").removeClass("verify"), e("#signInReCaptchaInput").hide(), a()
    }, c.hideError = function () {
        e("#recaptcha_response_field_error").html("").hide(), c.setErrorBorder(!1)
    }, c.setErrorBorder = function (e) {
        var t = document.getElementById("recaptcha_response_field");
        null !== t && (t.style.border = e ? f : p)
    }, c.isError = function () {
        var e = document.getElementById("recaptcha_response_field");
        return null === e ? !1 : e.style.border === f
    }, c.showError = function (t) {
        var n = e("#recaptcha_response_field"), i = e("#recaptcha_response_field_error");
        (!i || i.length < 1) && n.before("<p id='recaptcha_response_field_error' style='color: red;'></p>"), e("#recaptcha_response_field_error").html(l(t)).show("slow"), c.setErrorBorder(!0), setTimeout(function () {
            e("#recaptcha_response_field_error").hide("slow")
        }, 5e3), o()
    }, c.isVisible = function () {
        var t = e("#signInReCaptchaInput");
        return t.is(":visible") && t.html().length
    }, c.reload = function () {
        return c.hideError(), "undefined" == typeof d || "undefined" == typeof d.publicKey || "undefined" == typeof d.elementId ? (t.WriteDebugLog("reCaptcha.reload", "ERROR", "failed due to missing required options"), !1) : e("#recaptcha_challenge_field").length ? void s(d.publicKey, d.elementId, {
            tabindex: d.tabIndex,
            theme: d.theme,
            lang: d.lang
        }) : (t.WriteDebugLog("reCaptcha.reload", "ERROR", "challenge field does not exist, attempting re-init"), a(), c.init(d), !1)
    }, t.pubsub.on("reCaptcha.initReCaptcha", c.InitReCaptcha), c
}), define("common/steam", ["jquery", "utils", "jquery.setup.environment.utils", "spinner"], function (e, t, n) {
    function i(e, n, i, r) {
        return void 0 == e || isNaN(e) || 0 >= e ? (t.WriteDebugLog("BindSteamAccount", "Undefined", "steamAppId", t.logType.error, t.logController[globals.titleName]), a("5000.76"), !1) : void 0 != n && n.length ? void 0 != r && void 0 != r.ticket && r.ticket.length ? !0 : (t.WriteDebugLog("BindSteamAccount", "Failed - Undefined values, signedInJson:", i, t.logType.error, t.logController[globals.titleName]), a("5000.51"), !1) : (t.WriteDebugLog("BindSteamAccount", "Undefined", "steamAuthTicket", t.logType.error, t.logController[globals.titleName]), a("5000.77"), !1)
    }

    function a(e) {
        var t = n.getErrorWithCode(e);
        n.showGenericFatalError(e, t.Message, t.SupportText)
    }

    function r(n, i) {
        var a = e(n);
        "true" == a.find("Status").text() ? (e("#activation").removeClass("pending"), globals.account && (t.pubsub.trigger("datafunctions:LoadProfile"), e("#editAutoSignIn").prop("checked", i.AutoSignIn)), t.pubsub.trigger("dataFn:signInToGame", i)) : s(void 0, void 0, void 0, n)
    }

    function s(i, a, r, s) {
        var o = "", l = "", c = "";
        void 0 == s || !s.find("Error").length || "NotAllowed" != s.find("Error").attr("Code") || "SteamAccountLink" != s.find("Error").attr("CodeEx") && "RockstarAccountLink" != s.find("Error").attr("CodeEx") ? void 0 != s ? (o = "Unknown", l = "SteamAccountLink", t.WriteDebugLog("BindSteamAccount", "Failed", "Unknown service error", t.logType.error, t.logController[globals.titleName]), c = n.getText("i44", "Activation")) : (o = "FetchFailed", l = "SteamAccountLink", t.WriteDebugLog("BindSteamAccount", "Ajax error", a, t.logType.error, t.logController[globals.titleName]), c = n.getText("i44", "Activation")) : (o = s.find("Error").attr("CodeEx"), l = s.find("Error").attr("CodeEx"), t.WriteDebugLog("BindSteamAccount", "Failed", "AlreadyLinked"), c = n.getError("SteamAccountLink" == s.find("Error").attr("CodeEx") ? "SteamAlreadyLinked" : "RockstarAlreadyLinked")), e("div.signIn").find(".SignInError").after('<span class="errorText">' + c + "</span>"), 0 == e("#selectProfile.active").length ? n.clearActivePanel(function () {
            n.setUpSignedInOptions(!1, n.isOffline()), e('a[disabled="disabled"]:first').removeAttr("disabled"), e('a.buttonSignIn[disabled="disabled"]').removeAttr("disabled"), e("div.buttonSignInWrapper span").spinner("stop").hide(), t.pubsub.trigger("datafunctions:ShowSignin", n.isOnline())
        }) : (e('a[disabled="disabled"]:first').removeAttr("disabled"), e('a.buttonSignIn[disabled="disabled"]').removeAttr("disabled"), e("div.buttonSignInWrapper span").spinner("stop").hide()), t.pubsub.trigger("dataFn:notifyGameSignInFailed", o, l)
    }

    var o = {};
    return o.BindSteamAccount = function (a, o, l) {
        t.WriteDebugLog("BindSteamAccount", "steamAppId, ticket", a + "," + o);
        var c = JSON.stringify(l);
        if (i(a, o, c, l)) {
            var d = '{ "platformName":"' + globals.platform + '","env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"playerTicket":"' + l.ticket + '","steamAppId":"' + a + '","steamAuthTicket":"' + o + '" }',
                u = n.GetAuthHeaderAsync(l.ticket);
            u.done(function (n) {
                var i = e.ajax({
                    type: "POST",
                    url: t.getApiUrl("/api/" + globals.titleName + "/bindsteamaccount"),
                    data: d,
                    headers: n,
                    services: !0,
                    timeout: 3 * globals.ajaxTimeout,
                    slowMsgTimeout: 2 * globals.slowAjaxMsgTimeout,
                    contentType: "application/json; charset=utf-8",
                    dataType: "xml",
                    requestDescription: "BindSteamAccount"
                });
                i.done(function (e) {
                    r(e, l, c)
                }), i.fail(function (e, t, n) {
                    s(e, t, n)
                }), i.always(function () {
                    c = null, l = null
                })
            })
        }
    }, o.SteamLinkPrompt = function (e) {
        t.pubsub.trigger("steam:showActivationSteamLink", e)
    }, o.getSteamNetworkAsync = function (i, a) {
        t.WriteDebugLog("getSteamNetwork", "rockstarId, ticket", i + "," + a);
        var r = {},
            s = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"rockstarId":"' + i + '" }',
            l = new e.Deferred, c = n.GetAuthHeaderAsync(a);
        return c.done(function (n) {
            t.WriteDebugLog("getSteamNetwork", "authHeader", JSON.stringify(n)), e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/getsteam"),
                services: ["accounts"],
                headers: n,
                data: s,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                requestDescription: "UserNetworks",
                fatalError: function () {
                    throw t.WriteDebugLog("getSteamNetwork", "fatalError", "", t.logType.error, t.logController[globals.titleName]), "fail"
                },
                success: function (e) {
                    t.WriteDebugLog("getSteamNetwork", "success"), r = o.getSteamSuccess(e), t.WriteDebugLog("getSteamNetwork", "jsonResult", "string" == typeof r ? r : JSON.stringify(r)), l.resolve(r)
                },
                complete: function () {
                    t.WriteDebugLog("getSteamNetwork", "complete"), l.isResolved() || l.reject()
                }
            })
        }), l.promise()
    }, o.getSteamSuccess = function (n) {
        var i = e(n), a = i.find("OnlineServiceName"), r = {};
        return t.WriteDebugLog("getSteamSuccess", "networkAccounts.length", a.length), a.length > 0 && i.find("PlayerAccount").each(function () {
            var t = e(this).find("OnlineServiceName").text();
            return "steam" == t ? (r = e.xml2json(this), !1) : void 0
        }), r
    }, o.isSteam = function () {
        return n.isSteam()
    }, o
}), define("common/modals/modal-models", ["backbone"], function (e) {
    var t = {};
    return t.ModalModel = e.Model.extend({
        defaults: {
            NameWrapper: '<span class="name">{name}</span>',
            Btn1Text: "ConfirmButtonText",
            Btn2Text: "Cancel"
        }
    }), t
}), define("common/hbs/handlebars", [], function () {
    var e = function () {
        var e = function () {
            function e(e) {
                this.string = e
            }

            var t;
            return e.prototype.toString = function () {
                return "" + this.string
            }, t = e
        }(), t = function (e) {
            function t(e) {
                return o[e] || "&amp;"
            }

            function n(e, t) {
                for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n])
            }

            function i(e) {
                return e instanceof s ? e.toString() : e || 0 === e ? (e = "" + e, c.test(e) ? e.replace(l, t) : e) : ""
            }

            function a(e) {
                return e || 0 === e ? h(e) && 0 === e.length ? !0 : !1 : !0
            }

            var r = {}, s = e,
                o = {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;", "`": "&#x60;"},
                l = /[&<>"'`]/g, c = /[&<>"'`]/;
            r.extend = n;
            var d = Object.prototype.toString;
            r.toString = d;
            var u = function (e) {
                return "function" == typeof e
            };
            u(/x/) && (u = function (e) {
                return "function" == typeof e && "[object Function]" === d.call(e)
            });
            var u;
            r.isFunction = u;
            var h = Array.isArray || function (e) {
                return e && "object" == typeof e ? "[object Array]" === d.call(e) : !1
            };
            return r.isArray = h, r.escapeExpression = i, r.isEmpty = a, r
        }(e), n = function () {
            function e(e, t) {
                var i;
                t && t.firstLine && (i = t.firstLine, e += " - " + i + ":" + t.firstColumn);
                for (var a = Error.prototype.constructor.call(this, e), r = 0; r < n.length; r++) this[n[r]] = a[n[r]];
                i && (this.lineNumber = i, this.column = t.firstColumn)
            }

            var t, n = ["description", "fileName", "lineNumber", "message", "name", "number", "stack"];
            return e.prototype = new Error, t = e
        }(), i = function (e, t) {
            function n(e, t) {
                this.helpers = e || {}, this.partials = t || {}, i(this)
            }

            function i(e) {
                e.registerHelper("helperMissing", function (e) {
                    if (2 === arguments.length) return void 0;
                    throw new o("Missing helper: '" + e + "'")
                }), e.registerHelper("blockHelperMissing", function (t, n) {
                    var i = n.inverse || function () {
                    }, a = n.fn;
                    return h(t) && (t = t.call(this)), t === !0 ? a(this) : t === !1 || null == t ? i(this) : u(t) ? t.length > 0 ? e.helpers.each(t, n) : i(this) : a(t)
                }), e.registerHelper("each", function (e, t) {
                    var n, i = t.fn, a = t.inverse, r = 0, s = "";
                    if (h(e) && (e = e.call(this)), t.data && (n = g(t.data)), e && "object" == typeof e) if (u(e)) for (var o = e.length; o > r; r++) n && (n.index = r, n.first = 0 === r, n.last = r === e.length - 1), s += i(e[r], {data: n}); else for (var l in e) e.hasOwnProperty(l) && (n && (n.key = l, n.index = r, n.first = 0 === r), s += i(e[l], {data: n}), r++);
                    return 0 === r && (s = a(this)), s
                }), e.registerHelper("if", function (e, t) {
                    return h(e) && (e = e.call(this)), !t.hash.includeZero && !e || s.isEmpty(e) ? t.inverse(this) : t.fn(this)
                }), e.registerHelper("unless", function (t, n) {
                    return e.helpers["if"].call(this, t, {fn: n.inverse, inverse: n.fn, hash: n.hash})
                }), e.registerHelper("with", function (e, t) {
                    return h(e) && (e = e.call(this)), s.isEmpty(e) ? void 0 : t.fn(e)
                }), e.registerHelper("log", function (t, n) {
                    var i = n.data && null != n.data.level ? parseInt(n.data.level, 10) : 1;
                    e.log(i, t)
                })
            }

            function a(e, t) {
                m.log(e, t)
            }

            var r = {}, s = e, o = t, l = "1.3.0";
            r.VERSION = l;
            var c = 4;
            r.COMPILER_REVISION = c;
            var d = {1: "<= 1.0.rc.2", 2: "== 1.0.0-rc.3", 3: "== 1.0.0-rc.4", 4: ">= 1.0.0"};
            r.REVISION_CHANGES = d;
            var u = s.isArray, h = s.isFunction, f = s.toString, p = "[object Object]";
            r.HandlebarsEnvironment = n, n.prototype = {
                constructor: n,
                logger: m,
                log: a,
                registerHelper: function (e, t, n) {
                    if (f.call(e) === p) {
                        if (n || t) throw new o("Arg not supported with multiple helpers");
                        s.extend(this.helpers, e)
                    } else n && (t.not = n), this.helpers[e] = t
                },
                registerPartial: function (e, t) {
                    f.call(e) === p ? s.extend(this.partials, e) : this.partials[e] = t
                }
            };
            var m = {
                methodMap: {0: "debug", 1: "info", 2: "warn", 3: "error"},
                DEBUG: 0,
                INFO: 1,
                WARN: 2,
                ERROR: 3,
                level: 3,
                log: function (e, t) {
                    if (m.level <= e) {
                        var n = m.methodMap[e];
                        "undefined" != typeof console && console[n] && console[n].call(console, t)
                    }
                }
            };
            r.logger = m, r.log = a;
            var g = function (e) {
                var t = {};
                return s.extend(t, e), t
            };
            return r.createFrame = g, r
        }(t, n), a = function (e, t, n) {
            function i(e) {
                var t = e && e[0] || 1, n = h;
                if (t !== n) {
                    if (n > t) {
                        var i = f[n], a = f[t];
                        throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (" + i + ") or downgrade your runtime to an older version (" + a + ").")
                    }
                    throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (" + e[1] + ").")
                }
            }

            function a(e, t) {
                if (!t) throw new u("No environment passed to template");
                var n = function (e, n, i, a, r, s) {
                    var o = t.VM.invokePartial.apply(this, arguments);
                    if (null != o) return o;
                    if (t.compile) {
                        var l = {helpers: a, partials: r, data: s};
                        return r[n] = t.compile(e, {data: void 0 !== s}, t), r[n](i, l)
                    }
                    throw new u("The partial " + n + " could not be compiled when running in runtime-only mode")
                }, i = {
                    escapeExpression: d.escapeExpression,
                    invokePartial: n,
                    programs: [],
                    program: function (e, t, n) {
                        var i = this.programs[e];
                        return n ? i = s(e, t, n) : i || (i = this.programs[e] = s(e, t)), i
                    },
                    merge: function (e, t) {
                        var n = e || t;
                        return e && t && e !== t && (n = {}, d.extend(n, t), d.extend(n, e)), n
                    },
                    programWithDepth: t.VM.programWithDepth,
                    noop: t.VM.noop,
                    compilerInfo: null
                };
                return function (n, a) {
                    a = a || {};
                    var r, s, o = a.partial ? a : t;
                    a.partial || (r = a.helpers, s = a.partials);
                    var l = e.call(i, o, n, r, s, a.data);
                    return a.partial || t.VM.checkRevision(i.compilerInfo), l
                }
            }

            function r(e, t, n) {
                var i = Array.prototype.slice.call(arguments, 3), a = function (e, a) {
                    return a = a || {}, t.apply(this, [e, a.data || n].concat(i))
                };
                return a.program = e, a.depth = i.length, a
            }

            function s(e, t, n) {
                var i = function (e, i) {
                    return i = i || {}, t(e, i.data || n)
                };
                return i.program = e, i.depth = 0, i
            }

            function o(e, t, n, i, a, r) {
                var s = {partial: !0, helpers: i, partials: a, data: r};
                if (void 0 === e) throw new u("The partial " + t + " could not be found");
                return e instanceof Function ? e(n, s) : void 0
            }

            function l() {
                return ""
            }

            var c = {}, d = e, u = t, h = n.COMPILER_REVISION, f = n.REVISION_CHANGES;
            return c.checkRevision = i, c.template = a, c.programWithDepth = r, c.program = s, c.invokePartial = o, c.noop = l, c
        }(t, n, i), r = function (e, t, n, i, a) {
            var r, s = e, o = t, l = n, c = i, d = a, u = function () {
                var e = new s.HandlebarsEnvironment;
                return c.extend(e, s), e.SafeString = o, e.Exception = l, e.Utils = c, e.VM = d, e.template = function (t) {
                    return d.template(t, e)
                }, e
            }, h = u();
            return h.create = u, r = h
        }(i, e, n, t, a), s = function (e) {
            function t(e) {
                e = e || {}, this.firstLine = e.first_line, this.firstColumn = e.first_column, this.lastColumn = e.last_column, this.lastLine = e.last_line
            }

            var n, i = e, a = {
                ProgramNode: function (e, n, i, r) {
                    var s, o;
                    3 === arguments.length ? (r = i, i = null) : 2 === arguments.length && (r = n, n = null), t.call(this, r), this.type = "program", this.statements = e, this.strip = {}, i ? (o = i[0], o ? (s = {
                        first_line: o.firstLine,
                        last_line: o.lastLine,
                        last_column: o.lastColumn,
                        first_column: o.firstColumn
                    }, this.inverse = new a.ProgramNode(i, n, s)) : this.inverse = new a.ProgramNode(i, n), this.strip.right = n.left) : n && (this.strip.left = n.right)
                }, MustacheNode: function (e, n, i, r, s) {
                    if (t.call(this, s), this.type = "mustache", this.strip = r, null != i && i.charAt) {
                        var o = i.charAt(3) || i.charAt(2);
                        this.escaped = "{" !== o && "&" !== o
                    } else this.escaped = !!i;
                    this.sexpr = e instanceof a.SexprNode ? e : new a.SexprNode(e, n), this.sexpr.isRoot = !0, this.id = this.sexpr.id, this.params = this.sexpr.params, this.hash = this.sexpr.hash, this.eligibleHelper = this.sexpr.eligibleHelper, this.isHelper = this.sexpr.isHelper
                }, SexprNode: function (e, n, i) {
                    t.call(this, i), this.type = "sexpr", this.hash = n;
                    var a = this.id = e[0], r = this.params = e.slice(1), s = this.eligibleHelper = a.isSimple;
                    this.isHelper = s && (r.length || n)
                }, PartialNode: function (e, n, i, a) {
                    t.call(this, a), this.type = "partial", this.partialName = e, this.context = n, this.strip = i
                }, BlockNode: function (e, n, a, r, s) {
                    if (t.call(this, s), e.sexpr.id.original !== r.path.original) throw new i(e.sexpr.id.original + " doesn't match " + r.path.original, this);
                    this.type = "block", this.mustache = e, this.program = n, this.inverse = a, this.strip = {
                        left: e.strip.left,
                        right: r.strip.right
                    }, (n || a).strip.left = e.strip.right, (a || n).strip.right = r.strip.left, a && !n && (this.isInverse = !0)
                }, ContentNode: function (e, n) {
                    t.call(this, n), this.type = "content", this.string = e
                }, HashNode: function (e, n) {
                    t.call(this, n), this.type = "hash", this.pairs = e
                }, IdNode: function (e, n) {
                    t.call(this, n), this.type = "ID";
                    for (var a = "", r = [], s = 0, o = 0, l = e.length; l > o; o++) {
                        var c = e[o].part;
                        if (a += (e[o].separator || "") + c, ".." === c || "." === c || "this" === c) {
                            if (r.length > 0) throw new i("Invalid path: " + a, this);
                            ".." === c ? s++ : this.isScoped = !0
                        } else r.push(c)
                    }
                    this.original = a, this.parts = r, this.string = r.join("."), this.depth = s, this.isSimple = 1 === e.length && !this.isScoped && 0 === s, this.stringModeValue = this.string
                }, PartialNameNode: function (e, n) {
                    t.call(this, n), this.type = "PARTIAL_NAME", this.name = e.original
                }, DataNode: function (e, n) {
                    t.call(this, n), this.type = "DATA", this.id = e
                }, StringNode: function (e, n) {
                    t.call(this, n), this.type = "STRING", this.original = this.string = this.stringModeValue = e
                }, IntegerNode: function (e, n) {
                    t.call(this, n), this.type = "INTEGER", this.original = this.integer = e, this.stringModeValue = Number(e)
                }, BooleanNode: function (e, n) {
                    t.call(this, n), this.type = "BOOLEAN", this.bool = e, this.stringModeValue = "true" === e
                }, CommentNode: function (e, n) {
                    t.call(this, n), this.type = "comment", this.comment = e
                }
            };
            return n = a
        }(n), o = function () {
            var e, t = function () {
                function e(e, t) {
                    return {left: "~" === e.charAt(2), right: "~" === t.charAt(0) || "~" === t.charAt(1)}
                }

                function t() {
                    this.yy = {}
                }

                var n = {
                    trace: function () {
                    },
                    yy: {},
                    symbols_: {
                        error: 2,
                        root: 3,
                        statements: 4,
                        EOF: 5,
                        program: 6,
                        simpleInverse: 7,
                        statement: 8,
                        openInverse: 9,
                        closeBlock: 10,
                        openBlock: 11,
                        mustache: 12,
                        partial: 13,
                        CONTENT: 14,
                        COMMENT: 15,
                        OPEN_BLOCK: 16,
                        sexpr: 17,
                        CLOSE: 18,
                        OPEN_INVERSE: 19,
                        OPEN_ENDBLOCK: 20,
                        path: 21,
                        OPEN: 22,
                        OPEN_UNESCAPED: 23,
                        CLOSE_UNESCAPED: 24,
                        OPEN_PARTIAL: 25,
                        partialName: 26,
                        partial_option0: 27,
                        sexpr_repetition0: 28,
                        sexpr_option0: 29,
                        dataName: 30,
                        param: 31,
                        STRING: 32,
                        INTEGER: 33,
                        BOOLEAN: 34,
                        OPEN_SEXPR: 35,
                        CLOSE_SEXPR: 36,
                        hash: 37,
                        hash_repetition_plus0: 38,
                        hashSegment: 39,
                        ID: 40,
                        EQUALS: 41,
                        DATA: 42,
                        pathSegments: 43,
                        SEP: 44,
                        $accept: 0,
                        $end: 1
                    },
                    terminals_: {
                        2: "error",
                        5: "EOF",
                        14: "CONTENT",
                        15: "COMMENT",
                        16: "OPEN_BLOCK",
                        18: "CLOSE",
                        19: "OPEN_INVERSE",
                        20: "OPEN_ENDBLOCK",
                        22: "OPEN",
                        23: "OPEN_UNESCAPED",
                        24: "CLOSE_UNESCAPED",
                        25: "OPEN_PARTIAL",
                        32: "STRING",
                        33: "INTEGER",
                        34: "BOOLEAN",
                        35: "OPEN_SEXPR",
                        36: "CLOSE_SEXPR",
                        40: "ID",
                        41: "EQUALS",
                        42: "DATA",
                        44: "SEP"
                    },
                    productions_: [0, [3, 2], [3, 1], [6, 2], [6, 3], [6, 2], [6, 1], [6, 1], [6, 0], [4, 1], [4, 2], [8, 3], [8, 3], [8, 1], [8, 1], [8, 1], [8, 1], [11, 3], [9, 3], [10, 3], [12, 3], [12, 3], [13, 4], [7, 2], [17, 3], [17, 1], [31, 1], [31, 1], [31, 1], [31, 1], [31, 1], [31, 3], [37, 1], [39, 3], [26, 1], [26, 1], [26, 1], [30, 2], [21, 1], [43, 3], [43, 1], [27, 0], [27, 1], [28, 0], [28, 2], [29, 0], [29, 1], [38, 1], [38, 2]],
                    performAction: function (t, n, i, a, r, s) {
                        var o = s.length - 1;
                        switch (r) {
                            case 1:
                                return new a.ProgramNode(s[o - 1], this._$);
                            case 2:
                                return new a.ProgramNode([], this._$);
                            case 3:
                                this.$ = new a.ProgramNode([], s[o - 1], s[o], this._$);
                                break;
                            case 4:
                                this.$ = new a.ProgramNode(s[o - 2], s[o - 1], s[o], this._$);
                                break;
                            case 5:
                                this.$ = new a.ProgramNode(s[o - 1], s[o], [], this._$);
                                break;
                            case 6:
                                this.$ = new a.ProgramNode(s[o], this._$);
                                break;
                            case 7:
                                this.$ = new a.ProgramNode([], this._$);
                                break;
                            case 8:
                                this.$ = new a.ProgramNode([], this._$);
                                break;
                            case 9:
                                this.$ = [s[o]];
                                break;
                            case 10:
                                s[o - 1].push(s[o]), this.$ = s[o - 1];
                                break;
                            case 11:
                                this.$ = new a.BlockNode(s[o - 2], s[o - 1].inverse, s[o - 1], s[o], this._$);
                                break;
                            case 12:
                                this.$ = new a.BlockNode(s[o - 2], s[o - 1], s[o - 1].inverse, s[o], this._$);
                                break;
                            case 13:
                                this.$ = s[o];
                                break;
                            case 14:
                                this.$ = s[o];
                                break;
                            case 15:
                                this.$ = new a.ContentNode(s[o], this._$);
                                break;
                            case 16:
                                this.$ = new a.CommentNode(s[o], this._$);
                                break;
                            case 17:
                                this.$ = new a.MustacheNode(s[o - 1], null, s[o - 2], e(s[o - 2], s[o]), this._$);
                                break;
                            case 18:
                                this.$ = new a.MustacheNode(s[o - 1], null, s[o - 2], e(s[o - 2], s[o]), this._$);
                                break;
                            case 19:
                                this.$ = {path: s[o - 1], strip: e(s[o - 2], s[o])};
                                break;
                            case 20:
                                this.$ = new a.MustacheNode(s[o - 1], null, s[o - 2], e(s[o - 2], s[o]), this._$);
                                break;
                            case 21:
                                this.$ = new a.MustacheNode(s[o - 1], null, s[o - 2], e(s[o - 2], s[o]), this._$);
                                break;
                            case 22:
                                this.$ = new a.PartialNode(s[o - 2], s[o - 1], e(s[o - 3], s[o]), this._$);
                                break;
                            case 23:
                                this.$ = e(s[o - 1], s[o]);
                                break;
                            case 24:
                                this.$ = new a.SexprNode([s[o - 2]].concat(s[o - 1]), s[o], this._$);
                                break;
                            case 25:
                                this.$ = new a.SexprNode([s[o]], null, this._$);
                                break;
                            case 26:
                                this.$ = s[o];
                                break;
                            case 27:
                                this.$ = new a.StringNode(s[o], this._$);
                                break;
                            case 28:
                                this.$ = new a.IntegerNode(s[o], this._$);
                                break;
                            case 29:
                                this.$ = new a.BooleanNode(s[o], this._$);
                                break;
                            case 30:
                                this.$ = s[o];
                                break;
                            case 31:
                                s[o - 1].isHelper = !0, this.$ = s[o - 1];
                                break;
                            case 32:
                                this.$ = new a.HashNode(s[o], this._$);
                                break;
                            case 33:
                                this.$ = [s[o - 2], s[o]];
                                break;
                            case 34:
                                this.$ = new a.PartialNameNode(s[o], this._$);
                                break;
                            case 35:
                                this.$ = new a.PartialNameNode(new a.StringNode(s[o], this._$), this._$);
                                break;
                            case 36:
                                this.$ = new a.PartialNameNode(new a.IntegerNode(s[o], this._$));
                                break;
                            case 37:
                                this.$ = new a.DataNode(s[o], this._$);
                                break;
                            case 38:
                                this.$ = new a.IdNode(s[o], this._$);
                                break;
                            case 39:
                                s[o - 2].push({part: s[o], separator: s[o - 1]}), this.$ = s[o - 2];
                                break;
                            case 40:
                                this.$ = [{part: s[o]}];
                                break;
                            case 43:
                                this.$ = [];
                                break;
                            case 44:
                                s[o - 1].push(s[o]);
                                break;
                            case 47:
                                this.$ = [s[o]];
                                break;
                            case 48:
                                s[o - 1].push(s[o])
                        }
                    },
                    table: [{
                        3: 1,
                        4: 2,
                        5: [1, 3],
                        8: 4,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 11],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {1: [3]}, {
                        5: [1, 16],
                        8: 17,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 11],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {1: [2, 2]}, {
                        5: [2, 9],
                        14: [2, 9],
                        15: [2, 9],
                        16: [2, 9],
                        19: [2, 9],
                        20: [2, 9],
                        22: [2, 9],
                        23: [2, 9],
                        25: [2, 9]
                    }, {
                        4: 20,
                        6: 18,
                        7: 19,
                        8: 4,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 21],
                        20: [2, 8],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {
                        4: 20,
                        6: 22,
                        7: 19,
                        8: 4,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 21],
                        20: [2, 8],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {
                        5: [2, 13],
                        14: [2, 13],
                        15: [2, 13],
                        16: [2, 13],
                        19: [2, 13],
                        20: [2, 13],
                        22: [2, 13],
                        23: [2, 13],
                        25: [2, 13]
                    }, {
                        5: [2, 14],
                        14: [2, 14],
                        15: [2, 14],
                        16: [2, 14],
                        19: [2, 14],
                        20: [2, 14],
                        22: [2, 14],
                        23: [2, 14],
                        25: [2, 14]
                    }, {
                        5: [2, 15],
                        14: [2, 15],
                        15: [2, 15],
                        16: [2, 15],
                        19: [2, 15],
                        20: [2, 15],
                        22: [2, 15],
                        23: [2, 15],
                        25: [2, 15]
                    }, {
                        5: [2, 16],
                        14: [2, 16],
                        15: [2, 16],
                        16: [2, 16],
                        19: [2, 16],
                        20: [2, 16],
                        22: [2, 16],
                        23: [2, 16],
                        25: [2, 16]
                    }, {17: 23, 21: 24, 30: 25, 40: [1, 28], 42: [1, 27], 43: 26}, {
                        17: 29,
                        21: 24,
                        30: 25,
                        40: [1, 28],
                        42: [1, 27],
                        43: 26
                    }, {17: 30, 21: 24, 30: 25, 40: [1, 28], 42: [1, 27], 43: 26}, {
                        17: 31,
                        21: 24,
                        30: 25,
                        40: [1, 28],
                        42: [1, 27],
                        43: 26
                    }, {21: 33, 26: 32, 32: [1, 34], 33: [1, 35], 40: [1, 28], 43: 26}, {1: [2, 1]}, {
                        5: [2, 10],
                        14: [2, 10],
                        15: [2, 10],
                        16: [2, 10],
                        19: [2, 10],
                        20: [2, 10],
                        22: [2, 10],
                        23: [2, 10],
                        25: [2, 10]
                    }, {10: 36, 20: [1, 37]}, {
                        4: 38,
                        8: 4,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 11],
                        20: [2, 7],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {
                        7: 39,
                        8: 17,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 21],
                        20: [2, 6],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {17: 23, 18: [1, 40], 21: 24, 30: 25, 40: [1, 28], 42: [1, 27], 43: 26}, {
                        10: 41,
                        20: [1, 37]
                    }, {18: [1, 42]}, {
                        18: [2, 43],
                        24: [2, 43],
                        28: 43,
                        32: [2, 43],
                        33: [2, 43],
                        34: [2, 43],
                        35: [2, 43],
                        36: [2, 43],
                        40: [2, 43],
                        42: [2, 43]
                    }, {18: [2, 25], 24: [2, 25], 36: [2, 25]}, {
                        18: [2, 38],
                        24: [2, 38],
                        32: [2, 38],
                        33: [2, 38],
                        34: [2, 38],
                        35: [2, 38],
                        36: [2, 38],
                        40: [2, 38],
                        42: [2, 38],
                        44: [1, 44]
                    }, {21: 45, 40: [1, 28], 43: 26}, {
                        18: [2, 40],
                        24: [2, 40],
                        32: [2, 40],
                        33: [2, 40],
                        34: [2, 40],
                        35: [2, 40],
                        36: [2, 40],
                        40: [2, 40],
                        42: [2, 40],
                        44: [2, 40]
                    }, {18: [1, 46]}, {18: [1, 47]}, {24: [1, 48]}, {
                        18: [2, 41],
                        21: 50,
                        27: 49,
                        40: [1, 28],
                        43: 26
                    }, {18: [2, 34], 40: [2, 34]}, {18: [2, 35], 40: [2, 35]}, {18: [2, 36], 40: [2, 36]}, {
                        5: [2, 11],
                        14: [2, 11],
                        15: [2, 11],
                        16: [2, 11],
                        19: [2, 11],
                        20: [2, 11],
                        22: [2, 11],
                        23: [2, 11],
                        25: [2, 11]
                    }, {21: 51, 40: [1, 28], 43: 26}, {
                        8: 17,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 11],
                        20: [2, 3],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {
                        4: 52,
                        8: 4,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 11],
                        20: [2, 5],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {
                        14: [2, 23],
                        15: [2, 23],
                        16: [2, 23],
                        19: [2, 23],
                        20: [2, 23],
                        22: [2, 23],
                        23: [2, 23],
                        25: [2, 23]
                    }, {
                        5: [2, 12],
                        14: [2, 12],
                        15: [2, 12],
                        16: [2, 12],
                        19: [2, 12],
                        20: [2, 12],
                        22: [2, 12],
                        23: [2, 12],
                        25: [2, 12]
                    }, {
                        14: [2, 18],
                        15: [2, 18],
                        16: [2, 18],
                        19: [2, 18],
                        20: [2, 18],
                        22: [2, 18],
                        23: [2, 18],
                        25: [2, 18]
                    }, {
                        18: [2, 45],
                        21: 56,
                        24: [2, 45],
                        29: 53,
                        30: 60,
                        31: 54,
                        32: [1, 57],
                        33: [1, 58],
                        34: [1, 59],
                        35: [1, 61],
                        36: [2, 45],
                        37: 55,
                        38: 62,
                        39: 63,
                        40: [1, 64],
                        42: [1, 27],
                        43: 26
                    }, {40: [1, 65]}, {
                        18: [2, 37],
                        24: [2, 37],
                        32: [2, 37],
                        33: [2, 37],
                        34: [2, 37],
                        35: [2, 37],
                        36: [2, 37],
                        40: [2, 37],
                        42: [2, 37]
                    }, {
                        14: [2, 17],
                        15: [2, 17],
                        16: [2, 17],
                        19: [2, 17],
                        20: [2, 17],
                        22: [2, 17],
                        23: [2, 17],
                        25: [2, 17]
                    }, {
                        5: [2, 20],
                        14: [2, 20],
                        15: [2, 20],
                        16: [2, 20],
                        19: [2, 20],
                        20: [2, 20],
                        22: [2, 20],
                        23: [2, 20],
                        25: [2, 20]
                    }, {
                        5: [2, 21],
                        14: [2, 21],
                        15: [2, 21],
                        16: [2, 21],
                        19: [2, 21],
                        20: [2, 21],
                        22: [2, 21],
                        23: [2, 21],
                        25: [2, 21]
                    }, {18: [1, 66]}, {18: [2, 42]}, {18: [1, 67]}, {
                        8: 17,
                        9: 5,
                        11: 6,
                        12: 7,
                        13: 8,
                        14: [1, 9],
                        15: [1, 10],
                        16: [1, 12],
                        19: [1, 11],
                        20: [2, 4],
                        22: [1, 13],
                        23: [1, 14],
                        25: [1, 15]
                    }, {18: [2, 24], 24: [2, 24], 36: [2, 24]}, {
                        18: [2, 44],
                        24: [2, 44],
                        32: [2, 44],
                        33: [2, 44],
                        34: [2, 44],
                        35: [2, 44],
                        36: [2, 44],
                        40: [2, 44],
                        42: [2, 44]
                    }, {18: [2, 46], 24: [2, 46], 36: [2, 46]}, {
                        18: [2, 26],
                        24: [2, 26],
                        32: [2, 26],
                        33: [2, 26],
                        34: [2, 26],
                        35: [2, 26],
                        36: [2, 26],
                        40: [2, 26],
                        42: [2, 26]
                    }, {
                        18: [2, 27],
                        24: [2, 27],
                        32: [2, 27],
                        33: [2, 27],
                        34: [2, 27],
                        35: [2, 27],
                        36: [2, 27],
                        40: [2, 27],
                        42: [2, 27]
                    }, {
                        18: [2, 28],
                        24: [2, 28],
                        32: [2, 28],
                        33: [2, 28],
                        34: [2, 28],
                        35: [2, 28],
                        36: [2, 28],
                        40: [2, 28],
                        42: [2, 28]
                    }, {
                        18: [2, 29],
                        24: [2, 29],
                        32: [2, 29],
                        33: [2, 29],
                        34: [2, 29],
                        35: [2, 29],
                        36: [2, 29],
                        40: [2, 29],
                        42: [2, 29]
                    }, {
                        18: [2, 30],
                        24: [2, 30],
                        32: [2, 30],
                        33: [2, 30],
                        34: [2, 30],
                        35: [2, 30],
                        36: [2, 30],
                        40: [2, 30],
                        42: [2, 30]
                    }, {17: 68, 21: 24, 30: 25, 40: [1, 28], 42: [1, 27], 43: 26}, {
                        18: [2, 32],
                        24: [2, 32],
                        36: [2, 32],
                        39: 69,
                        40: [1, 70]
                    }, {18: [2, 47], 24: [2, 47], 36: [2, 47], 40: [2, 47]}, {
                        18: [2, 40],
                        24: [2, 40],
                        32: [2, 40],
                        33: [2, 40],
                        34: [2, 40],
                        35: [2, 40],
                        36: [2, 40],
                        40: [2, 40],
                        41: [1, 71],
                        42: [2, 40],
                        44: [2, 40]
                    }, {
                        18: [2, 39],
                        24: [2, 39],
                        32: [2, 39],
                        33: [2, 39],
                        34: [2, 39],
                        35: [2, 39],
                        36: [2, 39],
                        40: [2, 39],
                        42: [2, 39],
                        44: [2, 39]
                    }, {
                        5: [2, 22],
                        14: [2, 22],
                        15: [2, 22],
                        16: [2, 22],
                        19: [2, 22],
                        20: [2, 22],
                        22: [2, 22],
                        23: [2, 22],
                        25: [2, 22]
                    }, {
                        5: [2, 19],
                        14: [2, 19],
                        15: [2, 19],
                        16: [2, 19],
                        19: [2, 19],
                        20: [2, 19],
                        22: [2, 19],
                        23: [2, 19],
                        25: [2, 19]
                    }, {36: [1, 72]}, {18: [2, 48], 24: [2, 48], 36: [2, 48], 40: [2, 48]}, {41: [1, 71]}, {
                        21: 56,
                        30: 60,
                        31: 73,
                        32: [1, 57],
                        33: [1, 58],
                        34: [1, 59],
                        35: [1, 61],
                        40: [1, 28],
                        42: [1, 27],
                        43: 26
                    }, {
                        18: [2, 31],
                        24: [2, 31],
                        32: [2, 31],
                        33: [2, 31],
                        34: [2, 31],
                        35: [2, 31],
                        36: [2, 31],
                        40: [2, 31],
                        42: [2, 31]
                    }, {18: [2, 33], 24: [2, 33], 36: [2, 33], 40: [2, 33]}],
                    defaultActions: {3: [2, 2], 16: [2, 1], 50: [2, 42]},
                    parseError: function (e) {
                        throw new Error(e)
                    },
                    parse: function (e) {
                        function t() {
                            var e;
                            return e = n.lexer.lex() || 1, "number" != typeof e && (e = n.symbols_[e] || e), e
                        }

                        var n = this, i = [0], a = [null], r = [], s = this.table, o = "", l = 0, c = 0, d = 0;
                        this.lexer.setInput(e), this.lexer.yy = this.yy, this.yy.lexer = this.lexer, this.yy.parser = this, "undefined" == typeof this.lexer.yylloc && (this.lexer.yylloc = {});
                        var u = this.lexer.yylloc;
                        r.push(u);
                        var h = this.lexer.options && this.lexer.options.ranges;
                        "function" == typeof this.yy.parseError && (this.parseError = this.yy.parseError);
                        for (var f, p, m, g, v, _, b, y, w, S = {}; ;) {
                            if (m = i[i.length - 1], this.defaultActions[m] ? g = this.defaultActions[m] : ((null === f || "undefined" == typeof f) && (f = t()), g = s[m] && s[m][f]), "undefined" == typeof g || !g.length || !g[0]) {
                                var C = "";
                                if (!d) {
                                    w = [];
                                    for (_ in s[m]) this.terminals_[_] && _ > 2 && w.push("'" + this.terminals_[_] + "'");
                                    C = this.lexer.showPosition ? "Parse error on line " + (l + 1) + ":\n" + this.lexer.showPosition() + "\nExpecting " + w.join(", ") + ", got '" + (this.terminals_[f] || f) + "'" : "Parse error on line " + (l + 1) + ": Unexpected " + (1 == f ? "end of input" : "'" + (this.terminals_[f] || f) + "'"), this.parseError(C, {
                                        text: this.lexer.match,
                                        token: this.terminals_[f] || f,
                                        line: this.lexer.yylineno,
                                        loc: u,
                                        expected: w
                                    })
                                }
                            }
                            if (g[0] instanceof Array && g.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + m + ", token: " + f);
                            switch (g[0]) {
                                case 1:
                                    i.push(f), a.push(this.lexer.yytext), r.push(this.lexer.yylloc), i.push(g[1]), f = null, p ? (f = p, p = null) : (c = this.lexer.yyleng, o = this.lexer.yytext, l = this.lexer.yylineno, u = this.lexer.yylloc, d > 0 && d--);
                                    break;
                                case 2:
                                    if (b = this.productions_[g[1]][1], S.$ = a[a.length - b], S._$ = {
                                        first_line: r[r.length - (b || 1)].first_line,
                                        last_line: r[r.length - 1].last_line,
                                        first_column: r[r.length - (b || 1)].first_column,
                                        last_column: r[r.length - 1].last_column
                                    }, h && (S._$.range = [r[r.length - (b || 1)].range[0], r[r.length - 1].range[1]]), v = this.performAction.call(S, o, c, l, this.yy, g[1], a, r), "undefined" != typeof v) return v;
                                    b && (i = i.slice(0, -1 * b * 2), a = a.slice(0, -1 * b), r = r.slice(0, -1 * b)), i.push(this.productions_[g[1]][0]), a.push(S.$), r.push(S._$), y = s[i[i.length - 2]][i[i.length - 1]], i.push(y);
                                    break;
                                case 3:
                                    return !0
                            }
                        }
                        return !0
                    }
                }, i = function () {
                    var e = {
                        EOF: 1, parseError: function (e, t) {
                            if (!this.yy.parser) throw new Error(e);
                            this.yy.parser.parseError(e, t)
                        }, setInput: function (e) {
                            return this._input = e, this._more = this._less = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = "", this.conditionStack = ["INITIAL"], this.yylloc = {
                                first_line: 1,
                                first_column: 0,
                                last_line: 1,
                                last_column: 0
                            }, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this
                        }, input: function () {
                            var e = this._input[0];
                            this.yytext += e, this.yyleng++, this.offset++, this.match += e, this.matched += e;
                            var t = e.match(/(?:\r\n?|\n).*/g);
                            return t ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), e
                        }, unput: function (e) {
                            var t = e.length, n = e.split(/(?:\r\n?|\n)/g);
                            this._input = e + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - t - 1), this.offset -= t;
                            var i = this.match.split(/(?:\r\n?|\n)/g);
                            this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), n.length - 1 && (this.yylineno -= n.length - 1);
                            var a = this.yylloc.range;
                            return this.yylloc = {
                                first_line: this.yylloc.first_line,
                                last_line: this.yylineno + 1,
                                first_column: this.yylloc.first_column,
                                last_column: n ? (n.length === i.length ? this.yylloc.first_column : 0) + i[i.length - n.length].length - n[0].length : this.yylloc.first_column - t
                            }, this.options.ranges && (this.yylloc.range = [a[0], a[0] + this.yyleng - t]), this
                        }, more: function () {
                            return this._more = !0, this
                        }, less: function (e) {
                            this.unput(this.match.slice(e))
                        }, pastInput: function () {
                            var e = this.matched.substr(0, this.matched.length - this.match.length);
                            return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "")
                        }, upcomingInput: function () {
                            var e = this.match;
                            return e.length < 20 && (e += this._input.substr(0, 20 - e.length)), (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "")
                        }, showPosition: function () {
                            var e = this.pastInput(), t = new Array(e.length + 1).join("-");
                            return e + this.upcomingInput() + "\n" + t + "^"
                        }, next: function () {
                            if (this.done) return this.EOF;
                            this._input || (this.done = !0);
                            var e, t, n, i, a;
                            this._more || (this.yytext = "", this.match = "");
                            for (var r = this._currentRules(), s = 0; s < r.length && (n = this._input.match(this.rules[r[s]]), !n || t && !(n[0].length > t[0].length) || (t = n, i = s, this.options.flex)); s++) ;
                            return t ? (a = t[0].match(/(?:\r\n?|\n).*/g), a && (this.yylineno += a.length), this.yylloc = {
                                first_line: this.yylloc.last_line,
                                last_line: this.yylineno + 1,
                                first_column: this.yylloc.last_column,
                                last_column: a ? a[a.length - 1].length - a[a.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + t[0].length
                            }, this.yytext += t[0], this.match += t[0], this.matches = t, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = !1, this._input = this._input.slice(t[0].length), this.matched += t[0], e = this.performAction.call(this, this.yy, this, r[i], this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1), e ? e : void 0) : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                                text: "",
                                token: null,
                                line: this.yylineno
                            })
                        }, lex: function () {
                            var e = this.next();
                            return "undefined" != typeof e ? e : this.lex()
                        }, begin: function (e) {
                            this.conditionStack.push(e)
                        }, popState: function () {
                            return this.conditionStack.pop()
                        }, _currentRules: function () {
                            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules
                        }, topState: function () {
                            return this.conditionStack[this.conditionStack.length - 2]
                        }, pushState: function (e) {
                            this.begin(e)
                        }
                    };
                    return e.options = {}, e.performAction = function (e, t, n, i) {
                        function a(e, n) {
                            return t.yytext = t.yytext.substr(e, t.yyleng - n)
                        }

                        switch (n) {
                            case 0:
                                if ("\\\\" === t.yytext.slice(-2) ? (a(0, 1), this.begin("mu")) : "\\" === t.yytext.slice(-1) ? (a(0, 1), this.begin("emu")) : this.begin("mu"), t.yytext) return 14;
                                break;
                            case 1:
                                return 14;
                            case 2:
                                return this.popState(), 14;
                            case 3:
                                return a(0, 4), this.popState(), 15;
                            case 4:
                                return 35;
                            case 5:
                                return 36;
                            case 6:
                                return 25;
                            case 7:
                                return 16;
                            case 8:
                                return 20;
                            case 9:
                                return 19;
                            case 10:
                                return 19;
                            case 11:
                                return 23;
                            case 12:
                                return 22;
                            case 13:
                                this.popState(), this.begin("com");
                                break;
                            case 14:
                                return a(3, 5), this.popState(), 15;
                            case 15:
                                return 22;
                            case 16:
                                return 41;
                            case 17:
                                return 40;
                            case 18:
                                return 40;
                            case 19:
                                return 44;
                            case 20:
                                break;
                            case 21:
                                return this.popState(), 24;
                            case 22:
                                return this.popState(), 18;
                            case 23:
                                return t.yytext = a(1, 2).replace(/\\"/g, '"'), 32;
                            case 24:
                                return t.yytext = a(1, 2).replace(/\\'/g, "'"), 32;
                            case 25:
                                return 42;
                            case 26:
                                return 34;
                            case 27:
                                return 34;
                            case 28:
                                return 33;
                            case 29:
                                return 40;
                            case 30:
                                return t.yytext = a(1, 2), 40;
                            case 31:
                                return "INVALID";
                            case 32:
                                return 5
                        }
                    }, e.rules = [/^(?:[^\x00]*?(?=(\{\{)))/, /^(?:[^\x00]+)/, /^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/, /^(?:[\s\S]*?--\}\})/, /^(?:\()/, /^(?:\))/, /^(?:\{\{(~)?>)/, /^(?:\{\{(~)?#)/, /^(?:\{\{(~)?\/)/, /^(?:\{\{(~)?\^)/, /^(?:\{\{(~)?\s*else\b)/, /^(?:\{\{(~)?\{)/, /^(?:\{\{(~)?&)/, /^(?:\{\{!--)/, /^(?:\{\{![\s\S]*?\}\})/, /^(?:\{\{(~)?)/, /^(?:=)/, /^(?:\.\.)/, /^(?:\.(?=([=~}\s\/.)])))/, /^(?:[\/.])/, /^(?:\s+)/, /^(?:\}(~)?\}\})/, /^(?:(~)?\}\})/, /^(?:"(\\["]|[^"])*")/, /^(?:'(\\[']|[^'])*')/, /^(?:@)/, /^(?:true(?=([~}\s)])))/, /^(?:false(?=([~}\s)])))/, /^(?:-?[0-9]+(?=([~}\s)])))/, /^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/, /^(?:\[[^\]]*\])/, /^(?:.)/, /^(?:$)/], e.conditions = {
                        mu: {
                            rules: [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32],
                            inclusive: !1
                        },
                        emu: {rules: [2], inclusive: !1},
                        com: {rules: [3], inclusive: !1},
                        INITIAL: {rules: [0, 1, 32], inclusive: !0}
                    }, e
                }();
                return n.lexer = i, t.prototype = n, n.Parser = t, new t
            }();
            return e = t
        }(), l = function (e, t) {
            function n(e) {
                return e.constructor === r.ProgramNode ? e : (a.yy = r, a.parse(e))
            }

            var i = {}, a = e, r = t;
            return i.parser = a, i.parse = n, i
        }(o, s), c = function (e) {
            function t() {
            }

            function n(e, t, n) {
                if (null == e || "string" != typeof e && e.constructor !== n.AST.ProgramNode) throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed " + e);
                t = t || {}, "data" in t || (t.data = !0);
                var i = n.parse(e), a = (new n.Compiler).compile(i, t);
                return (new n.JavaScriptCompiler).compile(a, t)
            }

            function i(e, t, n) {
                function i() {
                    var i = n.parse(e), a = (new n.Compiler).compile(i, t),
                        r = (new n.JavaScriptCompiler).compile(a, t, void 0, !0);
                    return n.template(r)
                }

                if (null == e || "string" != typeof e && e.constructor !== n.AST.ProgramNode) throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed " + e);
                t = t || {}, "data" in t || (t.data = !0);
                var a;
                return function (e, t) {
                    return a || (a = i()), a.call(this, e, t)
                }
            }

            var a = {}, r = e;
            return a.Compiler = t, t.prototype = {
                compiler: t, disassemble: function () {
                    for (var e, t, n, i = this.opcodes, a = [], r = 0, s = i.length; s > r; r++) if (e = i[r], "DECLARE" === e.opcode) a.push("DECLARE " + e.name + "=" + e.value); else {
                        t = [];
                        for (var o = 0; o < e.args.length; o++) n = e.args[o], "string" == typeof n && (n = '"' + n.replace("\n", "\\n") + '"'), t.push(n);
                        a.push(e.opcode + " " + t.join(" "))
                    }
                    return a.join("\n")
                }, equals: function (e) {
                    var t = this.opcodes.length;
                    if (e.opcodes.length !== t) return !1;
                    for (var n = 0; t > n; n++) {
                        var i = this.opcodes[n], a = e.opcodes[n];
                        if (i.opcode !== a.opcode || i.args.length !== a.args.length) return !1;
                        for (var r = 0; r < i.args.length; r++) if (i.args[r] !== a.args[r]) return !1
                    }
                    if (t = this.children.length, e.children.length !== t) return !1;
                    for (n = 0; t > n; n++) if (!this.children[n].equals(e.children[n])) return !1;
                    return !0
                }, guid: 0, compile: function (e, t) {
                    this.opcodes = [], this.children = [], this.depths = {list: []}, this.options = t;
                    var n = this.options.knownHelpers;
                    if (this.options.knownHelpers = {
                        helperMissing: !0,
                        blockHelperMissing: !0,
                        each: !0,
                        "if": !0,
                        unless: !0,
                        "with": !0,
                        log: !0
                    }, n) for (var i in n) this.options.knownHelpers[i] = n[i];
                    return this.accept(e)
                }, accept: function (e) {
                    var t, n = e.strip || {};
                    return n.left && this.opcode("strip"), t = this[e.type](e), n.right && this.opcode("strip"), t
                }, program: function (e) {
                    for (var t = e.statements, n = 0, i = t.length; i > n; n++) this.accept(t[n]);
                    return this.isSimple = 1 === i, this.depths.list = this.depths.list.sort(function (e, t) {
                        return e - t
                    }), this
                }, compileProgram: function (e) {
                    var t, n = (new this.compiler).compile(e, this.options), i = this.guid++;
                    this.usePartial = this.usePartial || n.usePartial, this.children[i] = n;
                    for (var a = 0, r = n.depths.list.length; r > a; a++) t = n.depths.list[a], 2 > t || this.addDepth(t - 1);
                    return i
                }, block: function (e) {
                    var t = e.mustache, n = e.program, i = e.inverse;
                    n && (n = this.compileProgram(n)), i && (i = this.compileProgram(i));
                    var a = t.sexpr, r = this.classifySexpr(a);
                    "helper" === r ? this.helperSexpr(a, n, i) : "simple" === r ? (this.simpleSexpr(a), this.opcode("pushProgram", n), this.opcode("pushProgram", i), this.opcode("emptyHash"), this.opcode("blockValue")) : (this.ambiguousSexpr(a, n, i), this.opcode("pushProgram", n), this.opcode("pushProgram", i), this.opcode("emptyHash"), this.opcode("ambiguousBlockValue")), this.opcode("append")
                }, hash: function (e) {
                    var t, n, i = e.pairs;
                    this.opcode("pushHash");
                    for (var a = 0, r = i.length; r > a; a++) t = i[a], n = t[1], this.options.stringParams ? (n.depth && this.addDepth(n.depth), this.opcode("getContext", n.depth || 0), this.opcode("pushStringParam", n.stringModeValue, n.type), "sexpr" === n.type && this.sexpr(n)) : this.accept(n), this.opcode("assignToHash", t[0]);
                    this.opcode("popHash")
                }, partial: function (e) {
                    var t = e.partialName;
                    this.usePartial = !0, e.context ? this.ID(e.context) : this.opcode("push", "depth0"), this.opcode("invokePartial", t.name), this.opcode("append")
                }, content: function (e) {
                    this.opcode("appendContent", e.string)
                }, mustache: function (e) {
                    this.sexpr(e.sexpr), this.opcode(e.escaped && !this.options.noEscape ? "appendEscaped" : "append")
                }, ambiguousSexpr: function (e, t, n) {
                    var i = e.id, a = i.parts[0], r = null != t || null != n;
                    this.opcode("getContext", i.depth), this.opcode("pushProgram", t), this.opcode("pushProgram", n), this.opcode("invokeAmbiguous", a, r)
                }, simpleSexpr: function (e) {
                    var t = e.id;
                    "DATA" === t.type ? this.DATA(t) : t.parts.length ? this.ID(t) : (this.addDepth(t.depth), this.opcode("getContext", t.depth), this.opcode("pushContext")), this.opcode("resolvePossibleLambda")
                }, helperSexpr: function (e, t, n) {
                    var i = this.setupFullMustacheParams(e, t, n), a = e.id.parts[0];
                    if (this.options.knownHelpers[a]) this.opcode("invokeKnownHelper", i.length, a); else {
                        if (this.options.knownHelpersOnly) throw new r("You specified knownHelpersOnly, but used the unknown helper " + a, e);
                        this.opcode("invokeHelper", i.length, a, e.isRoot)
                    }
                }, sexpr: function (e) {
                    var t = this.classifySexpr(e);
                    "simple" === t ? this.simpleSexpr(e) : "helper" === t ? this.helperSexpr(e) : this.ambiguousSexpr(e)
                }, ID: function (e) {
                    this.addDepth(e.depth), this.opcode("getContext", e.depth);
                    var t = e.parts[0];
                    t ? this.opcode("lookupOnContext", e.parts[0]) : this.opcode("pushContext");
                    for (var n = 1, i = e.parts.length; i > n; n++) this.opcode("lookup", e.parts[n])
                }, DATA: function (e) {
                    if (this.options.data = !0, e.id.isScoped || e.id.depth) throw new r("Scoped data references are not supported: " + e.original, e);
                    this.opcode("lookupData");
                    for (var t = e.id.parts, n = 0, i = t.length; i > n; n++) this.opcode("lookup", t[n])
                }, STRING: function (e) {
                    this.opcode("pushString", e.string)
                }, INTEGER: function (e) {
                    this.opcode("pushLiteral", e.integer)
                }, BOOLEAN: function (e) {
                    this.opcode("pushLiteral", e.bool)
                }, comment: function () {
                }, opcode: function (e) {
                    this.opcodes.push({opcode: e, args: [].slice.call(arguments, 1)})
                }, declare: function (e, t) {
                    this.opcodes.push({opcode: "DECLARE", name: e, value: t})
                }, addDepth: function (e) {
                    0 !== e && (this.depths[e] || (this.depths[e] = !0, this.depths.list.push(e)))
                }, classifySexpr: function (e) {
                    var t = e.isHelper, n = e.eligibleHelper, i = this.options;
                    if (n && !t) {
                        var a = e.id.parts[0];
                        i.knownHelpers[a] ? t = !0 : i.knownHelpersOnly && (n = !1)
                    }
                    return t ? "helper" : n ? "ambiguous" : "simple"
                }, pushParams: function (e) {
                    for (var t, n = e.length; n--;) t = e[n], this.options.stringParams ? (t.depth && this.addDepth(t.depth), this.opcode("getContext", t.depth || 0), this.opcode("pushStringParam", t.stringModeValue, t.type), "sexpr" === t.type && this.sexpr(t)) : this[t.type](t)
                }, setupFullMustacheParams: function (e, t, n) {
                    var i = e.params;
                    return this.pushParams(i), this.opcode("pushProgram", t), this.opcode("pushProgram", n), e.hash ? this.hash(e.hash) : this.opcode("emptyHash"), i
                }
            }, a.precompile = n, a.compile = i, a
        }(n), d = function (e, t) {
            function n(e) {
                this.value = e
            }

            function i() {
            }

            var a, r = e.COMPILER_REVISION, s = e.REVISION_CHANGES, o = e.log, l = t;
            i.prototype = {
                nameLookup: function (e, t) {
                    var n, a;
                    return 0 === e.indexOf("depth") && (n = !0), a = /^[0-9]+$/.test(t) ? e + "[" + t + "]" : i.isValidJavaScriptVariableName(t) ? e + "." + t : e + "['" + t + "']", n ? "(" + e + " && " + a + ")" : a
                }, compilerInfo: function () {
                    var e = r, t = s[e];
                    return "this.compilerInfo = [" + e + ",'" + t + "'];\n"
                }, appendToBuffer: function (e) {
                    return this.environment.isSimple ? "return " + e + ";" : {
                        appendToBuffer: !0,
                        content: e,
                        toString: function () {
                            return "buffer += " + e + ";"
                        }
                    }
                }, initializeBuffer: function () {
                    return this.quotedString("")
                }, namespace: "Handlebars", compile: function (e, t, n, i) {
                    this.environment = e, this.options = t || {}, o("debug", this.environment.disassemble() + "\n\n"), this.name = this.environment.name, this.isChild = !!n, this.context = n || {
                        programs: [],
                        environments: [],
                        aliases: {}
                    }, this.preamble(), this.stackSlot = 0, this.stackVars = [], this.registers = {list: []}, this.hashes = [], this.compileStack = [], this.inlineStack = [], this.compileChildren(e, t);
                    var a, r = e.opcodes;
                    this.i = 0;
                    for (var s = r.length; this.i < s; this.i++) a = r[this.i], "DECLARE" === a.opcode ? this[a.name] = a.value : this[a.opcode].apply(this, a.args), a.opcode !== this.stripNext && (this.stripNext = !1);
                    if (this.pushSource(""), this.stackSlot || this.inlineStack.length || this.compileStack.length) throw new l("Compile completed with content left on stack");
                    return this.createFunctionContext(i)
                }, preamble: function () {
                    var e = [];
                    if (this.isChild) e.push(""); else {
                        var t = this.namespace, n = "helpers = this.merge(helpers, " + t + ".helpers);";
                        this.environment.usePartial && (n = n + " partials = this.merge(partials, " + t + ".partials);"), this.options.data && (n += " data = data || {};"), e.push(n)
                    }
                    e.push(this.environment.isSimple ? "" : ", buffer = " + this.initializeBuffer()), this.lastContext = 0, this.source = e
                }, createFunctionContext: function (e) {
                    var t = this.stackVars.concat(this.registers.list);
                    if (t.length > 0 && (this.source[1] = this.source[1] + ", " + t.join(", ")), !this.isChild) for (var n in this.context.aliases) this.context.aliases.hasOwnProperty(n) && (this.source[1] = this.source[1] + ", " + n + "=" + this.context.aliases[n]);
                    this.source[1] && (this.source[1] = "var " + this.source[1].substring(2) + ";"), this.isChild || (this.source[1] += "\n" + this.context.programs.join("\n") + "\n"), this.environment.isSimple || this.pushSource("return buffer;");
                    for (var i = this.isChild ? ["depth0", "data"] : ["Handlebars", "depth0", "helpers", "partials", "data"], a = 0, r = this.environment.depths.list.length; r > a; a++) i.push("depth" + this.environment.depths.list[a]);
                    var s = this.mergeSource();
                    if (this.isChild || (s = this.compilerInfo() + s), e) return i.push(s), Function.apply(this, i);
                    var l = "function " + (this.name || "") + "(" + i.join(",") + ") {\n  " + s + "}";
                    return o("debug", l + "\n\n"), l
                }, mergeSource: function () {
                    for (var e, t = "", n = 0, i = this.source.length; i > n; n++) {
                        var a = this.source[n];
                        a.appendToBuffer ? e = e ? e + "\n    + " + a.content : a.content : (e && (t += "buffer += " + e + ";\n  ", e = void 0), t += a + "\n  ")
                    }
                    return t
                }, blockValue: function () {
                    this.context.aliases.blockHelperMissing = "helpers.blockHelperMissing";
                    var e = ["depth0"];
                    this.setupParams(0, e), this.replaceStack(function (t) {
                        return e.splice(1, 0, t), "blockHelperMissing.call(" + e.join(", ") + ")"
                    })
                }, ambiguousBlockValue: function () {
                    this.context.aliases.blockHelperMissing = "helpers.blockHelperMissing";
                    var e = ["depth0"];
                    this.setupParams(0, e);
                    var t = this.topStack();
                    e.splice(1, 0, t), this.pushSource("if (!" + this.lastHelper + ") { " + t + " = blockHelperMissing.call(" + e.join(", ") + "); }")
                }, appendContent: function (e) {
                    this.pendingContent && (e = this.pendingContent + e), this.stripNext && (e = e.replace(/^\s+/, "")), this.pendingContent = e
                }, strip: function () {
                    this.pendingContent && (this.pendingContent = this.pendingContent.replace(/\s+$/, "")), this.stripNext = "strip"
                }, append: function () {
                    this.flushInline();
                    var e = this.popStack();
                    this.pushSource("if(" + e + " || " + e + " === 0) { " + this.appendToBuffer(e) + " }"), this.environment.isSimple && this.pushSource("else { " + this.appendToBuffer("''") + " }")
                }, appendEscaped: function () {
                    this.context.aliases.escapeExpression = "this.escapeExpression", this.pushSource(this.appendToBuffer("escapeExpression(" + this.popStack() + ")"))
                }, getContext: function (e) {
                    this.lastContext !== e && (this.lastContext = e)
                }, lookupOnContext: function (e) {
                    this.push(this.nameLookup("depth" + this.lastContext, e, "context"))
                }, pushContext: function () {
                    this.pushStackLiteral("depth" + this.lastContext)
                }, resolvePossibleLambda: function () {
                    this.context.aliases.functionType = '"function"', this.replaceStack(function (e) {
                        return "typeof " + e + " === functionType ? " + e + ".apply(depth0) : " + e
                    })
                }, lookup: function (e) {
                    this.replaceStack(function (t) {
                        return t + " == null || " + t + " === false ? " + t + " : " + this.nameLookup(t, e, "context")
                    })
                }, lookupData: function () {
                    this.pushStackLiteral("data")
                }, pushStringParam: function (e, t) {
                    this.pushStackLiteral("depth" + this.lastContext), this.pushString(t), "sexpr" !== t && ("string" == typeof e ? this.pushString(e) : this.pushStackLiteral(e))
                }, emptyHash: function () {
                    this.pushStackLiteral("{}"), this.options.stringParams && (this.push("{}"), this.push("{}"))
                }, pushHash: function () {
                    this.hash && this.hashes.push(this.hash), this.hash = {values: [], types: [], contexts: []}
                }, popHash: function () {
                    var e = this.hash;
                    this.hash = this.hashes.pop(), this.options.stringParams && (this.push("{" + e.contexts.join(",") + "}"), this.push("{" + e.types.join(",") + "}")), this.push("{\n    " + e.values.join(",\n    ") + "\n  }")
                }, pushString: function (e) {
                    this.pushStackLiteral(this.quotedString(e))
                }, push: function (e) {
                    return this.inlineStack.push(e), e
                }, pushLiteral: function (e) {
                    this.pushStackLiteral(e)
                }, pushProgram: function (e) {
                    this.pushStackLiteral(null != e ? this.programExpression(e) : null)
                }, invokeHelper: function (e, t, n) {
                    this.context.aliases.helperMissing = "helpers.helperMissing", this.useRegister("helper");
                    var i = this.lastHelper = this.setupHelper(e, t, !0),
                        a = this.nameLookup("depth" + this.lastContext, t, "context"),
                        r = "helper = " + i.name + " || " + a;
                    i.paramsInit && (r += "," + i.paramsInit), this.push("(" + r + ",helper ? helper.call(" + i.callParams + ") : helperMissing.call(" + i.helperMissingParams + "))"), n || this.flushInline()
                }, invokeKnownHelper: function (e, t) {
                    var n = this.setupHelper(e, t);
                    this.push(n.name + ".call(" + n.callParams + ")")
                }, invokeAmbiguous: function (e, t) {
                    this.context.aliases.functionType = '"function"', this.useRegister("helper"), this.emptyHash();
                    var n = this.setupHelper(0, e, t), i = this.lastHelper = this.nameLookup("helpers", e, "helper"),
                        a = this.nameLookup("depth" + this.lastContext, e, "context"), r = this.nextStack();
                    n.paramsInit && this.pushSource(n.paramsInit), this.pushSource("if (helper = " + i + ") { " + r + " = helper.call(" + n.callParams + "); }"), this.pushSource("else { helper = " + a + "; " + r + " = typeof helper === functionType ? helper.call(" + n.callParams + ") : helper; }")
                }, invokePartial: function (e) {
                    var t = [this.nameLookup("partials", e, "partial"), "'" + e + "'", this.popStack(), "helpers", "partials"];
                    this.options.data && t.push("data"), this.context.aliases.self = "this", this.push("self.invokePartial(" + t.join(", ") + ")")
                }, assignToHash: function (e) {
                    var t, n, i = this.popStack();
                    this.options.stringParams && (n = this.popStack(), t = this.popStack());
                    var a = this.hash;
                    t && a.contexts.push("'" + e + "': " + t), n && a.types.push("'" + e + "': " + n), a.values.push("'" + e + "': (" + i + ")")
                }, compiler: i, compileChildren: function (e, t) {
                    for (var n, i, a = e.children, r = 0, s = a.length; s > r; r++) {
                        n = a[r], i = new this.compiler;
                        var o = this.matchExistingProgram(n);
                        null == o ? (this.context.programs.push(""), o = this.context.programs.length, n.index = o, n.name = "program" + o, this.context.programs[o] = i.compile(n, t, this.context), this.context.environments[o] = n) : (n.index = o, n.name = "program" + o)
                    }
                }, matchExistingProgram: function (e) {
                    for (var t = 0, n = this.context.environments.length; n > t; t++) {
                        var i = this.context.environments[t];
                        if (i && i.equals(e)) return t
                    }
                }, programExpression: function (e) {
                    if (this.context.aliases.self = "this", null == e) return "self.noop";
                    for (var t, n = this.environment.children[e], i = n.depths.list, a = [n.index, n.name, "data"], r = 0, s = i.length; s > r; r++) t = i[r], a.push(1 === t ? "depth0" : "depth" + (t - 1));
                    return (0 === i.length ? "self.program(" : "self.programWithDepth(") + a.join(", ") + ")"
                }, register: function (e, t) {
                    this.useRegister(e), this.pushSource(e + " = " + t + ";")
                }, useRegister: function (e) {
                    this.registers[e] || (this.registers[e] = !0, this.registers.list.push(e))
                }, pushStackLiteral: function (e) {
                    return this.push(new n(e))
                }, pushSource: function (e) {
                    this.pendingContent && (this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))), this.pendingContent = void 0), e && this.source.push(e)
                }, pushStack: function (e) {
                    this.flushInline();
                    var t = this.incrStack();
                    return e && this.pushSource(t + " = " + e + ";"), this.compileStack.push(t), t
                }, replaceStack: function (e) {
                    var t, i, a, r = "", s = this.isInline();
                    if (s) {
                        var o = this.popStack(!0);
                        if (o instanceof n) t = o.value, a = !0; else {
                            i = !this.stackSlot;
                            var l = i ? this.incrStack() : this.topStackName();
                            r = "(" + this.push(l) + " = " + o + "),", t = this.topStack()
                        }
                    } else t = this.topStack();
                    var c = e.call(this, t);
                    return s ? (a || this.popStack(), i && this.stackSlot--, this.push("(" + r + c + ")")) : (/^stack/.test(t) || (t = this.nextStack()), this.pushSource(t + " = (" + r + c + ");")), t
                }, nextStack: function () {
                    return this.pushStack()
                }, incrStack: function () {
                    return this.stackSlot++, this.stackSlot > this.stackVars.length && this.stackVars.push("stack" + this.stackSlot), this.topStackName()
                }, topStackName: function () {
                    return "stack" + this.stackSlot
                }, flushInline: function () {
                    var e = this.inlineStack;
                    if (e.length) {
                        this.inlineStack = [];
                        for (var t = 0, i = e.length; i > t; t++) {
                            var a = e[t];
                            a instanceof n ? this.compileStack.push(a) : this.pushStack(a)
                        }
                    }
                }, isInline: function () {
                    return this.inlineStack.length
                }, popStack: function (e) {
                    var t = this.isInline(), i = (t ? this.inlineStack : this.compileStack).pop();
                    if (!e && i instanceof n) return i.value;
                    if (!t) {
                        if (!this.stackSlot) throw new l("Invalid stack pop");
                        this.stackSlot--
                    }
                    return i
                }, topStack: function (e) {
                    var t = this.isInline() ? this.inlineStack : this.compileStack, i = t[t.length - 1];
                    return !e && i instanceof n ? i.value : i
                }, quotedString: function (e) {
                    return '"' + e.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029") + '"'
                }, setupHelper: function (e, t, n) {
                    var i = [], a = this.setupParams(e, i, n), r = this.nameLookup("helpers", t, "helper");
                    return {
                        params: i,
                        paramsInit: a,
                        name: r,
                        callParams: ["depth0"].concat(i).join(", "),
                        helperMissingParams: n && ["depth0", this.quotedString(t)].concat(i).join(", ")
                    }
                }, setupOptions: function (e, t) {
                    var n, i, a, r = [], s = [], o = [];
                    r.push("hash:" + this.popStack()), this.options.stringParams && (r.push("hashTypes:" + this.popStack()), r.push("hashContexts:" + this.popStack())), i = this.popStack(), a = this.popStack(), (a || i) && (a || (this.context.aliases.self = "this", a = "self.noop"), i || (this.context.aliases.self = "this", i = "self.noop"), r.push("inverse:" + i), r.push("fn:" + a));
                    for (var l = 0; e > l; l++) n = this.popStack(), t.push(n), this.options.stringParams && (o.push(this.popStack()), s.push(this.popStack()));
                    return this.options.stringParams && (r.push("contexts:[" + s.join(",") + "]"), r.push("types:[" + o.join(",") + "]")), this.options.data && r.push("data:data"), r
                }, setupParams: function (e, t, n) {
                    var i = "{" + this.setupOptions(e, t).join(",") + "}";
                    return n ? (this.useRegister("options"), t.push("options"), "options=" + i) : (t.push(i), "")
                }
            };
            for (var c = "break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "), d = i.RESERVED_WORDS = {}, u = 0, h = c.length; h > u; u++) d[c[u]] = !0;
            return i.isValidJavaScriptVariableName = function (e) {
                return !i.RESERVED_WORDS[e] && /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e) ? !0 : !1
            }, a = i
        }(i, n), u = function (e, t, n, i, a) {
            var r, s = e, o = t, l = n.parser, c = n.parse, d = i.Compiler, u = i.compile, h = i.precompile, f = a,
                p = s.create, m = function () {
                    var e = p();
                    return e.compile = function (t, n) {
                        return u(t, n, e)
                    }, e.precompile = function (t, n) {
                        return h(t, n, e)
                    }, e.AST = o, e.Compiler = d, e.JavaScriptCompiler = f, e.Parser = l, e.parse = c, e
                };
            return s = m(), s.create = m, r = s
        }(r, s, l, c, d);
        return u
    }();
    return e
}), define("hbs", [], function () {
    return {
        get: function () {
            return Handlebars
        }, write: function (e, t, n) {
            if (t + customNameExtension in buildMap) {
                var i = buildMap[t + customNameExtension];
                n.asModule(e + "!" + t, i)
            }
        }, version: "0.8.0", load: function () {
        }
    }
}), define("hbs!common/templates/common/confirm_modal", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e) {
            var t, i, a = "";
            return a += '\r\n      <p class="title">', (i = n.Title) ? t = i.call(e, {hash: {}}) : (i = e && e.Title, t = typeof i === f ? i.call(e, {hash: {}}) : i), a += p(t) + "</p>\r\n      "
        }

        function s(e) {
            var t, i, a = "";
            return a += "\r\n      <p>\r\n      ", (i = n.SubMessage) ? t = i.call(e, {hash: {}}) : (i = e && e.SubMessage, t = typeof i === f ? i.call(e, {hash: {}}) : i), (t || 0 === t) && (a += t), a += "\r\n      </p>\r\n      "
        }

        function o(e, t) {
            var i, a = "";
            return a += '\r\n      <span class="options">\r\n          ', i = n["if"].call(e, e && e.btn2Text, {
                hash: {},
                inverse: m.noop,
                fn: m.program(6, l, t)
            }), (i || 0 === i) && (a += i), a += "\r\n          ", i = n["if"].call(e, e && e.btn1Text, {
                hash: {},
                inverse: m.noop,
                fn: m.program(8, c, t)
            }), (i || 0 === i) && (a += i), a += "\r\n      </span>\r\n      "
        }

        function l(e) {
            var t, i, a = "";
            return a += '\r\n          <a class="btn btnGrey btnRounded btnSmall no cancel" href="#">', (i = n.btn2Text) ? t = i.call(e, {hash: {}}) : (i = e && e.btn2Text, t = typeof i === f ? i.call(e, {hash: {}}) : i), a += p(t) + "</a>\r\n          "
        }

        function c(e) {
            var t, i, a = "";
            return a += '\r\n          <a class="btn btnRed btnRounded btnSmall yes confirm" data-type="', (i = n.ModalType) ? t = i.call(e, {hash: {}}) : (i = e && e.ModalType, t = typeof i === f ? i.call(e, {hash: {}}) : i), a += p(t) + '" href="#">', (i = n.btn1Text) ? t = i.call(e, {hash: {}}) : (i = e && e.btn1Text, t = typeof i === f ? i.call(e, {hash: {}}) : i), a += p(t) + "</a>\r\n          "
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var d, u, h = "", f = "function", p = this.escapeExpression, m = this;
        return h += '<div class="statusbar bold" style="bottom: 0px;">\r\n  <div class="clearfix">\r\n      ', d = n["if"].call(t, t && t.Title, {
            hash: {},
            inverse: m.noop,
            fn: m.program(1, r, a)
        }), (d || 0 === d) && (h += d), h += "\r\n      <p>\r\n      ", (u = n.Message) ? d = u.call(t, {hash: {}}) : (u = t && t.Message, d = typeof u === f ? u.call(t, {hash: {}}) : u), (d || 0 === d) && (h += d), h += "\r\n      </p>\r\n      ", d = n["if"].call(t, t && t.SubMessage, {
            hash: {},
            inverse: m.noop,
            fn: m.program(3, s, a)
        }), (d || 0 === d) && (h += d), h += "\r\n      ", d = n["if"].call(t, t && t.ShowButtons, {
            hash: {},
            inverse: m.noop,
            fn: m.program(5, o, a)
        }), (d || 0 === d) && (h += d), h += "\r\n  </div>\r\n</div>"
    });
    return n
}), define("common/modals/modal-views", ["jquery", "backbone", "underscore", "utils", "jquery.setup.environment.utils", "common/modals/modal-models", "hbs!common/templates/common/confirm_modal"], function (e, t, n, i, a, r, s) {
    var o = {};
    return o.ConfirmModalView = t.View.extend({
        el: "#confirmModal",
        events: {
            "click .cancel": "cancel",
            "click .confirm": "confirm",
            "keydown .cancel": "setBtnFocus",
            "keydown .confirm": "setBtnFocus"
        },
        render: function () {
            a.showModal();
            var e = {
                Message: this.getMessage(),
                Name: this.model.get("Name"),
                ShowButtons: !0,
                btn1Text: a.getText(this.model.get("Btn1Text"), "HomeSignin"),
                btn2Text: a.getText(this.model.get("Btn2Text"), "HomeSignin"),
                Title: this.model.get("Title"),
                SubMessage: this.getSubMessage()
            }, t = i.renderCompiledTemplate(s, e);
            this.$el.append(t);
            var n = this.$(".statusbar");
            n.show().css({top: globals.headerHeight}), n.find("div").animate({"margin-top": "150px"}, 300, "easeOutQuart");
            var r = void 0 !== this.model.get("FocusBtn") ? this.model.get("FocusBtn") : "cancel";
            return this.$el.find("." + r).focus(), this
        },
        getMessage: function () {
            var e = this.model.get("Message");
            if (void 0 == e) return e;
            var t = this.model.get("Name"), n = this.model.get("NameWrapper");
            t = n.replace(/{name}/, i.jhtmlEncode(t));
            var a = this.extractWhitelistedAnchorTags(e), r = a.anchortags;
            return e = a.msg, e = i.jhtmlEncode(i.stripHTMLNewLine(e)), e.indexOf("[") >= 0 ? (e = e.replace(/\[PlayerNickname\]/gi, t), e = e.replace(/\[CrewName\]/gi, t), e.indexOf("[anchortag]") >= 0 && (e = this.replaceAnchorTags(r, e))) : e += " " + t, e
        },
        getSubMessage: function () {
            var e = this.model.get("SubMessage");
            if (void 0 == e) return e;
            var t = this.extractWhitelistedAnchorTags(e), n = t.anchortags;
            return e = t.msg, e = i.jhtmlEncode(i.stripHTMLNewLine(e)), e.indexOf("[anchortag]") >= 0 && (e = this.replaceAnchorTags(n, e)), e
        },
        extractWhitelistedAnchorTags: function (t) {
            var n = t.match(/\<a[^>]*>([^<]+)<\/a>/g);
            if (null == n || 0 == n.length) return {anchortags: void 0, msg: t};
            for (var i = n.slice(), a = globals.redirectUrlWhitelist.split(","), r = n.length - 1; r > -1; r--) {
                var s = n[r], o = this.getAnchorTagHostName(s), l = o.replace(/^www./i, ""),
                    c = e.inArray(o, a) > -1 || e.inArray(l, a) > -1;
                c ? t = t.replace(s, "[anchortag]") : i.splice(r, 1)
            }
            return {anchortags: i, msg: t}
        },
        getAnchorTagHostName: function (t) {
            var n = e(document.createElement("div"));
            n.append(t);
            var i = n.find("a");
            return i[0].hostname
        },
        replaceAnchorTags: function (e, t) {
            return e.forEach(function (e) {
                t = t.replace("[anchortag]", e)
            }), t
        },
        confirm: function (e) {
            e.preventDefault(), this.closeConfirmationDialog(), i.pubsub.trigger(this.model.get("pubsubKey"), this.model.get("pubsubParams"))
        },
        cancel: function () {
            void 0 != this.model.get("cancelPubsubKey") && i.pubsub.trigger(this.model.get("cancelPubsubKey"), this.model.get("cancelPubsubParams")), this.closeConfirmationDialog()
        },
        closeConfirmationDialog: function () {
            a.hideModal();
            var e = this.$(".statusbar");
            e.find("div").animate({"margin-top": "-200px"}, 200, "easeInQuart", function () {
                e.css({top: "-100%"}), e.remove()
            }), this.onClose()
        },
        onClose: function () {
            this.$el.find(".statusbar").remove(), this.undelegateEvents()
        },
        setBtnFocus: function (e) {
            var t = e.keyCode || e.which;
            if (9 == t) {
                e.preventDefault();
                var n = this.$el.find(".cancel"), i = this.$el.find(".confirm");
                i.is(":focus") ? n.focus() : i.focus()
            }
        },
        initialize: function (e) {
            n.bindAll(this, "render", "setBtnFocus"), this.model = new r.ModalModel(e), this.render()
        }
    }), o
}), define("common/analyticsManager", ["jquery", "utils", "jquery.setup.environment.utils"], function (e, t, n) {
    var i = {}, a = {
        isEnabled: function () {
            var e = window.globals || {isAm: !1};
            return e.isAm
        },
        isSetup: function (e) {
            var t = window.globals || {isSetupAnalytics: !1};
            return void 0 != e && (t.isSetupAnalytics = e), t.isSetupAnalytics
        },
        setup: function (e) {
            a.isEnabled() && (!function (t, n, i, a, r, s, o) {
                t.GoogleAnalyticsObject = r, t[r] = t[r] || function () {
                    (t[r].q = t[r].q || []).push(arguments)
                }, t[r].l = 1 * new Date, s = n.createElement(i), o = n.getElementsByTagName(i)[0], s.async = 1, s.src = a, o.parentNode.insertBefore(s, o), t[r]("create", "UA-15984839-32", "auto"), t[r]("require", "displayfeatures"), t[r]("set", "forceSSL", e || !1)
            }(window, document, "script", globals.amUrl, "ga"), a.isSetup(!0), a.isEnhancedEcommerceSetup() && a.setupEnhancedEcommerce())
        },
        trackPage: function (e, t) {
            if (a.isEnabled()) {
                var n = {};
                void 0 != e && (n.page = e), void 0 != t && "function" == typeof t && (n.hitCallback = t), window.ga("send", "pageview", n), a.resetSessionControl()
            }
        },
        trackEvent: function (e, t, n, i, r, s) {
            if (a.isEnabled() && void 0 != e && void 0 != t) {
                var o;
                void 0 != r && (o = {nonInteraction: r ? 1 : 0}), void 0 != s && "function" == typeof s && (void 0 == o && (o = {}), o.hitCallback = s), window.ga("send", "event", e, t, n, i, o), a.resetSessionControl()
            }
        },
        isSessionSetup: function () {
            return i.isSessionSetup
        },
        resetSessionControl: function () {
            i.isSessionControlSet && (window.ga("set", "sessionControl"), i.isSessionControlSet = !1)
        },
        startSession: function () {
            if (a.isEnabled()) {
                a.isSessionSetup() || (a.isSetup() || a.setup(), window.ga("set", "sessionControl", "start"), i.isSessionSetup = !0, i.isSessionControlSet = !0), a.setCustomDimension(a.dimension.loginState, "false");
                var e = location.hostname.replace(/.ros.rockstargames.com/gi, "");
                e = e.replace(/.scui/gi, "") + ".scui", a.setCustomDimension(a.dimension.environment, e)
            }
        },
        endSession: function () {
            a.isEnabled() && (window.ga("set", "sessionControl", "end"), i.isSessionSetup = !1, i.isSessionControlSet = !0, window.ga("set", "userId"), a.trackEvent(a.category.profile, a.action.profile_sign_out))
        },
        setUserId: function (e) {
            a.isEnabled() && void 0 != e && e.length && (window.ga("set", "userId", e), a.setCustomDimension(a.dimension.memberId, e))
        },
        isCustomDimensionsEnabled: function () {
            var e = window.globals || {isAmCd: !1};
            return e.isAmCd
        },
        setCustomDimension: function (e, t) {
            a.isEnabled() && a.isCustomDimensionsEnabled() && window.ga("set", "dimension" + e, t)
        },
        setCustomMetric: function (e, t) {
            a.isEnabled() && a.isCustomDimensionsEnabled() && window.ga("set", "metric" + e, t)
        },
        getCustomDimensionData: function () {
            if (a.isEnabled() && a.isCustomDimensionsEnabled()) {
                var i, r, s, o;
                globals.RosTitleVersion < 11 ? (o = n.GetAuthHeaderAsyncV8(), s = t.getApiUrl("/api/profile/getanalyticsdataLan"), i = {Nickname: globals.account.Nickname}, r = "POST") : (o = n.GetAuthHeaderAsync(), s = t.getApiUrl("/api/profile/getanalyticsdata"), i = {}, r = "GET"), o.done(function (t) {
                    globals.RosTitleVersion < 11 && (t = n.appendLanAuthHeader(t)), e.ajax({
                        type: r,
                        cache: !1,
                        async: !0,
                        services: ["accounts"],
                        url: s,
                        headers: t,
                        data: i,
                        silentFail: !0,
                        disableSlowMsg: !0,
                        success: a.getCustomDimensionDataSuccess,
                        dataType: "json"
                    })
                })
            }
        },
        getCustomDimensionDataSuccess: function (e) {
            a.setCustomDimension(a.dimension.loginState, e.LoginState), e.LoginState && (a.setCustomDimension(a.dimension.memberId, e.MemberId), a.setCustomDimension(a.dimension.validationStatus, e.ValidationStatus), a.setCustomDimension(a.dimension.creationPath, e.CreationPath), a.setCustomDimension(a.dimension.platformsOwned, e.PlatformsOwned), a.setCustomDimension(a.dimension.gamesOwned, e.GamesOwned), a.setCustomDimension(a.dimension.linkedAccounts, e.LinkedAccounts), a.setCustomDimension(a.dimension.friendCount, (e.FriendCount > 0).toString()), a.setCustomDimension(a.dimension.crewCount, (e.CrewCount > 0).toString()), a.setCustomDimension(a.dimension.creationDate, e.CreationDate), a.setCustomMetric(a.metric.friendCount, e.FriendCount), a.setCustomMetric(a.metric.crewCount, e.CrewCount), a.setCustomMetric(a.metric.daysOfMembership, e.DaysOfMembership))
        },
        dimension: {
            environment: 1,
            validationStatus: 2,
            memberId: 3,
            loginState: 4,
            creationDate: 5,
            creationPath: 6,
            platformsOwned: 7,
            gamesOwned: 8,
            friendCount: 9,
            crewCount: 10,
            linkedAccounts: 11,
            currentlyPlaying: 12,
            game: 13,
            platform: 14,
            previousPurchase: 16,
            lastPurchaseDate: 17,
            score: 18,
            paymentType: 19,
            offerRedeemed: 20,
            pia1: 15,
            pia2: 21,
            pia3: 22,
            pia4: 23,
            pia5: 24,
            pia6: 25
        },
        metric: {friendCount: 1, crewCount: 2, daysOfMembership: 3, offlineSigninCount: 4},
        setCurrentlyPlaying: function (e, t) {
            var n = a.getCreationTitle(e), i = a.getCreationPlatform(t);
            a.setCustomDimension(a.dimension.game, n), a.setCustomDimension(a.dimension.platform, i), a.setCustomDimension(a.dimension.currentlyPlaying, a.getCurrentlyPlaying(n, i))
        },
        getCreationTitle: function (e) {
            var t = a.creationPathTitle[e.toLowerCase()];
            return "undefined" == typeof t && (t = "unknown"), t
        },
        getCreationPlatform: function (e) {
            var t = e;
            return t || a.creationPathPlatform.pc
        },
        getCurrentlyPlaying: function (e, t) {
            return e + "_" + t
        },
        getCreationPath: function (e, t) {
            return a.getCurrentlyPlaying(a.getCreationTitle(e), a.getCreationPlatform(t))
        },
        creationPathTitle: {mp3: "mp3", lanoire: "lanoire", gta5: "gta5"},
        creationPathPlatform: {pc: "pcros"},
        isEnhancedEcommerceSetup: function (e) {
            var t = window.globals || {isAmEc: !1};
            return void 0 != e && (t.isAmEc = e), t.isAmEc
        },
        setupEnhancedEcommerce: function () {
            a.isEnabled() && a.isSetup() && (window.ga("require", "ec"), a.isEnhancedEcommerceSetup(!0))
        },
        addImpression: function (e, t, n, i, r, s) {
            a.isEnabled() && a.isEnhancedEcommerceSetup() && window.ga("ec:addImpression", {
                id: e,
                name: t,
                category: n,
                brand: i,
                list: r,
                position: s
            })
        },
        productListRendered: function () {
            a.trackPage("/Store/Products"), t.WriteDebugLog("Google Analytics", "productListRendered", "/Store/Products", t.logType.debug, t.logController[globals.titleName])
        },
        checkout: function () {
            a.isEnabled() && a.isEnhancedEcommerceSetup() && a.setAction("checkout", {step: 1}), a.trackPage("/Store/Checkout"), t.WriteDebugLog("Google Analytics", "checkout", "/Store/Checkout", t.logType.debug, t.logController[globals.titleName])
        },
        confirmPurchase: function (e) {
            a.isEnabled() && a.isEnhancedEcommerceSetup() && (a.setAction("checkout", {
                step: 2,
                option: e
            }), a.setCustomDimension(a.dimension.paymentType, e)), a.trackPage("/Store/ConfirmPurchase"), t.WriteDebugLog("Google Analytics", "confirmPurchase", "/Store/ConfirmPurchase: " + e, t.logType.debug, t.logController[globals.titleName])
        },
        proceedToPayment: function () {
            a.trackPage("/Store/ProceedToPayment"), t.WriteDebugLog("Google Analytics", "proceedToPayment", "/Store/ProceedToPayment", t.logType.debug, t.logController[globals.titleName])
        },
        checkoutCompletion: function (e, n, i, r, s, o, l) {
            var c = !1, d = {}, u = {};
            a.isEnabled() && a.isEnhancedEcommerceSetup() && (d = {
                id: e,
                name: n,
                category: i,
                brand: globals.titleName,
                price: r,
                quantity: s,
                currency: o
            }, window.ga("ec:addProduct", d), u = {
                id: e,
                affiliation: "SCUI Store",
                revenue: l,
                currency: o
            }, a.setAction("purchase", u), c = !0), a.trackPage("/Store/CheckoutCompletion"), t.WriteDebugLog("Google Analytics", "checkoutCompletion", "/Store/CheckoutCompletion: " + JSON.stringify(d), t.logType.debug, t.logController[globals.titleName]), t.WriteDebugLog("Google Analytics", "checkoutCompletion", "purchase: " + JSON.stringify(u), t.logType.debug, t.logController[globals.titleName]), c && (a.setCustomDimension(a.dimension.previousPurchase, !0), a.setCustomDimension(a.dimension.lastPurchaseDate, (new Date).toISOString()))
        },
        setAction: function (e, t) {
            window.ga("ec:setAction", e, t)
        },
        category: {
            profile: "Profile",
            settings: "Settings",
            store: "Store",
            activation: "Activation",
            message: "Message",
            friend: "Friend",
            crew: "Crew",
            game: "Game"
        },
        action: {
            profile_sign_in: "Sign In",
            profile_sign_out: "Sign Out",
            profile_sign_up: "Sign Up",
            profile_sign_in_failure_steam_already_linked: "Sign In Failure - Steam Already Linked",
            profile_sign_in_failure_other_steam_error: "Sign In Failure - Other Steam Error",
            profile_sign_in_recaptcha_failure: "Sign In Failure - Invalid ReCaptcha",
            profile_sign_in_failure_banned: "Sign In Failure - Banned",
            profile_sign_in_auth_failed: "Sign In Failure - Auth Failed",
            profile_sign_in_failure: "Sign In Failure - Unknown Error",
            profile_sign_in_failure_too_many_login_attempts: "Sign In Failure - Too Many Login Attempts",
            profile_sign_in_offline: "Sign In Offline",
            settings_profile_edit_nickname: "Edit Nickname",
            settings_profile_edit_email: "Edit Email",
            settings_profile_edit_password: "Edit Password",
            settings_profile_edit_country: "Edit Country",
            settings_profile_edit_auto_sign_in: "Edit Auto Sign In",
            settings_profile_edit_hide_notifications: "Edit Hide Notifications",
            settings_privacy_change_platform_visibility: "Change Platform Visibility",
            settings_privacy_change_profile_visibility: "Change Profile Visibility",
            settings_privacy_change_country_visibility: "Change Country Visibility",
            settings_privacy_change_stats_visibility: "Change Stats Visibility",
            settings_game_change_presence_visibility: "Change Game Presence Visibility",
            settings_account_linking_link: "Link Account",
            settings_account_linking_unlink: "UnLink Account",
            settings_block_list_unblock: "Unblock Player",
            settings_change_avatar: "Change Avatar",
            friend_delete: "Delete Friend",
            friend_invite_accept: "Accept Friend Invite",
            friend_invite_decline: "Decline Friend Invite",
            friend_search: "Search for Player",
            friend_invite_send: "Send Friend Invite",
            friend_cancel_invite: "Cancel Friend Invite",
            crew_leave: "Leave Crew",
            crew_make_active: "Make Active Crew",
            crew_members_search: "Search for Crew Member",
            crew_invite_accept: "Accept Crew Invite",
            crew_invite_decline: "Decline Crew Invite",
            crew_invite_sent: "Sent Crew Invite",
            crew_delete_request: "Delete Crew Join Request",
            crew_search: "Search for Crew",
            crew_join: "Join Crew",
            crew_request_invite: "Request Crew Invite",
            game_invite_accept: "Accept Game Invite",
            game_invite_decline: "Decline Game Invite",
            store_start_purchase: "Start Purchase",
            store_select_item: "Item Selected",
            store_product_scroll: "Product List Scroll",
            activation_check_success: "Check Code Success",
            activation_check_failed: "Check Code Fail",
            activation_redeem_success: "Redeem Code Success",
            activation_redeem_failed: "Redeem Code Fail",
            message_send: "Send Message",
            message_reply: "Send Reply",
            message_delete: "Delete Message"
        },
        paymentType: {creditcard: "CreditCard", paypal: "PayPal", undefined: "Undefined"}
    };
    return a
}), function (e, t, n) {
    e.anythingSlider = function (i, a) {
        var r, s, o = this;
        o.el = i, o.$el = e(i).addClass("anythingBase").wrap('<div class="anythingSlider"><div class="anythingWindow" /></div>'), o.$el.data("AnythingSlider", o), o.init = function () {
            if (o.options = r = e.extend({}, e.anythingSlider.defaults, a), o.initialized = !1, e.isFunction(r.onBeforeInitialize) && o.$el.bind("before_initialize", r.onBeforeInitialize), o.$el.trigger("before_initialize", o), e('<!--[if lte IE 8]><script>jQuery("body").addClass("as-oldie");</script><![endif]-->').appendTo("body").remove(), o.$wrapper = o.$el.parent().closest("div.anythingSlider").addClass("anythingSlider-" + r.theme), o.$outer = o.$wrapper.parent(), o.$window = o.$el.closest("div.anythingWindow"), o.$win = e(t), o.$controls = e('<div class="anythingControls"></div>'), o.$nav = e('<ul class="thumbNav"><li><a><span></span></a></li></ul>'), o.$startStop = e('<a href="#" class="start-stop"></a>'), (r.buildStartStop || r.buildNavigation) && o.$controls.appendTo(r.appendControlsTo && e(r.appendControlsTo).length ? e(r.appendControlsTo) : o.$wrapper), r.buildNavigation && o.$nav.appendTo(r.appendNavigationTo && e(r.appendNavigationTo).length ? e(r.appendNavigationTo) : o.$controls), r.buildStartStop && o.$startStop.appendTo(r.appendStartStopTo && e(r.appendStartStopTo).length ? e(r.appendStartStopTo) : o.$controls), o.runTimes = e(".anythingBase").length, o.regex = r.hashTags ? new RegExp("panel" + o.runTimes + "-(\\d+)", "i") : null, 1 === o.runTimes && o.makeActive(), o.flag = !1, r.autoPlayLocked && (r.autoPlay = !0), o.playing = r.autoPlay, o.slideshow = !1, o.hovered = !1, o.panelSize = [], o.currentPage = o.targetPage = r.startPanel = parseInt(r.startPanel, 10) || 1, r.changeBy = parseInt(r.changeBy, 10) || 1, s = (r.mode || "h").toLowerCase().match(/(h|v|f)/), s = r.vertical ? "v" : (s || ["h"])[0], r.mode = "v" === s ? "vertical" : "f" === s ? "fade" : "horizontal", "f" === s && (r.showMultiple = 1, r.infiniteSlides = !1), o.adj = r.infiniteSlides ? 0 : 1, o.adjustMultiple = 0, r.playRtl && o.$wrapper.addClass("rtl"), r.buildStartStop && o.buildAutoPlay(), r.buildArrows && o.buildNextBackButtons(), o.$lastPage = o.$targetPage = o.$currentPage, r.expand) {
                if (r.aspectRatio === !0) r.aspectRatio = o.$el.width() / o.$el.height(); else if ("string" == typeof r.aspectRatio && -1 !== r.aspectRatio.indexOf(":")) {
                    var i = r.aspectRatio.split(":");
                    r.aspectRatio = i[0] / i[1]
                }
                r.aspectRatio > 0 && r.showMultiple > 1 && (r.aspectRatio = r.aspectRatio * r.showMultiple)
            }
            o.updateSlider(), r.expand && (o.$window.css({
                width: "100%",
                height: "100%"
            }), o.checkResize()), e.isFunction(e.easing[r.easing]) || (r.easing = "swing"), r.pauseOnHover && o.$wrapper.hover(function () {
                o.playing && (o.$el.trigger("slideshow_paused", o), o.clearTimer(!0))
            }, function () {
                o.playing && (o.$el.trigger("slideshow_unpaused", o), o.startStop(o.playing, !0))
            }), o.slideControls(!1), o.$wrapper.bind("mouseenter mouseleave", function (t) {
                e(this)["mouseenter" === t.type ? "addClass" : "removeClass"]("anythingSlider-hovered"), o.hovered = "mouseenter" === t.type ? !0 : !1, o.slideControls(o.hovered)
            }), e(n).keyup(function (e) {
                if (r.enableKeyboard && o.$wrapper.hasClass("activeSlider") && !e.target.tagName.match("TEXTAREA|INPUT|SELECT")) {
                    if ("vertical" !== r.mode && (38 === e.which || 40 === e.which)) return;
                    switch (e.which) {
                        case 39:
                        case 40:
                            o.goForward();
                            break;
                        case 37:
                        case 38:
                            o.goBack()
                    }
                }
            }), o.currentPage = (r.hashTags ? o.gotoHash() : "") || r.startPanel || 1, o.gotoPage(o.currentPage, !1, null, -1);
            var l = "slideshow_resized slideshow_paused slideshow_unpaused slide_init slide_begin slideshow_stop slideshow_start initialized swf_completed".split(" ");
            e.each("onSliderResize onShowPause onShowUnpause onSlideInit onSlideBegin onShowStop onShowStart onInitialized onSWFComplete".split(" "), function (t, n) {
                e.isFunction(r[n]) && o.$el.bind(l[t], r[n])
            }), e.isFunction(r.onSlideComplete) && o.$el.bind("slide_complete", function () {
                return setTimeout(function () {
                    r.onSlideComplete(o)
                }, 0), !1
            }), o.initialized = !0, o.$el.trigger("initialized", o), o.startStop(r.autoPlay)
        }, o.updateSlider = function () {
            o.$el.children(".cloned").remove(), o.navTextVisible = "hidden" !== o.$nav.find("span:first").css("visibility"), o.$nav.empty(), o.currentPage = o.currentPage || 1, o.$items = o.$el.children(), o.pages = o.$items.length, o.dir = "vertical" === r.mode ? "top" : "left", r.showMultiple = parseInt(r.showMultiple, 10) || 1, r.navigationSize = r.navigationSize === !1 ? 0 : parseInt(r.navigationSize, 10) || 0, o.$items.find("a").unbind("focus.AnythingSlider").bind("focus.AnythingSlider", function (t) {
                var n = e(this).closest(".panel"), i = o.$items.index(n) + o.adj;
                o.$items.find(".focusedLink").removeClass("focusedLink"), e(this).addClass("focusedLink"), o.$window.scrollLeft(0).scrollTop(0), -1 !== i && (i >= o.currentPage + r.showMultiple || i < o.currentPage) && (o.gotoPage(i), t.preventDefault())
            }), r.showMultiple > 1 && (r.showMultiple > o.pages && (r.showMultiple = o.pages), o.adjustMultiple = r.infiniteSlides && o.pages > 1 ? 0 : r.showMultiple - 1), o.$controls.add(o.$nav).add(o.$startStop).add(o.$forward).add(o.$back)[o.pages <= 1 ? "hide" : "show"](), o.pages > 1 && o.buildNavigation(), "fade" !== r.mode && r.infiniteSlides && o.pages > 1 && (o.$el.prepend(o.$items.filter(":last").clone().addClass("cloned")), o.$el.append(r.showMultiple > 1 ? o.$items.filter(":lt(" + r.showMultiple + ")").clone().addClass("cloned multiple") : o.$items.filter(":first").clone().addClass("cloned")), o.$el.find(".cloned").each(function () {
                e(this).find("a,input,textarea,select,button,area,form").attr({
                    disabled: "disabled",
                    name: ""
                }), e(this).find("[id]")[e.fn.addBack ? "addBack" : "andSelf"]().removeAttr("id")
            })), o.$items = o.$el.addClass(r.mode).children().addClass("panel"), o.setDimensions(), r.resizeContents ? (o.$items.css("width", o.width), o.$wrapper.css("width", o.getDim(o.currentPage)[0]).add(o.$items).css("height", o.height)) : o.$win.load(function () {
                o.setDimensions(), s = o.getDim(o.currentPage), o.$wrapper.css({
                    width: s[0],
                    height: s[1]
                }), o.setCurrentPage(o.currentPage, !1)
            }), o.currentPage > o.pages && (o.currentPage = o.pages), o.setCurrentPage(o.currentPage, !1), o.$nav.find("a").eq(o.currentPage - 1).addClass("cur"), "fade" === r.mode && (s = o.$items.eq(o.currentPage - 1), r.resumeOnVisible ? s.css({
                opacity: 1,
                visibility: "visible"
            }).siblings().css({
                opacity: 0,
                visibility: "hidden"
            }) : (o.$items.css("opacity", 1), s.fadeIn(0).siblings().fadeOut(0)))
        }, o.buildNavigation = function () {
            if (r.buildNavigation && o.pages > 1) {
                var t, n, i, a, s;
                o.$items.filter(":not(.cloned)").each(function (l) {
                    s = e("<li/>"), i = l + 1, n = (1 === i ? " first" : "") + (i === o.pages ? " last" : ""), t = '<a class="panel' + i + (o.navTextVisible ? '"' : " " + r.tooltipClass + '" title="@"') + ' href="#"><span>@</span></a>', e.isFunction(r.navigationFormatter) ? (a = r.navigationFormatter(i, e(this)), "string" == typeof a ? s.html(t.replace(/@/g, a)) : s = e("<li/>", a)) : s.html(t.replace(/@/g, i)), s.appendTo(o.$nav).addClass(n).data("index", i)
                }), o.$nav.children("li").bind(r.clickControls, function (t) {
                    !o.flag && r.enableNavigation && (o.flag = !0, setTimeout(function () {
                        o.flag = !1
                    }, 100), o.gotoPage(e(this).data("index"))), t.preventDefault()
                }), r.navigationSize && r.navigationSize < o.pages && (o.$controls.find(".anythingNavWindow").length || o.$nav.before('<ul><li class="prev"><a href="#"><span>' + r.backText + "</span></a></li></ul>").after('<ul><li class="next"><a href="#"><span>' + r.forwardText + "</span></a></li></ul>").wrap('<div class="anythingNavWindow"></div>'), o.navWidths = o.$nav.find("li").map(function () {
                    return e(this).outerWidth(!0) + Math.ceil(parseInt(e(this).find("span").css("left"), 10) / 2 || 0)
                }).get(), o.navLeft = o.currentPage, o.$nav.width(o.navWidth(1, o.pages + 1) + 25), o.$controls.find(".anythingNavWindow").width(o.navWidth(1, r.navigationSize + 1)).end().find(".prev,.next").bind(r.clickControls, function (t) {
                    o.flag || (o.flag = !0, setTimeout(function () {
                        o.flag = !1
                    }, 200), o.navWindow(o.navLeft + r.navigationSize * (e(this).is(".prev") ? -1 : 1))), t.preventDefault()
                }))
            }
        }, o.navWidth = function (e, t) {
            var n, i = Math.min(e, t), a = Math.max(e, t), r = 0;
            for (n = i; a > n; n++) r += o.navWidths[n - 1] || 0;
            return r
        }, o.navWindow = function (e) {
            if (r.navigationSize && r.navigationSize < o.pages && o.navWidths) {
                var t = o.pages - r.navigationSize + 1;
                e = 1 >= e ? 1 : e > 1 && t > e ? e : t, e !== o.navLeft && (o.$controls.find(".anythingNavWindow").animate({
                    scrollLeft: o.navWidth(1, e),
                    width: o.navWidth(e, e + r.navigationSize)
                }, {queue: !1, duration: r.animationTime}), o.navLeft = e)
            }
        }, o.buildNextBackButtons = function () {
            o.$forward = e('<span class="arrow forward"><a href="#"><span>' + r.forwardText + "</span></a></span>"), o.$back = e('<span class="arrow back"><a href="#"><span>' + r.backText + "</span></a></span>"), o.$back.bind(r.clickBackArrow, function (e) {
                r.enableArrows && !o.flag && (o.flag = !0, setTimeout(function () {
                    o.flag = !1
                }, 100), o.goBack()), e.preventDefault()
            }), o.$forward.bind(r.clickForwardArrow, function (e) {
                r.enableArrows && !o.flag && (o.flag = !0, setTimeout(function () {
                    o.flag = !1
                }, 100), o.goForward()), e.preventDefault()
            }), o.$back.add(o.$forward).find("a").bind("focusin focusout", function () {
                e(this).toggleClass("hover")
            }), o.$back.appendTo(r.appendBackTo && e(r.appendBackTo).length ? e(r.appendBackTo) : o.$wrapper), o.$forward.appendTo(r.appendForwardTo && e(r.appendForwardTo).length ? e(r.appendForwardTo) : o.$wrapper), o.arrowWidth = o.$forward.width(), o.arrowRight = parseInt(o.$forward.css("right"), 10), o.arrowLeft = parseInt(o.$back.css("left"), 10)
        }, o.buildAutoPlay = function () {
            o.$startStop.html("<span>" + (o.playing ? r.stopText : r.startText) + "</span>").bind(r.clickSlideshow, function (e) {
                r.enableStartStop && (o.startStop(!o.playing), o.makeActive(), o.playing && !r.autoPlayDelayed && o.goForward(!0, r.playRtl)), e.preventDefault()
            }).bind("focusin focusout", function () {
                e(this).toggleClass("hover")
            })
        }, o.checkResize = function (e) {
            var t = !!(n.hidden || n.webkitHidden || n.mozHidden || n.msHidden);
            clearTimeout(o.resizeTimer), o.resizeTimer = setTimeout(function () {
                var n = o.$outer.width(), i = "BODY" === o.$outer[0].tagName ? o.$win.height() : o.$outer.height();
                t || o.lastDim[0] === n && o.lastDim[1] === i || (o.setDimensions(), o.$el.trigger("slideshow_resized", o), o.gotoPage(o.currentPage, o.playing, null, -1)), "undefined" == typeof e && o.checkResize()
            }, t ? 2e3 : 500)
        }, o.setDimensions = function () {
            o.$wrapper.find(".anythingWindow, .anythingBase, .panel")[e.fn.addBack ? "addBack" : "andSelf"]().css({
                width: "",
                height: ""
            }), o.width = o.$el.width(), o.height = o.$el.height(), o.outerPad = [o.$wrapper.innerWidth() - o.$wrapper.width(), o.$wrapper.innerHeight() - o.$wrapper.height()];
            var t, n, i, a, s = 0, l = {width: "100%", height: "100%"},
                c = r.showMultiple > 1 && "horizontal" === r.mode ? o.width || o.$window.width() / r.showMultiple : o.$window.width(),
                d = r.showMultiple > 1 && "vertical" === r.mode ? o.height / r.showMultiple || o.$window.height() / r.showMultiple : o.$window.height();
            if (r.expand) {
                if (o.lastDim = [o.$outer.width(), o.$outer.height()], t = o.lastDim[0] - o.outerPad[0], n = o.lastDim[1] - o.outerPad[1], r.aspectRatio && r.aspectRatio < o.width) {
                    var u = n * r.aspectRatio;
                    if (t > u) t = u; else {
                        var h = t / r.aspectRatio;
                        n > h && (n = h)
                    }
                }
                o.$wrapper.add(o.$window).css({
                    width: t,
                    height: n
                }), o.height = n = r.showMultiple > 1 && "vertical" === r.mode ? d : n, o.width = c = r.showMultiple > 1 && "horizontal" === r.mode ? t / r.showMultiple : t, o.$items.css({
                    width: c,
                    height: d
                })
            }
            o.$items.each(function (d) {
                a = e(this), i = a.children(), r.resizeContents ? (t = o.width, n = o.height, a.css({
                    width: t,
                    height: n
                }), i.length && ("EMBED" === i[0].tagName && i.attr(l), "OBJECT" === i[0].tagName && i.find("embed").attr(l), 1 === i.length && i.css(l))) : ("vertical" === r.mode ? (t = a.css("display", "inline-block").width(), a.css("display", "")) : t = a.width() || o.width, 1 === i.length && t >= c && (t = i.width() >= c ? c : i.width(), i.css("max-width", t)), a.css({
                    width: t,
                    height: ""
                }), n = 1 === i.length ? i.outerHeight(!0) : a.height(), n <= o.outerPad[1] && (n = o.height), a.css("height", n)), o.panelSize[d] = [t, n, s], s += "vertical" === r.mode ? n : t
            }), o.$el.css("vertical" === r.mode ? "height" : "width", "fade" === r.mode ? o.width : s)
        }, o.getDim = function (e) {
            var t, n, i = o.width, a = o.height;
            if (o.pages < 1 || isNaN(e)) return [i, a];
            if (e = r.infiniteSlides && o.pages > 1 ? e : e - 1, n = o.panelSize[e], n && (i = n[0] || i, a = n[1] || a), r.showMultiple > 1) for (n = 1; n < r.showMultiple; n++) t = e + n, "vertical" === r.mode ? (i = Math.max(i, o.panelSize[t][0]), a += o.panelSize[t][1]) : (i += o.panelSize[t][0], a = Math.max(a, o.panelSize[t][1]));
            return [i, a]
        }, o.goForward = function (e, t) {
            o.gotoPage(o[r.allowRapidChange ? "targetPage" : "currentPage"] + r.changeBy * (t ? -1 : 1), e)
        }, o.goBack = function (e) {
            o.gotoPage(o[r.allowRapidChange ? "targetPage" : "currentPage"] - r.changeBy, e)
        }, o.gotoPage = function (t, n, i, a) {
            if (n !== !0 && (n = !1, o.startStop(!1), o.makeActive()), /^[#|.]/.test(t) && e(t).length && (t = e(t).closest(".panel").index() + o.adj), 1 !== r.changeBy) {
                var s = o.pages - o.adjustMultiple;
                1 > t && (t = r.stopAtEnd ? 1 : r.infiniteSlides ? o.pages + t : r.showMultiple > 1 - t ? 1 : s), t > o.pages ? t = r.stopAtEnd ? o.pages : r.showMultiple > 1 - t ? 1 : t -= s : t >= s && (t = s)
            }
            o.pages <= 1 || (o.$lastPage = o.$currentPage, "number" != typeof t && (t = parseInt(t, 10) || r.startPanel, o.setCurrentPage(t)), n && r.isVideoPlaying(o) || (r.stopAtEnd && !r.infiniteSlides && t > o.pages - r.showMultiple && (t = o.pages - r.showMultiple + 1), o.exactPage = t, t > o.pages + 1 - o.adj && (t = r.infiniteSlides || r.stopAtEnd ? o.pages : 1), t < o.adj && (t = r.infiniteSlides || r.stopAtEnd ? 1 : o.pages), r.infiniteSlides || (o.exactPage = t), o.currentPage = t > o.pages ? o.pages : 1 > t ? 1 : o.currentPage, o.$currentPage = o.$items.eq(o.currentPage - o.adj), o.targetPage = 0 === t ? o.pages : t > o.pages ? 1 : t, o.$targetPage = o.$items.eq(o.targetPage - o.adj), a = "undefined" != typeof a ? a : r.animationTime, a >= 0 && o.$el.trigger("slide_init", o), a > 0 && r.toggleControls === !0 && o.slideControls(!0), r.buildNavigation && o.setNavigation(o.targetPage), n !== !0 && (n = !1), (!n || r.stopAtEnd && t === o.pages) && o.startStop(!1), a >= 0 && o.$el.trigger("slide_begin", o), setTimeout(function (e) {
                var n, s = !0;
                r.allowRapidChange && o.$wrapper.add(o.$el).add(o.$items).stop(!0, !0), r.resizeContents || (n = o.getDim(t), e = {}, o.$wrapper.width() !== n[0] && (e.width = n[0] || o.width, s = !1), o.$wrapper.height() !== n[1] && (e.height = n[1] || o.height, s = !1), s || o.$wrapper.filter(":not(:animated)").animate(e, {
                    queue: !1,
                    duration: 0 > a ? 0 : a,
                    easing: r.easing
                })), "fade" === r.mode ? o.$lastPage[0] !== o.$targetPage[0] ? (o.fadeIt(o.$lastPage, 0, a), o.fadeIt(o.$targetPage, 1, a, function () {
                    o.endAnimation(t, i, a)
                })) : o.endAnimation(t, i, a) : (e = {}, e[o.dir] = -o.panelSize[r.infiniteSlides && o.pages > 1 ? t : t - 1][2], "vertical" !== r.mode || r.resizeContents || (e.width = n[0]), o.$el.filter(":not(:animated)").animate(e, {
                    queue: !1,
                    duration: 0 > a ? 0 : a,
                    easing: r.easing,
                    complete: function () {
                        o.endAnimation(t, i, a)
                    }
                }))
            }, parseInt(r.delayBeforeAnimate, 10) || 0)))
        }, o.endAnimation = function (e, t, n) {
            0 === e ? (o.$el.css(o.dir, "fade" === r.mode ? 0 : -o.panelSize[o.pages][2]), e = o.pages) : e > o.pages && (o.$el.css(o.dir, "fade" === r.mode ? 0 : -o.panelSize[1][2]), e = 1), o.exactPage = e, o.setCurrentPage(e, !1), "fade" === r.mode && o.fadeIt(o.$items.not(":eq(" + (e - o.adj) + ")"), 0, 0), o.hovered || o.slideControls(!1), r.hashTags && o.setHash(e), n >= 0 && o.$el.trigger("slide_complete", o), "function" == typeof t && t(o), r.autoPlayLocked && !o.playing && setTimeout(function () {
                o.startStop(!0)
            }, r.resumeDelay - (r.autoPlayDelayed ? r.delay : 0))
        }, o.fadeIt = function (t, n, i, a) {
            var s = t.filter(":not(:animated)"), o = 0 > i ? 0 : i;
            r.resumeOnVisible ? (1 === n && s.css("visibility", "visible"), s.fadeTo(o, n, function () {
                0 === n && s.css("visibility", "hidden"), e.isFunction(a) && a()
            })) : s[0 === n ? "fadeOut" : "fadeIn"](o, a)
        }, o.setCurrentPage = function (e, t) {
            if (e = parseInt(e, 10), !(o.pages < 1 || 0 === e || isNaN(e))) {
                if (e > o.pages + 1 - o.adj && (e = o.pages - o.adj), e < o.adj && (e = 1), r.buildArrows && !r.infiniteSlides && r.stopAtEnd && (o.$forward[e === o.pages - o.adjustMultiple ? "addClass" : "removeClass"]("disabled"), o.$back[1 === e ? "addClass" : "removeClass"]("disabled"), e === o.pages && o.playing && o.startStop()), !t) {
                    var n = o.getDim(e);
                    o.$wrapper.css({
                        width: n[0],
                        height: n[1]
                    }).add(o.$window).scrollLeft(0).scrollTop(0), o.$el.css(o.dir, "fade" === r.mode ? 0 : -o.panelSize[r.infiniteSlides && o.pages > 1 ? e : e - 1][2])
                }
                o.currentPage = e, o.$currentPage = o.$items.removeClass("activePage").eq(e - o.adj).addClass("activePage"), r.buildNavigation && o.setNavigation(e)
            }
        }, o.setNavigation = function (e) {
            o.$nav.find(".cur").removeClass("cur").end().find("a").eq(e - 1).addClass("cur")
        }, o.makeActive = function () {
            o.$wrapper.hasClass("activeSlider") || (e(".activeSlider").removeClass("activeSlider"), o.$wrapper.addClass("activeSlider"))
        }, o.gotoHash = function () {
            var n = t.location.hash, i = n.indexOf("&"), a = n.match(o.regex);
            return null !== a || /^#&/.test(n) || /#!?\//.test(n) || /\=/.test(n) ? null !== a && (a = r.hashTags ? parseInt(a[1], 10) : null) : (n = n.substring(0, i >= 0 ? i : n.length), a = e(n).length && e(n).closest(".anythingBase")[0] === o.el ? o.$items.index(e(n).closest(".panel")) + o.adj : null), a
        }, o.setHash = function (e) {
            var n = "panel" + o.runTimes + "-", i = t.location.hash;
            "undefined" != typeof i && (t.location.hash = i.indexOf(n) > 0 ? i.replace(o.regex, n + e) : i + "&" + n + e)
        }, o.slideControls = function (e) {
            var t = e ? "slideDown" : "slideUp", n = e ? 0 : r.animationTime, i = e ? r.animationTime : 0,
                a = e ? 1 : 0, s = e ? 0 : 1;
            r.toggleControls && o.$controls.stop(!0, !0).delay(n)[t](r.animationTime / 2).delay(i), r.buildArrows && r.toggleArrows && (!o.hovered && o.playing && (s = 1, a = 0), o.$forward.stop(!0, !0).delay(n).animate({
                right: o.arrowRight + s * o.arrowWidth,
                opacity: a
            }, r.animationTime / 2), o.$back.stop(!0, !0).delay(n).animate({
                left: o.arrowLeft + s * o.arrowWidth,
                opacity: a
            }, r.animationTime / 2))
        }, o.clearTimer = function (e) {
            o.timer && (t.clearInterval(o.timer), !e && o.slideshow && (o.$el.trigger("slideshow_stop", o), o.slideshow = !1))
        }, o.startStop = function (e, i) {
            e !== !0 && (e = !1), o.playing = e, e && !i && (o.$el.trigger("slideshow_start", o), o.slideshow = !0), r.buildStartStop && (o.$startStop.toggleClass("playing", e).find("span").html(e ? r.stopText : r.startText), "hidden" === o.$startStop.find("span").css("visibility") && o.$startStop.addClass(r.tooltipClass).attr("title", e ? r.stopText : r.startText)), e ? (o.clearTimer(!0), o.timer = t.setInterval(function () {
                n.hidden || n.webkitHidden || n.mozHidden || n.msHidden ? r.autoPlayLocked || o.startStop() : r.isVideoPlaying(o) ? r.resumeOnVideoEnd || o.startStop() : o.goForward(!0, r.playRtl)
            }, r.delay)) : o.clearTimer()
        }, o.init()
    }, e.anythingSlider.defaults = {
        theme: "default",
        mode: "horiz",
        expand: !1,
        resizeContents: !0,
        showMultiple: !1,
        easing: "swing",
        buildArrows: !0,
        buildNavigation: !0,
        buildStartStop: !0,
        toggleArrows: !1,
        toggleControls: !1,
        startText: "Start",
        stopText: "Stop",
        forwardText: "&raquo;",
        backText: "&laquo;",
        tooltipClass: "tooltip",
        enableArrows: !0,
        enableNavigation: !0,
        enableStartStop: !0,
        enableKeyboard: !0,
        startPanel: 1,
        changeBy: 1,
        hashTags: !0,
        infiniteSlides: !0,
        navigationFormatter: null,
        navigationSize: !1,
        autoPlay: !1,
        autoPlayLocked: !1,
        autoPlayDelayed: !1,
        pauseOnHover: !0,
        stopAtEnd: !1,
        playRtl: !1,
        delay: 3e3,
        resumeDelay: 15e3,
        animationTime: 600,
        delayBeforeAnimate: 0,
        clickForwardArrow: "click",
        clickBackArrow: "click",
        clickControls: "click focusin",
        clickSlideshow: "click",
        allowRapidChange: !1,
        resumeOnVideoEnd: !0,
        resumeOnVisible: !0,
        isVideoPlaying: function () {
            return !1
        }
    }, e.fn.anythingSlider = function (t, n) {
        return this.each(function () {
            var i, a = e(this).data("AnythingSlider");
            (typeof t).match("object|undefined") ? a ? a.updateSlider() : new e.anythingSlider(this, t) : /\d/.test(t) && !isNaN(t) && a ? (i = "number" == typeof t ? t : parseInt(e.trim(t), 10), i >= 1 && i <= a.pages && a.gotoPage(i, !1, n)) : /^[#|.]/.test(t) && e(t).length && a.gotoPage(t, !1, n)
        })
    }
}(jQuery, window, document), define("common/jquery.anythingslider", ["jquery"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)), function (e, t, n) {
    var i = navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/), a = !!i, r = a && parseFloat(i[1]) < 7,
        s = navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i), o = {}, l = [], c = {
            pgup: 33,
            pgdown: 34,
            end: 35,
            home: 36,
            left: 37,
            up: 38,
            right: 39,
            down: 40,
            enter: 13,
            tab: 9,
            zero: 48,
            z: 90,
            last: 221
        },
        d = ['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}" aria-hidden="true">', '<a class="dk_toggle dk_label">{{ label }}</a>', '<div class="dk_options">', '<ul class="dk_options_inner" role="main" aria-hidden="true">', "</ul>", "</div>", "</div>"].join(""),
        u = '<li><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',
        d = ['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}" aria-hidden="true">', '<a class="dk_toggle dk_label">{{ iconTmp }}{{ imgTmp }}{{ label }}</a>', '<div class="dk_options">', '<ul class="dk_options_inner" role="main" aria-hidden="true">', "</ul>", "</div>", "</div>"].join(""),
        u = '<li class="{{ current }}{{ disabled }}"><a data-dk-dropdown-value="{{ value }}">{{ iconTmp }}{{ imgTmp }}{{ text }}</a></li>',
        h = '<i class="dkicon {{ icon }}"></i>', f = '<img class="dkimg" src="{{ img }}"/>',
        p = {startSpeed: 400, theme: !1, changes: !1, syncReverse: !0, nativeMobile: !0, autoWidth: !0}, m = null,
        g = null, v = function (e, t, n) {
            var i, a, r, s;
            i = e.attr("data-dk-dropdown-value"), a = e.text(), a = e.html(), r = t.data("dropkick"), s = r.$select, s.val(i).trigger("change"), t.find(".dk_label").text(a), t.find(".dk_label").html(a), n = n || !1, !r.settings.change || n || r.settings.syncReverse || r.settings.change.call(s, i, a)
        }, _ = function (e) {
            e.removeClass("dk_open dk_open_top"), m = null
        }, b = function (n) {
            var i = n.find(".dk_toggle"), a = n.find(".dk_options").outerHeight(),
                r = e(t).height() - i.outerHeight() - i.offset().top + e(t).scrollTop(),
                s = i.offset().top - e(t).scrollTop();
            return s > a ? r > a : !0
        }, y = function (e, t, n) {
            var i = e.find(".dk_options_inner"), a = t.prevAll("li").outerHeight() * t.prevAll("li").length,
                r = i.scrollTop(), s = i.height() + i.scrollTop() - t.outerHeight();
            (n && "keydown" === n.type || r > a || a > s) && i.scrollTop(a)
        }, w = function (e, t) {
            if (!e.hasClass("disabled")) {
                var n = b(e);
                m = e.toggleClass("dk_open");
                var n = b(e), i = n ? "dk_open" : "dk_open_top dk_open";
                e.find(".dk_options").css({
                    top: n ? e.find(".dk_toggle").outerHeight() - 1 : "",
                    bottom: n ? "" : e.find(".dk_toggle").outerHeight() - 1
                }), m = e.addClass(i), y(e, e.find(".dk_option_current"), t)
            }
        }, S = function (e, t, n) {
            t.find(".dk_option_current").removeClass("dk_option_current"), e.addClass("dk_option_current"), y(t, e, n)
        }, C = function (t, n) {
            var i, a, r, s, o, l, d, u = t.keyCode, h = n.data("dropkick"), f = String.fromCharCode(u),
                p = n.find(".dk_options"), m = n.hasClass("dk_open"), g = p.find("li"), b = n.find(".dk_option_current"),
                y = g.first(), C = g.last(), k = p.length && b.length ? Math.floor(p.height() / b.height()) : 0,
                T = e(g.get(Math.max(0, b.index() - k))), L = e(g.get(Math.min(g.length - 1, b.index() + k)));
            switch (u) {
                case c.pgup:
                    m ? S(T, n, t) : w(n, t), t.preventDefault();
                    break;
                case c.pgdown:
                    m ? S(L, n, t) : w(n, t), t.preventDefault();
                    break;
                case c.home:
                    m ? S(y, n, t) : w(n, t), t.preventDefault();
                    break;
                case c.end:
                    m ? S(C, n, t) : w(n, t), t.preventDefault();
                    break;
                case c.enter:
                    m ? b.hasClass("disabled") || (v(b.find("a"), n), _(n)) : w(n, t), t.preventDefault();
                    break;
                case c.tab:
                    m && (b.length && v(b.find("a"), n), _(n));
                    break;
                case c.up:
                    a = b.prev("li"), m ? a.length ? S(a, n, t) : S(C, n, t) : w(n, t), t.preventDefault();
                    break;
                case c.down:
                    m ? (i = b.next("li").first(), i.length ? S(i, n, t) : S(y, n, t)) : w(n, t), t.preventDefault()
            }
            if (u >= c.zero && u <= c.z) {
                for (r = (new Date).getTime(), null === h.finder || void 0 === h.finder ? (h.finder = f.toUpperCase(), h.timer = r) : r > parseInt(h.timer, 10) + 1e3 ? (h.finder = f.toUpperCase(), h.timer = r) : (h.finder = h.finder + f.toUpperCase(), h.timer = r), s = g.find("a"), o = 0, l = s.length; l > o; o++) if (d = e(s[o]), 0 === d.html().toUpperCase().indexOf(h.finder)) {
                    v(d, n), S(d.parent(), n, t);
                    break
                }
                n.data("dropkick", h)
            }
        }, k = function (t) {
            return e.trim(t).length > 0 ? t : !1
        }, T = function (t, n) {
            var i, a, r, s, o, l, c,
                d = t.replace("{{ id }}", n.id).replace("{{ label }}", n.label).replace("{{ tabindex }}", n.tabindex),
                p = [], m = void 0 != n.icon ? h.replace("{{ icon }}", n.icon) : "",
                g = void 0 != n.img ? f.replace("{{ img }}", n.img) : "";
            if (d = d.replace("{{ iconTmp }}", m).replace("{{ imgTmp }}", g), n.options && n.options.length) for (a = 0, r = n.options.length; r > a; a++) s = e(n.options[a]), o = 0 === a && void 0 !== s.attr("selected") && void 0 !== s.attr("disabled") ? null : u.replace("{{ value }}", s.val()).replace("{{ current }}", k(s.val()) === n.value ? "dk_option_current" : "").replace("{{ disabled }}", void 0 !== s.attr("disabled") ? "disabled" : "").replace("{{ text }}", e.trim(s.html())), null != o && s.data("icon") ? (l = h.replace("{{ icon }}", s.data("icon")), o = o.replace("{{ iconTmp }}", l)) : null != o && (o = o.replace("{{ iconTmp }}", "")), null != o && s.data("img") ? (c = f.replace("{{ img }}", s.data("img")), o = o.replace("{{ imgTmp }}", c)) : null != o && (o = o.replace("{{ imgTmp }}", "")), p[p.length] = o;
            return i = e(d), i.find(".dk_options_inner").html(p.join("")), i
        };
    r || (n.documentElement.className = n.documentElement.className + " dk_fouc"), o.init = function (t) {
        return t = e.extend({}, p, t), d = t.dropdownTemplate ? t.dropdownTemplate : d, u = t.optionTemplate ? t.optionTemplate : u, this.each(function () {
            var n, i, a = e(this), r = a.find(":selected").first(), o = a.find("option"), c = a.data("dropkick") || {},
                u = a.attr("id") || a.attr("name"), h = t.width || a.outerWidth(), f = a.attr("tabindex") || "0",
                p = !1;
            return c.id ? a : (c.settings = t, c.tabindex = f, c.id = u, c.$original = r, c.$select = a, c.value = k(a.val()) || k(r.attr("value")), c.label = r.text(), c.options = o, c.icon = r.data("icon"), c.img = r.data("img"), p = T(d, c), c.settings.autoWidth && p.find(".dk_toggle").css({width: h + "px"}), a.before(p).appendTo(p), p = e('div[id="dk_container_' + u + '"]').fadeIn(t.startSpeed), n = t.theme || "default", p.addClass("dk_theme_" + n), c.theme = n, c.$dk = p, a.data("dropkick", c), p.addClass(a.attr("class")), p.data("dropkick", c), l[l.length] = a, p.on("focus.dropkick", function () {
                g = p.addClass("dk_focus")
            }).on("blur.dropkick", function () {
                p.removeClass("dk_focus"), g = null
            }), s && c.settings.nativeMobile && p.addClass("dk_mobile"), c.settings.syncReverse && a.on("change", function (t) {
                var n = a.val(), i = e('a[data-dk-dropdown-value="' + n + '"]', p), r = i.text();
                p.find(".dk_label").text(r), c.settings.change && c.settings.change.call(a, n, r), S(i.parent(), p, t)
            }), i = a.attr("form") ? e("#" + a.attr("form").replace(" ", ", #")) : a.closest("form"), void (i.length && i.on("reset", function () {
                a.dropkick("reset")
            })))
        })
    }, o.theme = function (t) {
        var n = e(this).data("dropkick"), i = n.$dk, a = "dk_theme_" + n.theme;
        i.removeClass(a).addClass("dk_theme_" + t), n.theme = t
    }, o.reset = function () {
        return this.each(function () {
            var t = e(this).data("dropkick"), n = t.$dk,
                i = e('a[data-dk-dropdown-value="' + t.$original.attr("value") + '"]', n);
            t.$original.prop("selected", !0), n.find(".dk_label").text(t.label), S(i.parent(), n)
        })
    }, o.setValue = function (t) {
        return this.each(function () {
            var n = e(this).data("dropkick").$dk, i = e('.dk_options a[data-dk-dropdown-value="' + t + '"]', n);
            i.length ? v(i, n) | S(i.parent(), n) : console.warn("There is no option with this value in " + n.selector)
        })
    }, o.refresh = function (t) {
        return this.each(function () {
            var n, i, a = e(this).data("dropkick"), r = a.$select, s = a.$dk;
            a.options = r.children(), i = T(d, a).find(".dk_options_inner"), s.find(".dk_options_inner").replaceWith(i), a.$original.parent().length || (a.$original = r.find(":selected").first(), a.label = a.$original.text()), n = e('a[data-dk-dropdown-value="' + r.val() + '"]', s), S(n.parent(), s), v(n, s, !t)
        })
    }, e.fn.dropkick = function (e) {
        if (!r) {
            if (o[e]) return o[e].apply(this, Array.prototype.slice.call(arguments, 1));
            if ("object" == typeof e || !e) return o.init.apply(this, arguments)
        }
    }, e(function () {
        e(n).on(a ? "mousedown" : "click", ".dk_options a", function () {
            var t = e(this), n = t.parents(".dk_container").first();
            return t.parent().hasClass("disabled") || (v(t, n), S(t.parent(), n), _(n)), !1
        }), e(n).on("keydown.dk_nav", function (e) {
            var t;
            m ? t = m : g && (t = g), t && C(e, t)
        }), e(n).on("click", null, function (t) {
            var n, i = e(t.target);
            if (m && 0 === i.closest(".dk_container").length) _(m); else {
                if (i.is(".dk_toggle, .dk_label")) return n = i.parents(".dk_container").first(), n.hasClass("dk_open") ? _(n) : (m && _(m), w(n, t)), !1;
                i.attr("for") && e("#dk_container_" + i.attr("for"))[0] && e("#dk_container_" + i.attr("for")).trigger("focus.dropkick")
            }
        });
        var i = "onwheel" in t ? "wheel" : "onmousewheel" in n ? "mousewheel" : "MouseScrollEvent" in t ? "DOMMouseScroll MozMousePixelScroll" : !1;
        i && e(n).on(i, ".dk_options_inner", function (e) {
            var t = e.originalEvent.wheelDelta || -e.originalEvent.deltaY || -e.originalEvent.detail;
            return a ? (this.scrollTop -= Math.round(t / 10), !1) : t > 0 && this.scrollTop <= 0 || 0 > t && this.scrollTop >= this.scrollHeight - this.offsetHeight ? !1 : !0
        })
    })
}(jQuery, window, document), define("dropkick", ["jquery"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)), define("common/jquery.datafunctions", ["jquery", "utils", "common/formvalidation", "jquery.setup.environment.utils", "common/reCaptcha", "common/steam", "common/modals/modal-views", "common/analyticsManager", "jTweetsAnywhere", "common/jquery.anythingslider", "spinner", "dropkick"], function (e, t, n, i, a, r, s, o) {
    function l() {
        h.isLauncher && t.isLauncherV2Enabled() && (e("body").addClass("launcher"), e("#launcherStyle").addClass(h.titleName))
    }

    function c(e, t, n) {
        var i;
        if (e && void 0 != e.RockstarId) i = e.RockstarId; else {
            var a = u.GetProfile(void 0, void 0, t);
            a.Password == n && (i = a.RockstarId)
        }
        return i
    }

    function d(t) {
        if (!h.signInReCaptchaEnabled) return !1;
        var n = t.getResponseHeader("signinCaptcha");
        if (null != n && "undefined" != typeof n) {
            if ("1" === n) return !0;
            if ("0" === n) return !1
        }
        var i = e(t.responseText),
            r = "0" == i.find("Status").text() && "incorrect-captcha-sol" == i.find("Error").attr("code");
        return r || (r = a.isVisible()), r
    }

    var u = {};
    "undefined" == typeof window.globals && (window.globals = {});
    var h = window.globals;
    h.account = null, h.avatarXML = null, h.rosEnvironment = "dev", h.titlelang = "en-US", h.titleName = "", h.titleVersion = 2382.1, h.gamePlatform = "", h.ticket = "", h.platformId = "9", h.titleDisplayName = "", h.profiles = null, h.RosTitleVersion = 8, h.localProfileCreation = !0, h.isLauncher = !1, h.steamAppId = 0, h.steamAuthTicket = "", h.hasConnection = !1, h.hasInternet = !1, h.inputMethod = 0, h.amUrl = "https://www.google-analytics.com/analytics.js", h.localUrl = "/robots.txt", h.isScuiVisible = !1, h.asyncEnabled = !0, h.launcherClass = "", h.receiveMsgEnabled = !1;
    var f = 416, p = "-" + f + "px", m = 537, g = "-" + m + "px";
    return h.panelHeight = f, h.top = p, h.waitingResponse = !1, u.Account = function (e, t, n, i, a, r, s, o, l, c, d, u) {
        return {
            AvatarUrl: e,
            CountryCode: t,
            Age: n,
            Email: i,
            isApproxDob: a,
            Nickname: r,
            RockstarId: s,
            ZipCode: o,
            Local: l,
            Minor: "True" == c,
            NickEditable: d,
            Validated: u
        }
    }, u.resolveEnvironment = function (e) {
        return e.length > 5 ? "prod" : e
    }, u.SetGameTitleAsync = function () {
        e("span.version").html(h.versionNum), t.WriteDebugLog("SetGameTitle", "Version", h.versionNum);
        var n = new e.Deferred, a = i.CallGameMethodAsync("RGSC_GET_TITLE_ID", null, "RGSC_GET_TITLE_ID_DEMO");
        return a.done(function (a) {
            if (null != a) {
                if (null != a.RosTitleName && null != a.RosTitleVersion) {
                    h.titleName = a.RosTitleName, h.rosEnvironment = a.RosEnvironment, h.RosTitleVersion = a.RosTitleVersion, h.OfflineOnly = a.OfflineOnly;
                    var r = h.titleName.toLowerCase();
                    e("body").addClass(r), h.RosTitleVersion >= 11 && (null == a.EnableLocalProfiles || !a.EnableLocalProfiles) && (h.localProfileCreation = !1), t.WriteDebugLog("SetGameTitle", "localProfileCreation", h.localProfileCreation), void 0 != a.IsLauncher && a.IsLauncher ? (h.isLauncher = a.IsLauncher, h.top = g, h.panelHeight = m, h.receiveMsgEnabled = !0, t.WriteDebugLog("SetGameTitle", "isLauncher", h.isLauncher), i.quickShowLauncherUi()) : (h.top = p, h.panelHeight = f), h.platform = a.RosPlatform, null != a.RosPlatformId && (h.platformId = a.RosPlatformId, t.WriteDebugLog("SetGameTitle", "RosPlatformId", h.platformId)), t.WriteDebugLog("SetGameTitle", "wsURL", h.wsURL), t.WriteDebugLog("SetGameTitle", "platform", h.platform), "" != t.getUrlVars("lang") && (t.WriteDebugLog("SetGameTitle", "lang qs", t.getUrlVars("lang")), a.Language = t.getUrlVars("lang"));
                    var s = i.mapLanguage(a.Language);
                    a.Language = s;
                    var c = "/homefeed.min.css";
                    t.isGameSupported() && e("<link>", {
                        rel: "stylesheet",
                        type: "text/css",
                        href: h.cssBase + "/" + h.size + "/" + h.titleName + c
                    }).appendTo("head"), t.isGameSupported() && e("#homefeedPanel").load("html/" + h.size + "/" + h.titleName + "/homefeed.htm", function () {
                        t.WriteDebugLog("SetGameTitle", "homefeedPanel", "html/" + h.size + "/" + h.titleName + "/homefeed.htm loaded"), e("a.closeButton").click(function (t) {
                            t.preventDefault(), i.clearActivePanel(function () {
                                e(this).parents(".panel").removeClass("active"), i.CloseUI()
                            })
                        }), e("#homefeedPanel [rel*=localize], #intro [rel*=localize]").localize("HomeSignin", {
                            language: a.Language,
                            pathPrefix: h.baseAssetUrl + "xml/Shared"
                        }), e("#homefeedPanel [rel*=localize], #signUpConfirm [rel*=localize]").localize("General", {
                            language: a.Language,
                            pathPrefix: h.baseAssetUrl + "xml/" + h.titleName
                        }), t.WriteDebugLog("SetGameTitle", "homefeedPanel", "localized")
                    })
                }
                void 0 != a.TitleVersion && (h.titleVersion = parseFloat(a.TitleVersion), t.WriteDebugLog("SetGameTitle", "TitleVersion", h.titleVersion)), void 0 != a.Platform && (h.gamePlatform = a.Platform.toLowerCase(), t.WriteDebugLog("SetGameTitle", "GameEnvironment", h.gamePlatform), "macsteam" == h.gamePlatform && (h.gamePlatform = "steam"), u.isDesktopPlatform() && (i.setupInputElementEvents(), i.initTextEntryForReCaptcha(), l(), ("steam" == h.gamePlatform || "nhn" == h.gamePlatform || "macappstore" == h.gamePlatform) && (void 0 != a.SteamAppId && (h.steamAppId = a.SteamAppId), void 0 != a.SteamAuthTicket ? h.steamAuthTicket = a.SteamAuthTicket : "macappstore" == h.gamePlatform && void 0 != a.MacAppStoreReceipt && (h.steamAuthTicket = a.MacAppStoreReceipt)))), null != a.Language && (null != h.titlelang && h.titlelang.length > 0 && e(".localized").removeClass("localized"), (0 == h.titlelang.length && "en-US" != a.Language || h.titlelang.length > 0 && h.titlelang != a.Language) && (e("[rel*=localize]").localize("HomeSignin", {
                    language: a.Language,
                    pathPrefix: h.baseAssetUrl + "xml/Shared"
                }), e("#header").addClass("localized"), t.WriteDebugLog("SetGameTitle", "HomeSignin", "Localized"), e("#serverError [rel*=localize]").localize("Errors", {
                    language: a.Language,
                    pathPrefix: h.baseAssetUrl + "xml/Shared"
                }).addClass("localized"), t.WriteDebugLog("SetGameTitle", "serverError", "Localized")), h.titlelang = a.Language, e("html").attr("lang", h.titlelang), t.WriteDebugLog("SetGameTitle", "Language", h.titlelang)), void 0 != a.TitleDisplayName && (h.titleDisplayName = i.mapTitleDisplayName(a.TitleDisplayName), t.WriteDebugLog("SetGameTitle", "TitleDisplayName", h.titleDisplayName), e(".titleDisplayName").html(h.titleDisplayName));
                var d = e("#awardsTitle");
                d.text(d.text().replace("[Title]", h.titleDisplayName));
                var v = i.CallGameMethodAsync("RGSC_GET_VERSION_INFO", null, "RGSC_GET_VERSION_INFO_DEMO");
                v.done(function (t) {
                    if (t && void 0 != t.Version) {
                        var n = t.Version;
                        "dev" === h.rosEnvironment && (n += ":D", e("body").addClass("dev"), e(".scui_ver:first").clone().prependTo("#header")), e("span.versionSDK").html(n)
                    }
                });
                try {
                    i.PrePopulateData()
                } catch (_) {
                }
                try {
                    o.startSession(), o.setCurrentlyPlaying(h.titleName, h.platform)
                } catch (_) {
                }
                n.resolve()
            } else t.WriteDebugLog("dataFn.SetGameTitleAsync", "RGSC_GET_TITLE_ID", "titleInfo is null", t.logType.error, t.logController[h.titleName]), n.reject()
        }), a.fail(function () {
            t.WriteDebugLog("dataFn.SetGameTitleAsync", "RGSC_GET_TITLE_ID", "failed", t.logType.error, t.logController[h.titleName]), n.reject()
        }), n.promise()
    }, u.SignInJS = function (n) {
        if (delete h.areSigninCredsFromGame, i.isOffline()) null == n || void 0 == n.RockstarId && void 0 == n.Nickname ? u.SignInOffline(null, null) : u.SelectProfile(n.RockstarId, !0, null, n.Nickname); else {
            if (a.isVisible) {
                var s = void 0 != e("#recaptcha_challenge_field").val() ? e("#recaptcha_challenge_field").val() : "",
                    o = void 0 != e("#recaptcha_response_field").val() ? e("#recaptcha_response_field").val() : "";
                e("#recaptcha_challenge_field").val("")
            }
            a.hideError();
            var l, c = "/login", d = h.ajaxTimeout;
            r.isSteam() && (d = 3 * h.ajaxTimeout, l = 2 * h.slowAjaxMsgTimeout, !n || n.Email || n.Password || (c = "/autologinsteam"));
            var f, p;
            n ? (f = '{ "platformName":"' + h.platform + '","env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"userLogin":"' + (n.Email || "") + '","gamePlatform":"' + h.gamePlatform + '","recaptcha_challenge_field":"' + s + '", "recaptcha_response_field":"' + o + '"', p = ',"authTicket":"' + h.steamAuthTicket + '","userPassword":"' + (n.Password || "") + '", "Ticket": "' + (n.Ticket || "") + '" }') : (f = '{ "platformName":"' + h.platform + '","env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"userLogin":"' + e("#signInEmail").val() + '","gamePlatform":"' + h.gamePlatform + '","recaptcha_challenge_field":"' + s + '", "recaptcha_response_field":"' + o + '"', p = ',"authTicket":"' + h.steamAuthTicket + '","userPassword":"' + e("#signInPassword").val() + '" }'), t.WriteDebugLog("SignInJS", "options", f), f += p, e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/" + h.titleName + c),
                data: f,
                contentType: "application/json; charset=utf-8",
                timeout: d,
                slowMsgTimeout: l,
                accepts: {xml: "application/xml", text: "application/xml"},
                dataType: "text",
                cache: !1,
                success: function (e, t, i) {
                    u.OnSuccessSignIn(e, t, i, n)
                },
                silentFail: !0,
                error: function (e, t, i) {
                    u.HandleSignInError(e, i, n)
                },
                complete: function () {
                    n = null, t.HideInvisibleMask()
                }
            })
        }
    }, u.OnSuccessSignIn = function (n, s, l, c) {
        var d = e(n), f = d.find("Email").text();
        if ("1" != d.find("Status").text()) return void u.HandleSignInError(l, d.find("Error"), c);
        if ("gta5" == h.titleName && 0 == e("#onlineStatsLink").length) {
            var p = e("#statsPanel .sideMenu #statsLink2").parent();
            e('<li><a id="onlineStatsLink" href="#"><i></i><span>' + i.getText("OnlineStatistics", "HomeSignin") + "</span></a></li>").insertAfter(p)
        }
        h.underage = !1, a.remove(), e("#formAccountDetails").find("span.errorText").remove(), e("#signupDobContainer").find("select").removeAttr("disabled"), e("#signupDobContainer").find(".dk_container").removeClass("disabled"), e("#signupDetailsContainer").show();
        var m = d.find("SessionKey").text(), g = d.find("SecsUntilExpiration").text(),
            v = d.find("PlayerAccountId").text(), _ = d.find("RockstarId").eq(0).text(), b = d.find("Nickname").text(),
            y = d.find("AvatarUrl").text(), w = d.find("Ticket").text(), S = d.find("CountryCode").text(),
            C = d.find("Age").eq(0).text(),
            k = void 0 != d.find("updatePassword").eq(0).text() && "true" == d.find("updatePassword").eq(0).text().toLowerCase();
        if (h.fullLog) try {
            var T = parseInt(_, 10);
            T % 10 !== 0 && (h.fullLog = !1, h.debugLog = "")
        } catch (L) {
        }
        if (h.RosTitleVersion < 11 && t.storeLanAuthValue(d.find("Auth").text()), h.updatePassword = k, u.isDesktopPlatform()) {
            h.RosTitleVersion > 10 && d.find("Privacy").length && u.SetPrivacyOptions(d.find("Privacy"));
            var E = !isNaN(C) && C >= 1, M = void 0 != S && "" != S;
            E && M || e("#dob").addClass(E || M ? M ? "DOBUpdate" : "countryUpdate" : "DOBAndCountryUpdate")
        }
        h.ticket = w;
        var I = {
            Email: f,
            SaveEmail: !0,
            SavePassword: !0,
            ticket: w,
            sessionKey: m,
            expiration: g,
            accountId: v,
            RockstarId: _.toString(),
            Local: !1,
            SignedOnline: !0,
            SignedIn: !0
        };
        if (null != b && b.length && (I.Nickname = b), null != y && y.length && (I.AvatarUrl = t.getLastStringSegment(y, "/", 2)), "pcros" == h.platform && (I.XMLResponse = encodeURIComponent(n)), c ? (h.areSigninCredsFromGame = !0, I.AutoSignIn = c.AutoSignIn, I.Password = c.Password || "", c.DOB && (I.DOB = c.DOB)) : (I.AutoSignIn = e("#autoSignIn").is(":checked") ? !0 : !1, I.Password = e("#signInPassword").val()), h.account = new u.Account(t.getLastStringSegment(y, "/", 2), d.find("CountryCode").eq(0).text(), C, d.find("Email").eq(0).text(), d.find("IsApproxDob").eq(0).text(), b, _, d.find("ZipCode").eq(0).text(), !1, d.find("Minor").eq(0).text(), void 0), u.SetAutoSignInValues(I.AutoSignIn), r.isSteam()) try {
            var P = r.getSteamNetworkAsync(h.account.RockstarId, w);
            P.done(function (e) {
                e && void 0 != e.AccountId ? r.BindSteamAccount(h.steamAppId, h.steamAuthTicket, I) : r.SteamLinkPrompt(I), e = null
            }), P.fail(function () {
                r.SteamLinkPrompt(I)
            })
        } catch (L) {
            return i.CallGameMethod(null, null, "RGSC_JS_FINISH_SIGN_IN"), t.WriteDebugLog("SignIn", "ERROR in getSteamNetwork", "", t.logType.error, t.logController[h.titleName]), void u.HandleSignInError(l, d.find("Error"), c)
        } else {
            h.account && u.LoadProfile();
            try {
                u.signInToGame(I)
            } catch (L) {
                return i.CallGameMethod(null, null, "RGSC_JS_FINISH_SIGN_IN"), I = {
                    code: "error",
                    content: "<redacted>"
                }, t.WriteDebugLog("SignIn", "ERROR jsonString", JSON.stringify(I)), void t.WriteDebugLog("OnSuccessSignIn", "dataFn.signInToGame exception", L && L.message ? L.message : "", t.logType.error, t.logController[h.titleName])
            }
        }
        o.trackEvent(o.category.profile, o.action.profile_sign_in);
        var D = i.getOfflineSigninCount();
        D > 0 && (o.trackEvent(o.category.profile, o.action.profile_sign_in_offline), i.setOfflineSigninCount(0)), e("#buttonSignInProfile").removeData("signinRetry"), d = null
    }, u.PromptToUpdatePassword = function () {
        e("#statsButton").show(), e("#menuSettings").click(), e("a.editPassword").click(), e("#editProfile").find(".rowAnchor.editlink.editPassword").hide(), e("#passwordForm .errors").append('<span class="pwerror errorText">' + i.getError("PasswordUpdate") + "</span>")
    }, u.HandleSignInError = function (n, s, l) {
        if (d(n)) {
            h.showSignInRecaptcha = !0;
            var f = !1, p = e("#recaptcha_area");
            p.length ? a.isVisible ? (a.reload(), e("#signInReCaptchaInput").show(), f = !0) : (a.hideError(), a.reload(), e("#signInReCaptchaInput").show()) : a.InitReCaptcha(e("#signInReCaptchaInput"), 4);
            var m = a.isError() || f;
            t.pubsub.trigger("setupEnv:showPageResetPassword", m)
        } else a.remove();
        var g = e("#buttonSignInProfile");
        void 0 != g.attr("title") && g.text(g.attr("title"));
        var v = "", _ = "";
        if (s.length && ("string" == typeof s ? (v = s, _ = s) : (v = s.attr("CodeEx"), _ = s.attr("Code"))), _.indexOf("captcha") > -1) {
            a.showError(_), e("#buttonSignInProfile").removeAttr("disabled");
            try {
                e("div.buttonSignInWrapper span").spinner("stop").hide()
            } catch (b) {
            }
            return o.trackEvent(o.category.profile, o.action.profile_sign_in_recaptcha_failure), void u.notifyGameSignInFailed(_, v)
        }
        var y, w = !0, S = _, C = "errorText", k = !1;
        if (!g.data("signinRetry") && void 0 != n.responseText && n.responseText.indexOf(t.errorCode("3003")) > -1) return g.data("signinRetry", !0), void u.SignInJS(l);
        if ("NotAllowed" != _ || "SteamAccountLink" != v && "RockstarAccountLink" != v) if ("Privilege" == v) S = u.GetUserBannedText(), o.trackEvent(o.category.profile, o.action.profile_sign_in_failure_banned); else if ("LoginAttempts" == v) S = i.getError("TooManyLoginAttempts"), C += " signInErrorText", o.trackEvent(o.category.profile, o.action.profile_sign_in_failure_too_many_login_attempts); else if ("AuthenticationFailed" == _) {
            if (e("div.buttonSignInWrapper span").hide(), "DupLogin" === v) S = i.getErrorWithCode(t.errorCode("4000.89")).Message;
            else {
                var T = h.isNLE ? "NotFound" : "NotFoundEmail";
                S = i.getError(T)
            }
            C += " signInErrorText", "SteamAPI" != v && o.trackEvent(o.category.profile, o.action.profile_sign_in_auth_failed)
        } else if (429 === n.status) y = i.getErrorWithCode(t.errorCode("8000")), S = y.Message + " " + y.CodeDescription; else if (r.isSteam() && l) ; else if (r.isSteam()) y = i.getErrorWithCode(t.errorCode("1000.50")), S = y.Message + " " + y.CodeDescription, o.trackEvent(o.category.profile, o.action.profile_sign_in_failure_other_steam_error); else {
            var L = c(l, e("#signInEmailProfile").val(), e("#signInPasswordProfile").val());
            if (null != L && L.length > 0 && "Password" != v && (!h.isLauncher || t.isLauncherV2Enabled())) {
                var E = u.SignInOffline(L, null);
                if (e("div.signIn span.errorText").remove(), e(".headerMask").hide(), e("#mainNav").show(), S = "", E) return
            } else w = i.hasProfileListAsync(), w.always(function (e) {
                _ = t.errorCode(e ? "6000.80" : "6000.87");
                var n = i.getErrorWithCode(_);
                S = n.Message, k = !0, i.showGenericFatalError(_, S, i.getError("ErrorSupport"), n.CodeDescription)
            })
        } else S = i.getError("SteamAccountLink" == v ? "SteamAlreadyLinked" : "RockstarAlreadyLinked"), o.trackEvent(o.category.profile, o.action.profile_sign_in_failure_steam_already_linked);
        e.when(w).always(function () {
            if (r.isSteam() && t.isSteamV2Enabled() && "SteamAPI" == v && "AuthenticationFailed" == _) return void i.CallGameMethod("RGSC_REFRESH_STEAM_TICKET", null, "RGSC_REFRESH_STEAM_TICKET_DEMO");
            r.isSteam() && l && ("SteamAPI" == v || "DoesNotExist" == _ && "PlayerAccount" == v) ? (i.requestUiState(!0), setTimeout(function () {
                t.pubsub.trigger("datafunctions:ShowSignin", i.isOnline(), !1)
            }, 0)) : k || (i.requestUiState(!0), t.pubsub.once("RGSC_JS_UI_STATE_RESPONSE", function () {
                t.pubsub.trigger("datafunctions:ShowSignin", i.isOnline(), !0);
                var n = e("div.signIn");
                n.find(".errorText").remove(), n.find(".SignInError").after('<span class="' + C + '">' + S + "</span>")
            })), u.notifyGameSignInFailed(_, v);
            try {
                e("div.buttonSignInWrapper span").spinner("stop").hide()
            } catch (n) {
            }
            e("div.buttonSignInWrapper span").hide(), e('a.buttonSignIn[disabled="disabled"]').removeAttr("disabled")
        })
    }, u.GetUserBannedText = function () {
        var e = i.getText("TermsofService", "Register"), t = i.getText("UserBanned", "HomeSignin");
        return t.replace("[Terms of Service]", '<a href="http://www.rockstargames.com/legal" class="RGSCLoadExt">' + e + "</a>")
    }, u.GetUserNetworks = function (n, a, r, s) {
        t.WriteDebugLog("GetUserNetworks", "rockstarId", n);
        var o = {},
            l = '{ "env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"rockstarId":"' + n + '","email":"' + a + '","nickname":"' + r + '" }',
            c = i.GetAuthHeaderAsync();
        return c.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/getusernetworks"),
                services: ["accounts"],
                headers: n,
                data: l,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                requestDescription: "UserNetworks",
                async: !0,
                fatalError: u.ShowErrorModal,
                success: function (e) {
                    var t = s;
                    "function" == typeof t && (o = t(e))
                }
            })
        }), o
    }, u.UpdateLinkedAccounts = function (n, a, r) {
        var s = i.GetAuthHeaderAsync();
        s.done(function (i) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/updatelinkedaccounts"),
                services: ["accounts"],
                headers: i,
                data: JSON.stringify({NetworkName: n, LinkSuccess: a}),
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                requestDescription: "UpdateLinkedAccounts",
                fatalError: u.ShowErrorModal,
                success: function (e) {
                    var t = r;
                    "function" == typeof t && t(e)
                }
            })
        })
    }, u.SetPrivacyOptions = function (n) {
        t.WriteDebugLog("SetPrivacyOptions", "$data", n);
        var a = e("#privacySettingsForm"),
            r = a.find('input:radio[name="sc"][value="' + n.find("ProfileVisibility").text() + '"]').closest("a");
        r.closest("span.toggleOptions").children("a").removeClass("selected"), r.addClass("selected");
        var s = a.find('input:radio[name="profile_location"][value="' + n.find("ProfileLocation").text() + '"]').closest("a");
        s.closest("span.toggleOptions").children("a").removeClass("selected"), s.addClass("selected");
        var o = a.find('input:radio[name="gameplay_visibility"][value="' + n.find("GamePlayVisibility").text() + '"]').closest("a");
        o.closest("span.toggleOptions").children("a").removeClass("selected"), o.addClass("selected");
        var l = e("#gameSettings"),
            c = l.find('input:radio[name="presencevisibility"][value="' + n.find("PresenceVisibility").text() + '"]').closest("a");
        c.closest("span.toggleOptions").children("a").removeClass("selected"), c.addClass("selected"), l.addClass("loaded"), n = null, i.removeLoading("editProfile")
    }, u.SetAutoSignInValues = function (t) {
        var n = i.getText("Yes", "HomeSignin"), a = i.getText("No", "HomeSignin");
        e("#editAutoSignInInput").prop("checked", t), e("#editAutoSignInDisplay").text(t ? n : a)
    }, u.SignInLocal = function (n, a, r) {
        if (t.WriteDebugLog("SignInLocal", "rockstarId, Nickname", n + "," + a), null != n || null != a) if ((void 0 == n || "undefined" == n) && (n = ""), (void 0 == a || "undefined" == a) && (a = ""), n.length > 0 || a.length > 0) {
            var s = {Nickname: a, RockstarId: n.toString(), Local: !0, AutoSignIn: !0, SignedOnline: !1, SignedIn: !0};
            r && (s.CallbackData = 1), h.account = new u.Account(null, null, null, null, null, a, n, null, !0, void 0), u.signInToGame(s)
        } else i.showMessagePanel(i.getError("ServerError"), "", i.getError("SorryTry")), e("#buttonCancelMessage").hide(), e("#messagePanel .closeCurrentPanel").unbind("click").click(function () {
            i.requestUiState(!1)
        });
        t.HideInvisibleMask(), e("#createProfileOffline .nickvalid").remove()
    }, u.SignInOffline = function (n, a) {
        t.WriteDebugLog("SignInOffline", "rockstarId, profileList", n + "," + a);
        var r = !1, s = u.GetSelectedProfile(n, a), o = {}, l = !0;
        if (t.WriteDebugLog("SignInOffline", "selectedProfile, selectedProfile.rockstarId, selectedProfile.Nickname", JSON.stringify(s) + "," + s.RockstarId + "," + s.Nickname), !s || void 0 == s.Email && void 0 == s.Nickname) {
            e('a.btn[disabled="disabled"]:first').removeAttr("disabled");
            try {
                e("div.buttonSignInWrapper").find("span").spinner("stop").hide()
            } catch (c) {
            }
            var d = e("#buttonSignInProfile");
            void 0 != d.attr("title") && d.text(d.attr("title")), s && void 0 != s.Error ? e("#lblSignInErrorProfile").after('<span class="errorText">' + s.Error + "</span>") : (l = i.hasProfileListAsync(), l.always(function (t) {
                var n = t ? "OfflineSigninError" : "OfflineSigninErrorNoProfiles";
                e("#lblSignInErrorProfile").after('<span class="errorText">' + i.getText(n, "HomeSignin") + "</span>")
            })), e.when(l).always(function () {
                u.ShowLoginPage()
            })
        } else {
            var f = e("#selectProfile.active").length;
            if (t.WriteDebugLog("dataFn.SignInOffline", "isSignInPage", f), f || 0 == s.AutoSignIn) {
                var p = "Profile";
                e("#selectProfile").find(".selectSignIn").length > 0 && (p = "");
                var m = e("#autoSignIn" + p).is(":checked") ? !0 : !1;
                n = n || s.RockstarId || "", n = "" == n ? 0 : n, o = {
                    SaveEmail: !0,
                    SavePassword: !0,
                    AutoSignIn: m,
                    RockstarId: n.toString(),
                    Local: !1,
                    SignedOnline: !1,
                    SignedIn: !0
                }, o.Email = "undefined" != typeof s.Email ? s.Email : e("#signInEmail" + p).val(), o.Password = "undefined" != typeof s.Password ? s.Password : e("#signInPassword" + p).val(), "undefined" != typeof s.Nickname && s.Nickname.length && (o.Nickname = s.Nickname)
            } else o = {
                RockstarId: n.toString(),
                Email: s.Email,
                Password: s.Password,
                Local: !1,
                AutoSignIn: !0,
                SignedOnline: !1,
                SignedIn: !0
            };
            t.WriteDebugLog("SignInOffline", "final jsonString", JSON.stringify(o)), h.account = new u.Account(s.AvatarUrl, null, null, s.Email, null, s.Nickname, n, null, !0, void 0), i.incrementOfflineSigninCount(), u.signInToGame(o), e("#mainNav").show(), i.setOffline(!0), r = !0
        }
        return e.when(l).always(function () {
            t.HideInvisibleMask()
        }), r
    }, u.notifyGameSignInFailed = function (e, t) {
        i.CallGameMethod("RGSC_SIGN_IN", {Error: {ErrorCode: e, ErrorCodeEx: t}}, "RGSC_JS_FINISH_SIGN_IN")
    }, u.noteSignInRequest = function () {
        h.signInRequested || (h.signInRequested = !0, setTimeout(u.clearSignInRequestNote, 8e3))
    }, u.clearSignInRequestNote = function () {
        delete h.signInRequested
    }, u.signInToGame = function (e) {
        u.noteSignInRequest();
        var t = h.areSigninCredsFromGame ? 2 : 0;
        e.CallbackData = parseInt(e.CallbackData, 10) | t, i.CallGameMethod("RGSC_SIGN_IN", e, "RGSC_SIGN_IN_DEMO", "RGSC_JS_FINISH_SIGN_IN")
    }, u.GetSelectedProfile = function (t, n) {
        if (null != n) return "object" != typeof n ? e.parseJSON(n) : n;
        var a = i.getProfileList();
        if (null != t) return u.GetProfile(t, a);
        var r = e("#signInEmail").val(), s = e("#signInPassword").val();
        return void 0 != r && (r = r.toLowerCase()), e.each(a.Profiles, function (e, n) {
            return s == n.Password && (void 0 != n.Email && n.Email.toLowerCase() == r || void 0 != n.Nickname && n.Nickname.toLowerCase() == r) ? void (t = n.RockstarId) : void 0
        }), null != t ? u.GetProfile(t, a, r) : {}
    }, u.ShowLoginPage = function () {
        var n = e("#selectProfile.active").length;
        i.isScuiVisible() ? n || i.clearActivePanel(function () {
            t.pubsub.trigger("datafunctions:ShowSignin", i.isOnline(), !0)
        }) : (e("div.panel.active").removeClass("active"), i.requestUiState(!0), n || i.clearActivePanel(function () {
            t.pubsub.trigger("datafunctions:ShowSignin", i.isOnline(), !0)
        }))
    }, u.CreateAccount = function () {
        u.CreateAccountJS()
    }, u.CreateAccountJS = function () {
        var n = e("#createAccount, #termsAgree");
        t.ShowInvisibleMask(n, i.getError("Loading")), delete h.areSigninCredsFromGame;
        var a = "";
        e("#signUpCountry").length && (a = e("#signUpCountry").val());
        var r = void 0 != e("#recaptcha_challenge_field").val() ? e("#recaptcha_challenge_field").val() : "",
            s = void 0 != e("#recaptcha_response_field").val() ? e("#recaptcha_response_field").val() : "";
        e("#recaptcha_challenge_field").val("");
        var o = t.formatDob(e("#yearOfBirth").val(), e("#monthOfBirth").val(), e("#dayOfBirth").val()),
            l = '{ "env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"platform":"' + h.platform + '", "RoSVersion":' + h.RosTitleVersion + ', "email":"' + e("#signUpEmail").val() + '", "password":"' + e("#signUpPassword").val() + '", "nickname":"' + e("#signUpNickname").val() + '","avatarUrl":"default.png","countryCode":"' + a + '","zipCode":"", "dob":"' + o + '", "gamePlatform":"' + h.gamePlatform + '", "authTicket":"' + h.steamAuthTicket + '", "recaptcha_challenge_field":"' + r + '", "recaptcha_response_field":"' + s + '"}';
        t.WriteDebugLog("CreateAccountJS", "options", l), e.ajax({
            type: "POST",
            headers: i.getCombinedSyncHeaders(e("#signUpNickname").val()),
            url: t.getApiUrl("/api/profile/createprofile"),
            services: ["accounts", "registration"],
            data: l,
            contentType: "application/json; charset=utf-8",
            accepts: {xml: "application/xml", text: "application/xml"},
            dataType: "text",
            cache: !1,
            success: u.OnSuccessCreateAccount,
            silentFail: !0,
            error: function (e, n, i) {
                t.WriteDebugLog("CreateAccountJS", "ERROR", i, t.logType.error, t.logController.profile), u.OnErrorCreateAccount(e, n, i)
            },
            complete: function () {
                t.HideInvisibleMask()
            }
        })
    }, u.OnSuccessCreateAccount = function (n, a, r) {
        {
            var s = e(n);
            s.find("Error")
        }
        e("#lblCreateAccountError").html("");
        var l = r.getResponseHeader("signupCaptcha");
        if (l && "1" == l && (h.showSignUpRecaptcha = !0), "false" == s.find("Status").text() || "0" == s.find("Status").text()) u.OnErrorCreateAccount(r, a, "", n); else {
            if (void 0 != s.find("RockstarId") && void 0 != s.find("RockstarId").eq(0)) {
                var c = s.find("RockstarId").eq(0).text();
                o.setUserId(c)
            }
            o.setCustomDimension(o.dimension.creationDate, (new Date).toISOString()), o.setCustomDimension(o.dimension.creationPath, o.getCreationPath(h.titleName)), o.trackPage("/CreateAccountSuccess"), i.CreateAccountSuccessSetup(!0);
            var d = t.formatDob(e("#yearOfBirth").val(), e("#monthOfBirth").val(), e("#dayOfBirth").val()),
                f = '{ "Email":"' + e("#signUpEmail").val() + '","Password":"' + e("#signUpPassword").val() + '","Nickname":"' + e("#signUpNickname").val() + '","DOB":"' + d + '","SaveEmail":false, "SavePassword":true, "AutoSignIn":false}';
            t.WriteDebugLog("OnSuccessCreateAccount", "jsonString", f);
            var p = e.parseJSON(f);
            u.OnSuccessSignIn(n, a, r, p)
        }
        e("#loginPanels").removeData("RetryCreateAccount")
    }, u.OnErrorCreateAccount = function (r, s, o, l) {
        t.WriteDebugLog("CreateAccountJS", "ERROR", o), t.WriteDebugLog("CreateAccountJS", "ERROR status", s), t.WriteDebugLog("CreateAccountJS", "ERROR responseText", r.responseText);
        var c = r.responseText;
        if (!e("#loginPanels").data("RetryCreateAccount") && void 0 != c && c.indexOf(t.errorCode("3003")) > -1) return e("#loginPanels").data("RetryCreateAccount", !0), void u.CreateAccountJS();
        var d, h, f;
        if ("success" === s) {
            var p = e(l);
            if (o = p.find("Error"), d = o.attr("Code"), f = o.attr("CodeEx"), h = o.attr("ErrorMessage"), void 0 != d && d.indexOf("captcha") > -1) return void (e("#signUpReCaptchaInputForm").is(":visible") ? (a.reload(), a.showError(d)) : a.InitReCaptcha(e("#signUpReCaptchaInput"), 24, e("#signUpReCaptchaContainer")));
            if (void 0 != d && "NotAllowed" === d && "Privilege" === f) d = t.errorCode("4001.38"); else {
                if (void 0 != d && d == t.errorCode("5003.4")) return n.handleUnderAgeError(), void e("#onlinePolicies").fadeOut(function () {
                    e("#termsTextContainer, #signUpReCaptchaContainer").hide(), e("#dob").fadeIn()
                });
                if ("NotAllowed" == d) {
                    var m = p.find("Error").attr("CodeEx");
                    "SteamAccountLink" == m ? d = t.errorCode("4001.49") : "RockstarAccountLink" == m && (d = t.errorCode("4001.81"))
                }
            }
        } else "timeout" == s && (d = t.errorCode("1001"));
        if ("undefined" == typeof d) {
            if ("undefined" != typeof c) {
                var g = e.xml2json(c);
                "undefined" != typeof g && (d = g.Message)
            }
            "undefined" == typeof d && (d = t.errorCode("1000.1"))
        }
        t.WriteDebugLog("OnErrorCreateAccount", "Error", d + "." + (f || "") + ": " + (h || ""), t.logType.error, t.logController.profile);
        var v = i.getErrorWithCode(d);
        i.showGenericFatalError(d, v.Message, v.SupportText, v.CodeDescription), i.CreateAccountSuccessSetup(!1), i.removeLoading("loginPanelsWrapper")
    }, u.GetAvatarSource = function (e, n, a) {
        var r = !0;
        32 == n && (r = !1);
        var s = i.CallGameMethod("RGSC_GET_AVATAR", '{ "AvatarUrl": "' + e + '", "LargeVersion": ' + r + " }", null);
        return 128 == n ? (a.error(function () {
            return i.isOffline() ? void a.attr("src", "ext/scui/images/avatars/128x128/default.png") : (a.attr("src", t.GetBase64AvatarSrc(s)), void a.unbind("error"))
        }), t.getAvatarUrl(e, 128)) : (a.error(function () {
            return i.isOffline() ? void a.attr("src", "ext/scui/images/avatars/default.png") : (a.attr("src", t.getAvatarUrl(e, n)), void a.unbind("error"))
        }), void 0 != s ? t.GetBase64AvatarSrc(s) : t.getAvatarUrl(e, n))
    }, u.LoadProfile = function () {
        t.WriteDebugLog("LoadProfile", "account.Nickname, account.RockstarId", h.account.Nickname + "," + h.account.RockstarId), h.account && (e("#signedInUser, #deleteProfileNickname, #headerLoginUser span.username").html(h.account.Nickname), null == h.account.AvatarUrl || "" == h.account.AvatarUrl || h.account.AvatarUrl.match(/blank.gif$/) || h.account.AvatarUrl.match(/default.png$/) ? (e("img.largeAvatar").attr("src", t.getAvatarUrl()), e("img.extraLargeAvatar").attr("src", t.getAvatarUrl("", 128)), e("img.smallAvatar").attr("src", t.getAvatarUrl("", 32))) : (e("img.largeAvatar").attr("src", u.GetAvatarSource(h.account.AvatarUrl, 64, e("img.largeAvatar"))), e("img.extraLargeAvatar").attr("src", u.GetAvatarSource(h.account.AvatarUrl, 128, e("img.extraLargeAvatar"))), e("img.smallAvatar").attr("src", u.GetAvatarSource(h.account.AvatarUrl, 32, e("img.smallAvatar")))), e("#editRockstarId").val(void 0 != h.account.RockstarId && null != h.account.RockstarId && h.account.RockstarId.length > 0 ? h.account.RockstarId : void 0 != h.account.Nickname && null != h.account.Nickname && h.account.Nickname.length > 0 ? h.account.Nickname : ""), i.isOnline() && !h.account.Local && (e("#editEmail").val(h.account.Email), e("#editEmail").attr("disabled") && e("#editEmail").next().hasClass("locked") && e("#editEmail").after('<span class="locked"></span>'), e("#editZip").val(h.account.ZipCode), 0 == e("#editCountry").find("option").length ? u.GetCountries("#signUpCountry, #editCountry", h.account.CountryCode) : e("#editCountry").val(h.account.CountryCode)))
    }, u.LoadGameProfilesAsync = function (t) {
        var n = new e.Deferred;
        return e("#selectProfile").hasClass("active") ? e.when(u.LoadGameProfiles(t)).then(function (e) {
            n.resolve(e)
        }, n.reject) : i.clearActivePanel(function () {
            i.setUpLoadingPanel("#selectProfile", function () {
                e.when(u.LoadGameProfiles(t)).then(function (e) {
                    n.resolve(e)
                }, n.reject)
            })
        }), n.promise()
    }, u.LoadGameProfiles = function (n) {
        t.WriteDebugLog("LoadGameProfiles", "profileList", n);
        var a, r = new e.Deferred;
        return null == n ? a = i.getProfileListAsync() : (n = e.parseJSON(n), h.profiles = n, a = n), e.when(a).done(function (n) {
            if (n.NumProfiles > 0) {
                var a = 0, s = [], o = i.getText("LastVisit", "HomeSignin");
                e.each(n.Profiles, function (e, n) {
                    try {
                        t.WriteDebugLog("LoadGameProfiles", "Id,Nick", n.RockstarId + "," + n.Nickname);
                        var i = "info", r = "";
                        a++, void 0 == n.Local && (n.Local = !1), n.Local && (i += " local", "0" == n.RockstarId && "1969-12-31" == t.ConvertDateString(n.LastSignInTime) && a--);
                        var l = void 0 != n.RockstarId ? n.RockstarId : "";
                        s.push('<a class="profileButton gold" href="#" data-userid="' + l + '" data-local="' + n.Local + '" data-nick="' + n.Nickname + '"><img id="imgProfile' + e + '" width="32" height="32" class="avatarImg" alt="' + n.Nickname + '" src="' + r + '"/><span class="text ' + i + '"><h5 class="profilenickname">' + n.Nickname + '</h5><span class="subText">' + o + " " + t.ConvertDateString(n.LastSignInTime) + "</span></span></a>"), t.WriteDebugLog("LoadGameProfiles", "RemEmail,RemPW,Auto", n.SaveEmail + "," + n.SavePassword + "," + n.AutoSignIn)
                    } catch (c) {
                        t.WriteDebugLog("LoadGameProfiles", "ERROR LOADING PROFILE nick", n.Nickname, t.logType.error, t.logController.profile)
                    }
                }), e("#profileCount").html(a), e("#existingProfiles").html(s.join("")), e.each(n.Profiles, function (n, i) {
                    i.AvatarUrl && !i.AvatarUrl.match(/default.png$/) ? e("#imgProfile" + n).attr("src", u.GetAvatarSource(i.AvatarUrl, 32, e("#imgProfile" + n))) : e("#imgProfile" + n).attr("src", t.getAvatarUrl("", 32))
                }), i.resetScrollbar("#existingProfilesContainer, #profileList")
            }
            r.resolve()
        }), a.fail(function () {
            r.reject()
        }), r.promise()
    }, u.SelectProfile = function (n, a, r, s) {
        if (t.WriteDebugLog("SelectProfile", "rockstarId, local, profileList, nickname", n + "," + a + "," + r + "," + s), e("#existingProfiles").find("a.profileButton").removeClass("selected").end().find("[data-userid='" + n + "']").addClass("selected"), a) u.SignInLocal(n, s, !1); else {
            var o = {};
            if (o = null != r ? e.parseJSON(r) : u.GetProfile(n, h.profiles)) if (void 0 != o.Nickname) {
                t.WriteDebugLog("SelectProfile", "Loading profile nickname, email", o.Nickname + "," + o.Email);
                var l = e("#selectProfile").find(".selectSignIn");
                if (t.WriteDebugLog("SelectProfile", "selectSignInButton.length", l.length), l.length > 0) {
                    var c = t.getAvatarUrl();
                    if (null != o.AvatarUrl) {
                        var d = null;
                        try {
                            d = i.CallGameMethod("RGSC_GET_AVATAR", '{ "AvatarUrl": "' + o.AvatarUrl + '", "LargeVersion": true }', null), c = t.GetBase64AvatarSrc(d)
                        } catch (f) {
                            t.WriteDebugLog("SelectProfile", "RGSC_GET_AVATAR", "Error: " + f)
                        } finally {
                            (null == d || "" == d) && (c = t.getAvatarUrl(o.AvatarUrl.replace("\\", "/")))
                        }
                    }
                    t.WriteDebugLog("SelectProfile", "profileAvatarUrl", c);
                    var p = e("#signIn");
                    p.find("img.largeAvatar").attr("src", t.getAvatarUrl(h.account.AvatarUrl, 128)), t.WriteDebugLog("SelectProfile", "selectSignInButton.click()", ""), p.find("input[name=signInOptions]").removeAttr("checked"), p.find("#signInEmail, #signInPassword").val(""), p.find("#signInEmail").val(void 0 != o.Email ? o.Email : ""), o.SavePassword || o.AutoSignIn ? p.find("#signInPassword").val(o.Password && void 0 != o.Password ? o.Password : "") : p.find("#signInPasswordProfile").val(""), o.AutoSignIn && p.find("#autoSignIn").attr("checked", !0), i.clearActivePanel(), p.show().addClass("active"), o.AutoSignIn ? (t.WriteDebugLog("SelectProfile", "buttonSignIn.click()", ""), p.find("#buttonSignIn").click()) : p.find("#buttonSignIn").focus()
                } else {
                    (i.isOffline() || !e("#signInProfile").is(":visible")) && (i.forceLoginForm(), t.pubsub.trigger("setupEnv:showPageSignIn"));
                    var m = e("#selectProfile");
                    m.find("input[name=signInOptionsProfile]").removeAttr("checked"), m.find("#signInEmailProfile").val(""), o.SavePassword || o.AutoSignIn ? (o.Email && m.find("#signInEmailProfile").val(o.Email), m.find("#signInPasswordProfile").val(o.Password ? o.Password : "")) : m.find("#signInPasswordProfile").val(""), o.AutoSignIn && m.find("#autoSignInProfile").attr("checked", !0), m.find("#buttonSignInProfile").focus()
                }
            } else t.WriteDebugLog("SelectProfile", "ERROR", "Profile not found"), i.showMessagePanel(i.getError("ServerError"), "", i.getError("SorryTry")), e("#buttonCancelMessage").hide(), e("#messagePanel .closeCurrentPanel").unbind("click").click(function () {
                i.requestUiState(!1)
            })
        }
    }, u.GetProfile = function (n, a, r) {
        t.WriteDebugLog("dataFn.GetProfile", "rockstarId, nickEmail", n + "," + r);
        var s = {}, o = null != n && void 0 != n && "undefined" != n, l = null != r && void 0 != r && "undefined" != r;
        if (o || l) {
            if (a = null == a ? o ? i.CallGameMethod("RGSC_GET_PROFILE_LIST_FILTERED", '{ "RockstarId":"' + n + '" }', "RGSC_GET_PROFILE_LIST", "RGSC_GET_PROFILE_LIST_DEMO") : i.getProfileList() : a, t.WriteDebugLog("dataFn.GetProfile", "profileList", "object" == typeof a ? "stringify: " + JSON.stringify(a) : a), a) {
                var c = {};
                a.NumProfiles > 0 && (l && (r = r.toLowerCase()), e.each(a.Profiles, function (e, i) {
                    return n && i.RockstarId == n || r && (void 0 != i.Email && i.Email.toLowerCase() == r || void 0 != i.Nickname && i.Nickname.toLowerCase() == r) ? (t.WriteDebugLog("dataFn.GetProfile", "nickname", i.Nickname), c = i, !1) : void 0
                })), void 0 != c.RockstarId ? s = c : s.Error = i.getErrorWithCode(t.errorCode("6000.80")).Message, c = null
            }
        } else t.WriteDebugLog("dataFn.GetProfile", "ERROR", "Invalid rockstarId", t.logType.error, t.logController.profile), i.showMessagePanel(i.getError("ServerError"), "", i.getError("SorryTry")), e("#buttonCancelMessage").hide(), e("#messagePanel .closeCurrentPanel").unbind("click").click(function () {
            i.requestUiState(!1)
        });
        return s
    }, u.GetLocalProfileAsync = function (n, a) {
        var r = new e.Deferred;
        if (t.WriteDebugLog("dataFn.GetLocalProfileAsync", "nickname", n), null != n && "undefined" != typeof n && "undefined" !== n) {
            var s;
            s = null == a ? i.getProfileListAsync() : JSON.parse(a);
            var o = n.toLowerCase();
            e.when(s).done(function (e) {
                var i;
                e && e.NumProfiles > 0 ? (i = _.find(e.Profiles, function (e) {
                    return e.Local && e.Nickname.toLowerCase() === o
                }), "undefined" != typeof i && t.WriteDebugLog("dataFn.GetLocalProfileAsync", "nickname", i.Nickname)) : t.WriteDebugLog("dataFn.GetLocalProfileAsync", "ProfileNotFound", n), r.resolve(i)
            }), s.fail(function () {
                r.resolve()
            })
        } else i.showMessagePanel(i.getError("ServerError"), "", i.getError("SorryTry")), e("#buttonCancelMessage").hide(), e("#messagePanel").find(".closeCurrentPanel").off("click").on("click", function (e) {
            e.preventDefault(), i.requestUiState(!1)
        }), r.resolve();
        return r.promise()
    }, u.DeleteProfile = function (n) {
        if (t.WriteDebugLog("DeleteProfile", "rockstarId", n), "undefined" == typeof n || "undefined" === n || null == n) e("#lblDeleteProfileError").html("There was a problem deleting this profile."), e("#buttonDeleteProfileYes").removeAttr("disabled"), e("#deleteProfile").find(".panelButtonWrapper span").hide(), t.WriteDebugLog("DeleteProfile", "rockstarId invalid", "", t.logType.error, t.logController.profile); else try {
            e("#deleteProfile").find(".panelButtonWrapper span").css("display", "inline-block"), i.CallGameMethod("RGSC_SIGN_OUT", null, "RGSC_SIGN_OUT_DEMO"), setTimeout(function () {
                var t = !0;
                "" === n && (t = u.GetLocalProfileAsync(h.account.Nickname, null), e.when(t).done(function (e) {
                    e && (h.account = new u.Account(null, null, null, null, null, e.Nickname, e.RockstarId, null, !0, e.NickEditable, e.Validated), n = e.RockstarId)
                })), e.when(t).done(function () {
                    i.setUpSignedInOptions(!1, i.isLocal()), "default0" == n && (n = "0"), i.CallGameMethod("RGSC_DELETE_PROFILE", '{ "rockstarId": "' + n + '" }', "RGSC_DELETE_PROFILE_DEMO"), setTimeout(function () {
                        e("#buttonDeleteProfileYes").removeAttr("disabled"), e("#deleteProfile").find(".panelButtonWrapper").find("span").hide(), e("#headerLoginButton").click()
                    }, 500)
                })
            }, 500)
        } catch (a) {
            e("#lblDeleteProfileError").html("There was a problem deleting this profile."), e("#buttonDeleteProfileYes").removeAttr("disabled"), e("#deleteProfile").find(".panelButtonWrapper span").hide(), t.WriteDebugLog("dataFn.DeleteProfile", "ERROR", a.message, t.logType.error, t.logController.profile)
        }
    }, u.GetTweets = function () {
        if (!i.LandingFriendsHaveBeenRetrieved()) {
            if (e("#landingFriends").find("h3").hide(), e("#homefeedPanel").find(".contentWrapper").show(), e("#homefeedPanel").find(".offlineMode:visible").length) return void i.removeLoading("homefeedPanel");
            var n = e("#tweetFeed");
            n.show(), n.length > 0 && (0 == n.html().length || n.find(".jta-error").length > 0) ? (t.WriteDebugLog("GetTweets", "", ""), n.html(""), n.jTweetsAnywhere({
                username: "RockstarGames",
                count: 8,
                showTweetFeed: {
                    showProfileImages: !0,
                    showUserScreenNames: !0,
                    includeRetweets: !1,
                    paging: {mode: "none"},
                    completed: "GetTweetsCompleted"
                },
                loadingDecorator: function () {
                    var e = "";
                    return '<li class="jta-loading">' + e + "</li>"
                },
                errorDecorator: function () {
                    if (!i.isOffline()) {
                        var t = i.getError("TweetError");
                        return '<li class="jta-error">' + t + "</li>"
                    }
                    return e("#homefeedPanel .offlineMode").show(), ""
                },
                noDataDecorator: function () {
                    if (t.WriteDebugLog("GetTweets", "No Data", ""), !i.isOffline()) {
                        var n = i.getError("TweetError");
                        return '<li class="jta-nodata">' + n + "</li>"
                    }
                    return e("#homefeedPanel .offlineMode").show(), ""
                }
            })) : i.removeLoading("homefeedPanel")
        }
    }, u.GetTweetsCompleted = function () {
        if (t.WriteDebugLog("GetTweetsCompleted", "", ""), !i.LandingFriendsHaveBeenRetrieved()) {
            i.resetScrollbar("#homefeedPanel"), i.removeLoading("homefeedPanel");
            var n = e("#tweetFeed");
            if (0 == n.html().length) if (i.isOffline()) e("#homefeedPanel .offlineMode").show(); else {
                var a = i.getError("TweetError");
                n.html("<li class='jta-nodata'>" + a + "</li>")
            } else {
                var r = n.find("a");
                "onlive" != h.gamePlatform && "pcros" == h.platform && r.addClass("jta-tweet-link-enabled RGSCLoadExt")
            }
        }
    }, u.CheckNickname = function (e) {
        u.CheckNicknameJS(e)
    }, u.CheckNicknameJS = function (e) {
        n.CheckNickname(e)
    }, u.CheckEmail = function (e) {
        u.CheckEmailJS(e)
    }, u.CheckEmailJS = function (e) {
        t.WriteDebugLog("CheckEmailJS", "control", e), n.CheckEmail(e)
    }, u.CheckPasswordJS = function (i) {
        if (t.WriteDebugLog("CheckPasswordJS", "control", i), h.RosTitleVersion > 8 && (e("#" + i + "Checked").val() != e("#" + i).val() || 0 == e("div.active span.pwvalid").length && 0 == e("div.active span.pwerror").length) && (e("#" + i).parents().children("span.pwvalid").remove(), n.PasswordValidation(i))) {
            var a = '{ "password":"' + e("#" + i).val() + '","env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + " }";
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/checkpassword"),
                services: ["accounts", "registration"],
                data: a,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                requestDescription: "CheckPassword",
                success: function (t, a) {
                    "success" == a && n.PasswordInvalid(i, "false" == e(t).find("Status").text())
                }
            })
        }
    }, u.ResetPassword = function (e) {
        u.ResetPasswordJS(e)
    }, u.ResetPasswordJS = function (n) {
        var i = e(".troubleSigningIn .resetPasswordForm .errors");
        i.html(""), t.WriteDebugLog("ResetPasswordJS", "email", e("#signInEmailRetrieve" + n).val());
        var a = '{ "env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"email":"' + e("#signInEmailRetrieve" + n).val() + '" }';
        e.ajax({
            type: "POST",
            url: t.getApiUrl("/api/profile/resetpassword"),
            services: ["accounts"],
            data: a,
            contentType: "application/json; charset=utf-8",
            dataType: "xml",
            cache: !1,
            requestDescription: "ResetPassword",
            fatalError: u.ShowErrorModal,
            success: function (t) {
                "true" == e(t).find("Status").text() && (e(".active .resetSuccessMsg").show(), setTimeout(function () {
                    e(".active .resetSuccessMsg").hide(), e(".formSignIn, #buttonSignInProfile").show()
                }, 3e3)), e('a.btn[disabled="disabled"]:first').removeAttr("disabled"), e("#resetSpinner").spinner("stop").fadeOut(function () {
                    var t = e("#buttonSignInPasswordReset");
                    t.removeClass("disabled"), t.fadeIn()
                })
            }
        })
    }, u.UpdatePassword = function () {
        u.UpdatePasswordJS()
    }, u.UpdatePasswordJS = function () {
        var n = e("#editNewPassword").val();
        if (o.trackEvent(o.category.settings, o.action.settings_profile_edit_password), h.RosTitleVersion < 11) return u.UpdateProfile();
        if (n) {
            t.WriteDebugLog("UpdatePasswordJS", "UpdatePassword", "");
            var a = '{ "env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"userPassword":"' + e("#editOldPassword").val() + '","newUserPassword":"' + n + '","editConfNewPassword":"' + e("#editConfNewPassword").val() + '" }',
                r = i.GetAuthHeaderAsync();
            r.done(function (n) {
                e.ajax({
                    type: "POST",
                    url: t.getApiUrl("/api/profile/UpdatePassword"),
                    services: ["accounts"],
                    headers: n,
                    data: a,
                    contentType: "application/json; charset=utf-8",
                    dataType: "xml",
                    cache: !1,
                    fatalError: u.OnErrorUpdatePassword,
                    requestDescription: "UpdatePassword",
                    success: u.OnSuccessUpdatePassword,
                    complete: function (e, t) {
                        if (i.removeAttr("#editPasswordBtn", "disabled"), "success" == t) u.updateAndCloseEditPassword(); else {
                            var n = jQuery.xml2json(e.responseText), a = n.Message;
                            (void 0 == a || "" == a) && u.updateAndCloseEditPassword()
                        }
                    }
                })
            })
        }
    }, u.UpdateEmail = function () {
        t.WriteDebugLog("UpdateEmail", "UpdateEmail", "");
        var n = e("#emailForm .errors");
        if (n.html(""), o.trackEvent(o.category.settings, o.action.settings_profile_edit_email), h.RosTitleVersion < 11) return u.UpdateProfile();
        var a = {Email: e("#editEmail").val(), Password: e("#editEmailPassword").val()}, r = i.GetAuthHeaderAsync();
        r.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/UpdateEmail"),
                services: ["accounts"],
                headers: n,
                data: JSON.stringify(a),
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: u.UpdateEmailFatalError,
                requestDescription: "UpdateEmail",
                success: u.OnSuccessUpdateEmail,
                complete: function (t, n) {
                    if (i.removeAttr("#editEmailBtn", "disabled"), "success" == n && "true" == e(t).find("Status").text()) {
                        var a = e("#editProfile").find("#editEmail").val();
                        u.updateAndCloseEditEmail(a)
                    } else {
                        var r = e(t.responseText).find("Error").attr("ErrorMessage");
                        (void 0 == r || "" == r) && (u.updateAndCloseEditEmail(h.account.Email), e("#editEmailPassword").val(""), e("#editEmail").val(h.account.Email))
                    }
                }
            })
        })
    }, u.UpdateEmailFatalError = function (e, n, i, a, r) {
        return e === t.errorCode("4001.11") ? (n = "", r = "", u.ShowFeatureDisabledModal(e, n, i, a, r)) : u.ShowErrorModal(e, n, i, a, r)
    }, u.ResendValidation = function () {
        t.WriteDebugLog("ResendValidation", "ResendValidation", "");
        var n, a, r = {};
        h.RosTitleVersion < 11 ? (n = t.getApiUrl("/api/profile/ResendValidationLan"), r = {Nickname: h.account.Nickname}, a = i.GetAuthHeaderAsyncV8()) : (n = t.getApiUrl("/api/profile/ResendValidation"), a = i.GetAuthHeaderAsync()), a.done(function (t) {
            h.RosTitleVersion < 11 && (t = i.appendLanAuthHeader(t)), e.ajax({
                data: JSON.stringify(r),
                type: "POST",
                url: n,
                services: ["accounts"],
                headers: t,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: u.ShowErrorModal,
                requestDescription: "ResendValidation",
                success: u.OnSuccessResendValidation,
                complete: function () {
                    i.removeAttr("#validateEmail", "disabled")
                }
            })
        })
    }, u.OnSuccessResendValidation = function (t, n) {
        "success" == n && "true" == e(t).find("Status").text() && u.updateAndCloseEditEmail()
    }, u.UpdateNickname = function () {
        t.WriteDebugLog("UpdateNickname", "UpdateNickname", "");
        var n = e("#nameForm .errors");
        if (n.html(""), o.trackEvent(o.category.settings, o.action.settings_profile_edit_nickname), h.RosTitleVersion < 11) return u.UpdateProfile();
        var a = {Nickname: e("#editName").val()}, r = i.GetAuthHeaderAsync();
        r.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/UpdateNickname"),
                services: ["accounts"],
                headers: n,
                data: JSON.stringify(a),
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: u.ShowErrorModal,
                requestDescription: "UpdateNickname",
                success: u.OnSuccessUpdateNickname
            })
        })
    }, u.UpdateCountry = function (n) {
        t.WriteDebugLog("UpdateCountry", "UpdateCountry", ""), t.ShowInvisibleMask(e("#submitDOB"), i.getError("Loading"));
        var a = e("#countryForm .errors");
        if (a.html(""), o.trackEvent(o.category.settings, o.action.settings_profile_edit_country), h.RosTitleVersion < 11) return u.UpdateProfile();
        var r = {CountryCode: n}, s = i.GetAuthHeaderAsync();
        s.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/UpdateCountry"),
                services: ["accounts"],
                headers: n,
                data: JSON.stringify(r),
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: u.ShowErrorModal,
                requestDescription: "UpdateCountry",
                success: u.OnSuccessUpdateCountry,
                complete: function (n, i) {
                    e("#editCountryBtn").removeAttr("disabled");
                    var a = "success" == i ? e("#editProfile").find("#editCountry option:selected").text() : e('#editCountry option[value="' + h.account.CountryCode + '"]').text();
                    u.updateAndCloseEditCountry(a), t.HideInvisibleMask()
                }
            })
        })
    }, u.UpdateAvatar = function () {
        t.WriteDebugLog("UpdateAvatar", "UpdateAvatar", "");
        var n = e(".editSelectedAvatar .errors");
        if (n.html(""), o.trackEvent(o.category.settings, o.action.settings_change_avatar), h.RosTitleVersion < 11) return u.UpdateProfile();
        i.setUpLoading("#editProfile");
        var a = e("#imgEditSelectedAvatar").attr("src"),
            r = {AvatarUrl: a.match(/default.png$/) ? "" : t.getLastStringSegment(a, "/", 2)},
            s = i.GetAuthHeaderAsync();
        s.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/UpdateAvatar"),
                services: ["accounts"],
                headers: n,
                data: JSON.stringify(r),
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: u.ShowErrorModal,
                requestDescription: "UpdateAvatar",
                success: u.OnSuccessUpdateAvatar
            })
        })
    }, u.UpdateAutoSignIn = function () {
        t.WriteDebugLog("UpdateAutoSignIn", "UpdateAutoSignIn"), o.trackEvent(o.category.settings, o.action.settings_profile_edit_auto_sign_in);
        var n = e("#editProfile"), a = n.find("#editAutoSignInInput").is(":checked");
        h.account.AutoSignIn = a;
        var r = {AutosignIn: a};
        u.updateAndCloseEditAutoSignIn(a), i.CallGameMethod("RGSC_MODIFY_PROFILE", JSON.stringify(r), "RGSC_JS_FINISH_MODIFY_PROFILE")
    }, u.updateAndCloseEditAutoSignIn = function (t) {
        u.SetAutoSignInValues(t), e("#editProfile").find(".editAutoSignIn").toggle()
    }, u.updateAndCloseHideNotifications = function () {
        t.WriteDebugLog("UpdateHideNotifications", "UpdateHideNotifications"), o.trackEvent(o.category.settings, o.action.settings_profile_edit_hide_notifications);
        var n = e("#editProfile"), i = n.find("#editHideNotificationsInput").is(":checked");
        localStorage.setItem("hideNotifications", i), u.SetNotificationVisibility(i), e("#editProfile").find(".editHideNotifications").toggle()
    }, u.SetNotificationVisibility = function (t) {
        var n = i.getText("Yes", "HomeSignin"), a = i.getText("No", "HomeSignin");
        e("#editHideNotificationsInput").prop("checked", t), e("#editHideNotificationsDisplay").text(t ? n : a)
    }, u.UpdateProfile = function () {
        u.UpdateProfileJS()
    }, u.UpdateProfileJS = function () {
        t.WriteDebugLog("UpdateProfile()JS", "", "");
        var n = i.GetAuthHeaderAsyncV8();
        n.done(function (n) {
            var a = e("#editProfile");
            a.find("#lblEditProfileError").html("");
            var r, s = e("#imgEditSelectedAvatar").attr("src");
            r = !e("#imgEditSelectedAvatar").length || -1 != s.indexOf("base64") || s.match(/default.png$/) ? "" : t.getLastStringSegment(s, "/", 2);
            var o = "", l = "", c = "", d = "", f = "", p = "", m = "";
            if (a.length) {
                if (a.find("#dk_container_editCountry:visible").length && (o = a.find("#editCountry").val()), a.find("#editOldPassword:visible").length && (c = h.account.Email, d = a.find("#editOldPassword").val(), p = a.find("#editNewPassword").val()), a.find("#editEmail:visible").length) {
                    if (c = h.account.Email, l = a.find("#editEmail").val(), l == c) return u.updateAndCloseEditEmail(c);
                    d = a.find("#editEmailPassword").val()
                }
                a.find("#editName:visible").length && (f = a.find("#editName").val())
            }
            e("#monthOfBirth:visible").length && (m = t.formatDob(e("#yearOfBirth").val(), e("#monthOfBirth").val(), e("#dayOfBirth").val()));
            var g = '{ "avatarUrl":"' + r + '","countryCode":"' + o + '","dob":"' + m + '","email":"' + l + '","oldEmail":"' + c + '","nickname":"' + f + '","password":"' + p + '","oldPassword":"' + d + '"}';
            t.WriteDebugLog("UpdateProfile()", "options", g), e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/UpdateAccount"),
                headers: n,
                data: g,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                requestDescription: "UpdateProfile",
                fatalError: u.UpdateProfileError,
                success: u.OnSuccessUpdateProfile,
                complete: function () {
                    i.removeAttr("#editProfileContainer .btn", "disabled"), h.RosTitleVersion < 11 && e("#editProfile").is(".active.avatar") && e("#myProfileLink").click()
                }
            })
        })
    }, u.UpdateProfileError = function (n, i, a, r, s) {
        n == t.errorCode("6001.11") && (e(".emailvalid").remove(), e("#editEmail").after('<span class="error"></span>')), u.ShowErrorModal(n, i, a, r, s)
    }, u.OnSuccessUpdateNickname = function (t, n) {
        var a = e("#editProfile");
        if ("success" == n && "true" == e(t).find("Status").text()) {
            var r = a.find("#editName").val();
            h.account.Nickname = r, h.account.NickEditable = !1;
            var s = {NickName: r};
            u.updateAndCloseEditNickname(r), i.CallGameMethod("RGSC_MODIFY_PROFILE", JSON.stringify(s), "RGSC_JS_FINISH_MODIFY_PROFILE")
        } else u.updateNicknameFailure(t)
    }, u.updateAndCloseEditNickname = function (t) {
        e("#editNameDisplay").text(t), e("#editProfile").find(".editName").toggle();
        var n = e("#nameForm");
        n.find(".buttons").hide(), n.find("#editName").prop("readonly", !0);
        var a = i.getText("NickNotEdit", "Settings");
        n.find(".help-inline").html(a), n.find(".nickvalid").remove()
    }, u.updateNicknameFailure = function (n) {
        var a = e("#editProfile");
        a.find("#editName").after('<span class="error"></span>'), a.find("#nameForm .errors").append('<span class="errorText">' + i.getError("NickExists") + "</span>"), t.WriteDebugLog("dataFn.updateNicknameFailure", "ERROR", e(n).find("Error").text())
    }, u.OnErrorUpdatePassword = function (n, a, r, s, o) {
        if (n == t.errorCode("5005")) {
            var l = e("#editProfile"), c = i.getError("IncorrectPassword");
            l.find("#passwordForm .errors").append('<span class="errorText">' + c + "</span>")
        } else u.ShowErrorModal(n, a, r, s, o)
    }, u.OnSuccessUpdatePassword = function (t, n) {
        var a = e("#editProfile");
        if ("success" == n && "true" == e(t).find("Status").text()) {
            a.find("span.errorText, span.error, span.pwvalid").remove();
            var r = a.find("#editNewPassword").val();
            h.account.Password = r;
            var s = {Password: r};
            i.CallGameMethod("RGSC_MODIFY_PROFILE", JSON.stringify(s), "RGSC_JS_FINISH_MODIFY_PROFILE")
        } else u.updateEditPasswordFailure(t)
    }, u.updateAndCloseEditPassword = function () {
        e("span.pwvalid").remove(), e("#editOldPassword").val(""), e("#editNewPassword").val(""), e("#editConfNewPassword").val(""), e("#editProfile").find(".editPassword").toggle()
    }, u.updateEditPasswordFailure = function (n) {
        var a = e("#editProfile"), r = "";
        if ("nomatch" == n) a.find("#editConfNewPassword").after('<span class="error"></span>'), r = i.getError("ConfirmMatch"), t.WriteDebugLog("dataFn.updateEditPasswordFailure", "ERROR", r); else {
            var s = e(n).find("Error").attr("Code");
            switch (s) {
                case"PasswordOld":
                    a.find("#editOldPassword").after('<span class="error"></span>'), r = i.getError("IncorrectPassword");
                    break;
                case"Password":
                    a.find("#editNewPassword").after('<span class="error"></span>'), r = i.getError("InvalidPasswordNew");
                    break;
                default:
                    a.find("#editOldPassword").after('<span class="error"></span>'), r = i.getError("ErrorPassword")
            }
            t.WriteDebugLog("dataFn.updateEditPasswordFailure", "ERROR", e(n).find("Error").text())
        }
        a.find("#passwordForm .errors").append('<span class="errorText">' + r + "</span>")
    }, u.OnSuccessUpdateEmail = function (t, n) {
        if ("success" == n && "true" == e(t).find("Status").text()) {
            var a = e("#editProfile"), r = a.find("#editEmail").val(), s = a.find("#editEmailPassword").val();
            h.account.Email = r;
            var o = {Email: r, Password: s};
            i.CallGameMethod("RGSC_MODIFY_PROFILE", JSON.stringify(o), "RGSC_JS_FINISH_MODIFY_PROFILE")
        } else u.updateEmailFailure(t)
    }, u.updateAndCloseEditEmail = function (t) {
        e("#editEmailDisplay").text(t), e("#editEmail").text(t), e("#editProfile").find(".editEmail").toggle(), e("span.emailvalid").remove()
    }, u.updateEmailFailure = function (n) {
        var a = e("#editProfile"), r = "ErrorUpdate", s = "", o = !1;
        if (void 0 == n) o = !0; else {
            var l = u.isErrorPasswordRelated(e(n));
            o = l.isPassword, s = void 0 != l.errorText ? l.errorText : ""
        }
        o ? a.find("#editEmailPassword").after('<span class="error"></span>') : (a.find("#editEmail").after('<span class="error"></span>'), r = "ValidEmail"), a.find("#emailForm .errors").append('<span class="errorText">' + i.getError(r) + "</span>"), t.WriteDebugLog("dataFn.updateEmailFailure", "ERROR", s)
    }, u.isErrorPasswordRelated = function (e) {
        var t = {isPassword: !1}, n = e.find("Error");
        if (void 0 == n) return t;
        if (void 0 != n.attr("ErrorMessage") && n.attr("ErrorMessage").length) {
            var i = n.attr("ErrorMessage");
            null != i.match(/password/i) && (t.isPassword = !0, t.errorText = i)
        } else void 0 == n.attr("CodeEx") || "Password" != n.attr("CodeEx") && "PasswordNew" != n.attr("CodeEx") || (t.isPassword = !0);
        return t
    }, u.OnSuccessUpdateCountry = function (a, r) {
        var s = e("#editProfile"), o = e("#dob");
        if ("success" == r && "true" == e(a).find("Status").text()) {
            var l = s.find("#editCountry").val();
            h.account.Country = l, h.account.CountryCode = l, h.account.Minor = "true" == e(a).find("Minor").text();
            var c = {CountryCode: l};
            i.CallGameMethod("RGSC_MODIFY_PROFILE", JSON.stringify(c), "RGSC_JS_FINISH_MODIFY_PROFILE"), o.hasClass("countryUpdate") && (i.initHeaderMenu(!0), o.hide(), o.find("p.intro").hide(), e("#activation").hasClass("pending") ? i.clearActivePanel(function () {
                i.setUpLoadingPanel("#activation")
            }) : (h.isLauncher && (i.setupSignedInOptionsLauncher(), i.launcherNotifyEvent("SignIn")), e("#homeButton").click()), o.removeClass("countryUpdate"), i.initHeaderMenu(!0))
        } else {
            var d = e(a).find("Error").attr("ErrorMessage");
            t.WriteDebugLog("OnSuccessUpdateCountry", "ERROR", d, t.logType.error, t.logController.profile), void 0 != d && "too young" == d.toLowerCase() && n.handleUnderAgeError(), o.hasClass("countryUpdate") && void 0 != d && "missing dob" == d.toLowerCase() && (o.removeClass("countryUpdate"), o.addClass("DOBAndCountryUpdate"), o.find(".intro").text(i.getText("EnterDOBAndCountry", "Register", "Please enter your date of birth and country.")), u.LoadDateDropdowns())
        }
    }, u.updateAndCloseEditCountry = function (t) {
        e("#editCountryDisplay").text(t), e("#editCountry").dropkick("setValue", h.account.CountryCode), e("#editProfile").find(".editCountry").toggle()
    }, u.OnSuccessUpdateAvatar = function (n, a) {
        if ("success" == a && "true" == e(n).find("Status").text()) {
            var r = t.getLastStringSegment(e("#imgEditSelectedAvatar").attr("src"), "/", 2);
            h.account.AvatarUrl = r;
            var s = {AvatarUrl: r};
            i.CallGameMethod("RGSC_MODIFY_PROFILE", JSON.stringify(s), "RGSC_JS_FINISH_MODIFY_PROFILE"), i.clearActivePanel(function () {
                e("#myProfileLink").click()
            })
        } else t.WriteDebugLog("OnSuccessUpdateAvatar", "ERROR", e(n).find("Error").text(), t.logType.error, t.logController.profile)
    }, u.OnSuccessUpdateProfile = function (n, a) {
        var r = e("#editProfile");
        if ("success" == a && "true" == e(n).find("Status").text()) {
            var s;
            s = !e("#imgEditSelectedAvatar").length || -1 != e("#imgEditSelectedAvatar").attr("src").indexOf("base64") || e("#imgEditSelectedAvatar").attr("src").match(/default.png$/) ? "" : e("#imgEditSelectedAvatar").attr("src").replace(h.avatarUrl, "");
            var o = {};
            (s.length > 0 || e("#imgEditSelectedAvatar").attr("src").match(/default.png$/)) && (h.account.AvatarUrl = s, o.AvatarUrl = s), r.find("#editNewPassword").val() && (o.Password = r.find("#editNewPassword").val(), u.updateAndCloseEditPassword()), r.find("#editName:visible").length && (o.Nickname = r.find("#editName").val(), h.account.Nickname = o.Nickname, u.updateAndCloseEditNickname(o.Nickname)), r.find("#editEmail:visible").length && (o.Email = r.find("#editEmail").val(), h.account.Email = o.Email, u.updateAndCloseEditEmail(o.Email)), r.find("#editCountry").val() != h.account.CountryCode && (o.CountryCode = r.find("#editCountry").val(), h.account.CountryCode = o.CountryCode, u.updateAndCloseEditCountry(o.CountryCode)), o.AutoSignIn = r.find("#editAutoSignIn").is(":checked"), i.CallGameMethod("RGSC_MODIFY_PROFILE", JSON.stringify(o), "RGSC_JS_FINISH_MODIFY_PROFILE"), e("#monthOfBirth:visible").length && u.UpdateDobSuccess()
        } else t.WriteDebugLog("OnSuccessUpdateProfile()", "ERROR", e(n).find("Error").attr("ErrorMessage"), t.logType.error, t.logController.profile), r.find("#editName:visible").length && u.updateNicknameFailure(n), r.find("#editEmail:visible").length && u.updateEmailFailure(n), r.find("#editOldPassword:visible").length && u.updateEditPasswordFailure(n), r.find("#lblEditProfileError").html(i.getError("ServerError"));
        r.find("#editProfileButtonWrapper span").hide(), r.find('a[disabled="disabled"]:first').removeAttr("disabled")
    }, u.UpdateDOBAndCountry = function () {
        if (t.ShowInvisibleMask(e("#submitDOB"), i.getError("Loading")), h.RosTitleVersion < 11) return u.UpdateProfile();
        t.WriteDebugLog("UpdateDOB", "", "");
        var n = t.formatDob(e("#yearOfBirth").val(), e("#monthOfBirth").val(), e("#dayOfBirth").val()),
            a = '{ "env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"dob":"' + n + '","countrycode":"' + e("#signUpCountry").val() + '"}';
        t.WriteDebugLog("UpdateDOB", "options", a);
        var r = i.GetAuthHeaderAsync();
        r.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/UpdateDobAndCountry"),
                services: ["accounts"],
                headers: n,
                data: a,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                requestDescription: "UpdateDobCountry",
                success: function (e) {
                    u.UpdateDobSuccess(e)
                },
                complete: function () {
                    t.HideInvisibleMask()
                }
            })
        })
    }, u.UpdateDOB = function () {
        if (t.ShowInvisibleMask(e("#submitDOB"), i.getError("Loading")), h.RosTitleVersion < 11) return u.UpdateProfile();
        t.WriteDebugLog("UpdateDOB", "", "");
        var n = t.formatDob(e("#yearOfBirth").val(), e("#monthOfBirth").val(), e("#dayOfBirth").val()),
            a = '{ "env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"dob":"' + n + '"}';
        t.WriteDebugLog("UpdateDOB", "options", a);
        var r = i.GetAuthHeaderAsync();
        r.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/UpdateDob"),
                services: ["accounts"],
                headers: n,
                data: a,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                requestDescription: "UpdateDob",
                success: function (e) {
                    u.UpdateDobSuccess(e)
                },
                complete: function () {
                    t.HideInvisibleMask()
                }
            })
        })
    }, u.UpdateDobSuccess = function (t) {
        var a = e(t), r = a.find("Status").text(), s = a.find("Error").attr("ErrorMessage");
        if ("false" == r) return void (void 0 != s && "too young" == s.toLowerCase() && n.handleUnderAgeError());
        if (h.account) {
            var o = a.find("Age").text();
            h.account.Age = o, h.account.Minor = "true" == a.find("Minor").text();
            var l = a.find("CountryCode").text();
            void 0 != l && "" != l && (h.account.CountryCode = l, h.account.Country = l), u.LoadProfile()
        }
        var c = e("#dob");
        c.removeClass("DOBUpdate").removeClass("DOBAndCountryUpdate"), c.hide(), c.find("p.intro").hide(), i.initHeaderMenu(!0), e("#activation").hasClass("pending") ? i.clearActivePanel(function () {
            i.setUpLoadingPanel("#activation")
        }) : (h.isLauncher && (i.setupSignedInOptionsLauncher(), i.launcherNotifyEvent("SignIn")), e("#homeButton").click())
    }, u.LoadDateDropdowns = function () {
        if (!h.underage) {
            var t = [];
            e("#monthOfBirth option:first").attr("selected", !0), e("#dayOfBirth").empty(), t = [];
            for (var n = 1; 32 > n; n++) t.push('<option value="' + n + '">' + n + "</option>");
            e("#dayOfBirth").append(t.join(""));
            var i = new Date, a = i.getFullYear();
            t = [], e("#yearOfBirth").html('<option value="">-</option>');
            for (var n = a; n > a - 100; n--) t.push('<option value="' + n + '">' + n + "</option>");
            e("#yearOfBirth").append(t.join("")), e("#signupDobContainer").show()
        }
    }, u.UpdateDays = function () {
        var t, n = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], i = e("#monthOfBirth").val() - 1,
            a = +e("#yearOfBirth").val(), r = e("#dayOfBirth");
        if (a > 0 && 1 == i && 1 != new Date(a, i, 29).getMonth() && n[1]--, t = r.find("option").length - n[i], t > 0) r.find("option").slice(n[i]).remove(), r.dropkick("refresh"); else if (0 > t) for (var s = e("#dayOfBirth option").length; s <= n[i]; s++) 0 == r.find("option[value=" + s + "]").length && (e("<option>").attr("value", s).text(s).appendTo("#dayOfBirth"), r.dropkick("refresh"))
    }, u.GetCountries = function (e, t) {
        u.GetCountriesJS(e, t)
    }, u.GetCountriesJS = function (n, i) {
        if (h.getCountriesInProgress) return void t.WriteDebugLog("GetCountriesJS", "skipped", "already in progress");
        h.getCountriesInProgress = !0, t.WriteDebugLog("GetCountriesJS", "control", n), e("span.loadFailed").hide(), e(n).hide(), e("span.loadingText").fadeIn();
        var a = {env: h.rosEnvironment, title: h.titleName, version: h.RosTitleVersion, language: h.titlelang};
        e.ajax({
            type: "POST",
            url: t.getApiUrl("/api/profile/getcountries"),
            data: a,
            dataType: "xml",
            cache: !0,
            requestDescription: "GetCountries",
            success: function (a, r) {
                t.WriteDebugLog("GetCountriesJS", "success status", r);
                var s = [], o = [];
                e(a).find("r").each(function () {
                    "US" == e(this).attr("c") || "GB" == e(this).attr("c") ? o.push("<option value='" + e(this).attr("c") + "'>" + e(this).attr("n") + "</option>") : s.push("<option value='" + e(this).attr("c") + "'>" + e(this).attr("n") + "</option>")
                }), e(n).html(s.join("")), e(n).html(o.join("") + e(n).html()), i ? e(n).find("option[value=" + i + "]").attr("selected", "selected") : (e(n).find("option:first").attr("selected", "selected"), i = "US"), e("span.loadingText").hide(), e(n).dropkick(), e(n).dropkick("setValue", i), o = null
            },
            complete: function (e, t) {
                h.getCountriesInProgress = !1, a = null, "success" != t && u.GetCountriesError(n)
            }
        })
    }, u.GetCountriesError = function (t) {
        e(t).hide(), e("span.loadingText").hide(), e("span.loadFailed").show(), e("#countryForm").find("#editCountryBtn").attr("disabled", "disabled")
    }, u.GetEULA = function () {
        if (e("#eulaPanel .inner").addClass("loading"), i.isOffline()) u.GetEULAOffline(); else {
            var n = i.getCredsAsync();
            n.done(function (n) {
                n.Ticket && (h.ticket = n.Ticket);
                var i = '{ "language":"' + h.titlelang.substring(0, 2) + '","env":"' + u.resolveEnvironment(h.rosEnvironment) + '","version":"' + h.RosTitleVersion + '","ticket":"" }';
                t.WriteDebugLog("GetEULA", "json", i), e.ajax({
                    type: "POST",
                    url: t.getApiUrl("/api/" + h.titleName + "/geteula"),
                    data: i,
                    contentType: "application/json; charset=utf-8",
                    dataType: "xml",
                    cache: !0,
                    silentFail: !0,
                    success: function (t) {
                        var n = e(t).find("EULA");
                        n.length > 0 ? (e("#eulaPanel .inner").removeClass("loading"), e("#eulaText").html(n.find("Text").text().replace(new RegExp(/\[PAGE\]/g), "<br /><br />").replace(new RegExp(/\n/g), "<br />")), 0 == e("#eulaText").html().length && e("#eulaText").html(n.find("text").text().replace(new RegExp(/\[PAGE\]/g), "<br /><br />").replace(new RegExp(/\n/g), "<br />")), e("#eulaVersion").val(n.find("Version").text()), e("#policyAgreeButtonWrapper").show()) : u.GetEULAOffline()
                    },
                    error: u.GetEULAOffline
                })
            })
        }
    }, u.GetEULAOffline = function () {
        t.WriteDebugLog("GetEULAOffline", "url", h.baseAssetUrl + "xml/legal/eula_" + h.titlelang.substring(0, 2) + ".xml"), e.ajax({
            type: "GET",
            url: h.baseAssetUrl + "xml/legal/eula_" + h.titlelang.substring(0, 2) + ".xml",
            dataType: "xml",
            cache: !0,
            requestDescription: "GetEulaOffline",
            fatalError: u.OnGetEULAOfflineError,
            success: function (t) {
                e("#eulaPanel .inner").removeClass("loading"), e("#eulaText").html(e(t).find("Text").text().replace(new RegExp(/\[PAGE\]/g), "<br /><br />").replace(new RegExp(/\n/g), "<br />")), 0 == e("#eulaText").html().length && e("#eulaText").html(e(t).find("text").text().replace(new RegExp(/\[PAGE\]/g), "<br /><br />").replace(new RegExp(/\n/g), "<br />")), e("#eulaVersion").val(e(t).find("Version").text()), e("#policyAgreeButtonWrapper").show()
            }
        })
    }, u.OnGetEULAOfflineError = function (e, t, n, a, r) {
        i.initHeaderMenu(!1), i.showGenericFatalError(e, t, a, r)
    }, u.GetSignUpPolicies = function () {
        e("#buttonPrivacy, #buttonTerms").removeClass("complete"), e("#legalAgree").hide();
        var n = '{ "language":"' + h.titlelang.substring(0, 2) + '", "env":"' + u.resolveEnvironment(h.rosEnvironment) + '", "version":"' + h.RosTitleVersion + '", "ticket":"" }';
        t.WriteDebugLog("GetSignUpPolicies", "options", n);
        var a = e.ajax({
            type: "POST",
            url: t.getApiUrl("/api/" + h.titleName + "/getprivacypolicy"),
            data: n,
            contentType: "application/json; charset=utf-8",
            dataType: "xml",
            cache: !0,
            requestDescription: "GetPrivacyPolicy",
            fatalError: u.OnGetEULAError
        }), r = e.ajax({
            type: "POST",
            url: t.getApiUrl("/api/" + h.titleName + "/gettos"),
            data: n,
            contentType: "application/json; charset=utf-8",
            dataType: "xml",
            requestDescription: "GetTos",
            fatalError: u.OnGetEULAError
        });
        a.done(function (t) {
            var n = e(t).find("pp");
            if (n.length > 0) {
                var a = e("#privacyPolicyText");
                e("#privacyTextContainer").hide(), a.html(n.find("Text").text().replace(new RegExp(/\[PAGE\]/g), "<br /><br />").replace(new RegExp(/\n/g), "<br />")), 0 == a.html().length && a.html(n.find("text").text().replace(new RegExp(/\[PAGE\]/g), "<br /><br />").replace(new RegExp(/\n/g), "<br />")), i.SetSignUpStepText("Two")
            } else u.OnGetEULAError()
        }), r.done(function (t) {
            var n = e(t).find("tos");
            if (n.length > 0) {
                var i = e("#termsServiceText");
                if (e("#termsTextContainer").hide(), i.html(n.find("Text").text().replace(new RegExp(/\[PAGE\]/g), "<br /><br />").replace(new RegExp(/\n/g), "<br />").replace(/\u00B5/g, "&nbsp;")), 0 == i.html().length && i.html(n.find("text").text().replace(new RegExp(/\[PAGE\]/g), "<br /><br />").replace(new RegExp(/\n/g), "<br />")), i.html().length > 0) {
                    var a = "<span class='rockstarLogo'></span>";
                    i.html(i.html().replace("~EX_R*~", a).replace("[R*]", a))
                } else u.OnGetEULAError()
            } else u.OnGetEULAError()
        });
        var s = e.when(a, r);
        return s
    }, u.OnGetEULAError = function (t, n, a, r, s) {
        e("#onlinePolicies").hide(), i.showGenericFatalError(t, n, r, s)
    }, u.GetAvatarGames = function (e) {
        u.GetAvatarGamesJS(e)
    }, u.GetAvatarGamesJS = function (n) {
        t.WriteDebugLog("GetAvatarGamesJS", "checkControl", n), e(".selectAvatarPanel .inner .loadingAvatarGames").show(), e(".selectAvatarPanel form").hide(), e.ajax({
            type: "POST",
            url: t.getApiUrl("/api/profile/GetAvatarXml"),
            contentType: "application/json; charset=utf-8",
            dataType: "xml",
            cache: !0,
            requestDescription: "GetAvatarXml",
            success: function (a, r) {
                if ("success" == r) {
                    var s = e("#" + n);
                    s.empty(), h.avatarXML = a;
                    var o = "";
                    e(a).find("avatars g").each(function () {
                        o != e(this).attr("g") && (o = e(this).attr("g"), s.append("<option value='" + e(this).attr("g") + "'>" + e(this).attr("dn") + "</option>"))
                    }), t.SortSelect("#" + n), s.prepend("<option value=''>" + i.getText("SelectbyGame", "Register") + "</option>"), s.find("option:first").attr("selected", "selected"), s.dropkick(), s.dropkick("setValue", ""), s.hide()
                } else t.WriteDebugLog("LoadAvatarGamesError", "error", "Error getting avatar xml", t.logType.error, t.logController.profile);
                e("div.selectAvatarPanel .inner .loadingAvatarGames").hide(), e("div.selectAvatarPanel form").show(), e("#dk_container_editAvatarGame").focus(), n = null
            }
        })
    }, u.LoadAvatarGamesError = function (n, i, a) {
        t.WriteDebugLog("LoadAvatarGamesError", "error", a, t.logType.error, t.logController.profile), e(".selectAvatarPanel .inner .loadingAvatarGames").hide(), e(".selectAvatarPanel form").show()
    }, u.LoadAvatarThumbs = function (n, i, a) {
        if (h.avatarXML) {
            var r = [], s = 0;
            r.push("<li>");
            var o = e(h.avatarXML).find("g[g='" + n + "']"), l = 301;
            e(o).find("a").each(function () {
                15 == s && (r.push("</li><li>"), s = 0), s += 1, r.push("<a href='#' tabindex='" + l + "'><img src='" + t.getAvatarUrl(e(this).attr("url")) + "' alt='" + t.jhtmlEncode(e(this).text()) + "' title='" + t.jhtmlEncode(e(this).text()) + "' width='64' height='64' data-image='" + a + "' /></a>"), l++
            }), r.push("</li>");
            var c = e("#" + i);
            c.html(r.join("")), c.anythingSlider({
                showMultiple: !1,
                buildArrows: !0,
                buildNavigation: !1,
                buildStartStop: !1,
                startPanel: 1
            }), c.anythingSlider(1)
        }
    }, u.ChangeSelectedAvatar = function (n, i) {
        t.WriteDebugLog("ChangeSelectedAvatar", "control, destinationControl", n + " , " + i);
        var a = e(n);
        if (a.length > 0) {
            a.closest("div.avatarPanel").find("img.selected").removeClass("selected");
            var r = a.attr("src");
            r = r.replace(/\/images\/avatars\//, "/images/avatars/128x128/"), e("#" + i).attr("alt", a.attr("alt")).attr("title", a.attr("title")).attr("src", r), a.addClass("selected")
        }
    }, u.EULAAccept = function (t) {
        var n = '{ "Response": 1, "Version": "' + t + '", "Language": "' + h.titlelang + '" }';
        i.CallGameMethod("RGSC_ACCEPT_EULA", n, "RGSC_ACCEPT_EULA_DEMO"), e('a.btn[disabled="disabled"]:first').removeAttr("disabled")
    }, u.isDesktopPlatform = function () {
        return "pc" == h.gamePlatform || "onlive" == h.gamePlatform || "steam" == h.gamePlatform || "nhn" == h.gamePlatform || "macappstore" == h.gamePlatform
    }, u.navigatePendingSignIn = function (t) {
        "function" == typeof t ? h.navAfterSigninCallback = t : (delete h.navAfterSigninCallback, e("#mainNav, #headerLoginOptions, .sideMenu").find(".pendingSignIn").removeClass("pendingSignIn").end().find(t).addClass("pendingSignIn")), e("#headerLoginButton").click()
    }, u.navigateAfterSignIn = function () {
        if ("function" == typeof h.navAfterSigninCallback) return h.navAfterSigninCallback(), delete h.navAfterSigninCallback, !0;
        var n = e("#mainNav, #headerLoginOptions, .sideMenu").find(".pendingSignIn");
        if (n.length > 0) {
            n.removeClass("pendingSignIn");
            var i = n.filter(":first");
            return t.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN", "Pending Sign In", i.attr("id")), i.click(), !0
        }
        return !1
    }, u.ShowConfirmModal = function (e, n, a, r, o, l, c, d) {
        t.WriteDebugLog("ShowConfirmModal", "statusMessage, playerNickname", +e + "," + n), i.isScuiVisible() && (window.amd.modals.ConfirmModalView = new s.ConfirmModalView({
            Message: e,
            Name: n,
            pubsubKey: a,
            pubsubParams: r,
            Btn1Text: o,
            Btn2Text: l,
            Title: c,
            SubMessage: d,
            FocusBtn: "cancel"
        }))
    }, u.ShowErrorModal = function (t, n, a, r, s) {
        if (i.isScuiVisible() && !(e("#confirmModal").find(".statusbar").length > 0)) {
            var o = i.getError("ErrorHasOccurred");
            "object" == typeof n && (s = n.CodeDescription, n = n.Message), s && (n = (n || "") + " " + s), u.ShowConfirmModal(n, null, null, null, "Close", null, o, r)
        }
    }, u.ShowFeatureDisabledModal = function (t, n, a, r, s) {
        if (i.isScuiVisible() && !(e("#confirmModal").find(".statusbar").length > 0)) {
            var o = i.getError("FeatureDisabled");
            "object" == typeof n && (s = n.CodeDescription, n = n.Message), "undefined" != typeof n && n.length || (n = i.getError("FeatureDisabledDesc")), s && (n = (n || "") + " " + s), u.ShowConfirmModal(n, null, null, null, "Close", null, o, r)
        }
    }, u.GetCrewById = function (n, a) {
        t.WriteDebugLog("GetCrewById", "crewId", n);
        var r = i.GetAuthHeaderAsync();
        r.done(function (i) {
            e.ajax({
                type: "POST",
                headers: i,
                url: t.getApiUrl("/api/crew/getcrewbyid"),
                data: '{"CrewId":' + n + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !0,
                requestDescription: "GetCrewById",
                success: function (e) {
                    "function" == typeof a && a(e)
                }
            })
        })
    },u.ClearProxyCache = function () {
        var n = '{ "env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + " }",
            a = i.GetAuthHeaderAsync();
        a.done(function (i) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/profile/clearproxycache"),
                headers: i,
                data: n,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                success: function () {
                    t.WriteDebugLog("ClearProxyCache", "Success", "")
                },
                error: function (e, n, i) {
                    t.WriteDebugLog("ClearProxyCache", "ERROR", i), t.WriteDebugLog("ClearProxyCache", "ERROR status", n), t.WriteDebugLog("ClearProxyCache", "ERROR responseText", e.responseText, t.logType.error, t.logController.profile)
                }
            })
        })
    },u.ClearCrewCache = function (n) {
        var a = '{ "env":"' + h.rosEnvironment + '","title":"' + h.titleName + '","version":' + h.RosTitleVersion + ',"crewId":' + n + " }",
            r = i.GetAuthHeaderAsync();
        r.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/crew/clearcrewcache"),
                headers: n,
                data: a,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                silentFail: !0,
                disableSlowMsg: !0,
                cache: !1,
                success: function () {
                    t.WriteDebugLog("ClearCrewCache", "Success", "")
                },
                error: function (e, n, i) {
                    t.WriteDebugLog("ClearCrewCache", "ERROR", i), t.WriteDebugLog("ClearCrewCache", "ERROR status", n), t.WriteDebugLog("ClearCrewCache", "ERROR responseText", e.responseText, t.logType.error, t.logController.crew)
                }
            })
        })
    },u.isSteam = function () {
        return r.isSteam()
    },window.GetTweetsCompleted = u.GetTweetsCompleted,t.pubsub.on("datafunctions:LoadProfile", u.LoadProfile),t.pubsub.on("datafunctions:UpdateNickname", u.UpdateNickname),t.pubsub.on("dataFn:notifyGameSignInFailed", u.notifyGameSignInFailed),t.pubsub.on("dataFn:signInToGame", u.signInToGame),u
}), define("common/profile/profile-models", ["jquery", "underscore", "backbone", "utils", "jquery.setup.environment.utils"], function (e, t, n, i, a) {
    var r = {};
    return r.ProfileCard = n.Model.extend(), r.ProfileNav = n.Model.extend(), r.Friend = n.Model.extend(), r.FriendCollection = n.Collection.extend({model: r.Friend}), r.Crew = n.Model.extend(), r.CrewCollection = n.Collection.extend({model: r.Crew}), r.Game = n.Model.extend(), r.GameCollection = n.Collection.extend({model: r.Game}), r.Account = n.Model.extend(), r.AccountCollection = n.Collection.extend({model: r.Account}), r.BlockPlayerModel = n.Model.extend({
        url: i.getApiUrl("/api/friend/blockplayer"),
        block: function (e, t, n) {
            var i = this, r = a.GetAuthHeaderAsync();
            r.done(function (a) {
                i.save({blockeeRockstarId: e}, {headers: a, success: t, fatalError: n, noRetryModal: !0})
            })
        }
    }), r
}), define("common/crews/crews-models", ["jquery", "backbone", "utils", "common/jquery.datafunctions", "underscore", "jquery.setup.environment.utils"], function (e, t, n, i, a, r) {
    var s = {};
    return s.PrimaryCrewModel = t.Model.extend({url: n.getApiUrl("api/crew/primarycrew")}), s.Crew = t.Model.extend(), s.CrewCollection = t.Collection.extend({
        model: s.Crew,
        url: n.getApiUrl("/api/crew/getcrews"),
        parse: function (e) {
            return void 0 != e && void 0 != e.Crews ? e.Crews : e
        }
    }), s.CrewMember = t.Model.extend({
        parse: function (e) {
            return a.each(e.CrewMembers, function (e) {
                var t = n.getAvatarUrl(e.AvatarUrl);
                e.AvatarUrl = t, e.DateJoined = n.localizedDate(e.DateJoined, "LL")
            }), e
        }
    }), s.CrewMemberCollection = t.Collection.extend({
        initialize: function (e, t) {
            this.game = t.game
        }, model: s.CrewMember, url: function () {
            return n.getApiUrl("/api/" + this.game + "/primarycrewmembers")
        }
    }), s.CrewMemberSearch = t.Model.extend({
        url: n.getApiUrl("/api/crew/searchmembers"), parse: function (e) {
            return a.each(e.CrewMembers, function (e) {
                var t = n.getAvatarUrl(e.AvatarUrl);
                e.AvatarUrl = t
            }), e
        }
    }), s.CrewInvite = t.Model.extend(), s.CrewInviteCollection = t.Collection.extend({
        model: s.CrewInvite,
        url: n.getApiUrl("/api/crew/crewinvites"),
        getInvites: function (e) {
            return this.at(e).get("CrewInvites")
        }
    }), s.Invites = t.Collection.extend(), s.CrewRequest = t.Model.extend(), s.CrewRequestCollection = t.Collection.extend({
        model: s.CrewRequest,
        url: n.getApiUrl("/api/crew/crewrequests"),
        getRequests: function (e) {
            return this.at(e).get("CrewRequests")
        }
    }), s.Requests = t.Collection.extend(), s.CrewsWithManagePermissionCollection = t.Collection.extend({
        model: s.Crew,
        url: n.getApiUrl("/api/crew/crewswithmanagepermission"),
        parse: function (e) {
            return e.Crews
        }
    }), s.UpdateCrewModel = t.Model.extend({
        url: n.getApiUrl("/api/crew/updatecrew"), leave: function (e, t, n) {
            var i = this, a = r.GetAuthHeaderAsync();
            a.done(function (a) {
                i.save({crewId: e, opName: "leave"}, {headers: a, success: t, fatalError: n, noRetryModal: !0})
            })
        }, makeActive: function (e, t, n) {
            var i = this, a = r.GetAuthHeaderAsync();
            a.done(function (a) {
                i.save({crewId: e, opName: "active"}, {headers: a, success: t, fatalError: n, noRetryModal: !0})
            })
        }, acceptInvite: function (e, t, n, i) {
            var a = this, s = r.GetAuthHeaderAsync();
            s.done(function (r) {
                a.save({crewId: e, inviteId: t, opName: "join"}, {
                    headers: r,
                    success: n,
                    fatalError: i,
                    noRetryModal: !0
                })
            })
        }, declineInvite: function (e, t, n, i) {
            var a = this, s = r.GetAuthHeaderAsync();
            s.done(function (r) {
                a.save({crewId: e, inviteId: t, opName: "del"}, {
                    headers: r,
                    success: n,
                    fatalError: i,
                    noRetryModal: !0
                })
            })
        }, joinCrew: function (e, t, n) {
            var i = this, a = r.GetAuthHeaderAsync();
            a.done(function (a) {
                i.save({crewId: e, opName: "join"}, {headers: a, success: t, fatalError: n, noRetryModal: !0})
            })
        }, requestInvite: function (e, t, n) {
            var i = this, a = r.GetAuthHeaderAsync();
            a.done(function (a) {
                i.save({crewId: e, opName: "requestInvite"}, {headers: a, success: t, fatalError: n, noRetryModal: !0})
            })
        }, sendInvite: function (e, t, n, i) {
            var a = this, s = r.GetAuthHeaderAsync();
            s.done(function (r) {
                a.save({targetRockstarId: e, crewId: t, opName: "sendInvite"}, {
                    headers: r,
                    success: n,
                    fatalError: i,
                    noRetryModal: !0
                })
            })
        }, deleteRequest: function (e, t, n, i) {
            var a = this, s = r.GetAuthHeaderAsync();
            s.done(function (r) {
                a.save({crewId: e, requestId: t, opName: "deleteRequest"}, {
                    headers: r,
                    success: n,
                    fatalError: i,
                    noRetryModal: !0
                })
            })
        }
    }), s.SearchCrewsCollection = t.Collection.extend({
        model: s.Crew,
        url: n.getApiUrl("/api/crew/searchcrews"),
        initialize: function () {
            this.pageNumber = 0, this.isLoading = !1
        },
        parse: function (e) {
            return e && 0 != e.Status && void 0 != e.Crews ? (this.FetchFail = !1, this.Total = e.Total, this.HasMore = e.HasMore, this.HasMaxCrewMemberships = e.HasMaxCrewMemberships, this.pageNumber = e.PageIndex + 1, this.isLoading = !1, e.Crews) : null
        }
    }), s
}), define("common/templates/helpers/ifequals", ["common/hbs/handlebars"], function (e) {
    function t(e, t, n) {
        return void 0 !== e && void 0 !== t && isNaN(e) && isNaN(t) ? e.toLowerCase() == t.toLowerCase() ? n.fn(this) : n.inverse(this) : e == t ? n.fn(this) : n.inverse(this)
    }

    return e.registerHelper("ifequals", t), t
}), define("common/templates/helpers/ifless", ["common/hbs/handlebars"], function (e) {
    function t(e, t, n) {
        return t > e ? n.fn(this) : n.inverse(this)
    }

    return e.registerHelper("ifless", t), t
}), define("hbs!common/templates/crew/crew_tag", ["hbs", "common/hbs/handlebars", "common/templates/helpers/ifequals", "common/templates/helpers/ifless"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r() {
            return "private"
        }

        function s() {
            return "public"
        }

        function o() {
            return "Gold"
        }

        function l(e, t) {
            var i, a, r, s = "";
            return s += "<span ", a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: S.noop,
                fn: S.program(8, c, t)
            }, i = a ? a.call(e, e && e.IsMember, !1, r) : C.call(e, "ifequals", e && e.IsMember, !1, r), (i || 0 === i) && (s += i), s += "></span>"
        }

        function c(e) {
            var t, i, a = "";
            return a += 'class="crewColor" style="background:', (i = n.CrewColour) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewColour, t = typeof i === y ? i.call(e, {hash: {}}) : i), a += w(t) + ';"'
        }

        function d(e, t) {
            var i, a = "";
            return a += "\n    ", i = n["if"].call(e, e && e.IsPrivate, {
                hash: {},
                inverse: S.noop,
                fn: S.program(11, u, t)
            }), (i || 0 === i) && (a += i), a += "\r\n    "
        }

        function u(e, t) {
            var i, a, r, s = "";
            return s += '\n    <div class="hierarchy">\r\n        ', a = n.ifless || e && e.ifless, r = {
                hash: {},
                inverse: S.noop,
                fn: S.program(12, h, t)
            }, i = a ? a.call(e, e && e.RankOrder, 5, r) : C.call(e, "ifless", e && e.RankOrder, 5, r), (i || 0 === i) && (s += i), s += "\r\n    </div>\r\n    "
        }

        function h(e, t) {
            var i, a, r, s = "";
            return s += "\r\n        ", a = n.ifless || e && e.ifless, r = {
                hash: {},
                inverse: S.noop,
                fn: S.program(13, f, t)
            }, i = a ? a.call(e, e && e.RankOrder, 4, r) : C.call(e, "ifless", e && e.RankOrder, 4, r), (i || 0 === i) && (s += i), s += '\r\n        <span style="background:', (a = n.CrewColour) ? i = a.call(e, {hash: {}}) : (a = e && e.CrewColour, i = typeof a === y ? a.call(e, {hash: {}}) : a), s += w(i) + ';"></span>\r\n        '
        }

        function f(e, t) {
            var i, a, r, s = "";
            return s += "\r\n        ", a = n.ifless || e && e.ifless, r = {
                hash: {},
                inverse: S.noop,
                fn: S.program(14, p, t)
            }, i = a ? a.call(e, e && e.RankOrder, 3, r) : C.call(e, "ifless", e && e.RankOrder, 3, r), (i || 0 === i) && (s += i), s += '\r\n        <span style="background:', (a = n.CrewColour) ? i = a.call(e, {hash: {}}) : (a = e && e.CrewColour, i = typeof a === y ? a.call(e, {hash: {}}) : a), s += w(i) + ';"></span>\r\n        '
        }

        function p(e, t) {
            var i, a, r, s = "";
            return s += "\r\n        ", a = n.ifless || e && e.ifless, r = {
                hash: {},
                inverse: S.noop,
                fn: S.program(15, m, t)
            }, i = a ? a.call(e, e && e.RankOrder, 2, r) : C.call(e, "ifless", e && e.RankOrder, 2, r), (i || 0 === i) && (s += i), s += '\r\n        <span style="background:', (a = n.CrewColour) ? i = a.call(e, {hash: {}}) : (a = e && e.CrewColour, i = typeof a === y ? a.call(e, {hash: {}}) : a), s += w(i) + ';"></span>\r\n        '
        }

        function m(e, t) {
            var i, a, r, s = "";
            return s += "\r\n        ", a = n.ifless || e && e.ifless, r = {
                hash: {},
                inverse: S.noop,
                fn: S.program(16, g, t)
            }, i = a ? a.call(e, e && e.RankOrder, 1, r) : C.call(e, "ifless", e && e.RankOrder, 1, r), (i || 0 === i) && (s += i), s += '\r\n        <span style="background:', (a = n.CrewColour) ? i = a.call(e, {hash: {}}) : (a = e && e.CrewColour, i = typeof a === y ? a.call(e, {hash: {}}) : a), s += w(i) + ';"></span>\r\n        '
        }

        function g(e) {
            var t, i, a = "";
            return a += '\r\n        <span style="background:', (i = n.CrewColour) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewColour, t = typeof i === y ? i.call(e, {hash: {}}) : i), a += w(t) + ';"></span>\r\n        '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var v, _, b = "", y = "function", w = this.escapeExpression, S = this, C = n.helperMissing;
        return b += '<div class="crewTag ', v = n["if"].call(t, t && t.IsPrivate, {
            hash: {},
            inverse: S.program(3, s, a),
            fn: S.program(1, r, a)
        }), (v || 0 === v) && (b += v), v = n["if"].call(t, t && t.IsFounderCrew, {
            hash: {},
            inverse: S.noop,
            fn: S.program(5, o, a)
        }), (v || 0 === v) && (b += v), b += '">\n    <span>', (_ = n.CrewTag) ? v = _.call(t, {hash: {}}) : (_ = t && t.CrewTag, v = typeof _ === y ? _.call(t, {hash: {}}) : _), b += w(v) + "</span>\n\n    ", v = n["if"].call(t, t && t.IsPrivate, {
            hash: {},
            inverse: S.noop,
            fn: S.program(7, l, a)
        }), (v || 0 === v) && (b += v), b += "\n\n    ", v = n["if"].call(t, t && t.IsMember, {
            hash: {},
            inverse: S.noop,
            fn: S.program(10, d, a)
        }), (v || 0 === v) && (b += v), b += "\r\n\r\n</div>"
    });
    return t.registerPartial("common/templates/crew/crew_tag", n), n
}), define("common/templates/helpers/emblemUrl", ["common/hbs/handlebars"], function (e) {
    function t(e, t) {
        if (!e) return a.emblemDefault;
        t = t || "";
        var i = a["emblem" + t] || a.emblem;
        return i.length ? i.format(n(e), e) : a.emblemDefault
    }

    function n(e) {
        e = String(e);
        for (var t = 5381, n = 0; n < e.length; n++) t = (t << 5) + t + e.charCodeAt(n);
        t >>>= 0;
        var i = t.toString(2);
        if (i.length > 32 && (t = parseInt(i.substr(0, 32), 2)), t %= 1e4, t = String(t), t.length < 4) {
            var a = 4 - t.length;
            for (n = 0; a > n; n++) t = "0" + t
        }
        return t
    }

    var i = globals.crewEmblemUrl, a = {
        emblemDefault: "",
        emblem: i.format("{0}", "{1}", "64"),
        emblem32: i.format("{0}", "{1}", "32"),
        emblem50: i.format("{0}", "{1}", "64"),
        emblem64: i.format("{0}", "{1}", "64"),
        emblem90: i.format("{0}", "{1}", "128"),
        emblem100: i.format("{0}", "{1}", "128"),
        emblem128: i.format("{0}", "{1}", "128"),
        emblem256: i.format("{0}", "{1}", "256"),
        emblem512: i.format("{0}", "{1}", "512")
    };
    return e.registerHelper("emblemUrl", t), t
}), define("hbs!common/templates/crew/crew_card", ["hbs", "common/hbs/handlebars", "hbs!common/templates/crew/crew_tag", "common/templates/helpers/emblemUrl"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e) {
            var t, i, a = "";
            return a += '\n                <a class="leaveTrigger" data-id="', (i = n.CrewId) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewId, t = typeof i === m ? i.call(e, {hash: {}}) : i), a += g(t) + '" href="#" rel="localize[LeaveCrew]">\n                    Leave Crew\n                </a>\n                '
        }

        function s(e) {
            var t, i, a = "";
            return a += '\n                <a class="makeActive" data-id="', (i = n.CrewId) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewId, t = typeof i === m ? i.call(e, {hash: {}}) : i), a += g(t) + '" href="#" rel="localize[MakeActiveCrew]">\n                    Make Active Crew\n                </a>\n                '
        }

        function o(e) {
            var t, i, a = "";
            return a += '\n                <a class="join" data-id="', (i = n.CrewId) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewId, t = typeof i === m ? i.call(e, {hash: {}}) : i), a += g(t) + '" href="#" rel="localize[Join]">\n                    Join\n                </a>\n                '
        }

        function l(e) {
            var t, i, a = "";
            return a += '\n                <a class="join disabled" href="#" rel="localize[Join]" title="', (i = n.MaxCrewsMsg) ? t = i.call(e, {hash: {}}) : (i = e && e.MaxCrewsMsg, t = typeof i === m ? i.call(e, {hash: {}}) : i), a += g(t) + '">\n                    Join\n                </a>\n                '
        }

        function c(e) {
            var t, i, a = "";
            return a += '\n                <a class="requestInvite" data-id="', (i = n.CrewId) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewId, t = typeof i === m ? i.call(e, {hash: {}}) : i), a += g(t) + '" href="#" rel="localize[CrewRequestInvite]">\n                    Request Invite\n                </a>\n                '
        }

        function d() {
            return '\n                <span class="requestPending" rel="localize[CrewRequestPending]">\n                    Request Pending\n                </span>\n                '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), i = this.merge(i, e.partials);
        var u, h, f, p = "", m = "function", g = this.escapeExpression, v = n.helperMissing, _ = this;
        return p += '<div class="crewCard featureCard lightCard">\n        <div class="', (h = n.CrewType) ? u = h.call(t, {hash: {}}) : (h = t && t.CrewType, u = typeof h === m ? h.call(t, {hash: {}}) : h), p += g(u) + ' crewType">\n\n            <img class="avatar" src="' + g((h = n.emblemUrl || t && t.emblemUrl, f = {hash: {}}, h ? h.call(t, t && t.CrewId, 64, f) : v.call(t, "emblemUrl", t && t.CrewId, 64, f))) + '" />\n\n            <h5>', (h = n.CrewName) ? u = h.call(t, {hash: {}}) : (h = t && t.CrewName, u = typeof h === m ? h.call(t, {hash: {}}) : h), p += g(u) + "</h5>\n\n            ", u = _.invokePartial(i["common/templates/crew/crew_tag"], "common/templates/crew/crew_tag", t, n, i), (u || 0 === u) && (p += u), p += '\n\n            <p><span class="memberCount">', (h = n.MemberCount) ? u = h.call(t, {hash: {}}) : (h = t && t.MemberCount, u = typeof h === m ? h.call(t, {hash: {}}) : h), p += g(u) + '</span> <span rel="localize[Members]">members</span></p>\n        </div>\n\n        <div class="actions">\n            <div class="actions clearfix">\n                ', u = n["if"].call(t, t && t.CanLeave, {
            hash: {},
            inverse: _.noop,
            fn: _.program(1, r, a)
        }), (u || 0 === u) && (p += u), p += "\n                ", u = n["if"].call(t, t && t.CanMakeActive, {
            hash: {},
            inverse: _.noop,
            fn: _.program(3, s, a)
        }), (u || 0 === u) && (p += u), p += "\n                ", u = n["if"].call(t, t && t.CanJoin, {
            hash: {},
            inverse: _.noop,
            fn: _.program(5, o, a)
        }), (u || 0 === u) && (p += u), p += "\n                ", u = n["if"].call(t, t && t.CanJoinDisabled, {
            hash: {},
            inverse: _.noop,
            fn: _.program(7, l, a)
        }), (u || 0 === u) && (p += u), p += "\n                ", u = n["if"].call(t, t && t.CanRequestInvite, {
            hash: {},
            inverse: _.noop,
            fn: _.program(9, c, a)
        }), (u || 0 === u) && (p += u), p += "\n                ", u = n["if"].call(t, t && t.IsJoinRequestPending, {
            hash: {},
            inverse: _.noop,
            fn: _.program(11, d, a)
        }), (u || 0 === u) && (p += u), p += "\n            </div>\n        </div>\n</div>"
    });
    return n
}), define("hbs!common/templates/profile/profile_accounts", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e) {
            var t, i, a = "";
            return a += '\r\n<div class="profileButton">\r\n	<img width="64" height="64" class="avatarImg" src="', (i = n.AvatarUrl) ? t = i.call(e, {hash: {}}) : (i = e && e.AvatarUrl, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + '">\r\n	<div class="text">\r\n		<h4 class="servicename">', (i = n.OnlineServiceDisplayName) ? t = i.call(e, {hash: {}}) : (i = e && e.OnlineServiceDisplayName, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + "</h4>\r\n		<h5>", (i = n.UserName) ? t = i.call(e, {hash: {}}) : (i = e && e.UserName, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + '</h5>\r\n		<span class="icon ', (i = n.OnlineServiceName) ? t = i.call(e, {hash: {}}) : (i = e && e.OnlineServiceName, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + '">', (i = n.OnlineServiceName) ? t = i.call(e, {hash: {}}) : (i = e && e.OnlineServiceName, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + "</span>\r\n	</div>\r\n</div>\r\n"
        }

        function s() {
            return '\r\n<span class="noaccounts" rel="localize[NoLinkedAccounts]">This user is not displaying any linked accounts</span>\r\n'
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var o, l = "", c = "function", d = this.escapeExpression, u = this;
        return o = n.each.call(t, t, {
            hash: {},
            inverse: u.noop,
            fn: u.program(1, r, a)
        }), (o || 0 === o) && (l += o), l += "\r\n", o = n.unless.call(t, t, {
            hash: {},
            inverse: u.noop,
            fn: u.program(3, s, a)
        }), (o || 0 === o) && (l += o), l
    });
    return n
}), define("common/templates/helpers/avatarUrl", ["common/hbs/handlebars", "utils"], function (e, t) {
    function n(e, n) {
        return t.getAvatarUrl(e, n)
    }

    return e.registerHelper("avatarUrl", n), n
}), define("hbs!common/templates/profile/profile_card", ["hbs", "common/hbs/handlebars", "common/templates/helpers/avatarUrl", "common/templates/helpers/ifequals"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r() {
            return '\r\n    <div id="blocked" rel="localize[Blocked]">Blocked</div>\r\n    '
        }

        function s(e, t) {
            var i, a, r, s = "";
            return s += "\r\n    ", i = n["if"].call(e, e && e.ShowMessage, {
                hash: {},
                inverse: w.noop,
                fn: w.program(4, o, t)
            }), (i || 0 === i) && (s += i), s += "  \r\n    ", i = n.unless.call(e, e && e.IsClanMate, {
                hash: {},
                inverse: w.noop,
                fn: w.program(6, l, t)
            }), (i || 0 === i) && (s += i), s += "\r\n    ", a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: w.program(10, d, t),
                fn: w.program(8, c, t)
            }, i = a ? a.call(e, e && e.Relationship, "Friend", r) : S.call(e, "ifequals", e && e.Relationship, "Friend", r), (i || 0 === i) && (s += i), s += "\r\n    ", i = n["if"].call(e, e && e.AllowBlock, {
                hash: {},
                inverse: w.noop,
                fn: w.program(18, m, t)
            }), (i || 0 === i) && (s += i), s += "\r\n    "
        }

        function o() {
            return '  \r\n      <li class="message"><a href="#"><span></span><span rel="localize[Message]">Message</span></a></li>\r\n    '
        }

        function l() {
            return '\r\n    <!--<li class="recruit"><a href="#"><span></span><span rel="localize[Recruit]">Recruit</span></a></li>-->\r\n    '
        }

        function c() {
            return '\r\n    <li class="unfriend"><a href="#"><span></span><span rel="localize[Unfriend]">Unfriend</span></a></li>\r\n    '
        }

        function d(e, t) {
            var i, a, r, s = "";
            return s += "\r\n    ", a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: w.program(13, h, t),
                fn: w.program(11, u, t)
            }, i = a ? a.call(e, e && e.Relationship, "InvitedByThem", r) : S.call(e, "ifequals", e && e.Relationship, "InvitedByThem", r), (i || 0 === i) && (s += i), s += "\r\n    "
        }

        function u() {
            return '\r\n    <li class="accept"><a href="#"><span></span><span rel="localize[Accept]">Accept</span></a></li>    \r\n    '
        }

        function h(e, t) {
            var i, a, r, s = "";
            return s += "\r\n    ", a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: w.program(16, p, t),
                fn: w.program(14, f, t)
            }, i = a ? a.call(e, e && e.Relationship, "InvitedByMe", r) : S.call(e, "ifequals", e && e.Relationship, "InvitedByMe", r), (i || 0 === i) && (s += i), s += "\r\n    "
        }

        function f() {
            return '\r\n    <li class="cancel"><a href="#"><span></span><span rel="localize[Cancel]">Cancel</span></a></li>    \r\n    '
        }

        function p() {
            return '\r\n    <li class="friend"><a href="#"><span></span><span rel="localize[Add]">Add</span></a></li>\r\n    '
        }

        function m() {
            return '\r\n    <li class="block end"><a href="#"><span></span><span rel="localize[Block]">Block</span></a></li>\r\n    '
        }

        function g(e) {
            var t, i, a = "";
            return a += '\r\n    <div class="crewTag private">\r\n        <span>', (i = n.PrimaryClanTag) ? t = i.call(e, {hash: {}}) : (i = e && e.PrimaryClanTag, t = typeof i === C ? i.call(e, {hash: {}}) : i), a += k(t) + '</span>\r\n        <!-- TODO fill in rank tags\r\n        <div class="hierarchy" title="Leader">\r\n            <span style="background:', (i = n.CrewColor) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewColor, t = typeof i === C ? i.call(e, {hash: {}}) : i), a += k(t) + ';"></span>\r\n        </div>\r\n        -->\r\n    </div>\r\n    '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var v, _, b, y = "", w = this, S = n.helperMissing, C = "function", k = this.escapeExpression;
        return y += '<div class="clearfix">\r\n    <img class="avatar" src="' + k((_ = n.avatarUrl || t && t.avatarUrl, b = {hash: {}}, _ ? _.call(t, t && t.AvatarUrl, 64, b) : S.call(t, "avatarUrl", t && t.AvatarUrl, 64, b))) + '" alt=""/>\r\n\r\n    ', _ = n.ifequals || t && t.ifequals, b = {
            hash: {},
            inverse: w.noop,
            fn: w.program(1, r, a)
        }, v = _ ? _.call(t, t && t.Relationship, "BlockedByMe", b) : S.call(t, "ifequals", t && t.Relationship, "BlockedByMe", b), (v || 0 === v) && (y += v), y += '\r\n    \r\n    <div class="user-data">\r\n        <h3>', (_ = n.Name) ? v = _.call(t, {hash: {}}) : (_ = t && t.Name, v = typeof _ === C ? _.call(t, {hash: {}}) : _), y += k(v) + '</h3>\r\n        <!--<h4>View full profile</h4>-->\r\n    </div>\r\n</div>\r\n<ul class="user-actions clearfix">\r\n    ', v = n.unless.call(t, t && t.IsMe, {
            hash: {},
            inverse: w.noop,
            fn: w.program(3, s, a)
        }), (v || 0 === v) && (y += v), y += '\r\n</ul>\r\n<div id="cardInfoFooter" class="clearfix">\r\n    <div class="member-since clearfix">\r\n        <span class="Country ', (_ = n.CountryCode) ? v = _.call(t, {hash: {}}) : (_ = t && t.CountryCode, v = typeof _ === C ? _.call(t, {hash: {}}) : _), y += k(v) + '"></span>\r\n        <span class="member-date"><b><span rel="localize[MemberSince]">Member since:</span></b> ', (_ = n.CreatedDateStr) ? v = _.call(t, {hash: {}}) : (_ = t && t.CreatedDateStr, v = typeof _ === C ? _.call(t, {hash: {}}) : _), y += k(v) + "</span>\r\n    </div>\r\n    ", v = n["if"].call(t, t && t.PrimaryClanTag, {
            hash: {},
            inverse: w.noop,
            fn: w.program(20, g, a)
        }), (v || 0 === v) && (y += v), y += "\r\n</div>"
    });
    return n
}), define("hbs!common/templates/profile/profile_crews_empty", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<span class="noaccounts" rel="localize[NoCrews]">This user is not a member of any crew yet</span>'
    });
    return n
}), define("hbs!common/templates/profile/profile_friend", ["hbs", "common/hbs/handlebars", "common/templates/helpers/avatarUrl"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e, t) {
            var i, a = "";
            return a += '\r\n        <span class="infoWrap optionProfile tooltip">\r\n            ', i = n["if"].call(e, e && e.ViewerMutualFriendCount, {
                hash: {},
                inverse: k.noop,
                fn: k.program(2, s, t)
            }), (i || 0 === i) && (a += i), a += "\r\n            ", i = n["if"].call(e, e && e.InviteShortMsg, {
                hash: {},
                inverse: k.noop,
                fn: k.program(4, o, t)
            }), (i || 0 === i) && (a += i), a += "\r\n        </span>\r\n        "
        }

        function s(e) {
            var t, i, a = "";
            return a += "\r\n            ", (i = n.MutualFriendText) ? t = i.call(e, {hash: {}}) : (i = e && e.MutualFriendText, t = typeof i === S ? i.call(e, {hash: {}}) : i), a += C(t) + "\r\n            "
        }

        function o(e) {
            var t, i, a = "";
            return a += "\r\n            ", (i = n.InviteShortMsg) ? t = i.call(e, {hash: {}}) : (i = e && e.InviteShortMsg, t = typeof i === S ? i.call(e, {hash: {}}) : i), a += C(t) + '\r\n            <a href="#"><span>', (i = n.InviteMsg) ? t = i.call(e, {hash: {}}) : (i = e && e.InviteMsg, t = typeof i === S ? i.call(e, {hash: {}}) : i), a += C(t) + "</span></a>\r\n            "
        }

        function l(e, t) {
            var i, a = "";
            return a += '\r\n    <ul class="playerOptions">\r\n\r\n    ', i = n["if"].call(e, e && e.ShowAddFriend, {
                hash: {},
                inverse: k.noop,
                fn: k.program(7, c, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    ", i = n["if"].call(e, e && e.ShowRemoveFriend, {
                hash: {},
                inverse: k.noop,
                fn: k.program(9, d, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    ", i = n["if"].call(e, e && e.ShowRequestPending, {
                hash: {},
                inverse: k.noop,
                fn: k.program(11, u, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    ", i = n["if"].call(e, e && e.ShowAcceptInvite, {
                hash: {},
                inverse: k.noop,
                fn: k.program(13, h, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    ", i = n["if"].call(e, e && e.ShowDeclineInvite, {
                hash: {},
                inverse: k.noop,
                fn: k.program(15, f, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    ", i = n["if"].call(e, e && e.ShowCancelnvite, {
                hash: {},
                inverse: k.noop,
                fn: k.program(17, p, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    ", i = n["if"].call(e, e && e.ShowMessage, {
                hash: {},
                inverse: k.noop,
                fn: k.program(19, m, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    ", i = n["if"].call(e, e && e.ShowBlock, {
                hash: {},
                inverse: k.noop,
                fn: k.program(21, g, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    ", i = n["if"].call(e, e && e.ShowUnBlock, {
                hash: {},
                inverse: k.noop,
                fn: k.program(23, v, t)
            }), (i || 0 === i) && (a += i), a += "\r\n\r\n    \r\n    \r\n\r\n    \r\n    \r\n    </ul>\r\n  "
        }

        function c() {
            return '\r\n        <li class="friend add addFriend">\r\n          <a href="#" class="tooltip"><span rel="localize[Add]">Add</span></a>\r\n        </li>\r\n    '
        }

        function d() {
            return '\r\n        <li class="friend remove removeFriend">\r\n          <a href="#" class="tooltip"><span rel="localize[Unfriend]">Unfriend</span></a>\r\n        </li>\r\n    '
        }

        function u() {
            return '\r\n        <li class="friend add disabled">\r\n          <a href="#" class="tooltip"><span rel="localize[FriendRequestPending]">Friend request pending</span></a>\r\n        </li>\r\n    '
        }

        function h() {
            return '\r\n        <li class="friend add acceptFriendInvite">\r\n          <a href="#" class="tooltip"><span rel="localize[Accept]">Accept</span></a>\r\n        </li>\r\n    '
        }

        function f() {
            return '\r\n        <li class="friend remove declineFriendInvite">\r\n          <a href="#" class="tooltip"><span rel="localize[Decline]">Decline</span></a>\r\n        </li>\r\n    '
        }

        function p() {
            return '\r\n        <li class="friend remove cancelFriendInvite">\r\n          <a href="#" class="tooltip"><span rel="localize[Cancel]">Cancel</span></a>\r\n        </li>\r\n    '
        }

        function m() {
            return '\r\n        <li class="message">\r\n          <a href="#" class="tooltip"><span rel="localize[MessageOption]">Message</span></a>\r\n        </li>\r\n    '
        }

        function g() {
            return '\r\n        <li class="block">\r\n          <a href="#" class="tooltip"><span rel="localize[Block]"></span></a>\r\n        </li>\r\n    '
        }

        function v() {
            return '\r\n        <li class="unblock">\r\n          <a href="#" class="tooltip"><span rel="localize[Unblock]">Unblock</span></a>\r\n        </li>\r\n    '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var _, b, y, w = "", S = "function", C = this.escapeExpression, k = this, T = n.helperMissing;
        return w += '<div class="profileButton gold ', (b = n.OnlineStatus) ? _ = b.call(t, {hash: {}}) : (b = t && t.OnlineStatus, _ = typeof b === S ? b.call(t, {hash: {}}) : b), w += C(_) + '" data-id="', (b = n.RockstarId) ? _ = b.call(t, {hash: {}}) : (b = t && t.RockstarId, _ = typeof b === S ? b.call(t, {hash: {}}) : b), w += C(_) + '">\r\n    <a class="optionProfile" href="#"><img width="64" height="64" class="avatarImg" src="' + C((b = n.avatarUrl || t && t.avatarUrl, y = {hash: {}}, b ? b.call(t, t && t.AvatarUrl, 64, y) : T.call(t, "avatarUrl", t && t.AvatarUrl, 64, y))) + '" /></a>\r\n\r\n    <div class="text">\r\n        <h5 class="profilenickname"><a class="optionProfile" href="#">', (b = n.DisplayName) ? _ = b.call(t, {hash: {}}) : (b = t && t.DisplayName, _ = typeof b === S ? b.call(t, {hash: {}}) : b), w += C(_) + '</a></h5>\r\n\r\n        <span class="status tooltip">\r\n            <span>', (b = n.PlayingGame) ? _ = b.call(t, {hash: {}}) : (b = t && t.PlayingGame, _ = typeof b === S ? b.call(t, {hash: {}}) : b), w += C(_) + "</span>\r\n        </span>\r\n\r\n        ", _ = n.unless.call(t, t && t.IsMe, {
            hash: {},
            inverse: k.noop,
            fn: k.program(1, r, a)
        }), (_ || 0 === _) && (w += _), w += "\r\n    </div>\r\n\r\n    ", _ = n.unless.call(t, t && t.IsMe, {
            hash: {},
            inverse: k.noop,
            fn: k.program(6, l, a)
        }), (_ || 0 === _) && (w += _), w += "\r\n</div>"
    });
    return n
}), define("hbs!common/templates/profile/profile_friends_empty", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<span rel="localize[FriendsHidden]" class="noaccounts">This user is not showing friend information</span>'
    });
    return n
}), define("hbs!common/templates/profile/profile_games", ["hbs", "common/hbs/handlebars", "common/templates/helpers/ifless"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e, t) {
            var i, a, r, l = "";
            return l += '\r\n  <div id="gamesFlipWrapper">\r\n      <ul id="gamesFlip">\r\n        ', a = n.ifless || e && e.ifless, r = {
                hash: {},
                inverse: h.noop,
                fn: h.programWithDepth(2, s, t, e)
            }, i = a ? a.call(e, (i = e && e.games, null == i || i === !1 ? i : i.length), 2, r) : f.call(e, "ifless", (i = e && e.games, null == i || i === !1 ? i : i.length), 2, r), (i || 0 === i) && (l += i), l += "\r\n        ", i = n.each.call(e, e && e.games, {
                hash: {},
                inverse: h.noop,
                fn: h.programWithDepth(4, o, t, e)
            }), (i || 0 === i) && (l += i), l += "\r\n        ", a = n.ifless || e && e.ifless, r = {
                hash: {},
                inverse: h.noop,
                fn: h.programWithDepth(2, s, t, e)
            }, i = a ? a.call(e, (i = e && e.games, null == i || i === !1 ? i : i.length), 3, r) : f.call(e, "ifless", (i = e && e.games, null == i || i === !1 ? i : i.length), 3, r), (i || 0 === i) && (l += i), l += '\r\n      </ul>\r\n      <a id="gamesFlipNext" class="button">next</a>\r\n      <a id="gamesFlipPrevious" class="button">previous</a>\r\n      <div id="gamesFlipMask"></div>\r\n  </div>\r\n'
        }

        function s(e, t, n) {
            var i, a = "";
            return a += '\r\n          <li><img src="' + u((i = n && n.cdnUrl, typeof i === d ? i.apply(e) : i)) + 'images/common/games-coverflow/default.png" alt="Rockstar" /></li>\r\n        '
        }

        function o(e, t, i) {
            var a, r, s = "";
            return s += '\r\n          <li><img src="' + u((a = i && i.cdnUrl, typeof a === d ? a.apply(e) : a)) + "images/common/games-coverflow/", (r = n.Name) ? a = r.call(e, {hash: {}}) : (r = e && e.Name, a = typeof r === d ? r.call(e, {hash: {}}) : r), s += u(a) + '.png" alt="', (r = n.Name) ? a = r.call(e, {hash: {}}) : (r = e && e.Name, a = typeof r === d ? r.call(e, {hash: {}}) : r), s += u(a) + '" /></li>\r\n        '
        }

        function l() {
            return '\r\n  <div class="content" rel="localize[NoGamesPlayed]">\r\n      No games played yet!\r\n  </div>\r\n'
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var c, d = "function", u = this.escapeExpression, h = this, f = n.helperMissing;
        return c = n["if"].call(t, t && t.games, {
            hash: {},
            inverse: h.program(6, l, a),
            fn: h.program(1, r, a)
        }), c || 0 === c ? c : ""
    });
    return n
}), define("hbs!common/templates/profile/profile_nav", ["hbs", "common/hbs/handlebars", "common/templates/helpers/ifequals"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r() {
            return ' class="active"'
        }

        function s(e, t) {
            var i;
            return i = n["if"].call(e, e && e.MutualFriendCount, {
                hash: {},
                inverse: p.noop,
                fn: p.program(4, o, t)
            }), i || 0 === i ? i : ""
        }

        function o(e) {
            var t, i, a = "";
            return a += " <span>(", (i = n.MutualText) ? t = i.call(e, {hash: {}}) : (i = e && e.MutualText, t = typeof i === h ? i.call(e, {hash: {}}) : i), a += f(t) + ")</span>"
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var l, c, d, u = "", h = "function", f = this.escapeExpression, p = this, m = n.helperMissing;
        return u += "<li", c = n.ifequals || t && t.ifequals, d = {
            hash: {},
            inverse: p.noop,
            fn: p.program(1, r, a)
        }, l = c ? c.call(t, t && t.Active, "crews", d) : m.call(t, "ifequals", t && t.Active, "crews", d), (l || 0 === l) && (u += l), u += '><a href="#" data-nav="crews"><span rel="localize[Crews]">crews</span></a></li>\r\n<li', c = n.ifequals || t && t.ifequals, d = {
            hash: {},
            inverse: p.noop,
            fn: p.program(1, r, a)
        }, l = c ? c.call(t, t && t.Active, "friends", d) : m.call(t, "ifequals", t && t.Active, "friends", d), (l || 0 === l) && (u += l), u += '><a href="#" data-nav="friends"><span rel="localize[Friends]">friends</span>', l = n.unless.call(t, t && t.IsMe, {
            hash: {},
            inverse: p.noop,
            fn: p.program(3, s, a)
        }), (l || 0 === l) && (u += l), u += "</a></li> \r\n<li", c = n.ifequals || t && t.ifequals, d = {
            hash: {},
            inverse: p.noop,
            fn: p.program(1, r, a)
        }, l = c ? c.call(t, t && t.Active, "accounts", d) : m.call(t, "ifequals", t && t.Active, "accounts", d), (l || 0 === l) && (u += l), u += '><a href="#" data-nav="accounts"><span rel="localize[Accounts]">accounts</span></a></li>'
    });
    return n
}), define("hbs!common/templates/profile/profile_blocker", ["hbs", "common/hbs/handlebars", "common/templates/helpers/avatarUrl", "common/templates/helpers/ifequals"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e, t) {
            var i, a, r, l = "";
            return l += '\r\n			        <p class="desc">', (a = n.Message) ? i = a.call(e, {hash: {}}) : (a = e && e.Message, i = typeof a === w ? a.call(e, {hash: {}}) : a), l += S(i) + '</p>\r\n			        <div id="cardInfoVitalsHidden">                            \r\n			            <div class="user-actions-wrapper">                            \r\n			                \r\n                            ', a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: b.program(4, o, t),
                fn: b.program(2, s, t)
            }, i = a ? a.call(e, e && e.Relationship, "Friend", r) : y.call(e, "ifequals", e && e.Relationship, "Friend", r), (i || 0 === i) && (l += i), l += "\r\n                            ", i = n["if"].call(e, e && e.ShowMessage, {
                hash: {},
                inverse: b.noop,
                fn: b.program(12, h, t)
            }), (i || 0 === i) && (l += i), l += "\r\n                            ", i = n["if"].call(e, e && e.AllowBlock, {
                hash: {},
                inverse: b.noop,
                fn: b.program(15, p, t)
            }), (i || 0 === i) && (l += i), l += "\r\n			            </div>\r\n			        </div>\r\n                    "
        }

        function s() {
            return '\r\n			                <div class="unfriend">\r\n			                    <a href="#"><span class="icon"></span><span rel="localize[Unfriend]">Unfriend</span></a>\r\n                            </div>\r\n                            '
        }

        function o(e, t) {
            var i, a, r, s = "";
            return s += "\r\n                            ", a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: b.program(7, c, t),
                fn: b.program(5, l, t)
            }, i = a ? a.call(e, e && e.Relationship, "InvitedByThem", r) : y.call(e, "ifequals", e && e.Relationship, "InvitedByThem", r), (i || 0 === i) && (s += i), s += "\r\n                            "
        }

        function l() {
            return '\r\n			                <div class="accept">\r\n                                <a href="#"><span class="icon"></span><span rel="localize[Accept]">Accept</span></a>   \r\n                            </div>\r\n                            '
        }

        function c(e, t) {
            var i, a, r, s = "";
            return s += "\r\n                            ", a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: b.program(10, u, t),
                fn: b.program(8, d, t)
            }, i = a ? a.call(e, e && e.Relationship, "InvitedByMe", r) : y.call(e, "ifequals", e && e.Relationship, "InvitedByMe", r), (i || 0 === i) && (s += i), s += "\r\n                            "
        }

        function d() {
            return '\r\n			                <div class="cancel">\r\n                                <a href="#"><span class="icon"></span><span rel="localize[Cancel]">Cancel</span></a>\r\n                            </div>\r\n                            '
        }

        function u() {
            return '\r\n			                <div class="friend">\r\n                                <a href="#"><span class="icon"></span><span rel="localize[Add]">Add Friend</span></a>\r\n                            </div>\r\n                            '
        }

        function h(e, t) {
            var i, a, r, s = "";
            return s += '\r\n                              <div class="message ', a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: b.noop,
                fn: b.program(13, f, t)
            }, i = a ? a.call(e, e && e.AllowBlock, !1, r) : y.call(e, "ifequals", e && e.AllowBlock, !1, r), (i || 0 === i) && (s += i), s += '">\r\n			                          <a href="#"><span class="icon"></span><span rel="localize[Message]">Message</span></a>\r\n			                        </div>\r\n                            '
        }

        function f() {
            return "end"
        }

        function p() {
            return '\r\n                            <div class="block end">\r\n			                  <a href="#"><span class="icon"></span><span rel="localize[Block]">Block</span></a>\r\n			                </div>\r\n                            '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var m, g, v, _ = "", b = this, y = n.helperMissing, w = "function", S = this.escapeExpression;
        return _ += '<div class="inner">\r\n	<div class="wrapper">\r\n		<div class="content-wrapper">\r\n			<div class="content-inner clearfix">\r\n                <img width="128" height="128" class="avatar" src="' + S((g = n.avatarUrl || t && t.avatarUrl, v = {hash: {}}, g ? g.call(t, t && t.AvatarUrl, 128, v) : y.call(t, "avatarUrl", t && t.AvatarUrl, 128, v))) + '" alt=""/>\r\n			    <div class="content-column">\r\n			        <h1 rel="localize[ProfileNotAvailable]">Profile is not available</h1>\r\n                    ', m = n["if"].call(t, t && t.ProfileFound, {
            hash: {},
            inverse: b.noop,
            fn: b.program(1, r, a)
        }), (m || 0 === m) && (_ += m), _ += "\r\n			    </div>                 \r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>"
    });
    return n
}), function (e) {
    function t(e, t, n, i) {
        i = i instanceof Array ? i : [];
        for (var a = {}, r = 0; r < i.length; r++) a[i[r]] = !0;
        var s = function (e) {
            this.element = e
        };
        s.prototype = n, e.fn[t] = function () {
            var n = arguments, i = this;
            return this.each(function () {
                var r = e(this), o = r.data("plugin-" + t);
                if (o) {
                    if ("string" == typeof n[0] && "_" != n[0].charAt(0) && "function" == typeof o[n[0]]) {
                        var l = Array.prototype.slice.call(n, 1), c = o[n[0]].apply(o, l);
                        n[0] in a && (i = c)
                    }
                } else o = new s(r), r.data("plugin-" + t, o), o._init && o._init.apply(o, n)
            }), i
        }
    }

    var n, i = function () {
    }, a = function (t, n) {
        return function () {
            return e.isFunction(n) ? n.apply(t, arguments) : t[n].apply(t, arguments)
        }
    };
    animationqueue = {}, animationqueue.AnimationQueue = function () {
        this.sets = [], this.isRunning = !1, this.current = 0, this.totalTime = 0, this.elapsedTime = 0, this.startTime = 1, this.poll = null
    }, animationqueue.AnimationQueue.prototype = {
        queue: function (e) {
            this.sets.push(e)
        }, start: function (t, n) {
            this.totalTime = t, this.elapsedTime = 0, this.isRunning = !0, n = e.isFunction(n) ? n : i;
            var a = 1, r = 1;
            this.sets.length > 0 && (a = this.sets.length, r = this.sets[0].totalTime > 0 ? Math.max(0, Math.min(1, 1 - this.sets[0].elapsedTime / this.sets[0].totalTime)) : 1);
            var s = (new Date).getTime();
            this.sets.length > 0 && this.sets[0].start(r / a * this.totalTime), function (e, t, i) {
                function a() {
                    e.elapsedTime = (new Date).getTime() - s, e.sets.length && !e.sets[0].isRunning && (e.sets.shift(), e.sets.length && e.sets[0].start(t / i)), e.elapsedTime >= e.totalTime && 0 == e.sets.length && (n(e.elapsedTime), e.stop())
                }

                e.poll = setInterval(a, 16)
            }(this, this.totalTime, a)
        }, stop: function () {
            if (this.isRunning) {
                this.isRunning = !1;
                for (var e = this.sets.length; e--;) this.sets[e].stop();
                clearInterval(this.poll)
            }
        }, remove: function (e) {
            for (var t = this.sets.length; t--;) if (this.sets[t] == e) {
                var n = this.sets.slice(0, t);
                this.animationSet = n.push(this.sets.slice(t + 1))
            }
        }, get: function () {
            return this.sets.slice(0)
        }
    }, animationqueue.AnimationSet = function () {
        this.steps = [], this.isStepsSorted = !0, this.currentStep = -1, this.animations = [], this.isRunning = !1, this.totalTime = 0, this.elapsedTime = 0, this.poll = null, this.data = {}
    }, animationqueue.AnimationSet.prototype = {
        add: function (e) {
            e instanceof animationqueue.AnimationStep ? (this.steps.push(e), this.isStepsSorted = !1, ++this.currentStep) : e instanceof animationqueue.Animation && this.animations.push(e)
        }, start: function (e) {
            function t() {
                for (i.elapsedTime = (new Date).getTime() - i.startTime; i.currentStep >= 0 && i.steps[i.currentStep].getTime(i.totalTime) <= i.elapsedTime;) i.steps[i.currentStep].doIt(), --i.currentStep;
                if (i.elapsedTime >= i.totalTime && i.currentStep < 0) {
                    for (; a >= 0 && !i.animations[a].isRunning;) --a;
                    0 > a && i.reset(i.elapsedTime)
                }
            }

            this.elapsedTime = 0 == this.totalTime ? 0 : this.elapsedTime / this.totalTime * e, this.totalTime = e, this.isStepsSorted || (this.steps.sort(function (e, t) {
                return t.moment - e.moment
            }), this.isStepsSorted = !0), this.isRunning = !0, this.startTime = (new Date).getTime() - this.elapsedTime;
            for (var n = this.animations.length; n--;) this.animations[n].start(this.totalTime);
            var i = this, a = this.animations.length - 1;
            this.poll = setInterval(t, 16)
        }, stop: function () {
            if (this.isRunning) {
                this.isRunning = !1, this.poll && clearInterval(this.poll);
                for (var e = this.animations.length; e--;) this.animations[e].stop()
            }
        }, setData: function (e, t) {
            this.data[e] = t
        }, getData: function (e) {
            return this.data[e]
        }, reset: function () {
            this.stop(), this.elapsedTime = 0, this.currentStep = this.steps.length - 1
        }
    }, animationqueue.AnimationStep = function (e, t, n) {
        this.$element = e, this.cssParams = t, this.moment = Math.min(1, Math.max(0, n))
    }, animationqueue.AnimationStep.prototype = {
        getTime: function (e) {
            return this.moment * e
        }, doIt: function () {
            this.$element.css(this.cssParams)
        }
    }, animationqueue.Animation = function (t, n) {
        this.$element = t, this.animateParams = e.isArray(n) ? n : [n], this.isRunning = !1
    }, animationqueue.Animation.prototype = {
        start: function (e) {
            if (this.$element.stop(), 0 === e) {
                for (var t = 0; t < this.animateParams.length; ++t) this.$element.css(this.animateParams[t]);
                self.isRunning = !1
            } else {
                if (this.animateParams.length > 1) {
                    for (var n = 0, i = 0, t = this.animateParams.length; 0 != t--;) {
                        var r = this.animateParams[t].animationDuration;
                        !isNaN(r) && r >= 0 ? n += r : (++i, delete this.animateParams[t].animationDuration)
                    }
                    var s = 0;
                    for (i && 1 > n && (s = (1 - n) / i, n = 1), t = this.animateParams.length; 0 != t--;) this.animateParams[t].animationDuration = isNaN(this.animateParams[t].animationDuration) ? s : this.animateParams[t].animationDuration / n
                } else this.animateParams[0].animationDuration = 1;
                this.isRunning = !0;
                for (var t = 0; t < this.animateParams.length - 1; ++t) this.$element.animate(this.animateParams[t], e * this.animateParams[t].animationDuration);
                this.$element.animate(this.animateParams[t], e * this.animateParams[t].animationDuration, a(this, function () {
                    this.isRunning = !1
                }))
            }
        }, stop: function () {
            this.$element.stop(), this.isRunning = !1
        }
    }, e.jcoverflip = {
        animationElement: function (e, t, n) {
            return {element: e, animate: t, steps: n}
        }, getItemFromElement: function (t) {
            t = e(t);
            var n = t.hasClass("ui-jcoverflip--item") ? t : t.parents(".ui-jcoverflip--item");
            return 0 == n.size() ? null : {element: n, index: n.data("jcoverflip__index")}
        }
    };
    var r = {
        _init: function (t) {
            this.options = e.extend(s, t || {}), this.animationQueue = new animationqueue.AnimationQueue, this.isInit = !1, this.goToPoll = {id: null}, this.goToQueue = [];
            var i = this.items();
            this.element.addClass("ui-jcoverflip"), i.addClass("ui-jcoverflip--item");
            for (var r = i.size(); r--;) {
                var o = i.eq(r);
                o.data("jcoverflip__index", r);
                var l = this.options.titles.create(o);
                l.css({display: "none"}).addClass("ui-jcoverflip--title").appendTo(this.element), o.data("jcoverflip__titleElement", l)
            }
            this.element.click(a(this, this._clickItem)), this.options.wrapItemsAround && (this.options.wrapCenter = this.options.wrapCenter === n ? this.options.current : this.options.wrapCenter), this._goTo(this.options.current, 0, !0), this.options.controls.create(this.element, this.length())
        }, _clickItem: function (t) {
            if (1 != this.options.disabled) {
                var n = e.jcoverflip.getItemFromElement(t.target);
                return null !== n && n.index != this.current() ? (this.current(n.index, t), t.preventDefault(), !1) : !0
            }
        }, _nextAndPrevParameters: function (t, n, a, r) {
            return r = "object" == typeof t ? t : "object" == typeof n ? n : "object" == typeof a ? a : "object" == typeof r ? r : {}, a = e.isFunction(t) ? t : e.isFunction(n) ? n : e.isFunction(a) ? a : i, n = "boolean" == typeof t ? t : "boolean" == typeof n ? n : !0, t = isNaN(parseInt(t)) ? 1 : parseInt(t), {
                by: t,
                wrapAround: n,
                callback: a,
                originalEvent: r
            }
        }, next: function (e, t, n, i) {
            if (1 != this.options.disabled) {
                var a = this._nextAndPrevParameters(e, t, n, i);
                return this._nextAux(a.by, a.wrapAround, a.callback, a.originalEvent, "next")
            }
        }, _nextAux: function (t, i, a, r, s) {
            t = t === n && isNaN(t) ? 1 : parseInt(t), i = i !== !1;
            var o = this.current(), l = o, c = this.length();
            if (i ? (o = (o + t) % c, o = 0 > o ? o + c : o) : o = Math.min(c - 1, Math.max(0, o + t)), o != this.current() && this.current(o, r), s && l != o) {
                var d = e.Event(r);
                d.type = this.widgetEventPrefix + s, a.call(this.element, d, {
                    from: l,
                    to: o
                }), this._trigger(s, r, {from: l, to: o})
            }
            return o
        }, previous: function (e, t, n, i) {
            if (1 != this.options.disabled) {
                var a = this._nextAndPrevParameters(e, t, n, i);
                return this._nextAux(-1 * a.by, a.wrapAround, a.callback, a.originalEvent, "previous")
            }
        }, first: function (t, n) {
            if (1 != this.options.disabled) {
                n = "object" == typeof t ? t : "object" == typeof n ? n : {}, t = e.isFunction(t) ? t : i;
                var a = this.current(), r = this.current(0, n);
                if (a != r) {
                    var s = e.Event(n);
                    s.type = this.widgetEventPrefix + "first", t.call(this.element, s, {
                        from: a,
                        to: r
                    }), this._trigger("first", n, {from: a, to: r})
                }
            }
        }, last: function (t, n) {
            if (1 != this.options.disabled) {
                n = "object" == typeof t ? t : "object" == typeof n ? n : {}, t = e.isFunction(t) ? t : i;
                var a = this.current(), r = this.current(this.length() - 1, n);
                if (a != r) {
                    var s = e.Event(n);
                    s.type = this.widgetEventPrefix + "last", t.call(this.element, s, {
                        from: a,
                        to: r
                    }), this._trigger("last", n, {from: a, to: r})
                }
            }
        }, current: function (e, t) {
            return e === n || isNaN(e) || this.options.disabled || e == this.options.current || this._goTo(e, n, !1, t), this.options.current
        }, destroy: function () {
            if (1 != this.options.disabled) {
                this._trigger("destroy", {}), this.element.removeClass("ui-jcoverflip");
                for (var t, n = this.items(), i = n.length; i--;) t = n.eq(i).data("jcoverflip__titleElement"), this.options.titles.destroy(t);
                n.removeClass("ui-jcoverflip--item").find("*").add(n.get()).each(function () {
                    this.removeAttribute("style")
                }), this.options.controls.destroy(this.element), e.widget.prototype.destroy.apply(this, arguments)
            }
        }, enable: function () {
            this.options.disabled = !1, this._trigger("enable", {})
        }, disable: function () {
            this.options.disabled = !0, this._trigger("disable", {})
        }, option: function (t, n) {
            return "undefined" == typeof n ? e.widget.prototype.option.apply(this, arguments) : "current" == t ? this.current(n) : t in {
                items: "",
                titles: "",
                controls: ""
            } ? this.options.items : (t in {
                beforeCss: "",
                afterCss: "",
                currentCss: ""
            } && (this.options[t] = n, this._goTo(this.current(), 0, !0)), "time" == t && isNaN(parseInt(n)) && parseInt(n) < 0 ? this.options.time : e.widget.prototype.option.apply(this, arguments))
        }, _goTo: function (e, t, r, s) {
            if (1 != this.options.disabled) {
                r = !!r, s = s == n ? {} : s, t = t === n ? this.options.time : parseInt(t);
                var o = this.options.current, l = Math.floor(Math.max(0, Math.min(e, this.length() - 1)));
                this.options.current = l, this.animationQueue.stop();
                for (var c = this.animationQueue.get(), d = c.length; d--;) {
                    var u = c[d].getData("to"), h = c[d].getData("goingToTheRight"), f = u > l;
                    f != h && this.animationQueue.remove(c[d])
                }
                c = this.animationQueue.get();
                var p = c.length > 0 ? c.pop().getData("to") : o, h = l > p;
                p += h ? 1 : -1, r && (p = l);
                var m = this.getOffset(o), g = m, v = m[l] > 0, _ = Math.abs(m[l]), b = this.items(),
                    y = v ? l - _ : l + _,
                    w = this.options.wrapItemsAround ? -1 * this.options.wrapCenter : 1 - b.length,
                    S = this.options.wrapItemsAround ? b.length - 1 - this.options.wrapCenter : b.length - 1;
                r && 0 == _ && (_ = 1, y += v ? -1 : 1);
                for (var C = 1; _ >= C; ++C) {
                    var k = y + (v ? C : -1 * C), T = this.getOffset(k), L = new animationqueue.AnimationSet;
                    this.animationQueue.queue(L), L.setData("goingToTheRight", v), L.setData("to", k);
                    for (var E = b.length; 0 != E--;) {
                        var M = b.eq(E);
                        if (0 == T[E]) var I = this.options.currentCss(M, this.element, C == _); else if (g[E] == w && T[E] == S) if (this.options.startToEndCss) var I = this.options.startToEndCss(M, this.element, T[E] - 1, -1 * g[E] - 1); else var I = this.options.afterCss(M, this.element, T[E] - 1); else if (g[E] == S && T[E] == w) if (this.options.endToStartCss) var I = this.options.endToStartCss(M, this.element, -1 * T[E] - 1, g[E] - 1); else var I = this.options.beforeCss(M, this.element, -1 * T[E] - 1); else if (T[E] > 0) var I = this.options.afterCss(M, this.element, T[E] - 1); else if (T[E] < 0) var I = this.options.beforeCss(M, this.element, -1 * T[E] - 1);
                        for (var P = I.length; P--;) {
                            var D = I[P];
                            L.add(new animationqueue.Animation(D.element, D.animate));
                            for (var C in D.steps) L.add(new animationqueue.AnimationStep(D.element, D.steps[C], parseFloat(C)))
                        }
                    }
                    g = T
                }
                var A = b.eq(l).data("jcoverflip__titleElement");
                if (A && this.options.titleAnimateIn(A, t, h), l != o) {
                    var A = b.eq(o).data("jcoverflip__titleElement");
                    A && this.options.titleAnimateOut(A, t, h)
                }
                r ? this.animationQueue.start(t, i) : (this._trigger("start", s, {
                    to: l,
                    from: o
                }), this.animationQueue.start(t, a(this, function (e) {
                    this._trigger("stop", s, {to: l, from: o, time: e})
                })), this._trigger("change", s, {to: l, from: o}))
            }
        }, items: function (e) {
            return (this.itemsCache === n || e) && (this.itemsCache = this.options.items ? this.element.find(this.options.items) : this.element.children()), this.itemsCache
        }, length: function () {
            var e = this.items();
            return e.length
        }, getOffset: function (e) {
            var t = {}, n = this.length();
            if (this.options.wrapItemsAround) for (var i = -1 * this.options.wrapCenter, a = (e - this.options.wrapCenter + n) % n, r = n + i, s = a, o = i; r > o; ++o, s = (s + 1) % n) t[s] = o; else for (var s = 0; n > s; ++s) t[s] = s - e;
            return t
        }, _trigger: function (t, n, i) {
            var a = this.options[t], r = "jcoverflip" == t ? t : "jcoverflip" + t;
            if (n = e.Event(n), n.type = r, n.originalEvent) for (var s, o = e.event.props.length; o;) s = e.event.props[--o], n[s] = n.originalEvent[s];
            return this.element.trigger(n, i), !(e.isFunction(a) && a.call(this.element[0], n, i) === !1 || n.isDefaultPrevented())
        }
    }, s = {
        items: "", startToEndCss: function (t, n, i) {
            return [e.jcoverflip.animationElement(t, {
                left: n.width() / 2 + 110 + 110 * i + "px",
                bottom: "20px"
            }, {}), e.jcoverflip.animationElement(t.find("img"), [{opacity: .2, width: "50px"}, {
                opacity: .5,
                width: "100px"
            }], {})]
        }, endToStartCss: function (t, n, i) {
            return [e.jcoverflip.animationElement(t, {
                left: n.width() / 2 - 210 - 110 * i + "px",
                bottom: "20px"
            }, {}), e.jcoverflip.animationElement(t.find("img"), [{opacity: .2, width: "50px"}, {
                opacity: .5,
                width: "100px"
            }], {})]
        }, beforeCss: function (t, n, i) {
            return [e.jcoverflip.animationElement(t, {
                left: n.width() / 2 - 210 - 110 * i + "px",
                bottom: "20px"
            }, {}), e.jcoverflip.animationElement(t.find("img"), {opacity: .5, width: "100px"}, {})]
        }, afterCss: function (t, n, i) {
            return [e.jcoverflip.animationElement(t, {
                left: n.width() / 2 + 110 + 110 * i + "px",
                bottom: "20px"
            }, {}), e.jcoverflip.animationElement(t.find("img"), {opacity: .5, width: "100px"}, {})]
        }, currentCss: function (t, n, i) {
            return i ? [e.jcoverflip.animationElement(t, {
                left: n.width() / 2 - 100 + "px",
                bottom: 0
            }, {}), e.jcoverflip.animationElement(t.find("img"), {
                opacity: 1,
                width: "200px"
            }, {})] : [e.jcoverflip.animationElement(t, {
                left: n.width() / 2 - 50 + "px",
                bottom: "20px"
            }, {}), e.jcoverflip.animationElement(t.find("img"), {opacity: .5, width: "100px"}, {})]
        }, time: 500, titles: {
            create: function (t) {
                var n = "", i = e([]), a = t.find(".title:first");
                return 1 == a.size() ? (i = a.clone(!0), a.css("display", "none"), i.data("jcoverflip__origin", "cloned"), i.data("jcoverflip__source", a)) : t.attr("title") ? n = t.attr("title") : t.attr("alt") ? n = t.attr("alt") : (a = t.find("[title], [alt]").eq(0), 1 == a.size() && (n = a.attr("title") || a.attr("alt") || "")), i.size() ? i.css({
                    opacity: 0,
                    display: "block"
                }) : (i = e('<span class="title">' + n + "</span>"), i.data("jcoverflip__origin", "attribute")), i
            }, destroy: function (e) {
                "cloned" == e.data("jcoverflip__origin") && e.data("jcoverflip__source").css("display", ""), e.remove()
            }
        }, titleAnimateIn: function (e, t) {
            "none" == e.css("display") && e.css({opacity: 0, display: "block"}), e.stop().animate({opacity: 1}, t)
        }, titleAnimateOut: function (t, n) {
            t.stop().animate({opacity: 0}, n, function () {
                e(this).css("display", "none")
            })
        }, controls: {create: i, destroy: i}, current: 0
    }, o = ["length", "current"];
    t(jQuery, "jcoverflip", r, o)
}(jQuery), define("jcoverflip", ["jquery", "jquery-ui"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)), define("common/profile/profile-views", ["jquery", "backbone", "underscore", "utils", "common/jquery.datafunctions", "jquery.setup.environment.utils", "common/profile/profile-models", "common/crews/crews-models", "common/analyticsManager", "hbs!common/templates/crew/crew_card", "hbs!common/templates/profile/profile_accounts", "hbs!common/templates/profile/profile_card", "hbs!common/templates/profile/profile_crews_empty", "hbs!common/templates/profile/profile_friend", "hbs!common/templates/profile/profile_friends_empty", "hbs!common/templates/profile/profile_games", "hbs!common/templates/profile/profile_nav", "hbs!common/templates/profile/profile_blocker", "jcoverflip"], function (e, t, n, i, a, r, s, o, l, c, d, u, h, f, p, m, g, v) {
    var _ = {};
    return _.ProfileView = t.View.extend({
        el: "#friendProfilePanel ul.nav", events: {"click a": "navigate"}, navigate: function (t) {
            t.preventDefault(), this.model.set("Active", e(t.currentTarget).data("nav"))
        }, updateFriendRelationship: function (e) {
            if (i.WriteDebugLog("ProfileView.updateFriendRelationship", "RockstarId", e.RockstarId), void 0 != this.model && this.model.get("RockstarId") == e.RockstarId) switch (e.Relationship) {
                case 0:
                    this.model.set("Relationship", ""), this.profileCardView.model.set("Relationship", "");
                    break;
                case 4:
                    this.model.set("Relationship", "InvitedByMe"), this.profileCardView.model.set("Relationship", "InvitedByMe");
                    break;
                case 6:
                    this.model.set("Relationship", "Friends"), this.profileCardView.model.set("Relationship", "Friends")
            }
        }, render: function () {
            var e = void 0 != globals.account && this.model.get("RockstarId") == globals.account.RockstarId,
                t = this.model.get("MutualFriendCount"), n = "";
            void 0 != t && t > 0 && (n = r.getText("Mutual", "Social").format(t)), this.model.set({
                IsMe: e,
                MutualText: n
            }, {silent: !0});
            var a = i.renderCompiledTemplate(g, this.model.toJSON());
            switch (this.$el.html(a), this.profileFriendsView.$el.hide(), this.profileCrewsView.$el.hide(), this.profileAccountsView.$el.hide(), this.model.get("Active")) {
                case"friends":
                    this.profileFriendsView.$el.show();
                    break;
                case"crews":
                    this.profileCrewsView.$el.show();
                    break;
                case"accounts":
                    this.profileAccountsView.$el.show()
            }
            return this.postRender(), this
        }, renderAll: function () {
            return "undefined" != typeof this.hiddenProfileView && this.hiddenProfileView.close(), this.render(), this.profileCardView.render(), this.profileGamesView.render(), this.profileCrewsView.render(), this.profileAccountsView.render(), this.postRender(), this
        }, postRender: function () {
            "en-US" != globals.titlelang && (e("#friendProfilePanel [rel*=localize]:not(.localized)").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }).addClass("localized"), e("#friendProfilePanel").addClass("friendProfilePanel")), e("#headerLoginUser").removeAttr("disabled"), e("#userCrews").data("antiscroll").refresh(), e("#userAccounts").data("antiscroll").refresh(), e("#userFriends").data("antiscroll").refresh()
        }, onClose: function () {
            "undefined" != typeof this.hiddenProfileView && this.hiddenProfileView.close(), this.profileCardView.close(), this.profileFriendsView.close(), this.profileCrewsView.close(), this.profileAccountsView.close(), i.pubsub.off("gameFnFriends:UpdateFriendStatus", this.updateFriendRelationship, this)
        }, reinitialize: function (e) {
            var t = e.profileData;
            if (t.RockstarAccount.ProfileHidden) return void (this.hiddenProfileView ? this.hiddenProfileView.model.clear().set(t.RockstarAccount) : (this.hiddenProfileView = new _.HiddenProfileView({model: new s.ProfileCard(t.RockstarAccount)}), this.hiddenProfileView.render()));
            this.profileCardView ? this.profileCardView.model.clear().set(t.RockstarAccount) : this.profileCardView = new _.ProfileCardView({model: new s.ProfileCard(t.RockstarAccount)}), this.profileGamesView ? this.profileGamesView.collection.reset(t.RockstarAccount.GamesOwned) : this.profileGamesView = new _.ProfileGamesView({collection: new s.GameCollection(t.RockstarAccount.GamesOwned)}), this.profileFriendsView ? (this.profileFriendsView.collection.reset(t.Friends), this.profileFriendsView.model.clear().set(t.RockstarAccount)) : this.profileFriendsView = new _.ProfileFriendsView({
                collection: new s.FriendCollection(t.Friends),
                model: new s.ProfileCard(t.RockstarAccount),
                el: "#userFriends .box .antiscroll-inner",
                activePanel: "friendProfilePanel"
            });
            var n = this, i = r.GetAuthHeaderAsync();
            i.done(function () {
                n.profileCrewsView ? n.profileCrewsView.collection.reset(t.Crews) : n.profileCrewsView = new _.ProfileCrewsView({collection: new s.CrewCollection(t.Crews)}), n.profileAccountsView ? n.profileAccountsView.collection.reset(t.LinkedAccounts) : n.profileAccountsView = new _.ProfileAccountsView({collection: new s.AccountCollection(t.LinkedAccounts)}), n.model ? n.model.set({
                    Active: "crews",
                    MutualFriendCount: t.RockstarAccount.MutualFriendCount,
                    RockstarId: t.RockstarAccount.RockstarId
                }) : (n.model = new s.ProfileNav({
                    Active: "crews",
                    MutualFriendCount: t.RockstarAccount.MutualFriendCount,
                    RockstarId: t.RockstarAccount.RockstarId
                }), n.model.on("change", n.render)), n.renderAll()
            })
        }, initialize: function (e) {
            n.bindAll(this, "render", "renderAll", "onClose", "navigate", "updateFriendRelationship", "postRender"), this.reinitialize(e), i.pubsub.on("gameFnFriends:UpdateFriendStatus", this.updateFriendRelationship)
        }
    }), _.HiddenProfileView = t.View.extend({
        el: "#profileHidden",
        events: {
            "click .message a": "sendMessage",
            "click .accept a": "acceptFriend",
            "click .friend a": "addFriend",
            "click .cancel a": "cancelFriend",
            "click .unfriend a": "removeFriend",
            "click .block a": "blockPlayerConfirm"
        },
        render: function () {
            if (e("#user").hide(), void 0 != this.model.get("Name") && "" != this.model.get("Name")) {
                var t = r.getText("ProfileNotAvailableDesc", "Social");
                t = t.replace("[Nickname]", this.model.get("Name")), this.model.set({
                    Message: t,
                    ProfileFound: !0
                }, {silent: !0})
            } else this.model.set({ProfileFound: !1}, {silent: !0});
            var n = globals.messagingServiceEnabled;
            this.model.set({ShowMessage: n}, {silent: !0});
            var a = i.renderCompiledTemplate(v, this.model.toJSON());
            this.$el.html(a), this.$el.find("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.addClass("localized"), this.$el.show(), r.removeLoading("friendProfilePanel")
        },
        updateFriendRelationship: function (e) {
            if (i.WriteDebugLog("HiddenProfileView.updateFriendRelationship", "rokstarid", e.RockstarId), void 0 != this.model && this.model.get("RockstarId") == e.RockstarId) switch (e.Relationship) {
                case 0:
                    this.model.set("Relationship", "");
                    break;
                case 4:
                    this.model.set("Relationship", "InvitedByMe");
                    break;
                case 6:
                    this.model.set("Relationship", "Friends")
            }
        },
        sendMessage: function (e) {
            e.preventDefault(), "BlockedByMe" == this.model.get("Relationship") ? i.pubsub.trigger("datafnfriends:RedirectToBlockList", this.model.get("Name")) : i.pubsub.trigger("datafnfriends:OpenNewMessage", this.model.get("RockstarId"), this.model.get("AvatarUrl"), this.model.get("Name"), "friendProfilePanel")
        },
        acceptFriend: function (e) {
            e.preventDefault(), i.pubsub.trigger("datafnfriends:SendFriendAccept", this.model.get("RockstarId"))
        },
        addFriend: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            return n.hasClass("disabled") ? !1 : (n.addClass("disabled"), i.pubsub.trigger("datafnfriends:SendFriendRequest", this.model.get("RockstarId")), !1)
        },
        cancelFriend: function (e) {
            e.preventDefault(), i.pubsub.trigger("datafnfriends:SendInviteCancel", this.model.get("RockstarId"))
        },
        removeFriend: function (e) {
            e.preventDefault(), i.pubsub.trigger("datafnfriends:ShowConfirmModal", r.getText("RemoveFriendName", "Social"), this.model.get("Name"), "datafnfriends:SendFriendRemove", this.model.get("RockstarId"))
        },
        blockPlayerConfirm: function (e) {
            e.preventDefault();
            var t = r.getText("BlockUserText", "Social"), n = r.getText("BlockUserTitle", "Social");
            a.ShowConfirmModal(t, null, "hiddenProfile:BlockPlayerConfirmAgain", n, "Block", "DontBlock", n, null)
        },
        blockPlayerConfirmAgain: function (e) {
            var t = r.getText("BlockUserConfirmText", "Social");
            a.ShowConfirmModal(t, null, "hiddenProfile:BlockPlayer", null, "Yes", "No", e, null)
        },
        blockPlayer: function () {
            var e = new s.BlockPlayerModel;
            e.block(this.model.get("RockstarId"), this.blockPlayerSuccess, a.ShowErrorModal)
        },
        blockPlayerSuccess: function () {
            var t = e("#friendProfilePanel .user-actions-wrapper");
            t.find("div.block, div.unfriend").remove();
            var n = r.getText("BlockSuccess", "Social");
            n = n.replace("[Nickname]", this.model.get("Name")), a.ShowConfirmModal(n, null, null, null, "Ok", null, null, null)
        },
        close: function () {
            e("#user").show(), this.$el.hide(), i.pubsub.off("gameFnFriends:UpdateFriendStatus", this.updateFriendRelationship, this)
        },
        initialize: function () {
            n.bindAll(this, "render", "acceptFriend", "addFriend", "removeFriend", "cancelFriend", "sendMessage", "blockPlayerConfirm", "blockPlayerConfirmAgain", "blockPlayer", "blockPlayerSuccess", "updateFriendRelationship"), this.model.on("change", this.render), i.pubsub.on("hiddenProfile:BlockPlayerConfirmAgain", this.blockPlayerConfirmAgain), i.pubsub.on("hiddenProfile:BlockPlayer", this.blockPlayer), i.pubsub.on("gameFnFriends:UpdateFriendStatus", this.updateFriendRelationship)
        }
    }), _.ProfileCardView = t.View.extend({
        el: "#cardInfoVitals",
        events: {
            "click .accept a": "acceptFriend",
            "click .friend a": "addFriend",
            "click .cancel a": "cancelFriend",
            "click .unfriend a": "removeFriend",
            "click .message a": "sendMessage",
            "click .block a": "blockPlayerConfirm"
        },
        acceptFriend: function (e) {
            e.preventDefault(), i.pubsub.trigger("datafnfriends:SendFriendAccept", this.model.get("RockstarId"))
        },
        addFriend: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            return n.hasClass("disabled") ? !1 : (n.addClass("disabled"), i.pubsub.trigger("datafnfriends:SendFriendRequest", this.model.get("RockstarId")), !1)
        },
        cancelFriend: function (e) {
            e.preventDefault(), i.pubsub.trigger("datafnfriends:SendInviteCancel", this.model.get("RockstarId"))
        },
        removeFriend: function (e) {
            e.preventDefault(), i.pubsub.trigger("datafnfriends:ShowConfirmModal", r.getText("RemoveFriendName", "Social"), this.model.get("Name"), "datafnfriends:SendFriendRemove", this.model.get("RockstarId"))
        },
        sendMessage: function (e) {
            e.preventDefault(), "BlockedByMe" == this.model.get("Relationship") ? i.pubsub.trigger("datafnfriends:RedirectToBlockList", this.model.get("Name")) : i.pubsub.trigger("datafnfriends:OpenNewMessage", this.model.get("RockstarId"), this.model.get("AvatarUrl"), this.model.get("Name"), "friendProfilePanel")
        },
        blockPlayerConfirm: function (e) {
            e.preventDefault();
            var t = r.getText("BlockUserText", "Social"), n = r.getText("BlockUserTitle", "Social");
            a.ShowConfirmModal(t, null, "profile:BlockPlayerConfirmAgain", n, "Block", "DontBlock", n, null)
        },
        blockPlayerConfirmAgain: function (e) {
            var t = r.getText("BlockUserConfirmText", "Social");
            a.ShowConfirmModal(t, null, "profile:BlockPlayer", null, "Yes", "No", e, null)
        },
        blockPlayer: function () {
            var e = new s.BlockPlayerModel;
            e.block(this.model.get("RockstarId"), this.blockPlayerSuccess, a.ShowErrorModal)
        },
        blockPlayerSuccess: function () {
            var t = e("#friendProfilePanel .user-actions");
            t.find("li.block, li.unfriend").remove();
            var n = r.getText("BlockSuccess", "Social");
            n = n.replace("[Nickname]", this.model.get("Name")), a.ShowConfirmModal(n, null, null, null, "Ok", null, null, null), e("<div id='blocked'>" + r.getText("Blocked", "Social") + "</div>").insertAfter("#cardInfoVitals .clearfix .avatar")
        },
        render: function () {
            var e = i.localizedDate(this.model.get("CreatedDate"), "LL");
            this.model.set({CreatedDateStr: e}, {silent: !0});
            var t = void 0 != globals.account && this.model.get("RockstarId") == globals.account.RockstarId;
            this.model.set({IsMe: t}, {silent: !0});
            var n = globals.messagingServiceEnabled;
            this.model.set({ShowMessage: n}, {silent: !0});
            var a = i.renderCompiledTemplate(u, this.model.toJSON());
            return this.$el.html(a), r.removeLoading("friendProfilePanel"), this.$el.find("[rel*=localize]:not(.localized)").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this
        },
        initialize: function () {
            n.bindAll(this, "render", "acceptFriend", "addFriend", "removeFriend", "cancelFriend", "sendMessage", "blockPlayerConfirm", "blockPlayerConfirmAgain", "blockPlayer", "blockPlayerSuccess"), this.model.on("change", this.render), i.pubsub.on("profile:BlockPlayerConfirmAgain", this.blockPlayerConfirmAgain), i.pubsub.on("profile:BlockPlayer", this.blockPlayer)
        }
    }), _.ProfileGamesView = t.View.extend({
        el: "#gamesPanel", events: {}, jCoverFlipInit: function () {
            var t = this.$("#gamesFlip");
            if (t.length) {
                if (t.children().find("a").length > 1) {
                    var n = t.find("li:nth-child(2)");
                    n.remove(), t.prepend(n)
                }
                var i = t.children().length;
                i > 1 && (i = 2), t.jcoverflip({
                    time: 120, current: i - 1, beforeCss: function (t, n, i) {
                        return [e.jcoverflip.animationElement(t, {
                            left: n.width() / 2 - 141 - 150 * i + 18 * i + "px",
                            bottom: "13px",
                            zIndex: 0
                        }), e.jcoverflip.animationElement(t.find("img"), {width: "90px"})]
                    }, afterCss: function (t, n, i) {
                        return [e.jcoverflip.animationElement(t, {
                            left: n.width() / 2 + 51 + 150 * i + "px",
                            bottom: "13px",
                            zIndex: 0
                        }), e.jcoverflip.animationElement(t.find("img"), {width: "90px"})]
                    }, currentCss: function (t) {
                        return [e.jcoverflip.animationElement(t, {
                            left: "90px",
                            bottom: "0px",
                            zIndex: "1"
                        }), e.jcoverflip.animationElement(t.find("img"), {width: "110px"})]
                    }
                }), this.$("#gamesFlipNext").off().on("click", function (e) {
                    e.preventDefault(), t.jcoverflip("next", "1", !1)
                }), this.$("#gamesFlipPrevious").off().on("click", function (e) {
                    e.preventDefault(), t.jcoverflip("previous", "1", !1)
                })
            }
            t.fadeIn()
        }, render: function () {
            var e = i.renderCompiledTemplate(m, {games: this.collection.toJSON(), cdnUrl: globals.baseUrl});
            return this.$el.html(e), this.jCoverFlipInit(), this
        }, initialize: function () {
            n.bindAll(this, "render", "jCoverFlipInit"), this.collection.on("reset", this.render)
        }
    }), _.ProfileFriendView = t.View.extend({
        events: {
            "click .optionProfile": "viewProfile",
            "click .message": "sendMessage",
            "click .acceptFriendInvite": "acceptFriendInvite",
            "click .declineFriendInvite": "declineFriendInvite",
            "click .removeFriend": "removeFriend",
            "click .cancelFriendInvite": "cancelInvite",
            "click .addFriend": "addFriend",
            "click .unblock": "unblock",
            "click .block": "blockPlayerConfirm"
        }, render: function () {
            var e = this.model.get("Relationship"), t = !1, n = !1, a = !1, s = !1, o = !1, l = !1, c = !1, d = !0,
                u = !1, h = this.model.get("IsOnline");
            1 === e && (t = !0), 32 === e && (n = !0), 8 === e && (s = !0, a = !0), 16 === e && (l = !0, c = !0), 2 === e && (o = !0, d = !1), globals.messagingServiceEnabled || (d = !1), 2 !== e && (u = !0);
            var p = void 0 != globals.account && this.model.get("RockstarId") == globals.account.RockstarId,
                m = this.model.get("ViewerMutualFriendCount"), g = r.getText("MutualFriends", "Social").format(m),
                v = h ? r.getText("PlayingGameOn", "Social", "Playing {0} on {1}").format(this.model.get("FriendlyGame"), this.model.get("FriendlyPlatform")) : "";
            this.model.set({
                IsMe: p,
                MutualFriendText: g,
                ShowAddFriend: t,
                ShowRemoveFriend: n,
                ShowRequestPending: a,
                ShowMessage: d,
                ShowCancelnvite: s,
                ShowUnBlock: o,
                ShowAcceptInvite: l,
                ShowDeclineInvite: c,
                OnlineStatus: h ? "online" : "offline",
                InviteMsg: this.model.get("InviteMsg"),
                PlayingGame: v,
                ShowBlock: u
            }, {silent: !0});
            var _ = i.renderCompiledTemplate(f, this.model.toJSON());
            return this.$el.html(_), this.$el.addClass("profileButtonWrapper"), this
        }, addFriend: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            return n.hasClass("disabled") ? !1 : (n.addClass("disabled"), i.pubsub.trigger("datafnfriends:SendFriendRequest", this.model.get("RockstarId")), !1)
        }, removeFriend: function () {
            return i.pubsub.trigger("datafnfriends:ShowConfirmModal", r.getText("RemoveFriendName", "Social"), this.model.get("DisplayName"), "datafnfriends:SendFriendRemove", this.model.get("RockstarId")), !1
        }, acceptFriendInvite: function () {
            return i.pubsub.trigger("datafnfriends:SendFriendAccept", this.model.get("RockstarId")), !1
        }, declineFriendInvite: function () {
            return i.pubsub.trigger("datafnfriends:ShowConfirmModal", r.getText("DeclineInviteFrom", "Social"), this.model.get("DisplayName"), "datafnfriends:SendFriendDeclineInvite", this.model.get("RockstarId")), !1
        }, cancelInvite: function () {
            return i.pubsub.trigger("datafnfriends:ShowConfirmModal", r.getText("CancelFriendInvite", "Social"), this.model.get("DisplayName"), "datafnfriends:SendInviteCancel", this.model.get("RockstarId")), !1
        }, viewProfile: function (e) {
            e.preventDefault(), i.pubsub.trigger("datafnfriends:friendProfileView", this.model.get("RockstarId"))
        }, sendMessage: function (e) {
            e.preventDefault(), 2 == this.model.get("Relationship") ? i.pubsub.trigger("datafnfriends:RedirectToBlockList", this.model.get("DisplayName")) : (i.pubsub.trigger("datafnfriends:OpenNewMessage", this.model.get("RockstarId"), this.model.get("AvatarUrl"), this.model.get("DisplayName"), this.model.get("activePanel")), l.trackEvent(l.category.message, l.action.message_send))
        }, unblock: function () {
            return i.WriteDebugLog("unblock", "Nickname", this.model.get("DisplayName")), i.pubsub.trigger("datafnfriends:ShowConfirmModal", r.getText("UnblockPlayer", "Social"), this.model.get("DisplayName"), "datafnfriends:SendFriendUnblock", this.model.get("RockstarId")), !1
        }, blockPlayerConfirm: function (e) {
            e.preventDefault();
            var t = r.getText("BlockUserText", "Social"), n = r.getText("BlockUserTitle", "Social");
            a.ShowConfirmModal(t, null, "profileFriend:BlockPlayerConfirmAgain:" + this.model.get("RockstarId"), n, "Block", "DontBlock", n, null)
        }, blockPlayerConfirmAgain: function (e) {
            var t = r.getText("BlockUserConfirmText", "Social");
            a.ShowConfirmModal(t, null, "profileFriend:BlockPlayer:" + this.model.get("RockstarId"), null, "Yes", "No", e, null)
        }, blockPlayer: function () {
            var e = new s.BlockPlayerModel;
            e.block(this.model.get("RockstarId"), this.blockPlayerSuccess, a.ShowErrorModal)
        }, blockPlayerSuccess: function () {
            var t = r.getText("BlockSuccess", "Social");
            t = t.replace("[Nickname]", this.model.get("DisplayName")), a.ShowConfirmModal(t, null, null, null, "Ok", null, null, null);
            var n = i.ActiveFriendsMenuId();
            if ("undefined" != typeof n) if ("findPlayerLink" === n) {
                var s = this.$el.find(".playerOptions");
                s.html('<li class="unblock"><a href="#" class="tooltip"><span>' + r.getText("Unblock", "Social") + "</span></a></li>")
            } else if ("myFriendsLink" === n || "friendInvitesLink" === n) {
                this.$el.remove();
                var o, l, c, d;
                "myFriendsLink" === n ? (o = e("#myFriendsLink").find("span.count"), c = "datafunctions:showNoFriends", d = e("#friendsList")) : (o = e("#friendInvitesLink").find("span.count"), c = "datafunctions:showNoFriendInvites", d = e("#friendInvitesList")), null !== o && "undefined" != typeof o && (l = parseInt(o.html(), 10), l--, o.html(0 === l ? "" : l), 0 === l && i.pubsub.trigger(c, d))
            }
        }, onClose: function () {
            i.pubsub.off("profileFriend:BlockPlayerConfirmAgain:" + this.model.get("RockstarId")), i.pubsub.off("profileFriend:BlockPlayer:" + this.model.get("RockstarId")), this.model.off()
        }, initialize: function () {
            n.bindAll(this, "render", "viewProfile", "sendMessage", "cancelInvite", "removeFriend", "declineFriendInvite", "acceptFriendInvite", "addFriend", "unblock", "blockPlayerConfirm", "blockPlayerConfirmAgain", "blockPlayer", "blockPlayerSuccess", "onClose"), this.model.on("change", this.render);
            var e = this.model.get("RockstarId");
            i.pubsub.on("profileFriend:BlockPlayerConfirmAgain:" + e, this.blockPlayerConfirmAgain), i.pubsub.on("profileFriend:BlockPlayer:" + e, this.blockPlayer)
        }
    }), _.ProfileFriendsView = t.View.extend({
        events: {}, add: function (e) {
            e.set({activePanel: this.collection.activePanel}, {silent: !0});
            var t = new _.ProfileFriendView({tagName: "div", model: e});
            this._friendViews.push(t), this._rendered && this.$el.append(t.render().el)
        }, updateFriendRelationship: function (e) {
            if (this.collection) {
                var t = this.collection.findWhere({RockstarId: e.RockstarId});
                if (t) switch (e.Relationship) {
                    case 0:
                        t.set("Relationship", "");
                        break;
                    case 4:
                        t.set("Relationship", "InvitedByMe");
                        break;
                    case 6:
                        t.set("Relationship", "Friends")
                }
            }
        }, reset: function () {
            this.closeAll(), this._rendered = !1, this._friendViews = [], this.collection.each(this.add), this.render(), r.resetScrollbar("#userFriends")
        }, closeAll: function () {
            n.each(this._friendViews, function (e) {
                e.close()
            })
        }, render: function () {
            this._rendered = !0, this.$el.empty();
            var e = this;
            if (n.each(this._friendViews, function (t) {
                e.$el.append(t.render().el)
            }), 0 === this.collection.length) {
                var t = i.renderCompiledTemplate(p, this.model.toJSON());
                this.$el.html(t)
            }
            return this.$el.show(), this
        }, initialize: function (e) {
            n.bindAll(this, "render", "add", "closeAll", "reset"), n.extend(this.collection, {activePanel: e.activePanel}), this._friendViews = [], i.pubsub.on("gameFnFriends:UpdateFriendStatus", this.updateFriendRelationship), this.collection.on("reset", this.reset), this.collection.on("add", this.add), this.reset()
        }
    }), _.ProfileCrewView = t.View.extend({
        events: {}, render: function () {
            var e = i.renderCompiledTemplate(c, this.model.toJSON());
            return this.$el.html(e), this.$(".crewCard img").on("error", i.crewImage404), this
        }, initialize: function () {
            n.bindAll(this, "render"), this.model.on("change", this.render)
        }
    }), _.ProfileCrewsView = t.View.extend({
        el: "#userCrews .box .antiscroll-inner", events: {}, add: function (e) {
            var t = new _.ProfileCrewView({tagName: "div", model: e});
            this._crewViews.push(t), this._rendered && this.$el.prepend(t.render().el)
        }, reset: function () {
            this.closeAll(), this._rendered = !1, this._crewViews = [], this.collection.each(this.add), this.render(), r.resetScrollbar("#userCrews")
        }, closeAll: function () {
            n.each(this._crewViews, function (e) {
                e.close()
            })
        }, render: function () {
            this._rendered = !0, this.$el.empty();
            var t = this;
            if (n.each(this._crewViews, function (e) {
                t.$el.append(e.render().el)
            }), 0 === this.collection.length) {
                var a = i.renderCompiledTemplate(h);
                this.$el.html(a)
            }
            return "en-US" != globals.titlelang && e("#userCrews [rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this
        }, initialize: function () {
            n.bindAll(this, "render", "add", "closeAll", "reset"), this.collection.on("reset", this.reset), this.reset()
        }
    }), _.ProfileAccountsView = t.View.extend({
        el: "#userAccounts .box .antiscroll-inner",
        events: {},
        render: function () {
            var t = i.renderCompiledTemplate(d, this.collection.toJSON());
            return "en-US" != globals.titlelang && e("#userAccounts [rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.html(t), r.resetScrollbar("#userAccounts"), this
        },
        initialize: function () {
            n.bindAll(this, "render"), this.collection.on("reset", this.render)
        }
    }), _
}), window.jQuery && function (e) {
    e.extend({
        xml2json: function (t, n) {
            function i(t, s) {
                if (!t) return null;
                {
                    var o = "", l = null, c = null;
                    t.nodeType, a(t.localName || t.nodeName), t.text || t.nodeValue || ""
                }
                t.childNodes && t.childNodes.length > 0 && e.each(t.childNodes, function (e, t) {
                    var n = t.nodeType, s = a(t.localName || t.nodeName), c = t.text || t.nodeValue || "";
                    if (8 != n) if (3 != n && 4 != n && s) l = l || {}, l[s] ? (l[s].length || (l[s] = r(l[s])), l[s] = r(l[s]), l[s][l[s].length] = i(t, !0), l[s].length = l[s].length) : l[s] = i(t); else {
                        if (c.match(/^\s+$/)) return;
                        o += c.replace(/^\s+/, "").replace(/\s+$/, "")
                    }
                }), t.attributes && t.attributes.length > 0 && (c = {}, l = l || {}, e.each(t.attributes, function (e, t) {
                    var n = a(t.name), i = t.value;
                    c[n] = i, l[n] ? (l[cnn] = r(l[cnn]), l[n][l[n].length] = i, l[n].length = l[n].length) : l[n] = i
                })), l && (l = e.extend("" != o ? new String(o) : {}, l || {}), o = l.text ? [l.text || ""].concat([o]) : o, o && (l.text = o), o = "");
                var d = l || o;
                return n && (o && (d = {}), o = d.text || o || "", o && (d.text = o), s || (d = r(d))), d
            }

            if (!t) return {};
            var a = function (e) {
                return String(e || "").replace(/-/g, "_")
            }, r = function (t) {
                return e.isArray(t) || (t = [t]), t.length = t.length, t
            };
            if ("string" == typeof t && (t = e.text2xml(t)), t.nodeType) {
                if (3 == t.nodeType || 4 == t.nodeType) return t.nodeValue;
                var s = 9 == t.nodeType ? t.documentElement : t, o = i(s, !0);
                return t = null, s = null, o
            }
        }, text2xml: function (t) {
            var n;
            try {
                var i = e.support.opacity || e.support.style ? new DOMParser : new ActiveXObject("Microsoft.XMLDOM");
                i.async = !1
            } catch (a) {
                throw new Error("XML Parser could not be instantiated")
            }
            try {
                n = e.support.opacity || e.support.style ? i.parseFromString(t, "text/xml") : i.loadXML(t) ? i : !1
            } catch (a) {
                throw new Error("Error parsing XML string")
            }
            return n
        }
    })
}(jQuery), define("xml2json", ["jquery"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)), function (e) {
    var t;
    return t = function (e) {
        return e = e.replace(/_/, "-").toLowerCase(), e.length > 3 && (e = e.substring(0, 3) + e.substring(3).toUpperCase()), e
    }, e.defaultLanguage = t(navigator.language || navigator.userLanguage), e.localize = function (n, i) {
        var a, r, s, o, l, c, d, u, h, f, p, m, g, v, _, b, y, w, S, C;
        return null == i && (i = {}), w = this, s = {}, r = i.fileExtension || "xml", S = function () {
            return "xml" === r
        }, c = function (e, t, n) {
            var a;
            switch (null == n && (n = 1), n) {
                case 1:
                    return s = {}, i.loadBase ? (a = e + ("." + r), o(a, e, t, n)) : c(e, t, 2);
                case 2:
                    if (t.length >= 2) return a = "" + e + t + "." + r, o(a, e, t, n)
            }
        }, o = function (t, n, a, r) {
            var o, l, d;
            return null != i.pathPrefix && (t = "" + i.pathPrefix + "/" + t), C = t, d = function (i, o, l, d) {
                var u;
                return u = d === !0 ? i : S() ? e.xml2json(i) : i, e.extend(s, u), window.appendLocalizationCache(u, t), g(s), c(n, a, r + 1)
            }, l = function () {
                return i.fallback && i.fallback !== a ? c(n, i.fallback) : void 0
            }, o = {
                url: t,
                dataType: i.fileExtension,
                async: !1,
                timeout: null != i.timeout ? i.timeout : 3e3,
                success: d,
                error: l
            }, "file:" === window.location.protocol && (o.error = function (t) {
                var n = S() ? e.xml2json(t.responseText) : t.responseText;
                return d(e.parseJSON(n))
            }), window.isLocalizationFileCached(t) ? o.success(window.getLocalizationCache(), null, null, !0) : e.ajax(o)
        }, g = function (e) {
            return null != i.callback ? i.callback(e, a) : a(e)
        }, a = function (t) {
            return w.each(function () {
                var n, i, a;
                return n = e(this), i = n.data("localize"), i || (i = n.attr("rel").match(/localize\[(.*?)\]/)[1]), a = y(i, t), null != a ? d(n, i, a) : void 0
            })
        }, d = function (t, n, i) {
            return t.is("input") || t.is("textarea") ? p(t, n, i) : t.is("img") ? h(t, n, i) : t.is("optgroup") ? m(t, n, i) : e.isPlainObject(i) || (f(t, n, i), t.html(i)), e.isPlainObject(i) ? u(t, i) : void 0
        }, p = function (t, n, i) {
            var a;
            return a = e.isPlainObject(i) ? i.value : i, t.is("[placeholder]") ? t.attr("placeholder", a) : t.val(a)
        }, u = function (e, t) {
            return _(e, "title", t), b(e, "text", t)
        }, m = function (e, t, n) {
            return e.attr("label", n)
        }, h = function (e, t, n) {
            return _(e, "alt", n), _(e, "src", n)
        }, f = function (e, t, n) {
            return void 0 == e.attr("title") ? void 0 : e.attr("title", n)
        }, y = function (e, t) {
            var n, i, a, r, s = null;
            for (n = e.split(/\./), i = t, a = 0, r = n.length; r > a; a++) e = n[a], s = null != i ? i[e] : null, null == s && (e = window.getLocalizationKey(n[a], C), s = i[e]);
            return s
        }, _ = function (e, t, n) {
            return n = y(t, n), null != n ? e.attr(t, n) : void 0
        }, b = function (e, t, n) {
            return n = y(t, n), null != n ? e.text(n) : void 0
        }, v = function (e) {
            var t;
            return "string" == typeof e ? "^" + e + "$" : null != e.length ? function () {
                var n, i, a;
                for (a = [], n = 0, i = e.length; i > n; n++) t = e[n], a.push(v(t));
                return a
            }().join("|") : e
        }, l = t(i.language ? i.language : e.defaultLanguage), i.skipLanguage && l.match(v(i.skipLanguage)) || c(n, l, 1), w
    }, e.fn.localize = e.localize, e.localize.data = {}
}(jQuery), define("jquery.localize", ["jquery", "xml2json"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)), function (e) {
    var t = e(window);
    e.fn.visible = function (e, n, i, a) {
        if (!(this.length < 1)) {
            var r = "undefined" != typeof a;
            if ("undefined" == typeof n && (n = !0), "undefined" == typeof e && (e = !0), r) var s = a.offset(),
                o = s.top, l = a.height() + o;
            var c = this.length > 1 ? this.eq(0) : this, d = c.get(0), u = t.width(), h = t.height(),
                f = i ? i : "both", p = n === !0 ? d.offsetWidth * d.offsetHeight : !0;
            if ("function" == typeof d.getBoundingClientRect) {
                var m, g, v = d.getBoundingClientRect(), _ = v.left >= 0 && v.left < u, b = v.right > 0 && v.right <= u;
                r ? (m = v.top >= 0 && v.top < h && v.top >= o && v.top < l, g = v.bottom > 0 && v.bottom <= h && v.bottom > o && v.bottom <= l) : (m = v.top >= 0 && v.top < h, g = v.bottom > 0 && v.bottom <= h);
                var y = e ? m || g : m && g, w = e ? _ || b : _ && b;
                if ("both" === f) return p && y && w;
                if ("vertical" === f) return p && y;
                if ("horizontal" === f) return p && w
            } else {
                var S = t.scrollTop(), C = S + h, k = t.scrollLeft(), T = k + u, L = c.offset(), E = L.top,
                    M = E + c.height(), I = L.left, P = I + c.width(), D = e === !0 ? M : E, A = e === !0 ? E : M,
                    R = e === !0 ? P : I, x = e === !0 ? I : P;
                if (r) {
                    if ("both" === f) return !!p && C + o >= A && D >= S + o && T >= x && R >= k;
                    if ("vertical" === f) return !!p && C + o >= A && D >= S + o;
                    if ("horizontal" === f) return !!p && T >= x && R >= k
                } else {
                    if ("both" === f) return !!p && C >= A && D >= S && T >= x && R >= k;
                    if ("vertical" === f) return !!p && C >= A && D >= S;
                    if ("horizontal" === f) return !!p && T >= x && R >= k
                }
            }
        }
    }
}(jQuery), define("common/jquery.visible", function () {
}), define("common/jquery.datafunctions.friends", ["jquery", "underscore", "utils", "jquery.setup.environment.utils", "common/jquery.datafunctions", "common/profile/profile-views", "common/modals/modal-views", "common/analyticsManager", "jquery.localize", "moment", "spinner", "common/jquery.visible"], function (e, t, n, i, a, r, s, o) {
    function l(t, i, a) {
        var r = '{ "playerTicket":"' + i + '","env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"rockstarId":"' + a + '" }';
        return e.ajax({
            type: "POST",
            url: n.getApiUrl("/api/friend/getnickname"),
            services: ["accounts"],
            headers: t,
            data: r,
            contentType: "application/json; charset=utf-8",
            dataType: "text",
            silentFail: !0,
            disableSlowMsg: !0,
            showSlowTimeout: !1
        })
    }

    var c = {}, d = [];
    c.getFriendsCache = {}, c.FindPlayer = function (t, a) {
        e("#findFriendsIntro").hide(), e("#friendSearchTerm").show().find("span.purple").html(t), e("#friendsPanel .loadingMask").addClass("noMask"), i.setUpLoadingPanel("#friendsPanel", function () {
            e("#findFriends .emptyContainer").remove()
        }), n.WriteDebugLog("FindPlayer", "searchTerm", t), e("#findFriendsList").data("pageIndex", a), n.WriteDebugLog("FindPlayer", "pageIndex", e("#friendSearchbox").data("pageIndex"));
        var r = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"searchNickname":"' + t + '","pageIndex":"' + a + '" }',
            s = {PlayerListType: 99, PageIndex: a, Players: []};
        n.WriteDebugLog("FindPlayer", "options", r);
        var o = i.GetAuthHeaderAsync();
        o.done(function (t) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/friend/accountsearch"),
                services: ["accounts"],
                headers: t,
                data: r,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                fatalError: c.OnErrorFindPlayer,
                requestDescription: "AccountSearch",
                success: function (t) {
                    var i = e("#friendSearch #friendSearchForm .errors");
                    i.empty(), n.WriteDebugLog("FindPlayer", "data d", t.d);
                    var r, o = e(t);
                    r = a > 0 ? e("#findFriendsList").data("total") : o.find("MaxCount").length > 0 ? o.find("MaxCount").text() : "0";
                    var l, d = o.find("BlockedCount").length > 0 ? o.find("BlockedCount").text() : "0";
                    l = parseInt(r, 10) > 0 && parseInt(d, 10) > 0 ? parseInt(r, 10) - parseInt(d, 10).toString() : r, s.Total = l, s.Count = o.find("RockstarAccountView").length, o.find("RockstarAccountView").each(function () {
                        var t = e(this);
                        n.WriteDebugLog("FindPlayer", "RockstarId", t.attr("RockstarId")), n.WriteDebugLog("FindPlayer", "Nickname", t.attr("Nickname")), n.WriteDebugLog("FindPlayer", "CreatedDate", t.attr("CreatedDate")), s.Players.push({
                            RockstarId: t.attr("RockstarId"),
                            DisplayName: t.attr("Nickname"),
                            AvatarUrl: n.getAvatarUrl(t.attr("AvatarUrl")),
                            Relationship: c.GetRelationShipCode(t.attr("Relationship"))
                        })
                    });
                    var u = JSON.stringify(s);
                    n.WriteDebugLog("FindPlayer", "jsonString", u), "0" == a && (e("#findFriendsList").empty(), e("#findFriendsList").data("total", o.find("MaxCount").length > 0 ? o.find("MaxCount").text() : "0")), n.pubsub.trigger("datafunctions:RGSC_JS_PLAYER_LIST_RESPONSE", u), a = null, o = null, t = null
                }
            })
        })
    }, c.OnErrorFindPlayer = function (t, r, s, o, l) {
        if (t == n.errorCode("5005")) {
            var c = e("#friendSearch .searchTip"), d = i.getError("NickInvalid"), u = e(".panel.active").attr("id");
            c.html(d), c.fadeIn(), n.removeLoading(u)
        } else a.ShowErrorModal(t, r, s, o, l)
    }, c.GetFriendsJS = function (t) {
        n.WriteDebugLog("GetFriendsJS", "options", t);
        var r = t;
        r.Players = [];
        var s = {
            env: globals.rosEnvironment,
            title: globals.titleName,
            version: globals.RosTitleVersion,
            pageSize: t.PageSize,
            pageIndex: t.PageIndex,
            rockstarId: ""
        }, o = i.GetAuthHeaderAsync();
        o.done(function (t) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/friend/getfriendsandinvitessent"),
                services: ["friends"],
                headers: t,
                data: JSON.stringify(s),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                fatalError: a.ShowErrorModal,
                requestDescription: "GetFriends",
                success: function (t) {
                    if (i.TabIsActive(e("#friendsPanel .sideMenu #myFriendsLink"))) {
                        e.each(t.RockstarAccountList.RockstarAccounts, function () {
                            r.Players.push({
                                RockstarId: this.RockstarId,
                                AvatarUrl: this.AvatarUrl,
                                DisplayName: this.Name,
                                MutualFriends: this.MutualFriendCount,
                                ViewerMutualFriendCount: this.MutualFriendCount,
                                Relationship: c.GetRelationShipCode(this.Relationship),
                                IsOnline: this.IsOnline,
                                Game: this.IsOnline ? this.OnlineGames[0].TitleName : null,
                                Platform: this.IsOnline ? this.OnlineGames[0].PlatformName : null,
                                FriendlyGame: this.IsOnline ? this.OnlineGames[0].TitleFriendlyName : null,
                                FriendlyPlatform: this.IsOnline ? this.OnlineGames[0].PlatformFriendlyName : null
                            })
                        }), r.Success = !0, r.Count = r.Players.length, r.Total = t.RockstarAccountList.Total;
                        var a = JSON.stringify(r);
                        n.pubsub.trigger("datafunctions:RGSC_JS_PLAYER_LIST_RESPONSE", a)
                    }
                }
            })
        })
    };
    var u = function (e) {
        n.WriteDebugLog("GetFriendCompareJS", "RockstarId", e.RockstarId), n.WriteDebugLog("GetFriendCompareJS", "Nickname", e.Name), n.WriteDebugLog("GetFriendCompareJS", "Avatar", e.AvatarUrl)
    }, h = function (i) {
        var a = i.RockstarAccountList.RockstarAccounts, r = [];
        t.each(a, function (e) {
            var t = "<li><a data-userid='" + e.RockstarId + "' data-useravatar='" + e.AvatarUrl + "'>" + e.Name + "</a></li>";
            u(e), r.push(t)
        }), n.WriteDebugLog("GetFriendCompareJS", "friendsList.join('')", r.join("")), e("#compareSelectList").html(r.join("")), r = null, e("#compareSelect .spinner").spinner("stop").fadeOut(), e("#compareSelectContainer").fadeIn(function () {
            e(this).data("antiscroll").refresh()
        })
    }, f = function (e) {
        n.WriteDebugLog("GetFriendCompareJS", "data", e), h(e), o.trackPage("/FriendCompare")
    };
    return c.ClearGetFriendsCache = function () {
        c.getFriendsCache = {}
    }, c.GetFriendCompareJS = function () {
        n.WriteDebugLog("GetFriendCompareJS", "", "");
        var t = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"pageSize":"0","rockstarId":"" }',
            a = ["getfriends", globals.account.RockstarId].join(":");
        if (n.WriteDebugLog("GetFriendCompareJS", "options", t), c.getFriendsCache[a]) {
            var r = c.getFriendsCache[a];
            return void f(r)
        }
        var s = i.GetAuthHeaderAsync();
        s.done(function (i) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/friend/getfriends"),
                services: ["friends"],
                headers: i,
                data: t,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                fatalError: c.GetFriendCompareJSError,
                contentEl: e("#compareSelect"),
                requestDescription: "GetFriends",
                success: function (e, t) {
                    "success" === t && (c.getFriendsCache[a] = e), f(e)
                }
            })
        })
    }, c.GetFriendCompareJSError = function (e, t, n, i, r) {
        a.ShowErrorModal(e, t, n, i, r), n.find(".spinner").spinner("stop").fadeOut(), c.ClearGetFriendsCache()
    }, c.GetFriendInvitesJS = function (t) {
        n.WriteDebugLog("GetFriendInvitesJS", "options", t);
        var r = {RequestId: 123456, ResultCode: 0, PlayerListType: 4, PageIndex: t.PageIndex, Players: []},
            s = i.GetAuthHeaderAsync();
        s.done(function (s) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/friend/getinvites"),
                services: ["accounts", "friends"],
                headers: s,
                data: JSON.stringify(t),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                fatalError: a.ShowErrorModal,
                requestDescription: "GetFriendInvites",
                success: function (t) {
                    if (i.TabIsActive(e("#friendsPanel .sideMenu #friendInvitesLink"))) {
                        var a = t.RockstarAccountList.RockstarAccounts;
                        null != t.RockstarAccountList && null != a && a.length > 0 && e.each(a, function () {
                            r.Players.push({
                                RockstarId: this.RockstarId,
                                AvatarUrl: this.AvatarUrl,
                                DisplayName: this.Name,
                                InviteShortMsg: this.ShortMessage,
                                InviteMsg: this.Message,
                                MutualFriends: this.MutualFriendCount,
                                ViewerMutualFriendCount: this.MutualFriendCount,
                                Relationship: c.GetRelationShipCode(this.Relationship)
                            })
                        }), r.Success = !0, r.Count = r.Players.length, r.Total = t.RockstarAccountList.Total;
                        var s = JSON.stringify(r);
                        e("#friendInvitesList").data("friendInvitesList", r), n.pubsub.trigger("datafunctions:RGSC_JS_PLAYER_LIST_RESPONSE", s)
                    }
                }
            })
        })
    }, c.GetFriendAchievementsJS = function (t) {
        n.WriteDebugLog("GetFriendAchievements", "", "");
        var r = i.getCredsAsync();
        r.done(function (r) {
            if (r.Ticket) {
                var s = '{ "playerTicket":"' + r.Ticket + '","env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"friendRockstarId":"' + t + '" }';
                n.WriteDebugLog("GetFriendAchievements", "options", s);
                var o = i.GetAuthHeaderAsync(r.Ticket);
                o.done(function (t) {
                    e.ajax({
                        type: "POST",
                        url: n.getApiUrl("/api/" + globals.titleName + "/getfriendachievements"),
                        services: ["gameachievements"],
                        headers: t,
                        data: s,
                        contentType: "application/json; charset=utf-8",
                        dataType: "xml",
                        fatalError: a.ShowErrorModal,
                        requestDescription: "GetFriendAchievements",
                        success: function (t) {
                            n.WriteDebugLog("GetFriendAchievements", "data", t), i.LoadGameAchievements(null, e(t).find("AchievementList"))
                        },
                        complete: function (t, a) {
                            n.ToggleCompareFriendElements(a), i.removeLoading("statsPanel"), i.hideStats() || (e("#statsLink2").removeClass("disabled"), e("#onlineStatsLink").removeClass("disabled"))
                        }
                    })
                })
            }
        })
    }, c.closeCompareStats = function () {
        e("#compareSelect").animate({height: "0"}, 200, "easeInBack", function () {
            e("#compareSelect, #compareSelectContainer").hide()
        }).removeClass("open")
    }, c.closeloadComparedStatsCompareStats = function () {
        i.setUpLoadingPanel("#statsPanel", function () {
            n.WriteDebugLog("loadComparedStats", "", ""), e("#statsPanel").addClass("compared"), e("#statsPanel").is(".stats") ? e("#statsContent").show() : e("#statsPanel").is(".achievements") && e("#achievementsContent").show(), setTimeout(function () {
                e(".active .loadingMask").fadeOut(600, function () {
                    e(".active span.loading").spinner("stop")
                }), 0 == e("#statstable .col3").length && (e("#statstable .statGroupHeader td").attr("colspan", "3"), e("#statstable tr:not(.statGroupHeader)").each(function () {
                    var t = e(this).find(".col2").html();
                    e(this).append('<td class="col3">' + t + "</td>")
                })), 0 == e("#achievementstable .pointsFriend").length && e("#achievementstable tr").each(function () {
                    var t = e(this).find(".points").html();
                    e(this).append('<td class="pointsFriend">' + t + "</td>")
                })
            }, 1e3)
        })
    }, c.triggerMessageFriendSearch = function (e) {
        void 0 != e && "newMessageName" == e.attr("id") && "" != e.val() && e.autocomplete("search")
    }, c.OpenNewMessage = function (a, r, s, o) {
        if (n.WriteDebugLog("OpenNewMessage", "returnPanel-xxx", o), !globals.messagingServiceEnabled) return e("#homeButton").click(), void n.pubsub.trigger("setupEnv:showServiceAlert");
        var l = void 0 != o && "" != o, d = e("#messagesPanel"), u = d.find("#cancelMessage"),
            h = d.find("#newMessageName"), f = d.find("#newMessageEntry");
        l && (u.addClass("backFriendLink").data("returnPanel", o), h.val(s).attr("data-rockstarId", a)), d.hasClass("active") || i.setUpLoadingPanel("#messagesPanel", function () {
            l ? f.focus() : h.focus()
        }), f.val(""), d.find("#newMessageInput span.characterCount").text("0"), d.find(".sendMessage").attr("disabled", "disabled"), d.find(".help-block").text(""), d.find("div.content").removeAttr("style"), i.setSelectedSide("#messagesLink"), n.WriteDebugLog("OpenNewMessage", "#newMessageInput style", e("#newMessageInput").attr("style")), d.find("#newMessageInput h5").html(i.getText("SendMessageTitle", "Social", "Send a new message")), e("#cancelMessage, #newMessageInput").show(), e("#newMessage").hide(), d.attr("class", "panel active messageFriendSearch"), "en-US" != globals.titlelang && (d.hasClass("localized") || (d.find("[rel*=localize]").localize("Social", {
            language: globals.titlelang,
            pathPrefix: globals.baseAssetUrl + "xml/Shared"
        }), d.addClass("localized"))), h.hasClass("ui-autocomplete-input") || h.autocomplete({
            source: function (t, a) {
                var r = i.GetAuthHeaderAsync();
                r.done(function (t) {
                    e.ajax({
                        type: "POST",
                        url: n.getApiUrl("/api/friend/accountsearch"),
                        services: ["accounts"],
                        headers: t,
                        dataType: "json",
                        data: {searchNickname: e("#newMessageName").val()},
                        fatalError: c.OnErrorFindPlayerAutoComplete,
                        requestDescription: "AccountSearch",
                        success: function (t) {
                            e("#msgFriendSearchForm .help-block").html(""), a(e.map(t.RockstarAccountList.RockstarAccounts, function (e) {
                                return {label: e.Name, value: e.Name, id: e.RockstarId, relationship: e.Relationship}
                            }))
                        }
                    })
                })
            }, appendTo: ".ui-widget", minLength: 3, messages: {
                noResults: "", results: function () {
                }
            }, select: function (t, a) {
                t.preventDefault();
                var r = e("#newMessageName");
                if (1 == a.item.relationship) r.attr("data-rockstarId", ""), r.val(""), n.pubsub.trigger("datafnfriends:RedirectToBlockList", a.item.label); else {
                    r.val(a.item.label), r.attr("data-rockstarId", a.item.id);
                    var s = 0 + encodeURIComponent(e("#newMessageEntry").val()).length;
                    i.EnableSendMessageButton(s)
                }
            }, change: function () {
                var t = e("#newMessageName");
                if ("undefined" == typeof t.data("rockstarId")) {
                    var n = e("#newMessageName").siblings(".ui-widget");
                    if (n.children("li").length > 0) {
                        var i = n.find("li:contains(" + t.val() + ")");
                        i.length || (i = n.children("li").first());
                        var a = i.data("ui-autocomplete-item");
                        t.val(a.value), t.attr("data-rockstarId", a.id)
                    }
                }
            }
        }), h._renderItem = function (n, i) {
            return t.include(self.idArr, i.id) ? void 0 : e("<li></li>").data("ui-autocomplete-item", i).append("<a>" + i.name + "</a>").appendTo(n)
        }, i.removeLoading("messagesPanel")
    }, c.OnErrorFindPlayerAutoComplete = function (t, r, s, o, l) {
        if (t == n.errorCode("5005")) {
            var c = e("#msgFriendSearchForm");
            return r = i.getError("NickInvalid"), c.find(".help-block").html(r), void c.find(".ui-autocomplete").hide()
        }
        a.ShowErrorModal(t, r, s, o, l)
    }, c.SendMessage = function (t, r, s, l) {
        n.WriteDebugLog("SendMessage", "", "");
        var d = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"recipientRockstarId":"' + r + '","messageText":"' + s + '" }';
        n.WriteDebugLog("SendMessage", "options", d);
        var u = i.GetAuthHeaderAsync();
        u.done(function (s) {
            var u = e(l ? ".sendReply" : ".sendMessage");
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/messaging/sendmessage"),
                services: ["messaging"],
                headers: s,
                data: d,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                noRetryModal: !0,
                fatalError: a.ShowErrorModal,
                requestDescription: "SendMessage",
                success: function (t, n) {
                    if ("success" == n) {
                        e(".newMessageEntry").val(""), e(".characterCount").text("250"), u.attr("disabled", "disabled"), e("#newMessageName").val(""), e("#friendsSearch #newMessageName").attr("data-rockstarId", ""), l ? o.trackEvent(o.category.message, o.action.message_reply) : o.trackEvent(o.category.message, o.action.message_send);
                        var a = e("#cancelMessage");
                        a.hasClass("backFriendLink") ? (a.removeClass("backFriendLink"), e("#cancelMessage, #newMessageInput").hide(), i.setUpLoadingPanel("#" + a.data("returnPanel"), function () {
                            i.removeLoading(a.data("returnPanel"))
                        })) : l ? (e("#messageThread").data("PageIndex", 0), c.messagesThreadQuery()) : (e("#menuMessages").click(), e("#cancelMessage, #newMessageInput").hide(), e("#newMessage").show())
                    }
                },
                complete: function (n, i) {
                    t = null, r = null, "success" !== i && u.removeAttr("disabled"), e("#cancelMessage").removeAttr("disabled")
                }
            })
        })
    }, c.SendFriendAcceptInvite = function (e) {
        n.WriteDebugLog("SendFriendAcceptInvite", "playerRockstarId", e);
        var t = '{ "RequestId":' + e + ', "RockstarId":"' + e + '", "Success":true }';
        i.CallGameMethod("RGSC_FRIEND_ACCEPT_INVITE", t, "RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT"), c.ClearFriendsCache(e), o.trackEvent(o.category.friend, o.action.friend_invite_accept)
    }, c.getNicknameAsync = function (t) {
        var n = new e.Deferred;
        if ("undefined" == typeof t || !t.length) return n.reject({responseText: ""}, "error", "rockstarId is undefined or empty"), n.promise();
        var a = d[t];
        if (void 0 != a && a.length) return n.resolve(a), n.promise();
        var r = i.getCredsAsync();
        return r.done(function (e) {
            if (e.Ticket) {
                var a = i.GetAuthHeaderAsync(e.Ticket);
                a.done(function (i) {
                    var a = l(i, e.Ticket, t);
                    a.done(function (e) {
                        d[t] = e, n.resolve(e)
                    }), a.fail(n.reject)
                })
            }
        }), n.promise()
    }, c.ClearFriendsCache = function (t) {
        var a = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"friendRockstarId":' + t + " }",
            r = i.GetAuthHeaderAsync();
        r.done(function (t) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/friend/clearfriendscache"),
                services: ["friends"],
                headers: t,
                data: a,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                silentFail: !0,
                disableSlowMsg: !0,
                success: function () {
                    n.WriteDebugLog("ClearFriendsCache", "Success", "")
                },
                error: function (e, t, i) {
                    n.WriteDebugLog("ClearFriendsCache", "ERROR", i), n.WriteDebugLog("ClearFriendsCache", "ERROR status", t), n.WriteDebugLog("ClearFriendsCache", "ERROR responseText", e.responseText, n.logType.error, n.logController.friend)
                }
            })
        }), c.ClearGetFriendsCache()
    }, c.SendFriendDeclineInvite = function (e) {
        n.WriteDebugLog("SendFriendDeclineInvite", "playerRockstarId", e);
        var t = '{ "RequestId":' + e + ', "RockstarId":"' + e + '"}';
        i.CallGameMethod("RGSC_FRIEND_DECLINE_INVITE", t, "RGSC_JS_FRIEND_DECLINE_INVITE_RESULT"), c.ClearFriendsCache(e), o.trackEvent(o.category.friend, o.action.friend_invite_decline)
    }, c.SendFriendRemove = function (e) {
        n.WriteDebugLog("SendFriendRemove", "playerRockstarId", e);
        var t = '{ "RequestId":' + e + ', "RockstarId":"' + e + '"}';
        i.CallGameMethod("RGSC_FRIEND_DELETE_FRIEND", t, "RGSC_JS_FRIEND_DELETE_FRIEND_RESULT"), c.ClearFriendsCache(e), o.trackEvent(o.category.friend, o.action.friend_delete)
    }, c.SendInviteCancel = function (e) {
        n.WriteDebugLog("SendInviteCancel", "playerRockstarId", e);
        var t = '{ "RequestId":' + e + ', "RockstarId":"' + e + '"}';
        i.CallGameMethod("RGSC_FRIEND_CANCEL_INVITE", t, "RGSC_JS_FRIEND_CANCEL_INVITE_RESULT"), c.ClearFriendsCache(e), o.trackEvent(o.category.friend, o.action.friend_cancel_invite)
    }, c.SendGameInvite = function (e) {
        n.WriteDebugLog("SendGameInvite", "playerRockstarId", e);
        var t = '{ "RequestId":' + globals.account.RockstarId + ', "RockstarId":"' + e + '"}';
        i.CallGameMethod("RGSC_GAME_INVITE_SEND", t, "RGSC_JS_GAME_INVITE_SEND_RESULT")
    }, c.SendJoinGame = function (e) {
        n.WriteDebugLog("SendJoinGame", "playerRockstarId", e);
        var t = '{ "RockstarId":"' + e + '"}';
        i.CallGameMethod("RGSC_JOIN_VIA_PRESENCE", t, "RGSC_JS_GAME_INVITE_SEND_RESULT")
    }, c.SendDeclineGameInvite = function (t) {
        n.WriteDebugLog("DeclineGameInvite", "messageId", t), i.CallGameMethod("RGSC_GAME_INVITE_DECLINED", '{ "GameInviteId" : ' + t.replace("gameInviteId", "") + " }", null), o.trackEvent(o.category.game, o.action.game_invite_decline), e("#" + t).fadeOut(function () {
            e(this).remove(), e("#friendsContainer").data("antiscroll").refresh(), e("#gameInvitesHeader span.purple").html(e("#gameInvitesList div.profileButton").length)
        })
    }, c.SendAcceptGameInvite = function (t) {
        n.WriteDebugLog("SendAcceptGameInvite", "messageId", t), i.CallGameMethod("RGSC_GAME_INVITE_ACCEPTED", '{ "GameInviteId" : ' + t.replace("gameInviteId", "") + " }", null), o.trackEvent(o.category.game, o.action.game_invite_accept), e("#" + t).fadeOut(function () {
            e(this).remove(), e("#friendsContainer").data("antiscroll").refresh(), e("#gameInvitesHeader span.purple").html(e("#gameInvitesList div.profileButton").length)
        })
    }, c.SendFriendRequest = function (e) {
        n.WriteDebugLog("SendFriendRequest", "playerRockstarId", e);
        var t = '{ "RequestId":' + e + ', "RockstarId":"' + e + '"}';
        i.CallGameMethod("RGSC_FRIEND_SEND_INVITE", t, "RGSC_JS_FRIEND_SEND_INVITE_RESULT"), c.ClearFriendsCache(e), o.trackEvent(o.category.friend, o.action.friend_invite_send)
    }, c.SendFriendUnblock = function (e) {
        n.WriteDebugLog("SendFriendUnblock", "playerRockstarId", e);
        var t = '{ "RequestId":' + e + ', "RockstarId":"' + e + '"}';
        i.CallGameMethod("RGSC_FRIEND_UNBLOCK_PLAYER", t, "RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT"), o.trackEvent(o.category.settings, o.action.settings_block_list_unblock)
    }, c.SetProfileOptions = function (t) {
        n.WriteDebugLog("SetProfileOptions", "account", JSON.stringify(t));
        var i = e("#nameForm");
        i.find(".buttons").show(), e("#editName").prop("readonly", !1), i.find(".help-inline").html(""), c.CheckAccountDetails(t.Nickname), e("#editNameDisplay").text(t.Nickname), e("#editEmailDisplay").text(t.Email), e("#editCountryDisplay").text(e("#editCountry option[value=" + t.CountryCode + "]").text());
        var r = "true" == localStorage.getItem("hideNotifications");
        a.SetNotificationVisibility(r)
    }, c.SetNicknameNotEditable = function () {
        var t = e("#nameForm");
        t.find(".buttons").hide(), t.find("#editName").val(globals.account.Nickname), t.find("#editName").prop("readonly", !0);
        var n = i.getText("NickNotEdit", "Settings");
        t.find(".help-inline").html(n)
    }, c.UpdatePrivacySetting = function (t, r, s, l) {
        n.WriteDebugLog("UpdatePrivacySetting", "setting=value", t + "=" + r);
        var c = l.parent().find(".privacyChangeAlert");
        c.addClass("confirm").fadeIn();
        var d, u;
        switch (t.toLowerCase()) {
            case"sc":
                u = o.action.settings_privacy_change_profile_visibility, d = e("#togglePrivacyProfile a.selected input").val();
                break;
            case"profile_location":
                u = o.action.settings_privacy_change_country_visibility, d = e("#togglePrivacyCountry a.selected input").val();
                break;
            case"gameplay_visibility":
                u = o.action.settings_privacy_change_stats_visibility, d = e("#togglePrivacyStats a.selected input").val();
                break;
            case"presencevisibility":
                u = o.action.settings_game_change_presence_visibility, d = e("#togglePresenceVisibility a.selected input").val();
                break;
            default:
                u = o.action.settings_privacy_change_platform_visibility, d = e("#" + t + " a.selected input").val()
        }
        var h = {setting: t, oldValue: d, newValue: r};
        o.trackEvent(o.category.settings, u, h);
        var f = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"wsURL":"' + globals.wsURL + '","settingsNameValueCSV":"' + t + "=" + r + '","accountId":"' + s + '" }';
        n.WriteDebugLog("UpdatePrivacySetting", "options", f);
        var p = i.GetAuthHeaderAsync();
        p.done(function (t) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/privacy/updateprivacysettings"),
                services: ["accounts"],
                headers: t,
                data: f,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: a.ShowErrorModal,
                requestDescription: "UpdatePrivacySettings",
                success: function (t, n) {
                    "success" == n && (l.parent().children("a").removeClass("selected"), l.addClass("selected")), e("#checkName").fadeOut()
                },
                complete: function () {
                    l.removeData("updating"), c.fadeOut("slow", function () {
                        c.removeClass("confirm")
                    })
                }
            })
        })
    }, c.GetMessageCountJS = function (t) {
        if (null != t && 0 != t) {
            var a = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"rockstarId":"' + t + '" }';
            n.WriteDebugLog("GetMessageCountJS", "options", a);
            var r = i.GetAuthHeaderAsync();
            r.done(function (t) {
                e.ajax({
                    type: "POST",
                    url: n.getApiUrl("/api/messaging/getmessagecount"),
                    services: ["messaging"],
                    headers: t,
                    data: a,
                    contentType: "application/json; charset=utf-8",
                    dataType: "xml",
                    cache: !1,
                    silentFail: !0,
                    success: function (t, a) {
                        if ("success" == a) {
                            var r = e(t).find("Unread").text();
                            n.WriteDebugLog("GetMessageCountJS", "unreadMessageCount", r), e("#menuMessages span.count").html("0" == r ? "" : r + " " + i.getText("New", "Social"))
                        }
                        e("#checkName").fadeOut()
                    }
                })
            })
        }
    }, c.GetMessages = function (t) {
        n.WriteDebugLog("GetMessages", "", "");
        var r = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":,"rockstarId":"' + globals.account.RockstarId + '","pageIndex":' + t + "}";
        n.WriteDebugLog("GetMessages", "options", r);
        var s = i.GetAuthHeaderAsync();
        s.done(function (t) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/messaging/getmessagesenderlist"),
                services: ["messaging"],
                headers: t,
                data: r,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: a.ShowErrorModal,
                requestDescription: "GetMessageSenderList",
                success: function (t, n) {
                    "success" == n && (e("#messagesList").data("total", e(t).find("UserList").attr("TotalUserCount")), c.ProcessMessageSenderList(t)), e("#checkName").fadeOut()
                },
                complete: function () {
                    e("#messagesPanel").find("div.content").removeAttr("style")
                }
            })
        })
    }, c.ProcessMessageSenderList = function (t) {
        var a = "", r = 0, s = 0, o = i.getText("New", "Social"),
            l = (i.getText("Read", "Social"), "en-US" == globals.titlelang ? '<a class="ribbon-EN">NEW</a>' : '<a class="ribbon">NEW</a>', 0);
        e(t).find("MessageUser").each(function (t) {
            n.WriteDebugLog("GetMessages", "Message i", t);
            var i = e(this);
            f = "";
            var c = t, d = i.find("ScNickname").text(), u = i.find("Messages").attr("LastReceivedOn");
            moment.lang(globals.titlelang);
            var h = moment.utc(u).local().fromNow(), f = null, p = "",
                m = n.getLastStringSegment(i.find("AvatarUrl").text(), "/", 2);
            m = n.getAvatarUrl(m);
            var g = i.find("RockstarId").text(), v = parseInt(i.find("Messages").attr("Total"), 10),
                _ = parseInt(i.find("Messages").attr("Unread"), 10);
            if (r += v, s += _, _ > 0 && (f = "new"), 0 == t) {
                var b = e("#messageThread");
                b.data("data-id", g), b.data("data-avatar", m), b.data("data-nickname", d)
            }
            a += '<div tabindex="' + l + '" id="messageId' + c + '" class="message load_messages profileButton ' + f + '" data-nickname="' + d + '" data-avatar="' + m + '" data-id="' + g + '">', f && (a += '<span class="ribbon">NEW</span>', p = '<span class="unreadCount purple"> *' + s + " " + o + "*</span>"), a += '<img width="32" height="32" class="avatarImg" alt="' + g + '" src="' + m + '"><div class="text"><h5 class="profilenickname">' + d + '</h5></div><div class="footer"><span class="received">' + h + "</span></div></div>"
        });
        var d = e("#messagesList .box .antiscroll-inner");
        "" == a ? d.empty().append('<div class="emptyContainer"><p>' + i.getText("NoMessages", "Social") + "</p></div>") : (d.find("#loadMore").remove(), d.append(a)), r > 0 && 0 == e("#messagesList").data("PageIndex") && c.messagesThreadQuery(), e("#messageCount").html(r), e("#unreadMessageCount").html(s), 0 == s && (s = ""), e("#messagesLink").find("span.count").html(s), t = null, a = null, r = null, s = null, o = null, i.removeLoading("messagesPanel"), e("#messagesList").data("antiscroll").refresh();
        var u = "<div tabindex='0' id='loadMore'>" + i.getText("LoadOlderThreads", "Social", "Load older threads") + "</div>";
        void 0 != e("#messagesList").data("total") && e("#messagesList .message").length < e("#messagesList").data("total") - 1 && e("#messagesList .box .antiscroll-inner").append(u), d.find("#loadMore").unbind("click").bind("click", function () {
            if (void 0 === e("#messagesList").data("total") || e("#messagesList .box .antiscroll-inner .message").length < e("#messagesList").data("total")) {
                var t = parseInt(e("#messagesList").data("PageIndex"), 10);
                e("#messagesList").data("PageIndex", ++t), i.messagesListQuery()
            }
        }), d.find("#loadMore").unbind("keyup").bind("keyup", function (t) {
            var n = e(t.currentTarget);
            13 == t.which && n.visible() && e(this).click()
        }), d.find(".load_messages").unbind("click").bind("click", function (t) {
            t.preventDefault();
            var n = e(this);
            if (n.is(".active")) return !1;
            e("#replyMessageInput").hide();
            var i = e("#messageThreadList");
            i.empty();
            var a = e("#messageThread");
            a.data("data-id", e(this).attr("data-id")), a.data("data-avatar", e(this).attr("data-avatar")), a.data("data-nickname", e(this).attr("data-nickname")), a.data("PageIndex", 0), c.messagesThreadQuery()
        }), d.find(".load_messages").unbind("keyup").bind("keyup", function (t) {
            var n = e(t.currentTarget);
            13 == t.which && n.visible() && e(this).click()
        })
    }, c.messagesThreadQuery = function () {
        n.WriteDebugLog("messagesThreadQuery", "", "");
        var t = e("#messageThread"), a = t.data("data-id"), r = t.data("data-avatar"), s = t.data("data-nickname"),
            o = t.data("PageIndex");
        void 0 === o && (o = 0, t.data("PageIndex", o)), 0 == o && e("#messageThreadList").empty(), i.setUpLoadingPanel("#messagesPanel"), c.GetMessageThread(a, r, s, o)
    }, c.GetMessageThread = function (t, r, s, o) {
        n.WriteDebugLog("GetMessageThread", "friendRockstarId, friendRockstarUrl, friendRockstarNick, pageIndex", t + "," + r + "," + s, 0 / 0 + o);
        var l = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"senderRockstarId":"' + t + '","pageIndex":' + o + "}";
        n.WriteDebugLog("GetMessageThread", "options", l);
        var d = i.GetAuthHeaderAsync();
        d.done(function (o) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/messaging/getmessages"),
                services: ["messaging"],
                headers: o,
                data: l,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: a.ShowErrorModal,
                requestDescription: "GetMessages",
                success: function (n, i) {
                    if ("success" == i) {
                        var a = parseInt(e(n).find("Messages").attr("Total"), 10);
                        e("#messageThread").data("total", a), c.ProcessMessageThread(t, r, s, n)
                    }
                    e("#checkName").fadeOut()
                },
                complete: function () {
                    t = null, r = null, s = null, i.removeLoading("messagesPanel")
                }
            })
        })
    }, c.ProcessMessageThread = function (t, a, r, s) {
        n.WriteDebugLog("ProcessMessageThread", "friendRockstarId, friendRockstarUrl, friendRockstarNick", t + "," + a + "," + r), e(".load_messages").removeClass("active");
        var o = e("#messageThread"), l = e("div").find("[data-nickname='" + o.data("data-nickname") + "']");
        l.addClass("active"), e("#MessageThreadHeader .profilenickname").text(r), e("#MessageThreadHeader .reply, #MessageThreadHeader .backFriendLink").attr({
            "data-id": t,
            "data-avatar": a,
            "data-nickname": r
        });
        var d = e("#messagesPanel");
        e("#newMessageInput").is(":visible") || d.attr("class", "panel active messageThread"), e("#messagesPanel div.content").removeAttr("style"), n.WriteDebugLog("GetMessageThread", "data", e(s).find("Message").text());
        var u = r, h = a, f = e("#imgEditSelectedAvatar").attr("src");
        e("#messagesPanel .help-block").text("");
        var p = d.find("#messageThreadList"), m = "", g = [], v = i.getText("Confirm", "Social");
        p.find("#loadMoreMessages").remove(), e(s).find("Message").each(function () {
            var i;
            try {
                i = e.trim(n.jhtmlEncode(decodeURIComponent(e(this).find("Text").text())))
            } catch (a) {
                i = e.trim(n.jhtmlEncode(e(this).find("Text").text()))
            }
            0 == i.length && (i = "&nbsp;");
            var r = e(this).find("CreatedOn").text(), s = moment.utc(r).local().fromNow(),
                o = moment.utc(r).local().format("LLL"), l = "", c = e(this).find("AuthorId").text(),
                d = e(this).find("ID").text(), p = "TRUE" == e(this).find("Read").text().toUpperCase();
            p || (l = "new"), c == t ? (m += '<div id="messageId' + d + '" class="message msgFrom ' + l + '">', p || (m += '<a class="ribbon">NEW</a>', g.push(d)), m += '<img width="64" height="64" class="avatarImg" alt="' + u + '" src="' + h + '"><div class="messageContent"><div class="messageBody">' + i + '</div><span class="timestamp" title="' + o + '">' + s + '</span><a class="icon-cross icon-30pct delete" title="' + v + '">' + v + '</a></div><span class="arrow"></span></div>') : (m += '<div id="messageId' + d + '" class="message msgTo ' + l + '">', p || (m += '<a class="ribbon">NEW</a>'), m += '<img width="64" height="64" class="avatarImg" alt="' + u + '" src="' + f + '"><div class="messageContent"><div class="messageBody">' + i + '</div><span class="timestamp" title="' + o + '">' + s + '</span><a class="icon-cross icon-30pct delete" title="' + v + '">' + v + '</a></div><span class="arrow"></span></div>')
        }), p.append(m), m = null;
        var _ = "<div id='loadMoreMessages' class='btn btnGrey'>" + i.getText("LoadOlderMessages", "Social", "Load older messages") + "</div>";
        (void 0 === e("#messageThread").data("total") || p.find(".message").length < e("#messageThread").data("total")) && p.append(_), p.find("#loadMoreMessages").click(function () {
            if (void 0 === e("#messageThread").data("total") || p.find(".message").length < e("#messageThread").data("total")) {
                var t = parseInt(e("#messageThread").data("PageIndex"), 10);
                e("#messageThread").data("PageIndex", ++t), c.messagesThreadQuery()
            }
        }), e("#replyMessageInput #replyToNickname").html(u), e("#replyMessageInput #replyToNickname").attr("data-rockstarId", t), e("#replyMessageInput textarea").val(""), e("#replyMessageInput span.characterCount").text("0"), e("#replyMessageInput").show(), e("#newReplyEntry").show(), i.inGamePadMode() || e("#newReplyEntry").focus(), g.length > 0 && c.MarkMessagesReadJS(g.join(",")), g = null, v = null, p.find("a.delete").unbind("click").bind("click", function () {
            return c.DeleteMessageConfirm(e(this).parents(".message").attr("id")), !1
        }), i.resetScrollbar("#messageThread"), e("#newMessage").show(), globals.MessagesLoading = !1
    }, c.MarkMessagesReadJS = function (t) {
        var a = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"messageIdCsv":"' + t + '" }';
        n.WriteDebugLog("MarkMessagesReadJS", "options", a);
        var r = i.GetAuthHeaderAsync();
        r.done(function (t) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/messaging/markmessagesread"),
                services: ["messaging"],
                headers: t,
                data: a,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                silentFail: !0,
                success: function (t, i) {
                    "success" == i && ("true" != e(t).find("Status").text() ? n.WriteDebugLog("MarkMessagesReadJS", "Status error", e(t).find("Error").attr("ErrorMessage")) : c.GetMessageCountJS(globals.account.RockstarId))
                },
                error: function (e, t, i) {
                    n.WriteDebugLog("MarkMessagesReadJS", "ERROR", i), n.WriteDebugLog("MarkMessagesReadJS", "ERROR status", t), n.WriteDebugLog("MarkMessagesReadJS", "ERROR responseText", e.responseText, n.logType.error, n.logController.messaging)
                }
            })
        })
    }, c.GetGameInvites = function () {
        n.WriteDebugLog("GetGameInvites", "", "");
        var t = "", a = i.CallGameMethodAsync("RGSC_GET_GAME_INVITE_LIST", null, "RGSC_GET_GAME_INVITE_LIST_DEMO");
        a.done(function (a) {
            if (n.WriteDebugLog("GetGameInvites", "gameInviteList", a), a && a.Count > 0) {
                var r = i.getText("Decline", "Social"), s = i.getText("Accept", "Social");
                e.each(a.GameInvites, function (e, i) {
                    var a = i.Nickname, o = n.getAvatarUrl(i.AvatarUrl), l = i.Salutation,
                        c = moment.unix(i.ReceivedTime.toString()).local().format("llll"), d = "";
                    t += '<div id="gameInviteId' + i.GameInviteId + '" class="message profileButton ' + d + '" data-id="' + i.RockstarId + '">', t += '<img width="64" height="64" class="avatarImg optionProfile" alt="" src="' + o + '"><div class="text"><h5><a href="#" class="profilenickname optionProfile">' + a + '</a></h5><div class="messageText">' + l + '</div></div><div class="footer"><span class="received">' + c + '</span></div><div class="buttons"><a class="option Decline btn btnLightGrey btnRounded" href="#">' + r + '</a><a class="option Accept btn btnPurple btnRounded" href="#">' + s + "</a></div></div>"
                }), r = null, s = null
            }
        }), a.always(function () {
            e("#friendsPanel").find("div.content").removeAttr("style"), e("#gameInvitesList").empty().append(t).find("a.Decline").click(function () {
                c.SendDeclineGameInvite(e(this).closest("div.profileButton").attr("id"))
            }).end().find("a.Accept").click(function () {
                c.SendAcceptGameInvite(e(this).closest("div.profileButton").attr("id"))
            }).end().find(".optionProfile").click(function () {
                return e("#friendProfilePanel .content").hide(), c.friendProfileView(e(this).closest("div.profileButton").attr("data-id")), !1
            });
            var n = e("#gameInvitesList div.profileButton").length;
            e("#gameInvitesHeader span.purple").html(n), 0 == n && (n = ""), e("#gameInvitesLink .count").html(n), i.removeLoading("friendsPanel"), i.resetScrollbar("#friendsPanel")
        })
    }, c.DeleteMessageConfirm = function (t) {
        var n = e("#" + t + " .messageContent"), a = n.html(),
            r = i.getText("DeleteConfirm", "Social", "Are you sure you want to delete this message?"),
            s = i.getText("ConfirmButtonText", "Social"), o = i.getText("Cancel", "HomeSignin");
        n.addClass("deleteConfirm"), n.html("<span>" + r + '</span><a class="btn btnRed btnRounded confirm">' + s + '</a><a class="btn btnGrey btnRounded cancel">' + o + "</a>"), n.find("a.cancel").unbind("click").bind("click", function () {
            n.html(a), n.removeClass("deleteConfirm"), n.find("a.delete").unbind("click").bind("click", function () {
                return c.DeleteMessageConfirm(t), !1
            })
        }), n.find("a.confirm").unbind("click").bind("click", function () {
            c.DeleteMessage(t), n.removeClass("deleteConfirm");
            var e = i.getText("DeletingMessage", "Social", "Please wait...deleting message");
            n.html(e)
        })
    }, c.DeleteMessage = function (t) {
        n.WriteDebugLog("DeleteMessage", "messageId", t);
        var r = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"messageId":"' + t.replace("messageId", "") + '" }';
        n.WriteDebugLog("DeleteMessage", "options", r);
        var s = i.GetAuthHeaderAsync();
        s.done(function (s) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/messaging/deletemessage"),
                services: ["messaging"],
                headers: s,
                data: r,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                cache: !1,
                fatalError: a.ShowErrorModal,
                requestDescription: "DeleteMessage",
                success: function (n, a) {
                    "success" == a && (o.trackEvent(o.category.message, o.action.message_delete), e("#" + t).fadeOut(function () {
                        if (e(this).remove(), e("#messageThread").data("antiscroll").refresh(), "" == e("#messageThreadList").html()) {
                            e("#messageThreadList").append('<div class="emptyContainer"><p>' + i.getText("NoMessages", "Social") + "</p></div>"), e("#replyMessageInput").hide();
                            var t = e("#messagesList .box .antiscroll-inner"),
                                n = e("#replyToNickname").attr("data-rockstarid"), a = t.find("[data-id='" + n + "']");
                            a.remove();
                            var r = t.children(":first");
                            if (r.length) {
                                var s = e("#messageThread");
                                s.data("data-id", r.attr("data-id")), s.data("data-avatar", r.attr("data-avatar")), s.data("data-nickname", r.attr("data-nickname")), s.data("PageIndex", 0), c.messagesThreadQuery()
                            }
                        }
                    })), e("#checkName").fadeOut()
                },
                complete: function () {
                    t = null
                }
            })
        })
    }, c.ShowConfirmModal = function (e, t, n, i) {
        a.ShowConfirmModal(e, t, n, i)
    }, c.HideStatusBarConfirm = function (t) {
        var n = e(t);
        if (n.length) {
            var a = n.closest(".statusbar");
            a.find("div").animate({"margin-top": "-200px"}, 200, "easeInQuart", function () {
                a.css({top: "-100%"}), i.hideModal()
            })
        } else e("div.statusbar").css("bottom", ""), i.hideModal()
    }, c.friendProfileView = function (t) {
        n.WriteDebugLog("friendProfileView", "rockstarId", t), i.clearActivePanel(function () {
            i.setUpLoadingPanel("#friendProfilePanel");
            var a = i.GetAuthHeaderAsync();
            a.done(function (i) {
                e.ajax({
                    type: "POST",
                    url: n.getApiUrl("/api/friend/getprofile"),
                    services: ["accounts", "friends", "crews"],
                    headers: i,
                    data: JSON.stringify({RockstarId: t}),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    cache: !1,
                    requestDescription: "GetFriendProfile",
                    success: function (e, t) {
                        "success" == t && (void 0 === window.amd.profileView ? window.amd.profileView = new r.ProfileView({profileData: e.Accounts[0]}) : window.amd.profileView.reinitialize({profileData: e.Accounts[0]}), o.trackPage("/FriendProfile"))
                    }
                })
            })
        })
    }, c.friendProfileViewByRockstarId = function (e) {
        c.friendProfileView(e, "", "")
    }, c.GetMutualFriendsCount = function (t, a) {
        n.WriteDebugLog("GetMutualFriendsCount", "otherRockstarId", a);
        var r = 0, s = i.getCredsAsync();
        s.done(function (t) {
            if (t.Ticket) {
                var s = '{ "playerTicket":"' + t.Ticket + '","env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"otherRockstarId":"' + a + '","pageIndex":"0" }',
                    o = i.GetAuthHeaderAsync(t.Ticket);
                o.done(function (t) {
                    e.ajax({
                        type: "POST",
                        url: n.getApiUrl("/api/friend/getmutualfriends"),
                        services: ["accounts", "friends"],
                        headers: t,
                        data: s,
                        contentType: "application/json; charset=utf-8",
                        dataType: "xml",
                        silentFail: !0,
                        success: function (t) {
                            var i = e(t);
                            r = i.find("Result").attr("Total"), e("#friendProfileBody .friends h5").find("span.mutualCount").html(r), n.WriteDebugLog("GetMutualFriendsCount", "mutualFriendCount", r), i = null, t = null
                        },
                        error: function (t, i, a) {
                            n.WriteDebugLog("GetMutualFriendsCount", "ERROR", a), n.WriteDebugLog("GetMutualFriendsCount", "ERROR status", i), n.WriteDebugLog("GetMutualFriendsCount", "ERROR responseText", t.responseText, n.logType.error, n.logController.friend), e("#friendProfileBody .friends h5").find("span.mutualCount").html(0)
                        }
                    })
                })
            }
        })
    }, c.CheckAccountDetails = function (t) {
        return void 0 != globals.account.NickEditable && void 0 != globals.account.Validated ? (globals.account.NickEditable || c.SetNicknameNotEditable(), void (globals.account.Validated ? e("#emailForm .emailVerify").hide() : e("#emailForm .emailVerify").show())) : void c.GetMyAccountInfo(t)
    }, c.GetMyAccountInfo = function (t) {
        n.WriteDebugLog("GetMyAccountInfo", "nickname", t);
        var a, r,
            s = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"nickname":"' + t + '" }';
        globals.RosTitleVersion < 11 ? (a = "/api/profile/GetAccountInfoLan", r = i.GetAuthHeaderAsyncV8()) : (a = "/api/profile/getuseraccountinfo", r = i.GetAuthHeaderAsync()), r.done(function (t) {
            globals.RosTitleVersion < 11 && (t = i.appendLanAuthHeader(t)), e.ajax({
                type: "POST",
                url: n.getApiUrl(a),
                headers: t,
                data: s,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                requestDescription: "GetUserAccountInfo",
                success: function (t) {
                    var n = e(t), i = "true" == n.find("NickEditable").text();
                    globals.account.NickEditable = i, i || c.SetNicknameNotEditable();
                    var a = "true" == n.find("Validated").text();
                    globals.account.Validated = a, a ? e("#emailForm .emailVerify").hide() : e("#emailForm .emailVerify").show()
                }
            })
        })
    }, c.GetUserPrivacyInfo = function (t, r, s) {
        n.WriteDebugLog("GetUserPrivacyInfo", "rockstarId", t);
        var o = e(e("#privacySettings").is(":visible") ? "#privacySettings" : "#gameSettings"),
            l = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"rockstarId":"' + t + '","email":"' + r + '","nickname":"' + s + '" }',
            d = i.GetAuthHeaderAsync();
        d.done(function (i) {
            e.ajax({
                type: "POST",
                url: n.getApiUrl("/api/profile/getuseraccountinfo"),
                services: ["accounts"],
                headers: i,
                data: l,
                contentType: "application/json; charset=utf-8",
                dataType: "xml",
                fatalError: c.GetUserPrivacyInfoError,
                requestDescription: "GetUserAccountInfo",
                contentEl: o,
                success: function (i) {
                    n.WriteDebugLog("GetUserPrivacyInfo", "rockstarId, account.RockstarId", t + "," + globals.account.RockstarId);
                    var r = e(i);
                    a.SetPrivacyOptions(r.find("Privacy")), r = null, i = null, t = null, s = null
                }
            })
        })
    }, c.GetUserPrivacyInfoError = function (e, t, n, i, r) {
        n.hide(), a.ShowErrorModal(e, t, n, i, r)
    }, c.LoadUserNetworksProfile = function (t) {
        var i = e(t), a = i.find("OnlineServiceName"), r = "", s = e("#friendProfileBody");
        n.WriteDebugLog("LoadUserNetworksProfile", "networkAccounts.length", a.length), a.length > 0 ? i.find("PlayerAccount").each(function () {
            var t = e(this).find("OnlineServiceName").text();
            switch (t) {
                case"facebook":
                    r += '<span class="tooltip platform FB" title="Facebook"><span>Facebook</span></span>';
                    break;
                case"np":
                    r += '<span class="tooltip platform PS3" title="Playstation 3"><span>Playstation 3</span></span>';
                    break;
                case"sc":
                    r += '<span class="tooltip platform RSC" title="Rockstar Games Social Club"><span>Rockstar Games Social Club</span></span>';
                    break;
                case"twitter":
                    r += '<span class="tooltip platform TWIT" title="Twitter"><span>Twitter</span></span>';
                    break;
                case"xbl":
                    r += '<span class="tooltip platform XBOX" title="XBOX 360 LIVE"><span>XBOX 360 LIVE</span></span>';
                    break;
                case"legacycds":
                    r += '<span class="tooltip platform DS" title="Nintendo DS"><span>Nintendo DS</span></span>'
            }
        }) : s.find(".accountList").html(""), s.find(".accountList").html(r), s.find(".accountCount").html(s.find(".accountList").children().length), r = null, i = null, t = null
    }, c.LoadUserNetworksPrivacy = function (t) {
        var a = e(t), r = a.find("OnlineServiceName"), s = "";
        n.WriteDebugLog("LoadUserNetworksPrivacy", "networkAccounts.length", r.length), r.length > 0 && (a.find("PlayerAccount").each(function () {
            var t = e(this).find("OnlineServiceName").text(), n = "", i = "";
            if ("facebook" == t ? (n = "Facebook", i = "FB") : "np" == t ? (n = "PlayStation&reg; Network", i = "PSN") : "sc" == t ? (n = "Social Club", i = "SC") : "twitter" == t ? (n = "Twitter", i = "TWIT") : "xbl" == t ? (n = "Xbox Live&reg;", i = "XBOX") : "google" == t && (n = "Google", i = "google"), "" != n) {
                var a = e(this).find("AccountId").text(), r = e(this).find("Visibility").text().toLowerCase();
                s += '<p class="clearfix"><span class="accountIcon ' + i + '"></span><label class="mainLabel" for="PlatformVisibility">' + n + '</label><span id="PlatformVisibility' + t + '" class="toggleOptions PlatformVisibility" data-accountId="' + a + '"><a href="#" class="first ' + (r == "None".toLowerCase() ? "selected" : "") + '"><input type="radio" name="PlatformVisibility' + t + '" value="None"><span rel="localize[MeOnly]">Me Only</span></a><a href="#" class="' + (r == "Friends".toLowerCase() ? "selected" : "") + '"><input type="radio" name="PlatformVisibility' + t + '" value="Friends"><span rel="localize[FriendsOnly]">Friends</span></a><a href="#" class="' + (r == "FriendsAndCrews".toLowerCase() ? "selected" : "") + '"><input type="radio" name="PlatformVisibility' + t + '" value="FriendsAndCrews"><span rel="localize[FriendsandCrew]">Friends & Crews</span></a><a href="#" class="last ' + (r == "Everyone".toLowerCase() ? "selected" : "") + '"><input type="radio" name="PlatformVisibility' + t + '" value="Everyone"><span rel="localize[Everyone]">Everyone</span></a></span></p>'
            }
        }), i.resetScrollbar("#editProfile"));
        var o = e("#linkedAccountOptions");
        "" != s ? (o.html(s).closest("fieldset").show(), o.find(".toggleOptions a").click(function (t) {
            t && t.preventDefault();
            var n = e(this);
            return n.is(".selected") ? !1 : (c.UpdatePrivacySetting(n.find("input:radio").attr("name"), n.find("input:radio").attr("value"), n.closest("span.toggleOptions").attr("data-accountId"), n), !1)
        }), o.find("[rel*=localize]").localize("Settings", {
            language: globals.titlelang,
            pathPrefix: globals.baseAssetUrl + "xml/Shared"
        })) : e("#linkedAccountOptions").html("").closest("fieldset").hide(), s = null, a = null, t = null;
        var l = 150;
        e("#privacySettingsForm .toggleOptions a").each(function () {
            e(this).attr("tabindex", l), l++
        })
    }, c.GetDescriptiveGameTitle = function (e) {
        var t = "";
        switch (e) {
            case 1:
                t = "Grand Theft Auto IV";
                break;
            case 2:
                t = "Midnight Club Los Angeles";
                break;
            case 3:
                t = "Grand Theft Auto: The Lost and Damned";
                break;
            case 4:
                t = "Grand Theft Auto: The Ballad of Gay Tony";
                break;
            case 6:
                t = "Grand Theft Auto: Chinatown Wars";
                break;
            case 7:
                t = "Beaterator";
                break;
            case 8:
                t = "Red Dead Redemption";
                break;
            case 9:
                t = "L.A. Noire";
                break;
            case 10:
                t = "Max Payne 3";
                break;
            case 11:
                t = "Grand Theft Auto V";
                break;
            case 12:
                t = "Max Payne";
                break;
            default:
                t = ""
        }
        return t
    }, c.GetShortGameTitle = function (e) {
        var t = "";
        switch (e) {
            case 1:
                t = "GTAIV";
                break;
            case 2:
                t = "MCLA";
                break;
            case 3:
                t = "GTAIV_TLAD";
                break;
            case 4:
                t = "GTAIV_BOGT";
                break;
            case 6:
                t = "CW";
                break;
            case 7:
                t = "Beaterator";
                break;
            case 8:
                t = "RDR";
                break;
            case 9:
                t = "LAN";
                break;
            case 10:
                t = "MP3";
                break;
            case 11:
                t = "GTAV";
                break;
            case 12:
                t = "MP1";
                break;
            default:
                t = ""
        }
        return t
    }, c.GetGameBoxImageName = function (e) {
        var t = "";
        switch (e) {
            case 1:
                t = "gtaiv.png";
                break;
            case 2:
                t = "mcla.png";
                break;
            case 3:
                t = "gtaiv_tlad.png";
                break;
            case 4:
                t = "gtaiv_bogt.png";
                break;
            case 6:
                t = "cw.png";
                break;
            case 7:
                t = "beaterator.png";
                break;
            case 8:
                t = "rdr.png";
                break;
            case 9:
                t = "lan.png";
                break;
            case 10:
                t = "mp3.png";
                break;
            case 11:
                t = "gtav.png";
                break;
            case 12:
                t = "mp1.png";
                break;
            default:
                t = "default.png"
        }
        return t
    }, c.GetRelationShipCode = function (e) {
        switch (e) {
            case"Friend":
                return 32;
            case"BlockedByMe":
                return 2;
            case"BlockedByBoth":
                return 8;
            case"InvitedByMe":
                return 8;
            case"InvitedByThem":
                return 16;
            default:
                return 1
        }
    }, c.RenderFriendsListPresence = function (t) {
        var n = e("#landingFriendsList");
        e(t.Players).each(function () {
            var e = this.RockstarId, t = n.find('a[data-id="' + e + '"]'), i = t.closest("li");
            (this.CanSendGameInvite || this.CanJoinGame) && t.find(".arrow").show(), this.CanSendGameInvite && i.find(".optionGameInvite").show(), this.CanJoinGame && i.find(".optionJoingame").show()
        })
    }, c.RedirectToBlockList = function (e) {
        var t = i.getText("MessageBlocked1", "Social").format(e), n = i.getText("MessageBlocked2", "Social"),
            r = i.getText("SendMessageTitle", "Social");
        a.ShowConfirmModal(t, null, "datafunctions:ShowBlockList", null, "Yes", "No", r, n)
    }, c.GetAccountActivity = function (t) {
        if (null != t && 0 != t) {
            var a = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"rockstarId":"' + t + '" }';
            n.WriteDebugLog("GetAccountActivity", "options", a);
            var r = i.GetAuthHeaderAsync();
            r.done(function (t) {
                e.ajax({
                    type: "POST",
                    url: n.getApiUrl("/api/friend/getaccountactivity"),
                    services: ["accounts"],
                    headers: t,
                    data: a,
                    contentType: "application/json; charset=utf-8",
                    dataType: "xml",
                    cache: !1,
                    silentFail: !0,
                    success: function (t, a) {
                        if ("success" == a) {
                            n.WriteDebugLog("GetAccountActivity", "data", t);
                            var r = e(t).find("UnreadMessageCount").text(), s = e(t).find("CrewInviteCount").text();
                            n.WriteDebugLog("GetAccountActivity", "unreadMessageCount, crewInviteCount", r + ", " + s), e("#menuMessages span.count").html("0" == r ? "" : r + " " + i.getText("New", "Social")), e("#crewInvitesLink span.count").html("0" == s ? "" : s)
                        }
                        e("#checkName").fadeOut()
                    }
                })
            })
        }
    }, n.pubsub.on("datafnfriends:friendProfileView", c.friendProfileView), n.pubsub.on("datafnfriends:OpenNewMessage", c.OpenNewMessage), n.pubsub.on("datafnfriends:SendFriendAccept", c.SendFriendAcceptInvite), n.pubsub.on("datafnfriends:SendFriendDeclineInvite", c.SendFriendDeclineInvite), n.pubsub.on("datafnfriends:SendFriendRemove", c.SendFriendRemove), n.pubsub.on("datafnfriends:SendFriendRequest", c.SendFriendRequest), n.pubsub.on("datafnfriends:SendInviteCancel", c.SendInviteCancel), n.pubsub.on("datafnfriends:ShowConfirmModal", c.ShowConfirmModal), n.pubsub.on("datafnfriends:RedirectToBlockList", c.RedirectToBlockList), n.pubsub.on("setup:GetMessages", c.GetMessages), n.pubsub.on("datafnfriends:GetMessageCount", c.GetMessageCountJS), n.pubsub.on("datafnfriends:SendGameInvite", c.SendGameInvite), n.pubsub.on("datafnfriends:SendJoinGame", c.SendJoinGame), n.pubsub.on("datafnfriends:SendFriendUnblock", c.SendFriendUnblock), n.pubsub.on("datafnfriends:ClearFriendsCache", c.ClearFriendsCache), n.pubsub.on("gamefn:keyboardResult", c.triggerMessageFriendSearch), n.pubsub.on("datafnfriends:ClearGetFriendsCache", c.ClearGetFriendsCache), c
}), define("hbs!common/templates/crew/mycrews", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div id="activeCrew"></div>\r\n<div id="myCrewList"></div>'
    });
    return n
}), define("hbs!common/templates/crew/crew_card_large", ["hbs", "common/hbs/handlebars", "hbs!common/templates/crew/crew_tag", "common/templates/helpers/emblemUrl"], function (e, t) {
    var n = t.template(function (e, t, n, i) {
        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), i = this.merge(i, e.partials);
        var a, r, s, o = "", l = "function", c = this.escapeExpression, d = n.helperMissing, u = this;
        return o += '<div class="crewLarge lightCard">\n    <div class="clearfix">\n        <div class="crewLast" rel="localize[Active]">Active</div>\n        <div class="', (r = n.CrewType) ? a = r.call(t, {hash: {}}) : (r = t && t.CrewType, a = typeof r === l ? r.call(t, {hash: {}}) : r), o += c(a) + ' crewType">\n\n            <img class="avatar" src="' + c((r = n.emblemUrl || t && t.emblemUrl, s = {hash: {}}, r ? r.call(t, t && t.CrewId, 128, s) : d.call(t, "emblemUrl", t && t.CrewId, 128, s))) + '" />\n\n            <h3>', (r = n.CrewName) ? a = r.call(t, {hash: {}}) : (r = t && t.CrewName, a = typeof r === l ? r.call(t, {hash: {}}) : r), o += c(a) + "</h3>\n\n            ", a = u.invokePartial(i["common/templates/crew/crew_tag"], "common/templates/crew/crew_tag", t, n, i), (a || 0 === a) && (o += a), o += '\n\n            <p><span class="memberCount">', (r = n.MemberCount) ? a = r.call(t, {hash: {}}) : (r = t && t.MemberCount, a = typeof r === l ? r.call(t, {hash: {}}) : r), o += c(a) + '</span> <span rel="localize[Members]">members</span></p>\n        </div>\n\n        <div class="right">\n            <div class="left">\n                <ul id="crewList" class="clearfix">\n                    <li>\n                        <h5>\n                            <span rel="localize[Division]">Division</span>\n                        </h5>\n                        <p class="division">', (r = n.Division) ? a = r.call(t, {hash: {}}) : (r = t && t.Division, a = typeof r === l ? r.call(t, {hash: {}}) : r), o += c(a) + '</p>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="actions clearfix">\n                <a class="leaveTrigger" data-id="', (r = n.CrewId) ? a = r.call(t, {hash: {}}) : (r = t && t.CrewId, a = typeof r === l ? r.call(t, {hash: {}}) : r), o += c(a) + '" href="#" rel="localize[LeaveCrew]">\n                    Leave Crew\n                </a>\n            </div>\n        </div>\n    </div>\n</div>'
    });
    return n
}), define("hbs!common/templates/crew/crew_members", ["hbs", "common/hbs/handlebars", "hbs!common/templates/crew/crew_tag"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e) {
            var t, i, a = "";
            return a += '\n<div id="crewHeader" class="clearfix">\n  <div class="profileButton" data-rel="">\n    <img width="64" height="64" class="avatarImg" data-id="', (i = n.LeaderRockstarId) ? t = i.call(e, {hash: {}}) : (i = e && e.LeaderRockstarId, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + '" alt="" src="', (i = n.LeaderAvatar) ? t = i.call(e, {hash: {}}) : (i = e && e.LeaderAvatar, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + '" />\n      <div class="text">\n        <h5 class="profilenickname" data-id="', (i = n.LeaderRockstarId) ? t = i.call(e, {hash: {}}) : (i = e && e.LeaderRockstarId, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + '">', (i = n.LeaderNickname) ? t = i.call(e, {hash: {}}) : (i = e && e.LeaderNickname, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + '</h5>\n          <span class="infoWrap rank" rel="localize[Leader]">Leader</span>\n          <span class="infoWrap dateJoined">\n          <span rel="localize[Joined]">Joined</span>: ', (i = n.LeaderDateJoined) ? t = i.call(e, {hash: {}}) : (i = e && e.LeaderDateJoined, t = typeof i === c ? i.call(e, {hash: {}}) : i), a += d(t) + "\n        </span>\n      </div>\n    </div>\n</div>\n"
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), i = this.merge(i, e.partials);
        var s, o, l = "", c = "function", d = this.escapeExpression, u = this;
        return l += '<div class="clearfix">\n  <h3>', (o = n.CrewName) ? s = o.call(t, {hash: {}}) : (o = t && t.CrewName, s = typeof o === c ? o.call(t, {hash: {}}) : o), l += d(s) + "</h3>\n  ", s = u.invokePartial(i["common/templates/crew/crew_tag"], "common/templates/crew/crew_tag", t, n, i), (s || 0 === s) && (l += s), l += '\n  <h4 id="memberCount"><i></i> ', (o = n.MemberCount) ? s = o.call(t, {hash: {}}) : (o = t && t.MemberCount, s = typeof o === c ? o.call(t, {hash: {}}) : o), l += d(s) + ' <span rel="localize[Members]">members</span></h4>\n</div>\n\n', s = n["if"].call(t, t && t.LeaderNickname, {
            hash: {},
            inverse: u.noop,
            fn: u.program(1, r, a)
        }), (s || 0 === s) && (l += s), l += '\n\n<form id="crewMemberSearchForm" class="clearfix">\n    <div class="input">\n        <div class="ui-widget" id="crewMemberSearchInput">\n            <input type="text" name="crewMemberSearchText" id="crewMemberSearchText" class="text" placeholder="Find Crew Members" rel="localize[FindCrewMembers]" />\n        </div>					\n        <span class="help-block"></span>\n    </div>\n    <a id="crewMemberSearchLink" class="searchButton"><span>Search</span></a>\n    <p rel="localize[CrewList]">This page shows the most recently active crew members.</p>\n</form>\n\n<div class="list clearfix"></div>'
    });
    return n
}), define("hbs!common/templates/crew/crew_member", ["hbs", "common/hbs/handlebars", "common/templates/helpers/ifequals"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e) {
            var t, i, a = "";
            return a += "\r\n        <span class='subText'>\r\n            <i class=\"onlineStatus SCOnline\" />\r\n            ", (i = n.PlayingGame) ? t = i.call(e, {hash: {}}) : (i = e && e.PlayingGame, t = typeof i === d ? i.call(e, {hash: {}}) : i), a += u(t) + "\r\n        </span>\r\n        "
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var s, o, l, c = "", d = "function", u = this.escapeExpression, h = this, f = n.helperMissing;
        return c += '<div class="profileButton crewMember" data-rel="">\r\n    <img width="64" height="64" class="avatarImg" data-id="', (o = n.RockstarId) ? s = o.call(t, {hash: {}}) : (o = t && t.RockstarId, s = typeof o === d ? o.call(t, {hash: {}}) : o), c += u(s) + '" alt="" src="', (o = n.AvatarUrl) ? s = o.call(t, {hash: {}}) : (o = t && t.AvatarUrl, s = typeof o === d ? o.call(t, {hash: {}}) : o), c += u(s) + '" />\r\n    <div class="text">\r\n        <h5>\r\n            <a href="#" class="profilenickname" data-id="', (o = n.RockstarId) ? s = o.call(t, {hash: {}}) : (o = t && t.RockstarId, s = typeof o === d ? o.call(t, {hash: {}}) : o), c += u(s) + '">', (o = n.Nickname) ? s = o.call(t, {hash: {}}) : (o = t && t.Nickname, s = typeof o === d ? o.call(t, {hash: {}}) : o), c += u(s) + "</a>\r\n        </h5>\r\n\r\n        ", o = n.ifequals || t && t.ifequals, l = {
            hash: {},
            inverse: h.noop,
            fn: h.program(1, r, a)
        }, s = o ? o.call(t, t && t.IsOnline, !0, l) : f.call(t, "ifequals", t && t.IsOnline, !0, l), (s || 0 === s) && (c += s), c += '\r\n\r\n        <span class="infoWrap rank" rel="localize[', (o = n.Rank) ? s = o.call(t, {hash: {}}) : (o = t && t.Rank, s = typeof o === d ? o.call(t, {hash: {}}) : o), c += u(s) + ']">', (o = n.Rank) ? s = o.call(t, {hash: {}}) : (o = t && t.Rank, s = typeof o === d ? o.call(t, {hash: {}}) : o), c += u(s) + '</span>\r\n\r\n        <span class="infoWrap dateJoined"><span rel="localize[Joined]">Joined</span>: ', (o = n.DateJoined) ? s = o.call(t, {hash: {}}) : (o = t && t.DateJoined, s = typeof o === d ? o.call(t, {hash: {}}) : o), c += u(s) + "</span>\r\n    </div>\r\n</div>"
    });
    return n
}), define("hbs!common/templates/crew/crew_invite", ["hbs", "common/hbs/handlebars", "hbs!common/templates/crew/crew_tag", "common/templates/helpers/emblemUrl"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r() {
            return '\n            <a class="optionAcceptCrew btn btnPurple btnSmall"><span rel="localize[Accept]">Accept</span></a>\n        '
        }

        function s(e) {
            var t, i, a = "";
            return a += '\n            <a class="optionAcceptCrew btn btnPurple btnSmall disabled" rel="localize[Accept]" title="', (i = n.MaxCrewsMsg) ? t = i.call(e, {hash: {}}) : (i = e && e.MaxCrewsMsg, t = typeof i === u ? i.call(e, {hash: {}}) : i), a += h(t) + '"><span rel="localize[Accept]">Accept</span></a>\n        '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), i = this.merge(i, e.partials);
        var o, l, c, d = "", u = "function", h = this.escapeExpression, f = n.helperMissing, p = this;
        return d += '<div class="crewCard lightCard">\n    <div class="crewType clearfix">\n        <img class="avatar" width="64" height="64" src="' + h((l = n.emblemUrl || t && t.emblemUrl, c = {hash: {}}, l ? l.call(t, t && t.CrewId, 64, c) : f.call(t, "emblemUrl", t && t.CrewId, 64, c))) + '"/>\n        <div class="left">\n            <h5>', (l = n.CrewName) ? o = l.call(t, {hash: {}}) : (l = t && t.CrewName, o = typeof l === u ? l.call(t, {hash: {}}) : l), d += h(o) + "</h5>\n\n            ", o = p.invokePartial(i["common/templates/crew/crew_tag"], "common/templates/crew/crew_tag", t, n, i), (o || 0 === o) && (d += o), d += "\n\n            <p>", (l = n.MemberCount) ? o = l.call(t, {hash: {}}) : (l = t && t.MemberCount, o = typeof l === u ? l.call(t, {hash: {}}) : l), d += h(o) + ' <span rel="localize[Members]">members</span></p>\n        </div>\n    </div>\n    <div class="options">\n\n        ', o = n["if"].call(t, t && t.CanJoin, {
            hash: {},
            inverse: p.program(3, s, a),
            fn: p.program(1, r, a)
        }), (o || 0 === o) && (d += o), d += '\n\n        <a class="optionDeclineCrew btn btnGrey btnSmall"><span rel="localize[Decline]">Decline</span></a>\n    </div>\n</div>'
    });
    return n
}), define("hbs!common/templates/crew/crew_invites_empty", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div id="noCrewInvites" class="emptySocial">\r\n    <p rel="localize[NoCrewInvites]">No pending crew invites</p>\r\n    <span></span>\r\n    <a class="btn btnPurple" href="#" rel="localize[JoinACrew]">Join a crew</a>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/crew/mycrews_empty", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div id="noCrew" class="emptySocial">\r\n    <p rel="localize[NotACrewMember]">Not a member of any crew yet</p>\r\n    <span></span>\r\n    <a class="btn btnPurple" href="#" rel="localize[JoinACrew]">Join a crew</a>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/crew/crew_members_empty", ["hbs", "common/hbs/handlebars", "common/templates/helpers/ifequals"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e) {
            var t, i, a = "";
            return a += '\r\n<div id="noCrew" class="emptySocial">\r\n    <p>', (i = n.errorMsg) ? t = i.call(e, {hash: {}}) : (i = e && e.errorMsg, t = typeof i === d ? i.call(e, {hash: {}}) : i), a += u(t) + '</p>\r\n    <span></span>\r\n    <a class="btn btnPurple" href="#" rel="localize[JoinACrew]">Join a crew</a>\r\n</div>\r\n'
        }

        function s(e) {
            var t, i, a = "";
            return a += '\r\n<h3 class="errorText">', (i = n.errorMsg) ? t = i.call(e, {hash: {}}) : (i = e && e.errorMsg, t = typeof i === d ? i.call(e, {hash: {}}) : i), a += u(t) + "</h3>\r\n"
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var o, l, c, d = "function", u = this.escapeExpression, h = this, f = n.helperMissing;
        return l = n.ifequals || t && t.ifequals, c = {
            hash: {},
            inverse: h.program(3, s, a),
            fn: h.program(1, r, a)
        }, o = l ? l.call(t, t && t.errorCode, "NotACrewMember", c) : f.call(t, "ifequals", t && t.errorCode, "NotACrewMember", c), o || 0 === o ? o : ""
    });
    return n
}), define("hbs!common/templates/crew/find_crew", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<form id="searchCrewsForm" class="clearfix">\r\n    <input type="hidden" id="searchCrewtype" value="" />\r\n    <fieldset>\r\n        <legend>Search Crews Form</legend>\r\n        <div id="searchCrewsSelect">\r\n            <div class="input">\r\n                <select name="selectCrewType" id="selectCrewType">\r\n                    <option value="" rel="localize[CrewTypeAll]">All Types</option>\r\n                    <option data-category="opencrews" value="opencrews" rel="localize[CrewTypeOpen]">Open Crews</option>\r\n                    <option data-category="rockstar" value="rockstarcrews" rel="localize[CrewTypeRockstar]">Rockstar Crews</option>\r\n                    <option data-category="chatterBoxes" value="chatterboxes" rel="localize[CrewTypeChatterBoxes]">Chatter Boxes</option>\r\n                    <option data-category="thrillSeekers" value="thrillseekers" rel="localize[CrewTypeThrillSeekers]">Thrill Seekers</option>\r\n                    <option data-category="rebels" value="rebels" rel="localize[CrewTypeRebels]">Rebels</option>\r\n                    <option data-category="soldiers" value="soldiers" rel="localize[CrewTypeSoldiers]">Soldiers</option>\r\n                    <option data-category="allStars" value="allstars" rel="localize[CrewTypeAllStars]">All Stars</option>\r\n                    <option data-category="friends" value="friends" rel="localize[CrewTypeMyFriends]">My Friends\' Crews</option>\r\n                </select>\r\n            </div>\r\n            <span class="help-block"></span>\r\n        </div>\r\n        <div id="searchCrewsInput">\r\n            <div class="input">\r\n                <input type="text" name="searchCrewnames" id="searchCrewnames" maxlength="20" placeholder="Search by name" rel="localize[SearchByName]" />\r\n                <a href="#" id="searchButton" class="searchButton">\r\n                    <span rel="localize[Search]">>Search</span>\r\n                </a>\r\n            </div>\r\n            <span class="help-block" rel="localize[SearchMin3Chars]">Search must contain a minimum of 3 characters</span>\r\n        </div>\r\n    </fieldset>\r\n</form>\r\n<div class="foundCrewsWrapper">\r\n    <div class="foundCrews">\r\n        <div class="foundCrewsInner clearfix"></div>\r\n    </div>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/crew/crews_empty", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var i, a, r = "", s = "function", o = this.escapeExpression;
        return r += '<h3 class="errorText">', (a = n.ErrorMsg) ? i = a.call(t, {hash: {}}) : (a = t && t.ErrorMsg, i = typeof a === s ? a.call(t, {hash: {}}) : a), r += o(i) + "</h3>"
    });
    return n
}), define("hbs!common/templates/crew/crew_request", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var i, a, r = "", s = "function", o = this.escapeExpression;
        return r += '<div class="profileButton crewRequest">\r\n    <img width="64" height="64" class="avatarImg" data-id="', (a = n.RockstarId) ? i = a.call(t, {hash: {}}) : (a = t && t.RockstarId, i = typeof a === s ? a.call(t, {hash: {}}) : a), r += o(i) + '" alt="" src="', (a = n.AvatarUrl) ? i = a.call(t, {hash: {}}) : (a = t && t.AvatarUrl, i = typeof a === s ? a.call(t, {hash: {}}) : a), r += o(i) + '" />\r\n    <div class="text">\r\n        <h5>\r\n            <a href="#" class="profilenickname" data-id="', (a = n.RockstarId) ? i = a.call(t, {hash: {}}) : (a = t && t.RockstarId, i = typeof a === s ? a.call(t, {hash: {}}) : a), r += o(i) + '">', (a = n.Nickname) ? i = a.call(t, {hash: {}}) : (a = t && t.Nickname, i = typeof a === s ? a.call(t, {hash: {}}) : a), r += o(i) + '</a>\r\n        </h5>\r\n    </div>\r\n    \r\n    <div class="options">\n        <a class="optionInvite btn btnPurple btnSmall"><span rel="localize[Invite]">Invite</span></a>\n        <a class="optionDelete btn btnGrey btnSmall"><span rel="localize[Delete]">Delete</span></a>\n    </div>\n</div>'
    });
    return n
}), define("hbs!common/templates/crew/crew_invites_header", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<ul id="crewInvitesSwitch" class="clearfix noRemove">\r\n    <li class="invites noRemove">\r\n      <a href="#" class="noRemove" rel="localize[Invites]">Invites</a>\r\n    </li>\r\n    <li class="requests noRemove">\r\n      <a href="#" class="noRemove" rel="localize[Requests]">Requests</a>\r\n    </li>\r\n  </ul>'
    });
    return n
}), define("hbs!common/templates/crew/crew_requests_empty", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div id="noCrewInvites" class="emptySocial">\r\n    <p rel="localize[NoCrewRequests]">No pending requests</p>\r\n    <span></span>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/crew/crew_requests_crews_i_manage", ["hbs", "common/hbs/handlebars", "common/templates/helpers/emblemUrl"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r() {
            return '\r\n  <p class="noRemove" rel="localize[SelectACrew]">Select a crew</p>\r\n'
        }

        function s(e) {
            var t, i, a, r = "";
            return r += '\r\n      <li class="noRemove">\r\n          <a href="#" data-crewId="', (i = n.CrewId) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewId, t = typeof i === c ? i.call(e, {hash: {}}) : i), r += d(t) + '" class="noRemove">\r\n              <img class="avatar noRemove" src="' + d((i = n.emblemUrl || e && e.emblemUrl, a = {hash: {}}, i ? i.call(e, e && e.CrewId, 64, a) : u.call(e, "emblemUrl", e && e.CrewId, 64, a))) + '" title="', (i = n.CrewName) ? t = i.call(e, {hash: {}}) : (i = e && e.CrewName, t = typeof i === c ? i.call(e, {hash: {}}) : i), r += d(t) + '"/>\r\n          </a>\r\n      </li>\r\n      '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var o, l = "", c = "function", d = this.escapeExpression, u = n.helperMissing, h = this;
        return l += '<div id="manageCrews" class="noRemove">\r\n', o = n["if"].call(t, t && t.ShowTitle, {
            hash: {},
            inverse: h.noop,
            fn: h.program(1, r, a)
        }), (o || 0 === o) && (l += o), l += '\r\n\r\n  <ul class="crewsIManage noRemove">\r\n      ', o = n.each.call(t, t && t.CrewsIManage, {
            hash: {},
            inverse: h.noop,
            fn: h.program(3, s, a)
        }), (o || 0 === o) && (l += o), l += "\r\n  </ul>\r\n</div>"
    });
    return n
}), define("common/crews/crews-views", ["jquery", "backbone", "underscore", "common/crews/crews-models", "utils", "common/jquery.datafunctions", "jquery.setup.environment.utils", "common/jquery.datafunctions.friends", "common/modals/modal-views", "common/analyticsManager", "hbs!common/templates/crew/mycrews", "hbs!common/templates/crew/crew_card", "hbs!common/templates/crew/crew_card_large", "hbs!common/templates/crew/crew_members", "hbs!common/templates/crew/crew_member", "hbs!common/templates/crew/crew_invite", "hbs!common/templates/crew/crew_invites_empty", "hbs!common/templates/crew/mycrews_empty", "hbs!common/templates/crew/crew_members_empty", "hbs!common/templates/crew/find_crew", "hbs!common/templates/crew/crews_empty", "hbs!common/templates/crew/crew_tag", "hbs!common/templates/crew/crew_request", "hbs!common/templates/crew/crew_invites_header", "hbs!common/templates/crew/crew_requests_empty", "hbs!common/templates/crew/crew_requests_crews_i_manage", "dropkick"], function (e, t, n, i, a, r, s, o, l, c, d, u, h, f, p, m, g, v, _, b, y, w, S, C, k, T) {
    var L, E = {};
    return E.closeCrewViews = function () {
        void 0 != window.amd.crews.MyCrewsView && window.amd.crews.MyCrewsView.onClose(), void 0 != window.amd.crews.CrewMembersView && window.amd.crews.CrewMembersView.onClose(), void 0 != window.amd.crews.CrewInvitesView && window.amd.crews.CrewInvitesView.onClose(), void 0 != window.amd.crews.FindCrewView && window.amd.crews.FindCrewView.onClose(), void 0 != window.amd.crews.CrewRequestsView && window.amd.crews.CrewRequestsView.onClose(), void 0 != window.amd.crews.CrewInvitesHeaderView && window.amd.crews.CrewInvitesHeaderView.onClose()
    }, E.MyPrimaryCrewTagView = t.View.extend({
        el: "#crewCardTag", render: function () {
            var e = "";
            if (this.model.get("CrewTag")) {
                this.model.set({IsMember: !0});
                var t = this.model.toJSON();
                e = a.renderCompiledTemplate(w, t)
            }
            return this.$el.html(e), this.$el.fadeIn(), this
        }, fetchPrimaryCrew: function (e) {
            if (void 0 != e) this.model = e, this.render(); else {
                var t = this, n = s.GetAuthHeaderAsync();
                n.done(function (e) {
                    t.model.fetch({headers: e})
                })
            }
        }, onClose: function () {
            this.stopListening(), a.pubsub.off("crews:UpdatePrimaryCrewTag")
        }, initialize: function () {
            n.bindAll(this, "render", "fetchPrimaryCrew"), this.model = new i.PrimaryCrewModel, this.listenTo(this.model, "change", this.render), a.pubsub.on("crews:UpdatePrimaryCrewTag", this.fetchPrimaryCrew), this.fetchPrimaryCrew()
        }
    }), E.CrewListView = t.View.extend({
        render: function () {
            var e = this;
            return this.collection.each(function (t) {
                var n = new E.CrewView({model: t});
                if (e.CrewViews.push(n), "search" == t.get("Template")) e.$el.append(n.render().el); else {
                    var i = !t.get("IsPrimary");
                    t.set({
                        CanMakeActive: i,
                        CanLeave: !0,
                        IsMember: !0
                    }), t.get("IsPrimary") ? (a.pubsub.trigger("crews:UpdatePrimaryCrewTag", t), e.$el.find("#activeCrew").append(n.render().el)) : e.$el.find("#myCrewList").append(n.render().el)
                }
                e.$(".crewCard img").on("error", a.crewImage404), e.$(".crewLarge img").on("error", a.crewImage404)
            }), this
        }, onClose: function () {
            if (void 0 != this.CrewViews && this.CrewViews.length > 0) for (var e = 0; e < this.CrewViews.length; e++) this.CrewViews[e].onClose()
        }, initialize: function () {
            n.bindAll(this, "render", "onClose"), this.CrewViews = [], this.render()
        }
    }), E.MyCrewsView = E.CrewListView.extend({
        el: "#crewsList", events: {"click #noCrew.emptySocial .btn": "goToFindCrew"}, render: function () {
            if (!s.TabIsActive(e("#friendsPanel .sideMenu #myCrewsLink"))) return this;
            var t = this.collection.toJSON(), n = a.renderCompiledTemplate(d, t);
            return this.$el.html(n), 0 == this.collection.length ? (n = a.renderCompiledTemplate(v), this.$el.html(n), e("#crewCardTag").html("")) : L = new E.CrewListView({
                el: this.el,
                collection: this.collection
            }), e(".loadingMask").hide(), this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.fadeIn(), e("#friendsContainer").data("antiscroll").refresh(), this
        }, goToFindCrew: function () {
            e("#findCrewLink").click()
        }, onClose: function () {
            if (this.stopListening(), void 0 != L && L.CrewViews.length > 0) for (var e = 0; e < L.CrewViews.length; e++) L.CrewViews[e].onClose()
        }, initialize: function () {
            n.bindAll(this, "render", "onClose"), void 0 != L && L.onClose(), s.setUpLoadingPanel("#friendsPanel"), this.collection = new i.CrewCollection, this.listenTo(this.collection, "sync", this.render);
            var e = this, t = s.GetAuthHeaderAsync();
            t.done(function (t) {
                e.collection.fetch({headers: t, requestDescription: "MyCrews", fatalError: r.ShowErrorModal})
            })
        }
    }), E.CrewView = t.View.extend({
        events: {
            "click .leaveTrigger": "leaveCrew",
            "click .makeActive": "makeActive",
            "click .join": "joinCrew",
            "click .requestInvite": "requestInvite"
        }, render: function () {
            var e, t = s.getError("MaxNoCrewsExceeded");
            this.model.set({MaxCrewsMsg: t});
            var n = this.model.toJSON();
            return e = this.model.get("IsPrimary") ? a.renderCompiledTemplate(h, n) : a.renderCompiledTemplate(u, n), this.$el.html(e), this
        }, showConfirmationDialog: function (e, t, n) {
            window.amd.modals.ConfirmModalView = new l.ConfirmModalView({
                Message: e,
                Name: this.model.get("CrewName"),
                pubsubKey: t,
                FocusBtn: "cancel",
                cancelPubsubKey: n
            })
        }, leaveCrew: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            if (!n.hasClass("disabled")) {
                this.disableButtons(), a.WriteDebugLog("CrewView.leaveCrew", "CrewId", this.model.get("CrewId"));
                var i = this.model.get("IsPrimary") ? s.getText("LeavePrimaryCrewName", "Social") : s.getText("LeaveCrewName", "Social");
                this.showConfirmationDialog(i, "crew.leave." + this.model.get("CrewId"), "crew.enableButtons." + this.model.get("CrewId"))
            }
        }, leaveCrewConfirm: function () {
            s.setUpLoadingPanel("#friendsPanel"), this.updateCrewModel.leave(this.model.get("CrewId"), this.leaveCrewSuccess, this.errorFn)
        }, leaveCrewSuccess: function (t) {
            if (t && (a.WriteDebugLog("CrewView.leaveCrewSuccess", "Status", t.get("Status")), 1 == t.get("Status"))) {
                if (e("#myCrewsLink").hasClass("on")) {
                    var n = e("#myCrewsLink");
                    n.removeClass("on"), n.click()
                }
                c.trackEvent(c.category.crew, c.action.crew_leave)
            }
        }, makeActive: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            if (!n.hasClass("disabled")) {
                this.disableButtons(), a.WriteDebugLog("CrewView.makeActive", "CrewId", this.model.get("CrewId"));
                var i = s.getText("MakeActiveCrewName", "Social");
                this.showConfirmationDialog(i, "crew.makeactive." + this.model.get("CrewId"), "crew.enableButtons." + this.model.get("CrewId"))
            }
        }, makeActiveConfirm: function () {
            s.setUpLoadingPanel("#friendsPanel"), this.updateCrewModel.makeActive(this.model.get("CrewId"), this.makeActiveSuccess, this.errorFn)
        }, makeActiveSuccess: function (t) {
            if (t && (a.WriteDebugLog("CrewView.makeActiveSuccess", "Status", t.get("Status")), 1 == t.get("Status"))) {
                if (e("#myCrewsLink").hasClass("on")) {
                    var n = e("#myCrewsLink");
                    n.removeClass("on"), n.click()
                }
                c.trackEvent(c.category.crew, c.action.crew_make_active)
            }
        }, joinCrew: function (t) {
            t.preventDefault(), a.WriteDebugLog("CrewView.joinCrew", "CrewId", this.model.get("CrewId"));
            var n = e(t.currentTarget);
            n.hasClass("disabled") || (this.disableButtons(), this.updateCrewModel.joinCrew(this.model.get("CrewId"), this.joinCrewSuccess, this.errorFn))
        }, joinCrewSuccess: function (t) {
            t && (a.WriteDebugLog("CrewView.joinCrewSuccess", "Status", t.get("Status")), 1 == t.get("Status") && (c.trackEvent(c.category.crew, c.action.crew_join), e("#myCrewsLink").click()))
        }, requestInvite: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            n.hasClass("disabled") || (this.disableButtons(), a.WriteDebugLog("CrewView.requestInvite", "CrewId", this.model.get("CrewId")), this.updateCrewModel.requestInvite(this.model.get("CrewId"), this.requestInviteSuccess, this.errorFn))
        }, requestInviteSuccess: function (e) {
            if (e && (a.WriteDebugLog("CrewView.requestInviteSuccess", "Status", e.get("Status")), 1 == e.get("Status"))) {
                this.$(".crewCard .actions .requestInvite").remove();
                var t = s.getText("CrewRequestPending", "Social");
                this.$(".crewCard .actions.clearfix").append('<span class="requestPending">' + t + "</span>");
                var n = s.getText("RequestSentToCrew", "Social");
                n = n.replace("[CrewName]", this.model.get("CrewName")), c.trackEvent(c.category.crew, c.action.crew_request_invite), a.pubsub.trigger("gamefunctions:InfoMessage", n)
            }
        }, disableButtons: function () {
            this.$(".actions a").addClass("disabled")
        }, enableButtons: function () {
            this.$(".actions a").removeClass("disabled")
        }, errorFn: function (e, t) {
            this.enableButtons(), r.ShowErrorModal(e, t)
        }, onClose: function () {
            a.pubsub.off("crew.leave." + this.model.get("CrewId")), a.pubsub.off("crew.makeactive." + this.model.get("CrewId")), a.pubsub.off("crew.enableButtons." + this.model.get("CrewId"))
        }, initialize: function () {
            n.bindAll(this, "render", "onClose", "joinCrewSuccess", "requestInviteSuccess", "makeActiveSuccess", "leaveCrewConfirm", "makeActiveConfirm", "showConfirmationDialog", "disableButtons", "enableButtons", "errorFn"), a.pubsub.on("crew.leave." + this.model.get("CrewId"), this.leaveCrewConfirm), a.pubsub.on("crew.makeactive." + this.model.get("CrewId"), this.makeActiveConfirm), a.pubsub.on("crew.enableButtons." + this.model.get("CrewId"), this.enableButtons), this.updateCrewModel = new i.UpdateCrewModel
        }
    }), E.CrewMembersView = t.View.extend({
        el: "#crewMembersList",
        events: {
            "click #crewMemberSearchLink": "search",
            "keydown #crewMemberSearchText": "search",
            "click .profileButton .avatarImg": "goToMemberProfile",
            "click .profileButton .profilenickname": "goToMemberProfile",
            "click #noCrew.emptySocial .btn": "goToFindCrew"
        },
        render: function () {
            if (!s.TabIsActive(e("#friendsPanel .sideMenu #crewMembersLink"))) return this;
            this.$el.empty();
            var n, i = this.collection.at(0);
            if (0 == this.collection.length || 0 == i.get("CrewMemberCount") || !i.get("Status")) return this.renderEmpty(i), this;
            var r = {
                CrewName: i.get("CrewName"),
                CrewTag: i.get("CrewTag"),
                IsPrivate: i.get("IsPrivate"),
                IsFounderCrew: i.get("IsFounderCrew"),
                IsMember: !1,
                CrewColour: i.get("CrewColour"),
                MemberCount: i.get("CrewMemberCount")
            }, o = new t.Collection(i.get("CrewMembers")), l = o.findWhere({Rank: "Leader"});
            void 0 != l && (r.LeaderAvatar = l.get("AvatarUrl"), r.LeaderRockstarId = l.get("RockstarId"), r.LeaderNickname = l.get("Nickname"), r.LeaderDateJoined = l.get("DateJoined")), n = a.renderCompiledTemplate(f, r), this.$el.html(n), s.setupTextInputGameNotifications(this.$("input:text, input:password, textarea"));
            var c = this;
            return this.MemberViews = [], o.each(function (e) {
                c.$(".list").append('<div class="profileWrapper ' + e.get("Nickname") + '"></div>');
                var t = new E.MemberView({model: e, el: "div." + e.get("Nickname")});
                c.MemberViews.push(t), c.$(".list").append(t.render().el)
            }), e(".loadingMask").hide(), this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.fadeIn(), e("#friendsContainer").data("antiscroll").refresh(), this
        },
        renderEmpty: function (t) {
            var n = this.getError(t.toJSON()), i = a.renderCompiledTemplate(_, n);
            this.$el.html(i), e(".loadingMask").hide(), this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.fadeIn()
        },
        goToMemberProfile: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget), i = n.attr("data-id");
            void 0 != i && o.friendProfileView(i)
        },
        getError: function (e) {
            var t, n = "undefined" != typeof e && "undefined" != typeof e.Error ? e.Error.CodeEx : "";
            switch (n) {
                case"NotACrewMember":
                    t = s.getText("NotACrewMember", "Social");
                    break;
                case"NoMatchingMembers":
                    t = s.getError("NoMatchCrewMembers");
                    break;
                default:
                    t = s.getError("CrewGeneralServiceError")
            }
            return a.WriteDebugLog("CrewMembersView", "getError", n + " " + t), {errorCode: n, errorMsg: t}
        },
        renderSearchResults: function () {
            e(".profileButton.crewMember").parent().remove();
            var n = this.searchModel.toJSON();
            if (void 0 != n && 0 != n.CrewMemberCount && n.Status) if (n.CrewMembers && n.CrewMembers.length) {
                var i = this;
                this.MemberView = [];
                var r = new t.Collection(n.CrewMembers);
                r.each(function (e) {
                    i.$(".list").append('<div class="profileWrapper ' + e.get("Nickname") + '"></div>');
                    var t = new E.MemberView({model: e, el: "div." + e.get("Nickname")});
                    i.MemberViews.push(t), i.$el.append(t.render().el)
                })
            } else {
                var o = s.getError("NoMatchCrewMembers"), l = a.renderCompiledTemplate(_, {errorMsg: o});
                this.$el.append(l)
            } else {
                var c = this.getError(n), l = a.renderCompiledTemplate(_, c);
                this.$el.append(l)
            }
            return e(".loadingMask").hide(), this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.fadeIn(), this
        },
        search: function (t) {
            var n = t.currentTarget;
            if ("crewMemberSearchText" != e(n).attr("id") || 13 == t.which) {
                t.preventDefault(), e(".errorText").remove();
                var i = this.$("#crewMemberSearchText").val();
                if (i.length > 0 && i.length < 3) {
                    var a = s.getError("SearchMin3Chars");
                    return void this.$("#crewMemberSearchForm").append('<span class="errorText">' + a + "</span>")
                }
                if (s.setUpLoadingPanel("#friendsPanel"), "" == i) {
                    var o = e("#crewMembersLink");
                    return o.removeClass("on"), void o.click()
                }
                var l = this.collection.at(0).get("CrewId"), c = this.collection.at(0).get("IsPrivate"),
                    d = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"searchNickname":"' + i + '","pageIndex":"0","crewId":"' + l + '","isPrivate":"' + c + '" }',
                    u = this, h = s.GetAuthHeaderAsync();
                h.done(function (e) {
                    u.searchModel.fetch({
                        type: "POST",
                        headers: e,
                        contentType: "application/json; charset=utf-8",
                        data: d,
                        success: u.searchSuccess,
                        requestDescription: "SearchCrewMembers",
                        fatalError: r.ShowErrorModal
                    })
                })
            }
        },
        searchSuccess: function () {
            this.renderSearchResults(), c.trackEvent(c.category.crew, c.action.crew_members_search)
        },
        goToFindCrew: function () {
            e("#findCrewLink").click()
        },
        onClose: function () {
            this.stopListening()
        },
        initialize: function () {
            n.bindAll(this, "render", "renderEmpty", "searchSuccess", "onClose"), s.setUpLoadingPanel("#friendsPanel"), this.searchModel = new i.CrewMemberSearch;
            var e = this;
            e.collection = new i.CrewMemberCollection([], {game: globals.titleName}), e.listenTo(e.collection, "sync", e.render);
            var t = s.getCredsAsync();
            t.done(function (t) {
                if ("undefined" != typeof t && t.Ticket) {
                    var n = s.GetAuthHeaderAsync(t.Ticket);
                    n.done(function (n) {
                        e.collection.fetch({
                            data: {PlayerTicket: t.Ticket},
                            type: "POST",
                            headers: n,
                            requestDescription: "CrewMembers",
                            fatalError: r.ShowErrorModal
                        })
                    })
                }
            })
        }
    }), E.MemberView = t.View.extend({
        events: {
            "click .profileButton .avatarImg": "goToMemberProfile",
            "click .profileButton .profilenickname": "goToMemberProfile"
        }, render: function () {
            var e, t = this.model.get("IsOnline");
            if (t) {
                var n = this.model.get("OnlineGames");
                if (void 0 != n && n.length > 0) {
                    var i = s.getText("PlayingGameOn", "Social", "Playing {0} on {1}");
                    this.model.set({PlayingGame: i.format(this.model.get("OnlineGames")[0].TitleFriendlyName, this.model.get("OnlineGames")[0].PlatformFriendlyName)})
                }
            }
            return e = a.renderCompiledTemplate(p, this.model.toJSON()), this.$el.html(e), this
        }, goToMemberProfile: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget), i = n.attr("data-id");
            void 0 != i && o.friendProfileView(i)
        }, onClose: function () {
        }, initialize: function () {
            n.bindAll(this, "render", "onClose")
        }
    }), E.CrewInvitesHeaderView = t.View.extend({
        el: "#crewInvitesHeader",
        events: {
            "click #crewInvitesSwitch .invites": "showInvites",
            "click #crewInvitesSwitch .requests": "showRequests"
        },
        render: function () {
            if (!s.TabIsActive(e("#friendsPanel .sideMenu #crewInvitesLink"))) return this;
            if (this.$el.empty(), 0 == this.collection.length) return this.showInvites(), this;
            var t = a.renderCompiledTemplate(C);
            return this.$el.append(t), this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.fadeIn(), this.showInvites(), this
        },
        showInvites: function () {
            e("#crewRequestsList").empty().hide(), this.$("#crewInvitesSwitch .invites").hasClass("active") || (this.$("#crewInvitesSwitch .invites").addClass("active"), this.$("#crewInvitesSwitch .requests").removeClass("active"), this.$("#manageCrews").hide(), void 0 == window.amd.crews.CrewInvitesView ? window.amd.crews.CrewInvitesView = new E.CrewInvitesView : (window.amd.crews.CrewInvitesView.onClose(), window.amd.crews.CrewInvitesView.initialize()))
        },
        showRequests: function () {
            e("#crewInvitesList").empty().hide(), this.$("#crewInvitesSwitch .requests").hasClass("active") || (this.$("#crewInvitesSwitch .requests").addClass("active"), this.$("#crewInvitesSwitch .invites").removeClass("active"), this.$("#manageCrews").show(), void 0 == window.amd.crews.CrewRequestsView ? window.amd.crews.CrewRequestsView = new E.CrewRequestsView({CrewsIManageCollection: this.collection}) : (window.amd.crews.CrewRequestsView.onClose(), window.amd.crews.CrewRequestsView.initialize({CrewsIManageCollection: this.collection})))
        },
        onClose: function () {
            this.stopListening()
        },
        initialize: function () {
            n.bindAll(this, "render", "onClose", "showInvites", "showRequests"), s.setUpLoadingPanel("#friendsPanel"), this.collection = new i.CrewsWithManagePermissionCollection, this.listenTo(this.collection, "sync", this.render);
            var e = this, t = s.GetAuthHeaderAsync();
            t.done(function (t) {
                e.collection.fetch({
                    headers: t,
                    requestDescription: "GetCrewsWithManagePermission",
                    fatalError: r.ShowErrorModal
                })
            })
        }
    }), E.CrewInvitesView = t.View.extend({
        el: "#crewInvitesList",
        events: {crewInvitesScroll: "getNextPage", "click #noCrewInvites.emptySocial .btn": "goToFindCrew"},
        render: function () {
            if (!s.TabIsActive(e("#friendsPanel .sideMenu #crewInvitesLink"))) return this;
            0 == this.model.get("PageIndex") && this.$el.empty();
            var t;
            if (void 0 == this.invitesCollection || 0 == this.invitesCollection.length) t = a.renderCompiledTemplate(g), this.$el.append(t); else {
                var n = this;
                this.InviteViews = [], this.invitesCollection.each(function (e) {
                    var t = new E.InviteView({model: e});
                    n.InviteViews.push(t), n.$el.append(t.render().el), n.$(".crewCard img").on("error", a.crewImage404)
                })
            }
            return s.removeLoading("friendsPanel"), this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.fadeIn(), e("#friendsContainer").data("antiscroll").refresh(), this
        },
        goToFindCrew: function () {
            e("#findCrewLink").click()
        },
        getNextPage: function () {
            var e = this.model.get("PageIndex") + 1, t = this.crewInviteCollection.at(0).get("PageCount");
            t > e && this.model.set({PageIndex: e})
        },
        fetchInvites: function () {
            var e = this, t = e.model.get("PageIndex"), n = s.GetAuthHeaderAsync();
            n.done(function (n) {
                e.crewInviteCollection.fetch({
                    remove: !1,
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    headers: n,
                    data: '{ "pageIndex": ' + t + " }",
                    requestDescription: "GetCrewInvites",
                    fatalError: r.ShowErrorModal,
                    success: function () {
                        var n = e.crewInviteCollection.getInvites(t);
                        e.invitesCollection.reset(n), e.render()
                    }
                })
            })
        },
        onClose: function () {
            if (this.stopListening(), void 0 != this.InviteViews && this.InviteViews.length > 0) for (var e = 0; e < this.InviteViews.length; e++) this.InviteViews[e].onClose()
        },
        initialize: function () {
            n.bindAll(this, "render", "onClose", "getNextPage", "fetchInvites"), s.setUpLoadingPanel("#friendsPanel"), this.crewInviteCollection = new i.CrewInviteCollection, this.invitesCollection = new i.Invites, this.model = new Backbone.Model;
            var e = this;
            this.model.on("change", function () {
                e.model.hasChanged("PageIndex") && e.fetchInvites()
            }), this.model.set({PageIndex: 0})
        }
    }), E.InviteView = t.View.extend({
        events: {"click .optionAcceptCrew": "acceptInvite", "click .optionDeclineCrew": "declineInvite"},
        render: function () {
            var e, t = s.getError("MaxNoCrewsExceeded"), n = a.getAvatarUrl(this.model.get("AvatarUrl"));
            return this.model.set({
                AvatarUrl: n,
                MaxCrewsMsg: t,
                IsMember: !1
            }), e = a.renderCompiledTemplate(m, this.model.toJSON()), this.$el.html(e), this
        },
        acceptInvite: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            n.hasClass("disabled") || (this.disableButtons(), a.WriteDebugLog("InviteView.acceptInvite", "CrewName", this.model.get("CrewName")), this.updateCrewModel.acceptInvite(this.model.get("CrewId"), this.model.get("InviteId"), this.acceptInviteSuccess, this.errorFn))
        },
        acceptInviteSuccess: function (t) {
            if (t) {
                if (a.WriteDebugLog("InviteView.acceptInviteSuccess", "Status", t.get("Status")), 1 != t.get("Status")) return;
                this.$(".options").hide(), c.trackEvent(c.category.crew, c.action.crew_invite_accept), this.updateCrewInviteCount(), e("#myCrewsLink").click()
            }
        },
        declineInvite: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            if (!n.hasClass("disabled")) {
                this.disableButtons(), a.WriteDebugLog("InviteView.declineInvite", "CrewName", this.model.get("CrewName"));
                var i = s.getText("DeclineInviteCrewName", "Social");
                this.showConfirmationDialog(i, "crew.declineInvite." + this.model.get("InviteId"), "crew.enableButtons." + this.model.get("InviteId"))
            }
        },
        declineInviteConfirm: function () {
            this.updateCrewModel.declineInvite(this.model.get("CrewId"), this.model.get("InviteId"), this.declineInviteSuccess, this.errorFn)
        },
        declineInviteSuccess: function (e) {
            if (e) {
                if (a.WriteDebugLog("InviteView.declineInviteSuccess", "Status", e.get("Status")), 1 != e.get("Status")) return;
                this.$(".options").hide(), this.updateCrewInviteCount(), c.trackEvent(c.category.crew, c.action.crew_invite_decline);
                var t = s.getText("DeclineCrewInvite", "Social");
                t = t.replace("[CrewName]", this.model.get("CrewName")), a.pubsub.trigger("gamefunctions:InfoMessage", t)
            }
        },
        updateCrewInviteCount: function () {
            var t = e("#crewInvitesLink span.count"), n = parseInt(t.html(), 10) - 1;
            t.html(n > 0 ? n : "")
        },
        showConfirmationDialog: function (e, t, n, i) {
            window.amd.modals.ConfirmModalView = new l.ConfirmModalView({
                Message: e,
                Name: this.model.get("CrewName"),
                pubsubKey: t,
                FocusBtn: "cancel",
                cancelPubsubKey: n,
                cancelPubsubParams: i
            })
        },
        disableButtons: function () {
            this.$el.find(".options a").addClass("disabled")
        },
        enableButtons: function () {
            this.$el.find(".options a").removeClass("disabled")
        },
        errorFn: function (e, t) {
            this.enableButtons(), r.ShowErrorModal(e, t)
        },
        onClose: function () {
            this.stopListening(), a.pubsub.off("crew.declineInvite." + this.model.get("InviteId")), a.pubsub.off("crew.enableButtons." + this.model.get("InviteId"))
        },
        initialize: function () {
            n.bindAll(this, "render", "onClose", "declineInviteConfirm", "declineInviteSuccess", "showConfirmationDialog", "acceptInviteSuccess", "disableButtons", "enableButtons", "errorFn"), this.updateCrewModel = new i.UpdateCrewModel, a.pubsub.on("crew.declineInvite." + this.model.get("InviteId"), this.declineInviteConfirm), a.pubsub.on("crew.enableButtons." + this.model.get("InviteId"), this.enableButtons)
        }
    }), E.CrewRequestsView = t.View.extend({
        el: "#crewRequestsList",
        events: {crewRequestsScroll: "getNextPage", "click .crewsIManage li a": "selectCrew"},
        render: function () {
            if (!s.TabIsActive(e("#friendsPanel .sideMenu #crewInvitesLink"))) return this;
            this.$el.empty();
            var t = this.model.get("CrewsIManage").length;
            return t > 0 && this.showCrews(), this
        },
        showCrews: function () {
            if (!e(".crewsIManage").length) {
                var t, n = this.model.get("CrewsIManage").toJSON();
                t = a.renderCompiledTemplate(T, {
                    CrewsIManage: n,
                    ShowTitle: this.model.get("CrewsIManage").length > 1
                }), this.$el.append(t), this.$("[rel*=localize]").localize("Social", {
                    language: globals.titlelang,
                    pathPrefix: globals.baseAssetUrl + "xml/Shared"
                }), this.$(".crewsIManage noRemove").fadeIn(), e("#friendsContainer").data("antiscroll").refresh(), s.removeLoading("friendsPanel")
            }
        },
        showRequests: function () {
            var t;
            if (0 == this.requestsCollection.length) t = a.renderCompiledTemplate(k), this.$el.append(t); else {
                var n = this;
                this.RequestViews = [], this.requestsCollection.each(function (e) {
                    var t = new E.RequestView({model: e});
                    n.RequestViews.push(t), n.$el.append(t.render().el)
                })
            }
            this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$el.fadeIn(), e("#friendsContainer").data("antiscroll").refresh(), this.setSelectedCrew(), s.removeLoading("friendsPanel")
        },
        selectCrew: function (t) {
            t.preventDefault();
            var n = e(t.currentTarget);
            if (!n.hasClass("active")) {
                var i = n.attr("data-crewId");
                this.model.set({CrewId: i, PageIndex: 0})
            }
        },
        setSelectedCrew: function () {
            e(".crewsIManage a").removeClass("active");
            var t = e(".crewsIManage a[data-crewId='" + this.model.get("CrewId") + "']");
            t.addClass("active")
        },
        fetchRequests: function (e) {
            void 0 == e && (e = !0);
            var t = this, n = this.model.get("CrewId"), i = this.model.get("PageIndex"), a = s.GetAuthHeaderAsync();
            a.done(function (a) {
                t.crewRequestCollection.fetch({
                    remove: e,
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    headers: a,
                    data: '{ "pageIndex": ' + i + ', "crewId": ' + n + " }",
                    requestDescription: "GetPendingRequests",
                    fatalError: r.ShowErrorModal,
                    success: function () {
                        var e = t.crewRequestCollection.getRequests(i);
                        t.requestsCollection.reset(e), t.showRequests()
                    }
                })
            })
        },
        getNextPage: function () {
            var e = this.model.get("PageIndex") + 1, t = this.crewRequestCollection.at(0).get("PageCount");
            t > e && (this.model.set({PageIndex: e}), this.fetchRequests(!1))
        },
        onClose: function () {
            this.stopListening()
        },
        initialize: function (e) {
            n.bindAll(this, "render", "onClose", "getNextPage", "fetchRequests", "showRequests"), s.setUpLoadingPanel("#friendsPanel");
            var t = e.CrewsIManageCollection.at(0).get("CrewId");
            this.crewRequestCollection = new i.CrewRequestCollection, this.requestsCollection = new i.Requests, this.model = new Backbone.Model;
            var a = this;
            this.model.on("change", function () {
                a.model.hasChanged("CrewId") && (a.$("*").not(".noRemove").remove(), a.fetchRequests())
            }), this.model.set({CrewsIManage: e.CrewsIManageCollection, CrewId: t, PageIndex: 0}), this.render()
        }
    }), E.RequestView = t.View.extend({
        events: {"click .optionInvite": "sendInvite", "click .optionDelete": "deleteRequest"}, render: function () {
            var e, t = a.getAvatarUrl(this.model.get("AvatarUrl"));
            return this.model.set({
                AvatarUrl: t,
                IsMember: !1
            }), e = a.renderCompiledTemplate(S, this.model.toJSON()).trim(), this.$el.html(e), this
        }, sendInvite: function (t) {
            t.preventDefault(), a.WriteDebugLog("RequestView.sendInvite", "Nickname", this.model.get("Nickname"));
            var n = e(t.currentTarget);
            n.hasClass("disabled") || (this.disableButtons(), this.updateCrewModel.sendInvite(this.model.get("RockstarId"), this.model.get("CrewId"), this.sendInviteSuccess, this.errorFn))
        }, sendInviteSuccess: function (e) {
            if (e) {
                if (a.WriteDebugLog("RequestView.sendInviteSuccess", "Status", e.get("Status")), 1 != e.get("Status")) return;
                this.$(".options").hide();
                var t = s.getText("CrewInviteSent", "Social");
                t = t.replace("[Nickname]", this.model.get("Nickname")), c.trackEvent(c.category.crew, c.action.crew_invite_sent), a.pubsub.trigger("gamefunctions:InfoMessage", t)
            }
        }, deleteRequest: function (t) {
            t.preventDefault(), a.WriteDebugLog("RequestView.deleteRequest", "Nickname", this.model.get("Nickname"));
            var n = e(t.currentTarget);
            n.hasClass("disabled") || (this.disableButtons(), this.updateCrewModel.deleteRequest(this.model.get("CrewId"), this.model.get("RequestId"), this.deleteRequestSuccess, this.errorFn))
        }, deleteRequestSuccess: function (e) {
            if (e) {
                if (a.WriteDebugLog("RequestView.deleteRequestSuccess", "Status", e.get("Status")), 1 != e.get("Status")) return;
                this.$(".options").hide();
                var t = s.getText("CrewRequestDeleted", "Social");
                t = t.replace("[Nickname]", this.model.get("Nickname")), c.trackEvent(c.category.crew, c.action.crew_delete_request), a.pubsub.trigger("gamefunctions:InfoMessage", t)
            }
        }, disableButtons: function () {
            this.$el.find(".options a").addClass("disabled")
        }, enableButtons: function () {
            this.$el.find(".options a").removeClass("disabled")
        }, errorFn: function (e, t) {
            this.enableButtons(), r.ShowErrorModal(e, t)
        }, onClose: function () {
            this.stopListening()
        }, initialize: function () {
            n.bindAll(this, "render", "onClose", "sendInviteSuccess", "deleteRequestSuccess", "disableButtons", "enableButtons", "errorFn"), this.updateCrewModel = new i.UpdateCrewModel
        }
    }), E.FindCrewView = E.CrewListView.extend({
        el: "#findCrews",
        events: {
            "change #selectCrewType": "triggerSearch",
            "keydown #searchCrewnames": "searchInputKeyPress",
            "click #searchButton": "searchButtonClick"
        },
        render: function () {
            if (!s.TabIsActive(e("#friendsPanel .sideMenu #findCrewLink"))) return this;
            this.$el.empty();
            var t = this.collection.toJSON(), n = a.renderCompiledTemplate(b, t[0]);
            return this.$el.html(n), s.setupTextInputGameNotifications(this.$("input:text, input:password, textarea")), this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), e("#selectCrewType").dropkick(), this.$el.fadeIn(), c.trackPage("/FindCrew"), this
        },
        searchInputKeyPress: function (e) {
            13 == e.which && this.searchButtonClick(e)
        },
        searchButtonClick: function (e) {
            e.preventDefault();
            var t = this.$("#searchCrewnames");
            t.length && (!t.val().length || t.val().length > 2) && this.triggerSearch(), t.length && !t.val().length && c.trackEvent(c.category.crew, c.action.social_crew_search, t.val())
        },
        resetSearchResults: function () {
            var e = this.$(".foundCrews");
            e.hide(), s.setUpLoadingPanel("#friendsPanel")
        },
        triggerSearch: function () {
            this.resetSearchResults();
            var e = this.$("#selectCrewType").find("option:selected"), t = e.data("category"), n = !1;
            if ("friends" == t) n = !0, this.$("#searchCrewsInput").fadeOut(); else {
                this.$("#searchCrewsInput").fadeIn();
                var i = this.$("#searchCrewnames").val(), a = "rockstar" == t ? 1 : -1,
                    o = "opencrews" == t || "rockstar" == t ? 1 : -1;
                ("opencrews" == t || "" == t && "" == i) && (a = 0)
            }
            this.collection.initialize(), t = void 0 == t || "rockstar" == t ? "" : t;
            var l = '{ "env":"' + globals.rosEnvironment + '","title":"' + globals.titleName + '","version":' + globals.RosTitleVersion + ',"searchTerm":"' + i + '","crewType":"' + t + '","openCrewFilter":' + o + ',"systemCrewFilter":' + a + ',"pageIndex":0,"friendsCrews":' + n + " }",
                c = this, d = s.GetAuthHeaderAsync();
            d.done(function (e) {
                c.collection.fetch({
                    type: "POST",
                    headers: e,
                    contentType: "application/json; charset=utf-8",
                    data: l,
                    success: c.renderSearchResults,
                    requestDescription: "SearchCrews",
                    fatalError: r.ShowErrorModal
                })
            })
        },
        renderSearchResults: function () {
            this.clearCrewList();
            var t = this.$(".foundCrewsInner");
            if (this.collection.Total > 0) t.html(""), this.collection.each(function (e) {
                e.set("Template", "search")
            }), L = new E.CrewListView({el: t, collection: this.collection}); else {
                var n = s.getError("NoMatches"), i = a.renderCompiledTemplate(y, {ErrorMsg: n});
                t.html(i), t.parent().fadeIn()
            }
            this.$("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), e(".loadingMask").hide(), this.$(".foundCrews").fadeIn(), e("#friendsContainer").data("antiscroll").refresh()
        },
        clearCrewList: function () {
            if (void 0 != L && L.CrewViews.length > 0) for (var e = 0; e < L.CrewViews.length; e++) L.CrewViews[e].onClose()
        },
        onClose: function () {
            this.stopListening(), this.collection.unbind("reset", this.renderSearchResults), this.collection.unbind("error", this.fetchfail), this.clearCrewList()
        },
        initialize: function () {
            n.bindAll(this, "render", "onClose", "triggerSearch", "renderSearchResults", "searchInputKeyPress", "searchButtonClick", "resetSearchResults", "clearCrewList"), void 0 != L && this.clearCrewList(), s.setUpLoadingPanel("#friendsPanel"), this.collection = new i.SearchCrewsCollection, this.render(), this.triggerSearch()
        }
    }), E
}), define("hbs!common/templates/settings/linked_accounts", ["hbs", "common/hbs/handlebars", "common/templates/helpers/ifequals"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r() {
            return '\r\n  <h2 rel="localize[MyLinkedAccounts]">My Linked Accounts</h2>\r\n  <p rel="localize[EditLinkedAccounts]">Edit your visibility settings to determine who can see your Linked Accounts information on your Social Club profile page, in your mini-profile, Crew page, and other areas of the Social Club where your Nickname is visible.</p>\r\n'
        }

        function s(e, t, i) {
            var a, r, s = "";
            return s += '\r\n    <div class="accountPanel clearfix ', (r = n.className) ? a = r.call(e, {hash: {}}) : (r = e && e.className, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + '" data-os="', (r = n.osName) ? a = r.call(e, {hash: {}}) : (r = e && e.osName, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + '" data-accountid="', (r = n.accountId) ? a = r.call(e, {hash: {}}) : (r = e && e.accountId, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + '">\r\n        ', a = n["if"].call(e, e && e.avatarImg, {
                hash: {},
                inverse: y.programWithDepth(6, l, t, i),
                fn: y.program(4, o, t)
            }), (a || 0 === a) && (s += a), s += '\r\n        <div class="text">\r\n          <span>', (r = n.defaultDesc) ? a = r.call(e, {hash: {}}) : (r = e && e.defaultDesc, a = typeof r === _ ? r.call(e, {hash: {}}) : r), (a || 0 === a) && (s += a), s += "</span>\r\n          <h5>", (r = n.userName) ? a = r.call(e, {hash: {}}) : (r = e && e.userName, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + "</h5>\r\n          ", a = n.unless.call(e, e && e.hideVisibility, {
                hash: {},
                inverse: y.noop,
                fn: y.program(8, c, t)
            }), (a || 0 === a) && (s += a), s += "\r\n        </div>\r\n        ", a = n.unless.call(e, e && e.hideUnlink, {
                hash: {},
                inverse: y.noop,
                fn: y.programWithDepth(11, u, t, i)
            }), (a || 0 === a) && (s += a), s += '\r\n\r\n        <div class="accountIcon" rel="localize[', (r = n.locKey) ? a = r.call(e, {hash: {}}) : (r = e && e.locKey, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + ']">', (r = n.defaultDesc) ? a = r.call(e, {hash: {}}) : (r = e && e.defaultDesc, a = typeof r === _ ? r.call(e, {hash: {}}) : r), (a || 0 === a) && (s += a), s += "</div>\r\n    </div>\r\n    "
        }

        function o(e) {
            var t, i, a = "";
            return a += '\r\n        <img width="64" height="64" src="', (i = n.avatarImg) ? t = i.call(e, {hash: {}}) : (i = e && e.avatarImg, t = typeof i === _ ? i.call(e, {hash: {}}) : i), a += b(t) + '"/>\r\n        '
        }

        function l(e, t, n) {
            var i, a = "";
            return a += '\r\n        <img width="64" height="64" src="' + b((i = n && n.cdnUrl, typeof i === _ ? i.apply(e) : i)) + 'images/avatars/default.png"/>\r\n        '
        }

        function c(e, t) {
            var i, a, r, s = "";
            return s += '\r\n          <div class="visibility clearfix">\r\n              <span style="float:left;" rel="localize[Visibility]">Visibility:</span>\r\n              <ul data-dropdown="dropdown" class="nav secondary-nav">\r\n                  <li class="dropdown">\r\n                      <select class="accVisibility" name="PlatformVisibility', (a = n.osName) ? i = a.call(e, {hash: {}}) : (a = e && e.osName, i = typeof a === _ ? a.call(e, {hash: {}}) : a), s += b(i) + '">\r\n                          <option value="None" rel="localize[MeOnly]" ', a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: y.noop,
                fn: y.program(9, d, t)
            }, i = a ? a.call(e, e && e.visibility, "None", r) : w.call(e, "ifequals", e && e.visibility, "None", r), (i || 0 === i) && (s += i), s += '>Me Only</option>\r\n                          <option value="Friends" rel="localize[FriendsOnly]" ', a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: y.noop,
                fn: y.program(9, d, t)
            }, i = a ? a.call(e, e && e.visibility, "Friends", r) : w.call(e, "ifequals", e && e.visibility, "Friends", r), (i || 0 === i) && (s += i), s += '>Friends</option>\r\n                          <option value="FriendsAndCrews" rel="localize[FriendsandCrew]" ', a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: y.noop,
                fn: y.program(9, d, t)
            }, i = a ? a.call(e, e && e.visibility, "FriendsAndCrews", r) : w.call(e, "ifequals", e && e.visibility, "FriendsAndCrews", r), (i || 0 === i) && (s += i), s += '>Friends &amp; Crew</option>\r\n                          <option value="Everyone" rel="localize[Everyone]" ', a = n.ifequals || e && e.ifequals, r = {
                hash: {},
                inverse: y.noop,
                fn: y.program(9, d, t)
            }, i = a ? a.call(e, e && e.visibility, "Everyone", r) : w.call(e, "ifequals", e && e.visibility, "Everyone", r), (i || 0 === i) && (s += i), s += ">Everyone</option>\r\n                      </select>\r\n                  </li>\r\n              </ul>\r\n          </div>\r\n          "
        }

        function d() {
            return 'selected="selected"'
        }

        function u(e, t, i) {
            var a, r, s = "";
            return s += '\r\n        <div class="buttons">\r\n            <a data-os="', (r = n.osName) ? a = r.call(e, {hash: {}}) : (r = e && e.osName, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + '" class="btn btnGrey btnRounded unlink RGSCLoadExtAuth" href="' + b((a = i && i.secureScBaseUrl, typeof a === _ ? a.apply(e) : a)) + 'settings/linkedaccounts"><span rel="localize[UnlinkAccount]">Unlink Account</span></a>\r\n        </div>\r\n        '
        }

        function h(e, t, i) {
            var a, r, s = "";
            return s += '\r\n    <div class="accountPanel clearfix ', (r = n.className) ? a = r.call(e, {hash: {}}) : (r = e && e.className, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + '">\r\n		<div class="accountIcon" rel="localize[', (r = n.locKey) ? a = r.call(e, {hash: {}}) : (r = e && e.locKey, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + ']">', (r = n.defaultDesc) ? a = r.call(e, {hash: {}}) : (r = e && e.defaultDesc, a = typeof r === _ ? r.call(e, {hash: {}}) : r), (a || 0 === a) && (s += a), s += '</div>\r\n		<div class="text">	\r\n			<h5 rel="localize[', (r = n.locKey) ? a = r.call(e, {hash: {}}) : (r = e && e.locKey, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + ']">', (r = n.defaultDesc) ? a = r.call(e, {hash: {}}) : (r = e && e.defaultDesc, a = typeof r === _ ? r.call(e, {hash: {}}) : r), (a || 0 === a) && (s += a), s += '</h5>\r\n		</div>\r\n		<div class="buttons">\r\n            ', a = n["if"].call(e, e && e.directLink, {
                hash: {},
                inverse: y.programWithDepth(16, p, t, i),
                fn: y.programWithDepth(14, f, t, i)
            }), (a || 0 === a) && (s += a), s += "\r\n		</div>\r\n	</div>\r\n    "
        }

        function f(e, t, i) {
            var a, r, s = "";
            return s += '\r\n			<a data-os="', (r = n.osName) ? a = r.call(e, {hash: {}}) : (r = e && e.osName, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + '" class="btn btnPurple btnRounded RGSCLoadExtAuth clearfix linkAccount" href="' + b((a = i && i.secureScBaseUrl, typeof a === _ ? a.apply(e) : a)) + "link/", (r = n.osName) ? a = r.call(e, {hash: {}}) : (r = e && e.osName, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + "/" + b((a = i && i.game, typeof a === _ ? a.apply(e) : a)) + "/" + b((a = i && i.platform, typeof a === _ ? a.apply(e) : a)) + '/scui"><span rel="localize[LinkAccount]">Link Account</span><i class="externalLink"></i></a>\r\n            '
        }

        function p(e, t, i) {
            var a, r, s = "";
            return s += '\r\n            <a data-os="', (r = n.osName) ? a = r.call(e, {hash: {}}) : (r = e && e.osName, a = typeof r === _ ? r.call(e, {hash: {}}) : r), s += b(a) + '" class="btn btnPurple btnRounded RGSCLoadExtAuth clearfix linkAccount" href="' + b((a = i && i.secureScBaseUrl, typeof a === _ ? a.apply(e) : a)) + 'settings/linkedaccounts"><span rel="localize[LinkAccount]">Link Account</span><i class="externalLink"></i></a>\r\n            '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var m, g, v = "", _ = "function", b = this.escapeExpression, y = this, w = n.helperMissing;
        return m = n["if"].call(t, t && t.linkedAccounts, {
            hash: {},
            inverse: y.noop,
            fn: y.program(1, r, a)
        }), (m || 0 === m) && (v += m), v += '\r\n<div id="linkedAccountsTrue" class="clearfix">\r\n    ', m = n.each.call(t, t && t.linkedAccounts, {
            hash: {},
            inverse: y.noop,
            fn: y.programWithDepth(3, s, a, t)
        }), (m || 0 === m) && (v += m), v += '\r\n</div>\r\n\r\n<h2 rel="localize[LinkAccounts]">Link Accounts</h2>\r\n<p rel="localize[LinkAccountsText]">Select a network below to add to your Social Club account.</p>\r\n<div id="linkedAccountsFalse" class="clearfix" data-os="', (g = n.osName) ? m = g.call(t, {hash: {}}) : (g = t && t.osName, m = typeof g === _ ? g.call(t, {hash: {}}) : g), v += b(m) + '">\r\n    ', m = n.each.call(t, t && t.unlinkedAccounts, {
            hash: {},
            inverse: y.noop,
            fn: y.programWithDepth(13, h, a, t)
        }), (m || 0 === m) && (v += m), v += "\r\n</div>"
    });
    return n
}), define("common/settings/settings-views", ["jquery", "backbone", "underscore", "utils", "common/jquery.datafunctions.friends", "jquery.setup.environment.utils", "hbs!common/templates/settings/linked_accounts", "dropkick"], function (e, t, n, i, a, r, s) {
    var o = {};
    return o.LinkedAccountsView = t.View.extend({
        el: "#accountSettings", render: function () {
            var t = {
                accounts: [{
                    locKey: "GoogleAccount",
                    defaultDesc: "Google",
                    className: "google",
                    osName: "google",
                    directLink: !0
                }, {
                    locKey: "FacebookAccount",
                    defaultDesc: "Facebook",
                    className: "FB",
                    osName: "facebook",
                    directLink: !0
                }, {
                    locKey: "TwitterAccount",
                    defaultDesc: "Twitter",
                    className: "TWIT",
                    osName: "twitter",
                    directLink: !0
                }, {
                    locKey: "PlaystationNetwork",
                    defaultDesc: "PlayStation&reg; Network",
                    className: "PSN",
                    osName: "np",
                    directLink: !0
                }, {
                    locKey: "XboxLiveGamertag",
                    defaultDesc: "Xbox Live&reg; Gamertag",
                    className: "XBOX",
                    osName: "xbl",
                    directLink: !0
                }, {
                    locKey: "steam",
                    defaultDesc: "Steam",
                    className: "steam",
                    osName: "steam",
                    hideVisibility: !0,
                    hideUnlink: !0
                }], linkedAccounts: [], unlinkedAccounts: [], game: this.getScGame(), platform: this.getScPlatform()
            };
            this.$xmlData.find("PlayerAccount").each(function () {
                var i = e(this), a = i.find("OnlineServiceName").text(), r = n.find(t.accounts, function (e) {
                    return e.osName == a
                });
                r && (r.avatarImg = i.find("AvatarUrl").text(), r.userName = i.find("UserName").text(), r.accountId = i.find("AccountId").text(), r.visibility = i.find("Visibility").text(), t.linkedAccounts.push(r))
            }), t.unlinkedAccounts = n.filter(t.accounts, function (n) {
                var i = e.grep(t.linkedAccounts, function (e) {
                    return e.osName == n.osName
                });
                return 0 == i && !n.hideUnlink
            }), t.cdnUrl = globals.baseUrl;
            var r = i.renderCompiledTemplate(s, t);
            this.$el.html(r), "en-US" != globals.titlelang && this.$el.find("[rel*=localize]").localize("Settings", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), this.$(".accVisibility").dropkick({
                change: function (t) {
                    var n = this.closest(".accountPanel"), i = n.data("os"), r = n.data("accountid");
                    a.UpdatePrivacySetting("PlatformVisibility" + i, t, r, e())
                }
            })
        }, getScPlatform: function () {
            var e = globals.platform;
            return "pcros" == e ? "pc" : e
        }, getScGame: function () {
            var e = globals.titleName;
            switch (e) {
                case"gta5":
                    return "gtav";
                case"lanoire":
                    return "lan"
            }
            return e
        }, close: function () {
            this.$el.empty()
        }, initialize: function (t) {
            this.$xmlData = e(t.xmlData), this.render()
        }
    }), o
}), define("common/store/store-models", ["jquery", "backbone", "underscore", "utils", "jquery.setup.environment.utils", "common/analyticsManager"], function (e, t, n, i, a, r) {
    var s = {}, o = !1, l = !1, c = !1;
    return s.Catalog = t.Model.extend({
        initialize: function (e) {
            (void 0 == e || void 0 == e.titlelang) && this.set("titlelang", "en-US"), this.initCommerceSystem()
        }, initCommerceSystem: function () {
            i.WriteDebugLog("store-models.initCommerceSystem", "init store v2"), this.categories = new s.CategoryCollection, this.products = new s.ProductCollection, o || (a.CallGameMethod("RGSC_INITIALISE_COMMERCE_DATA", null, "RGSC_INITIALISE_COMMERCE_DATA_DEMO"), a.CallGameMethod("RGSC_REQUEST_COMMERCE_DATA", {LanguageCode: i.stripRegion(this.get("titlelang"))}, "RGSC_REQUEST_COMMERCE_DATA_DEMO")), o = !0, l = !1, c = !1
        }, loadCatalog: function (e) {
            function t() {
                var e;
                if (!a.isActivePanel("#storev2Panel")) return r(), !1;
                var t, s;
                return t = a.CallGameMethod("RGSC_IS_COMMERCE_DATA_VALID", null, "RGSC_IS_COMMERCE_DATA_VALID_DEMO"), "undefined" != typeof t && "undefined" != typeof t.Result && (l = t.Result), (e = n()) ? !0 : (s = a.CallGameMethod("RGSC_IS_COMMERCE_IN_ERROR_STATE", null, "RGSC_IS_COMMERCE_IN_ERROR_STATE_DEMO"), "undefined" != typeof s && (i.WriteDebugLog("loadCatalog", "isErrorJson", JSON.stringify(s)), void 0 != s.Result && (c = s.Result, c && (o = !1))), n())
            }

            function n() {
                return i.WriteDebugLog("hasCommerceSystemResponded", "isDataValid; isLoading; isError", l + "; " + o + "; " + c), l && (o = !1, clearInterval(d), d = null, l ? s.getCatalog(e) : s.getError(), !o) ? !0 : !1
            }

            function r() {
                null != d && (clearInterval(d), d = null, !a.isActivePanel("#storev2Panel") || l && !c || (o = !1, s.getError()))
            }

            var s = this;
            l = !1, c = !1;
            var d = setInterval(t, 500);
            setTimeout(r, globals.ajaxTimeout)
        }, getCatalog: function (e) {
            function t() {
                return a.isActivePanel("#storev2Panel") ? void (o || c || !l || (i.WriteDebugLog("callGameMethodGetCatalog", "isDataValid; isLoading; isError", l + "; " + o + "; " + c), r = a.CallGameMethod("RGSC_GET_COMMERCE_CATALOG", null, "RGSC_GET_COMMERCE_CATALOG_DEMO"), "undefined" != typeof r && (clearInterval(d), d = null, "string" == typeof r && (r = JSON.parse(r)), i.WriteDebugLog("callGameMethodGetCatalog", "catalog", JSON.stringify(r)), void 0 != e && (r.Category = e.category, r.Product = e.productId), s.getCatalogModel(r)))) : void n()
            }

            function n() {
                return null != d ? (i.WriteDebugLog("loadCatalog.cancelPollingCommerceCatalog", "catalog", r), clearInterval(d), d = null, a.isActivePanel("#storev2Panel") && "undefined" == typeof r ? void s.getError() : void 0) : void 0
            }

            if (i.WriteDebugLog("getCatalog", "isDataValid; isLoading; isError", l + "; " + o + "; " + c), !o && !c && l) {
                var r, s = this, d = setInterval(t, 500);
                setTimeout(n, globals.ajaxTimeout)
            }
        }, getCatalogModel: function (e) {
            e.StoreAvailable = !0, e.SingleProductView = this.isSingleProductView(e.Product), e = s.Catalog.prototype.parse.call(this, e), s.Catalog.prototype.set.call(this, e, {parse: !0})
        }, isSingleProductView: function (e) {
            return "undefined" != typeof e && "" !== e
        }, getError: function () {
            this.set({storeAvailable: !1}, {silent: !0}), this.trigger("change")
        }, searchProducts: function (e, t) {
            var n;
            if (n = "purchased" === i.toLower(e) ? this.filterByPurchased() : this.filterByCategory(e), null !== t && "undefined" != typeof t && t.length) {
                var a = i.toLower(t);
                return n.filter(function (e) {
                    var t = i.toLower(e.get("Name").toString()), n = i.toLower(e.get("Desc").toString()),
                        r = i.toLower(e.get("Id").toString()),
                        s = t.indexOf(a) >= 0 || n.indexOf(a) >= 0 || r.indexOf(a) >= 0;
                    return s
                })
            }
            return n
        }, filterProducts: function (e, t) {
            var n;
            if (n = "purchased" == i.toLower(e) ? this.filterByPurchased() : this.filterByCategory(e), void 0 == n || 0 == n.length) return n;
            var a;
            return "" != t && (a = this.findProduct(n, t)), void 0 != a && a.length > 0 ? (a[0].productFound = !0, a) : n
        }, filterByCategory: function (e) {
            var t = void 0, a = i.toLower(e);
            if ("top_default" === a) {
                var r = this.get("products");
                void 0 != r && (t = r.models)
            } else t = this.get("products").filter(function (e) {
                var t = n.any(e.get("CategoryMemberships"), function (e) {
                    return i.toLower(e) === a
                });
                return t
            });
            return t
        }, filterByPurchased: function () {
            var e = this.get("products").filter(function (e) {
                return e.get("Purchased") && !e.get("Consumable")
            });
            return e
        }, findProduct: function (t, n) {
            var a = i.toLower(n), r = e.grep(t, function (e) {
                return i.toLower(e.get("Id")) === a
            });
            return r
        }, findCategory: function (e, t) {
            var a = i.toLower(t), r = n.find(e, function (e) {
                var t = i.toLower(e.Id) === a, n = i.toLower(e.Name) === a;
                return t || n
            });
            return r
        }, parse: function (e) {
            return i.WriteDebugLog("Catalog.parse", "response.StoreAvailable", e.StoreAvailable), i.WriteDebugLog("Catalog.parse", "response.ProductCount", e.ProductCount), {
                products: new s.ProductCollection(e.Products, {parse: !0}),
                categories: new s.CategoryCollection(e.Categories, {parse: !0}),
                productCount: e.ProductCount,
                categoryCount: e.CategoryCount,
                storeAvailable: e.StoreAvailable,
                category: e.Category,
                product: e.Product,
                singleProductView: e.SingleProductView
            }
        }
    }), s.Category = t.Model.extend({
        idAttribute: "Id", parse: function (e) {
            return void 0 == e || void 0 == e.Name || e.Name.length ? e : (e.Name = "All", e)
        }
    }), s.CategoryCollection = t.Collection.extend({model: s.Category}), s.Product = t.Model.extend({
        idAttribute: "Id", parse: function (e) {
            var t = e.Consumable, i = e.Purchased, a = e.Installed, r = !1;
            (t || !i) && (r = !0);
            var s = !1;
            return t || !i || a || (s = !0), e = n.extend(e, {
                ShowPurchaseButton: r,
                ShowInstallButton: s
            }), void 0 != e.ImagePaths && e.ImagePaths.length > 0 && void 0 != e.ImagePaths[0] && (e = n.extend(e, {ImagePath: e.ImagePaths[0]})), e
        }, setupPurchaseFlowTelemetry: function () {
            var e = this,
                t = a.CallGameMethodAsync("RGSC_COMMERCE_GET_PURCHASE_FLOW_TELEMETRY", null, "RGSC_COMMERCE_GET_PURCHASE_FLOW_TELEMETRY_DEMO");
            t.done(function (t) {
                "object" == typeof t && ("undefined" != typeof t.l && r.setCustomDimension(r.dimension.pia1, t.l.toString()), "undefined" != typeof t.liid && r.setCustomDimension(r.dimension.pia2, t.liid.toString()), "undefined" != typeof t.lip && r.setCustomDimension(r.dimension.pia3, t.lip.toString()), "undefined" != typeof t.b && r.setCustomDimension(r.dimension.pia4, t.b.toString()), "undefined" != typeof t.d && r.setCustomDimension(r.dimension.pia5, t.d.toString()), "undefined" != typeof t.sid && r.setCustomDimension(r.dimension.pia6, t.sid.toString()), r.trackEvent(r.category.store, r.action.store_start_purchase, e.get("Id")))
            })
        }
    }), s.ProductCollection = t.Collection.extend({model: s.Product}), s.UserAccount = t.Model.extend({url: i.getApiUrl("/api/profile/getsignedinuseraccountinfo")}), s
}), define("hbs!common/templates/store/product", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r(e) {
            var t, i, a = "";
            return a += '\r\n      <span class="purchase_button"><a href="#" class="btn btnPurple btnLarge" data-id="', (i = n.Id) ? t = i.call(e, {hash: {}}) : (i = e && e.Id, t = typeof i === d ? i.call(e, {hash: {}}) : i), a += u(t) + '" rel="localize[BuyButton]">Buy</a></span>\r\n      '
        }

        function s() {
            return '\r\n      <span class="install_button"></span>\r\n      '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var o, l, c = "", d = "function", u = this.escapeExpression, h = this;
        return c += '<div class="item clearfix product" data-id="', (l = n.Id) ? o = l.call(t, {hash: {}}) : (l = t && t.Id, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '">\r\n  <a class="thumbWrapper" href="#">\r\n    <img class="thumb" src="', (l = n.StoreImageBaseUrl) ? o = l.call(t, {hash: {}}) : (l = t && t.StoreImageBaseUrl, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o), (l = n.ImagePath) ? o = l.call(t, {hash: {}}) : (l = t && t.ImagePath, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '" alt=""/>\r\n    <img class="info" src="ext/scui/images/info.png" alt="info icon" />\r\n  </a>\r\n  <div class="storeItemText">\r\n		<div class="storeItemTextSummary">\r\n			<h4>', (l = n.Name) ? o = l.call(t, {hash: {}}) : (l = t && t.Name, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + "</h4>\r\n			<h5>", (l = n.PriceString) ? o = l.call(t, {hash: {}}) : (l = t && t.PriceString, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + "&nbsp;</h5>\r\n      ", o = n["if"].call(t, t && t.ShowPurchaseButton, {
            hash: {},
            inverse: h.noop,
            fn: h.program(1, r, a)
        }), (o || 0 === o) && (c += o), c += "\r\n      ", o = n["if"].call(t, t && t.ShowInstallButton, {
            hash: {},
            inverse: h.noop,
            fn: h.program(3, s, a)
        }), (o || 0 === o) && (c += o), c += '\r\n      <div class="errors"><span class="errorText"></span></div>\r\n    </div>\r\n	</div>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/store/no_products", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="item clearfix">\r\n	<h4 rel="localize[NoProducts]">No products match your search criteria.</h4>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/store/product_not_found", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="item clearfix">\r\n	<h4 rel="localize[ProductNotFound]">Product could not be found.</h4>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/store/store_under_age", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="errorText" style="margin-top: 20px;">\r\n    <span rel="localize[StoreUnderAge]">Your Social Club account does not meet the age requirements for accessing the Store.</span>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/store/store_container", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), ' <div id="store">\r\n	<div id="storeHeader">\r\n		<div class="clearfix">\r\n			<h3><span rel="localize[StoreTitle]">Store</span></h3>\r\n\r\n		</div>\r\n	</div>\r\n\r\n	<div id="products" class="box-wrap antiscroll-wrap">\r\n        <div class="box">\r\n            <div class="antiscroll-inner"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="storeV2Iframe">\r\n    <iframe></iframe>\r\n</div>\r\n\r\n<div id="storeV2Error"></div>'
    });
    return n
}), define("hbs!common/templates/store/store_options", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="options">\r\n    <div id="storeFilter">\r\n        <form>\r\n		      <div id="storeSearch" class="input">\r\n			      <input id="searchInput" name="searchInput" type="text" class="text" placeholder="Search" rel="localize[SearchLabel]" maxLength="50" />\r\n			      <input id="searchSubmit" name="searchSubmit" type="submit" value="Go" rel="localize[GoButton]"/>\r\n		      </div>\r\n		      <div id="storeCategory" class="input">\r\n			      <label for="category" rel="localize[StoreCategory]">Category:</label>\r\n			      <select id="category" name="category">\r\n                      <option value="purchased" rel="localize[Purchased]">Purchased</option>\r\n                  </select>\r\n		      </div>\r\n        </form>\r\n    </div>\r\n    <span id="redeemSerialKey" tabindex="20" class="btn btnPurple btnLarge" rel="localize[RedeemSerialKey]">Use Activation Code</span>\r\n</div>'
    });
    return n
}), define("hbs!common/templates/store/product_info", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r() {
            return '\r\n        <span class="purchase_button"></span>\r\n      '
        }

        function s() {
            return '\r\n      <span class="install_button"></span>\r\n      '
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var o, l, c = "", d = "function", u = this.escapeExpression, h = this;
        return c += '<div id="product_info">\r\n    <div class="header">\r\n        <h4>', (l = n.Name) ? o = l.call(t, {hash: {}}) : (l = t && t.Name, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '</h4>\r\n        <a class="close"></a>\r\n    </div>\r\n    <div class="thumb">\r\n        <img src="', (l = n.StoreImageBaseUrl) ? o = l.call(t, {hash: {}}) : (l = t && t.StoreImageBaseUrl, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o), (l = n.ImagePath) ? o = l.call(t, {hash: {}}) : (l = t && t.ImagePath, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '" alt=""/>\r\n    </div>\r\n    <div class="storeItemTextSummary clearfix">\r\n        <h5>', (l = n.PriceString) ? o = l.call(t, {hash: {}}) : (l = t && t.PriceString, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + "</h5>\r\n        ", o = n["if"].call(t, t && t.ShowPurchaseButton, {
            hash: {},
            inverse: h.noop,
            fn: h.program(1, r, a)
        }), (o || 0 === o) && (c += o), c += "\r\n      ", o = n["if"].call(t, t && t.ShowInstallButton, {
            hash: {},
            inverse: h.noop,
            fn: h.program(3, s, a)
        }), (o || 0 === o) && (c += o), c += '\r\n    </div>\r\n    <div class="box-wrap antiscroll-wrap">\r\n        <div class="box">\r\n            <div class="antiscroll-inner">\r\n                <div class="storeItemTextDescription">\r\n                    <p>', (l = n.Desc) ? o = l.call(t, {hash: {}}) : (l = t && t.Desc, o = typeof l === d ? l.call(t, {hash: {}}) : l), (o || 0 === o) && (c += o), c += "</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n</div>       \r\n"
    });
    return n
}), define("hbs!common/templates/store/purchase_button", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var i, a, r = "", s = "function", o = this.escapeExpression;
        return r += '<a href="#" class="btn btnPurple btnLarge purchaseBtn" data-id="', (a = n.Id) ? i = a.call(t, {hash: {}}) : (a = t && t.Id, i = typeof a === s ? a.call(t, {hash: {}}) : a), r += o(i) + '" rel="localize[CheckOutButton]">Check out</a>'
    });
    return n
}), define("hbs!common/templates/store/install_button", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n) {
        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var i, a, r = "", s = "function", o = this.escapeExpression;
        return r += '<a href="#" class="btn btnPurple btnLarge installBtn" rel="localize[InstallButton]" data-id="', (a = n.Id) ? i = a.call(t, {hash: {}}) : (a = t && t.Id, i = typeof a === s ? a.call(t, {hash: {}}) : a), r += o(i) + '">Install</a>'
    });
    return n
}),define("common/store/store-views", ["jquery", "backbone", "underscore", "common/store/store-models", "utils", "common/jquery.datafunctions", "jquery.setup.environment.utils", "common/steam", "common/analyticsManager", "hbs!common/templates/store/product", "hbs!common/templates/store/no_products", "hbs!common/templates/store/product_not_found", "hbs!common/templates/store/store_under_age", "hbs!common/templates/store/store_container", "hbs!common/templates/store/store_options", "hbs!common/templates/store/product_info", "hbs!common/templates/store/purchase_button", "hbs!common/templates/store/install_button", "dropkick", "common/jquery.visible"], function (e, t, n, i, a, r, s, o, l, c, d, u, h, f, p, m, g, v) {
    var _ = {}, b = [];
    "undefined" == typeof window.globals && (window.globals = {});
    var y, w, S = window.globals, C = 6;
    return _.StoreView = t.View.extend({
        el: "#storev2Panel .contentWrapper #storeCatalog",
        events: {
            "click #redeemSerialKey": "redeemVoucher",
            "keypress #redeemSerialKey": "redeemVoucherKeypress",
            "click #searchSubmit": "search",
            "change #category": "search"
        },
        render: function () {
            if (this.renderContainer(), this.model.get("underAge")) return this.renderUnderAgeError(), this;
            if (!this.model.get("storeAvailable")) {
                var e = a.errorCode("7000"), t = s.getErrorWithCode(e, "");
                return s.showGenericFatalError(e, t.Message, t.SupportText, t.CodeDescription), this.onClose(), this
            }
            this.renderOptions(), this.renderCategories(), this.filter(), this.$el.parent().find(".loadingMask").hide(), this.$el.show(), s.setupTextInputGameNotifications(this.$("input:text, input:password, textarea"));
            var i = this, r = n.debounce(function (e) {
                i.addProductImpressions(e)
            }, 500);
            return this.$("#products .antiscroll-inner").scroll(r), this
        },
        renderContainer: function () {
            var e = a.renderCompiledTemplate(f);
            this.$el.html(e)
        },
        renderOptions: function () {
            var e = a.renderCompiledTemplate(p);
            this.$("#storeHeader").find(".clearfix").append(e), "en-US" != S.titlelang && this.$("#storeHeader").find("[rel*=localize]").localize("Store", {
                language: S.titlelang,
                pathPrefix: S.baseAssetUrl + "xml/Shared"
            })
        },
        renderUnderAgeError: function () {
            e("#storeButton").hide(), this.$(".options").remove(), this.$(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide();
            var t = a.renderCompiledTemplate(h);
            this.$("#products").find(".box .antiscroll-inner").html(t), "en-US" != S.titlelang && this.$("#products").find("[rel*=localize]").localize("Store", {
                language: S.titlelang,
                pathPrefix: S.baseAssetUrl + "xml/Shared"
            }), this.$el.parent().find(".loadingMask").hide(), this.$el.show()
        },
        renderCategories: function () {
            var e = this.$("select#category"), t = this.model.get("categories");
            if (null != t) {
                var n;
                this.model.get("categories").each(function (e) {
                    n += "<option value='" + a.toLower(e.get("Id")) + "' rel=\"localize[" + e.get("Id") + ']">' + e.get("Name") + "</option>"
                }), e.prepend(n), e.find("[rel*=localize]").localize("Store", {
                    language: S.titlelang,
                    pathPrefix: S.baseAssetUrl + "xml/Shared"
                }), e.dropkick()
            }
        },
        removeProducts: function () {
            n.each(window.amd.store.ProductViews, function (e) {
                e.close()
            }), void 0 != window.amd.store.EmptyProductView && window.amd.store.EmptyProductView.close(), window.amd.store.ProductViews = [], window.amd.store.EmptyProductView = void 0
        },
        renderProducts: function (n) {
            if (this.removeProducts(), n.length < C && (C = n.length), 0 === n.length) {
                var i = new t.Model({singleProductView: this.model.get("singleProductView")}),
                    a = new _.ProductView({model: i, id: "no_products"});
                return a.renderEmpty(), window.amd.store.EmptyProductView = a, void this.$("#products").find(".antiscroll-inner").append(a.$el)
            }
            this.model.get("productCount") > C && e("#storeFilter").show();
            var r = this;
            n.each(function (e) {
                var t = new _.ProductView({model: e, id: "product_" + e.id});
                window.amd.store.ProductViews.push(t), t.render(), r.$("#products").find(".antiscroll-inner").append(t.$el)
            }), this.$("#products.antiscroll-wrap").antiscroll(), "en-US" != S.titlelang && this.$("#products").find("[rel*=localize]").localize("Store", {
                language: S.titlelang,
                pathPrefix: S.baseAssetUrl + "xml/Shared"
            }), this.addProductImpressions(), l.productListRendered()
        },
        addProductImpressions: function (e) {
            var t = this, n = t.$("#products .antiscroll-inner"), i = n.find("div.product"),
                a = t.$("#searchInput").val().length > 0, r = !1, s = this.model.get("products");
            s.each(function (e) {
                var s = e.get("Id"), o = n.find("div[data-id='" + s + "']"), c = b.indexOf(s), d = c >= 0;
                if (!o.length || !o.find(".purchase_button a").visible(!1, !0, "vertical", t.$("#products .antiscroll-inner"))) return void (d && b.splice(c, 1));
                if (!d) {
                    var u = i.index(o) + 1, h = a ? "search" : t.model.get("category");
                    l.addImpression(s, e.get("Name"), e.get("CategoryMemberships").toString(), S.titleName, h, u), b.push(s), r = !0
                }
            }), r && "undefined" != typeof e && l.trackEvent(l.category.store, l.action.store_product_scroll)
        },
        redeemVoucher: function (e) {
            e && e.preventDefault();
            var t = "COMMERCE", n = "REDEMPTIONCODE",
                i = {State: t, SubState: n, Visible: !0, Online: s.isOnline(), Data: {Message: 41, Referrer: "store"}};
            a.pubsub.trigger("gamefunctions:showActivation", i, t, n)
        },
        redeemVoucherKeypress: function (e) {
            13 == e.which && this.redeemVoucher()
        },
        search: function (e) {
            e.preventDefault();
            var t = this.$("#searchInput").val(), n = this.$("#category").val();
            this.model.set({category: n, product: t}, {silent: !0});
            var i = this.model.searchProducts(n, t);
            this.searchResultsModel.reset(i), this.renderProducts(this.searchResultsModel)
        },
        filter: function () {
            var e = this.model.get("category"), t = this.$("select#category"), n = "top_default";
            if (null !== e && void 0 !== e && "" !== e) {
                var i = this.model.get("categories").toJSON(), r = this.model.findCategory(i, e);
                r && (n = a.toLower(e))
            }
            var s = this.model.get("product");
            this.$("#searchInput").val(s), t.val(n), t.dropkick("setValue", n)
        },
        hideStoreIframe: function () {
            var e = this;
            a.pubsub.off("headerLoginUser:click:disabled", this.hideStoreIframe), this.$("#storeV2Iframe").fadeOut(function () {
                s.initHeaderMenu(!0), a.removeLoading("storev2Panel"), e.removeStoreMessageHandler(), e.$("#store").fadeIn(), e.filter()
            })
        },
        processStoreEvents: function (e) {
            var t = S.storeOrigin, i = {
                complete: "complete",
                backtostore: "backtostore",
                error: "error",
                openlink: "openlink",
                pageview: "pageview",
                focuschange: "focuschange"
            };
            if (e.origin !== t) return void a.WriteDebugLog("processStoreEvents", "Unsupported origin", e.origin);
            var r, o = e.data;
            try {
                "string" == typeof e.data && (o = JSON.parse(e.data))
            } catch (c) {
                return this.showError(a.errorCode("6003.66")), a.WriteDebugLog("processStoreEvents", "event exception", c.toString(), a.logType.error, a.logController[S.titleName]), void this.hideStoreIframe()
            }
            if ("undefined" == typeof o) return a.WriteDebugLog("processStoreEvents", "Undefined event data", "", a.logType.error, a.logController[S.titleName]), this.showError(a.errorCode("5000.66")), void this.hideStoreIframe();
            if (r = o.command, !n.has(i, r)) return a.WriteDebugLog("processStoreEvents", "Unsupported event command", r, a.logType.error, a.logController[S.titleName]), this.showError(a.errorCode("5003.66")), void this.hideStoreIframe();
            switch (a.WriteDebugLog("processStoreEvents", "data", JSON.stringify(o), a.logType.debug, a.logController[S.titleName]), this.clearErrors(), r) {
                case i.complete:
                    a.WriteDebugLog("processStoreEvents", "Complete"), this.hideStoreIframe();
                    break;
                case i.backtostore:
                    a.WriteDebugLog("processStoreEvents", "Back To Store"), this.hideStoreIframe();
                    break;
                case i.openlink:
                    var d = o.url;
                    "string" == typeof d && d.length ? (a.WriteDebugLog("processStoreEvents", "Launch URL from Digital River", d), s.launchExternalBrowserForUrl(d)) : (a.WriteDebugLog("processStoreEvents", "URL string from Digital River is undefined", "", a.logType.error, a.logController[S.titleName]), this.showError(a.errorCode("7000.73")));
                    break;
                case i.error:
                    a.WriteDebugLog("processStoreEvents", "Error returned from Digital River", e.data, a.logType.error, a.logController[S.titleName]), this.showError(a.errorCode("7000.66")), this.hideStoreIframe();
                    break;
                case i.pageview:
                    switch (o.page) {
                        case"checkout":
                            l.checkout();
                            break;
                        case"confirmpurchase":
                            var u = o.type;
                            "undefined" == typeof u ? a.WriteDebugLog("processStoreEvents", "Payment Type from Digital River is undefined", "", a.logType.error, a.logController[S.titleName]) : (a.WriteDebugLog("processStoreEvents", "Confirm purchase", u), l.confirmPurchase(o.type));
                            break;
                        case"proceedtopayment":
                            l.proceedToPayment();
                            break;
                        case"complete":
                            for (var h = ["productid", "price", "revenue", "currency"], f = !1, p = [], m = 0, g = h.length; g > m; m++) {
                                var v = h[m], _ = o[v] && "undefined" != typeof o[v];
                                _ || (f = !0, p.push(v))
                            }
                            if (f) a.WriteDebugLog("processStoreEvents", "Purchase Complete missing data", p.toString(), a.logType.error, a.logController[S.titleName]); else {
                                a.WriteDebugLog("processStoreEvents", "Checkout completion");
                                var b = this.model.get("purchaseProductName"), y = this.model.get("purchaseProductId"),
                                    w = this.model.get("purchaseProductCategory");
                                l.checkoutCompletion(y, b, w, o.price, 1, o.currency, o.revenue)
                            }
                            break;
                        default:
                            a.WriteDebugLog("processStoreEvents", "Invalid pageview data", o.page, a.logType.error, a.logController[S.titleName])
                    }
                    break;
                case i.focuschange:
                    var C = o.hasfocus;
                    if ("undefined" == typeof C) a.WriteDebugLog("processStoreEvents", "hasfocus state from Digital River is undefined", "", a.logType.error, a.logController[S.titleName]); else {
                        var k = {hasFocus: C};
                        s.setupTextEntry(k)
                    }
                    break;
                default:
                    a.WriteDebugLog("processStoreEvents", "Invalid command", r, a.logType.error, a.logController[S.titleName])
            }
        },
        addStoreMessageHandler: function () {
            window.addEventListener("message", this.processStoreEvents, !1)
        },
        removeStoreMessageHandler: function () {
            window.removeEventListener("message", this.processStoreEvents, !1)
        },
        clearErrors: function () {
            this.$(".errors .errorText, .errorCode").html("")
        },
        showError: function (e) {
            var t = s.getErrorWithCode(e);
            r.ShowErrorModal(e, t)
        },
        updateGlobalAccount: function () {
            this.userAccountModel = new i.UserAccount;
            var e = this, t = {env: S.rosEnvironment, title: S.titleName, version: S.RosTitleVersion},
                n = s.GetAuthHeaderAsync();
            n.done(function (n) {
                e.userAccountModel.fetch({
                    type: "POST",
                    headers: n,
                    contentType: "application/json; charset=utf-8",
                    data: t,
                    success: this.updateGlobalAccountSuccess,
                    fatalError: r.ShowErrorModal
                })
            })
        },
        updateGlobalAccountSuccess: function () {
            var e = this.userAccountModel.get("Error");
            if (void 0 != e) a.WriteDebugLog("updateGlobalAccount", "error", e, a.logType.error, a.logcontroller.profile); else {
                if (void 0 == S.account) return void a.WriteDebugLog("updateGlobalAccount", "error", "globals.account is undefined", a.logType.error, a.logController.profile);
                S.account.Age = this.userAccountModel.get("Age"), S.account.Minor = this.userAccountModel.get("Minor"), S.account.Country = this.userAccountModel.get("Country"), S.account.CountryCode = this.userAccountModel.get("Country")
            }
        },
        receiveCheckoutUrl: function (t) {
            clearTimeout(y), a.WriteDebugLog("purchase", "data.Url", t.Url), this.showStoreIframe(t, e(this.model.get("purchaseElem")))
        },
        showStoreIframe: function (e) {
            var t = this, n = e.Url;
            this.$("#store").fadeOut(function () {
                s.initHeaderMenu(!1), a.pubsub.on("headerLoginUser:click:disabled", t.hideStoreIframe);
                var e = t.$("#storeV2Iframe"), i = e.find("iframe");
                i.on("load", function () {
                    "undefined" != typeof w && (clearTimeout(w), t.addStoreMessageHandler(), e.fadeIn(), a.removeLoading("storev2Panel"), t.resetProductImpressions())
                }), i.attr("src", n), w = setTimeout(t.iframeError, S.ajaxTimeout)
            })
        },
        iframeError: function () {
            this.showError(a.errorCode("7000.91")), this.hideStoreIframe(), w = void 0
        },
        setPurchasedProductDetails: function (e) {
            this.model.set({
                purchaseProductId: e.Id,
                purchaseProductName: e.Name,
                purchaseProductCategory: e.CategoryMemberships.toString()
            }, {silent: !0})
        },
        onClose: function () {
            s.CallGameMethod("RGSC_DESTROY_COMMERCE_DATA", null, "RGSC_DESTROY_COMMERCE_DATA_DEMO"), window.amd.store.StoreView = void 0, this.stopListening(), this.resetProductImpressions(), a.pubsub.off("gamefunctions:checkoutUrl", this.receiveCheckoutUrl), a.pubsub.off("store:SetPurchasedProductDetails", this.setPurchasedProductDetails), a.pubsub.off("headerLoginUser:click:disabled", this.hideStoreIframe)
        },
        resetProductImpressions: function () {
            b = []
        },
        reset: function (e) {
            this.$el.html(""), s.setUpLoadingPanel("#storev2Panel");
            var t = this, n = function () {
                t.model.unset("underAge", {silent: !0}), t.model.loadCatalog(e), t.resetProductImpressions()
            }, i = function () {
                t.model.set({underAge: !0})
            }, r = function () {
                t.showError(a.errorCode("7000.65")), a.pubsub.trigger("setupEnv:showHomepage")
            };
            this.checkAge(n, i, r)
        },
        checkAge: function (e, t, n) {
            var i = {ofAgeCallbkFn: e, underAgeCallbkFn: t, errorCallbkFn: n};
            a.pubsub.trigger("setupEnvUtils:checkStoreAgeAppropriate", i)
        },
        reInitialize: function (e) {
            s.CallGameMethod("RGSC_DESTROY_COMMERCE_DATA", null, "RGSC_DESTROY_COMMERCE_DATA_DEMO"), this.model.initCommerceSystem(), this.reset(e)
        },
        initialize: function (e) {
            n.bindAll(this, "render", "reInitialize", "renderProducts", "renderCategories", "onClose", "search", "filter", "renderUnderAgeError", "checkAge", "updateGlobalAccount", "updateGlobalAccountSuccess", "renderContainer", "renderOptions", "reset", "processStoreEvents", "receiveCheckoutUrl", "addProductImpressions", "setPurchasedProductDetails", "showStoreIframe", "iframeError", "hideStoreIframe"), this.model = new i.Catalog({titlelang: S.titlelang}), this.listenTo(this.model, "change", this.render), this.searchResultsModel = new i.ProductCollection, a.pubsub.on("gamefunctions:checkoutUrl", this.receiveCheckoutUrl), a.pubsub.on("store:SetPurchasedProductDetails", this.setPurchasedProductDetails), this.reset(e)
        }
    }), _.ProductView = t.View.extend({
        events: {"click .product": "showInfo"}, render: function () {
            var e = S.storeImageBaseUrl;
            e = e.replace("{0}", S.titleName).replace("{1}", S.platform);
            var t = this.model.get("ImagePath");
            void 0 != e && void 0 != t && e.length && t.length ? e.lastIndexOf("/") !== e.length - 1 && 0 !== t.indexOf("/") && (e += "/") : (e = "", this.model.set({ImagePath: S.baseUrl + "images/store/fallback.jpg"}, {silent: !0})), this.model.set({StoreImageBaseUrl: e}), a.WriteDebugLog("ProductView.render", "storeImageBaseUrl + imagePath", e + this.model.get("ImagePath"));
            var n = this.model.toJSON(), i = a.renderCompiledTemplate(c, n);
            if (this.$el.html(i), this.model.get("ShowInstallButton")) {
                var r = new _.InstallButtonView({model: this.model, el: this.$el.find(".install_button")});
                r.render()
            }
            return this.$("img").on("error", this.image404), this
        }, showInfo: function (e) {
            e && e.preventDefault();
            var t = new _.ProductInfoView({model: this.model});
            window.amd.store.ProductInfoView = t, l.trackPage("/Store/ProductInfo"), t.render()
        }, image404: function () {
            var t = S.baseUrl + "images/store/fallback.jpg";
            t != this.src && (this.src = t), e(this).off("error")
        }, renderEmpty: function () {
            var t;
            return t = a.renderCompiledTemplate(this.model.get("singleProductView") ? u : d), this.$el.html(t), "en-US" != S.titlelang && this.$el.find("[rel*=localize]").localize("Store", {
                language: S.titlelang,
                pathPrefix: S.baseAssetUrl + "xml/Shared"
            }), e("#storeFilter").show(), this
        }, onClose: function () {
        }, initialize: function () {
            n.bindAll(this, "render", "onClose", "renderEmpty")
        }
    }), _.ProductInfoView = t.View.extend({
        events: {"click .purchase": "purchase", "click .close": "onClose"},
        el: "#product_info_wrapper",
        render: function () {
            var e = this.model.toJSON(), t = a.renderCompiledTemplate(m, e);
            if (this.$el.append(t), this.model.get("ShowPurchaseButton")) {
                var n = new _.PurchaseButtonView({model: this.model, el: this.$el.find(".purchase_button")});
                n.render()
            }
            if (this.model.get("ShowInstallButton")) {
                var i = new _.InstallButtonView({model: this.model, el: this.$el.find(".install_button")});
                i.render()
            }
            "en-US" != S.titlelang && this.$el.find("[rel*=localize]").localize("Store", {
                language: S.titlelang,
                pathPrefix: S.baseAssetUrl + "xml/Shared"
            }), this.$("img").on("error", this.image404), this.$el.fadeIn(), this.$(".antiscroll-wrap").antiscroll()
        },
        image404: function () {
            var t = S.baseUrl + "images/store/fallback.jpg";
            t != this.src && (this.src = t), e(this).off("error")
        },
        onClose: function () {
            this.$el.fadeOut(), this.$el.html(""), this.stopListening(), window.amd.store.ProductInfoView = void 0
        },
        initialize: function () {
            n.bindAll(this, "render", "onClose")
        }
    }), _.PurchaseButtonView = t.View.extend({
        events: {"click .purchaseBtn": "purchase"}, render: function () {
            var t = e(this.el), n = a.renderCompiledTemplate(g, {Id: this.model.get("Id")});
            "en-US" != S.titlelang && t.find("[rel*=localize]").localize("Store", {
                language: S.titlelang,
                pathPrefix: S.baseAssetUrl + "xml/Shared"
            }), t.html(n)
        }, purchase: function (e) {
            e.preventDefault(), s.closeModalsAndHideMenu();
            var t = {
                Id: this.model.get("Id"),
                Name: this.model.get("Name"),
                CategoryMemberships: this.model.get("CategoryMemberships")
            };
            a.pubsub.trigger("store:SetPurchasedProductDetails", t), s.setUpLoadingPanel("#storev2Panel");
            var n, i = this;
            n = o.isSteam() ? i.startSteamPurchase : i.requestCheckoutUrl;
            var r = function () {
                i.model.setupPurchaseFlowTelemetry(), n()
            };
            return "undefined" != typeof S.account && "undefined" != typeof S.account.CountryCode && "DE" === S.account.CountryCode.toUpperCase() ? (a.WriteDebugLog("purchase", "globals.account.CountryCode", S.account.CountryCode), void this.checkAgeForPurchase(r)) : void r()
        }, checkAgeForPurchase: function (e) {
            var t = this, n = function () {
                t.renderUnderAgeError(), t.updateGlobalAccount()
            }, i = function () {
                t.showError(a.errorCode("7000.65")), t.model.unset("disablePurchase", {silent: !0})
            };
            this.checkAge(e, n, i)
        }, checkAge: function (e, t, n) {
            var i = {ofAgeCallbkFn: e, underAgeCallbkFn: t, errorCallbkFn: n};
            a.pubsub.trigger("setupEnvUtils:checkStoreAgeAppropriate", i)
        }, startSteamPurchase: function () {
            function e() {
                if (a.WriteDebugLog("didLastSteamPurchaseFail", "", ""), !s.isActivePanel("#storev2Panel")) return t("navigation"), !1;
                var e = s.CallGameMethod("RGSC_DID_LAST_STEAM_PURCHASE_FAIL", null, "RGSC_DID_LAST_STEAM_PURCHASE_FAIL_DEMO");
                return "undefined" != typeof e && "undefined" != typeof e.Result && (l = e.Result, a.WriteDebugLog("didLastSteamPurchaseFail", "is purchase failed", l)), l ? (t("failed"), !0) : !1
            }

            function t(e) {
                a.WriteDebugLog("cancelPollingSteamPurchase", "purchaseFailed", l), a.WriteDebugLog("cancelPollingSteamPurchase", "reason", e), null !== c && (clearInterval(c), c = null, s.isActivePanel("#storev2Panel") && l && n.startSteamPurchaseError())
            }

            var n = this, i = this.model.get("Id"), r = {ProductId: i, Language: a.stripRegion(S.titlelang)};
            a.WriteDebugLog("startSteamPurchase", "productId", i);
            var o = s.CallGameMethod("RGSC_START_STEAM_PURCHASE", r, "RGSC_START_STEAM_PURCHASE_DEMO");
            a.WriteDebugLog("startSteamPurchase", "isRequested stringified", JSON.stringify(o));
            var l, c = setInterval(e, 500);
            setTimeout(t, S.ajaxTimeout), "undefined" != typeof o && (t("request received"), "undefined" != typeof o.Result && o.Result || (a.WriteDebugLog("startSteamPurchase", "RGSC_START_STEAM_PURCHASE", "false", a.logType.error, a.logController[S.titleName]), this.startSteamPurchaseError()))
        }, startSteamPurchaseError: function () {
            var e = a.errorCode("7000.71"), t = s.getErrorWithCode(e),
                n = s.getErrorWithCode(e, "RGSC_START_STEAM_PURCHASE");
            s.showGenericFatalError(e, n.Message, "", t.CodeDescription)
        }, requestCheckoutUrl: function () {
            var e = this.model.get("Id"), t = {
                ProductId: e,
                Country: void 0 != S.account ? S.account.CountryCode : "",
                Language: a.stripRegion(S.titlelang)
            };
            a.WriteDebugLog("requestCheckoutUrl", "productId", e);
            var n = s.CallGameMethod("RGSC_REQUEST_CHECKOUT_URL", t, "RGSC_REQUEST_CHECKOUT_URL_DEMO");
            if (void 0 != n && n.Result) {
                var i = setTimeout(this.requestCheckoutUrlError, S.ajaxTimeout);
                y = i
            } else a.WriteDebugLog("store-views.requestCheckoutUrl", "isRequested", JSON.stringify(n)), this.requestCheckoutUrlError()
        }, requestCheckoutUrlError: function () {
            a.WriteDebugLog("requestCheckoutUrlError");
            var e = a.errorCode("7000.63"), t = s.getErrorWithCode(e),
                n = s.getErrorWithCode(e, "RGSC_REQUEST_CHECKOUT_URL");
            s.showGenericFatalError(e, n.Message, "", t.CodeDescription)
        }, resetProductImpressions: function () {
            b = []
        }, onClose: function () {
            this.stopListening()
        }, initialize: function () {
            n.bindAll(this, "render", "purchase", "checkAgeForPurchase", "checkAge", "startSteamPurchase", "startSteamPurchaseError", "requestCheckoutUrl", "requestCheckoutUrlError", "resetProductImpressions", "onClose")
        }
    }), _.InstallButtonView = t.View.extend({
        events: {"click .installBtn": "install"}, render: function () {
            var t = e(this.el), n = a.renderCompiledTemplate(v, {Id: this.model.get("Id")});
            "en-US" != S.titlelang && t.find("[rel*=localize]").localize("Store", {
                language: S.titlelang,
                pathPrefix: S.baseAssetUrl + "xml/Shared"
            }), t.html(n)
        }, install: function (e) {
            e && e.preventDefault();
            var t = {productId: this.model.get("Id")};
            s.CallGameMethod("RGSC_INSTALL_PRODUCT", t, "RGSC_INSTALL_PRODUCT_DEMO", "RGSC_JS_INSTALL_PRODUCT_RESULT")
        }, onClose: function () {
            this.stopListening()
        }, initialize: function () {
            n.bindAll(this, "render", "install", "onClose")
        }
    }), _
}),function (e) {
    function t(t, n) {
        this.el = e(t), this.options = n || {}, this.padding = void 0 == this.options.padding ? 2 : this.options.padding, this.autoHide = !1 !== this.options.autoHide, this.inner = this.el.find(".antiscroll-inner"), this.inner.css({
            width: "+=" + a(),
            height: "+=" + a()
        }), this.refresh()
    }

    function n(t) {
        this.pane = t, this.pane.el.append(this.el), this.innerEl = this.pane.inner.get(0), this.dragging = !1, this.enter = !1, this.shown = !1, this.pane.el.mouseenter(e.proxy(this, "mouseenter")), this.pane.el.mouseleave(e.proxy(this, "mouseleave")), this.el.mousedown(e.proxy(this, "mousedown")), this.pane.inner.scroll(e.proxy(this, "scroll")), this.pane.inner.bind("mousewheel", e.proxy(this, "mousewheel"));
        var n = this.pane.options.initialDisplay;
        n !== !1 && (this.show(), this.pane.autoHide && (this.hiding = setTimeout(e.proxy(this, "hide"), parseInt(n, 10) || 3e3)))
    }

    function i(e, t) {
        function n() {
        }

        n.prototype = t.prototype, e.prototype = new n
    }

    function a() {
        if (!r) {
            var t = e('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');
            e("body").append(t);
            var n = e("div", t).innerWidth();
            t.css("overflow-y", "scroll");
            var i = e("div", t).innerWidth();
            e(t).remove(), r = n - i
        }
        return r
    }

    e.fn.antiscroll = function (t) {
        return this.each(function () {
            e(this).data("antiscroll") && e(this).data("antiscroll").destroy(), e(this).data("antiscroll", new e.Antiscroll(this, t))
        })
    }, e.Antiscroll = t, t.prototype.refresh = function () {
        var e = this.inner.get(0).scrollWidth > this.el.width(),
            t = this.inner.get(0).scrollHeight > this.el.outerHeight();
        !this.horizontal && e ? this.horizontal = new n.Horizontal(this) : this.horizontal && !e && (this.horizontal.destroy(), this.horizontal = null), !this.vertical && t ? this.vertical = new n.Vertical(this) : this.vertical && !t && (this.vertical.destroy(), this.vertical = null)
    }, t.prototype.destroy = function () {
        return this.horizontal && this.horizontal.destroy(), this.vertical && this.vertical.destroy(), this
    }, t.prototype.rebuild = function () {
        return this.destroy(), this.inner.attr("style", ""), t.call(this, this.el, this.options), this
    }, n.prototype.destroy = function () {
        return this.el.remove(), this
    }, n.prototype.mouseenter = function () {
        this.enter = !0, this.show()
    }, n.prototype.mouseleave = function () {
        this.enter = !1, this.dragging || this.pane.autoHide && this.hide()
    }, n.prototype.scroll = function () {
        this.shown || (this.show(), this.enter || this.dragging || this.pane.autoHide && (this.hiding = setTimeout(e.proxy(this, "hide"), 1500))), this.update()
    }, n.prototype.mousedown = function (t) {
        t.preventDefault(), this.dragging = !0, this.startPageY = t.pageY - parseInt(this.el.css("top"), 10), this.startPageX = t.pageX - parseInt(this.el.css("left"), 10), document.onselectstart = function () {
            return !1
        };
        var n = (this.pane, e.proxy(this, "mousemove")), i = this;
        e(document).mousemove(n).mouseup(function () {
            i.dragging = !1, document.onselectstart = null, e(document).unbind("mousemove", n), i.enter || i.hide()
        })
    }, n.prototype.show = function () {
        this.shown || (this.update(), this.el.addClass("antiscroll-scrollbar-shown"), this.hiding && (clearTimeout(this.hiding), this.hiding = null), this.shown = !0)
    }, n.prototype.hide = function () {
        this.pane.autoHide !== !1 && this.shown && (this.el.removeClass("antiscroll-scrollbar-shown"), this.shown = !1)
    }, n.Horizontal = function (t) {
        this.el = e('<div class="antiscroll-scrollbar antiscroll-scrollbar-horizontal">'), n.call(this, t)
    }, i(n.Horizontal, n), n.Horizontal.prototype.update = function () {
        var e = this.pane.el.width(), t = e - 2 * this.pane.padding, n = this.pane.inner.get(0);
        this.el.css("width", t * e / n.scrollWidth).css("left", t * n.scrollLeft / n.scrollWidth)
    }, n.Horizontal.prototype.mousemove = function (e) {
        var t = this.pane.el.width() - 2 * this.pane.padding, n = e.pageX - this.startPageX, i = this.el.width(),
            a = this.pane.inner.get(0), r = Math.min(Math.max(n, 0), t - i);
        a.scrollLeft = (a.scrollWidth - this.pane.el.width()) * r / (t - i)
    }, n.Horizontal.prototype.mousewheel = function (e, t, n) {
        return 0 > n && 0 == this.pane.inner.get(0).scrollLeft || n > 0 && this.innerEl.scrollLeft + this.pane.el.width() == this.innerEl.scrollWidth ? (e.preventDefault(), !1) : void 0
    }, n.Vertical = function (t) {
        this.el = e('<div class="antiscroll-scrollbar antiscroll-scrollbar-vertical">'), n.call(this, t)
    }, i(n.Vertical, n), n.Vertical.prototype.update = function () {
        var e = this.pane.el.height(), t = e - 2 * this.pane.padding, n = this.innerEl;
        this.el.css("height", t * e / n.scrollHeight).css("top", t * n.scrollTop / n.scrollHeight)
    }, n.Vertical.prototype.mousemove = function (e) {
        var t = this.pane.el.height(), n = t - 2 * this.pane.padding, i = e.pageY - this.startPageY,
            a = this.el.height(), r = this.innerEl, s = Math.min(Math.max(i, 0), n - a);
        r.scrollTop = (r.scrollHeight - t) * s / (n - a)
    }, n.Vertical.prototype.mousewheel = function (t, n, i, a) {
        return !e(t.target).closest(".dk_options").length && (a > 0 && 0 == this.innerEl.scrollTop || 0 > a && this.innerEl.scrollTop + this.pane.el.height() == this.innerEl.scrollHeight) ? (t.preventDefault(), !1) : void 0
    };
    var r
}(jQuery),define("common/antiscroll", ["jquery"], function (e) {
    return function () {
        var t;
        return t || e.$
    }
}(this)),define("jquery.setup.environment", ["jquery", "domReady", "utils", "jquery.setup.environment.utils", "common/jquery.datafunctions", "common/jquery.datafunctions.friends", "common/formvalidation", "common/crews/crews-views", "common/settings/settings-views", "common/reCaptcha", "common/store/store-views", "common/analyticsManager", "common/antiscroll", "jquery-ui", "spinner", "common/jquery.mousewheel", "dropkick", "common/virtualKeyboard", "common/jquery.visible"], function (t, n, i, a, r, s, o, l, c, d, u, h) {
    function f() {
        var e = "";
        globals.signInReCaptchaEnabled && globals.showSignInRecaptcha && (e = "#signInReCaptchaInput input");
        var n = t("form");
        n.find(":input[type=text]").not(e).val(""), n.find(":input[type=password]").not(e).val(""), n.find(":input[type=hidden]").not(e).val("")
    }

    function p() {
        f();
        var e = t("#AccountDetailsForm");
        e.find("span.nickvalid").remove(), e.find("span.emailvalid").remove(), e.find("span.confirmemailvalid").remove(), e.find("span.pwvalid").remove(), e.find("span.dobvalid").remove(), t("#altNicksContainer").remove(), t("#signUpNickname").attr("placeholder", "");
        var n = globals.showSignUpRecaptcha ? 5 : 4;
        a.SetSignUpStepText("One"), t("#signUpSteps").find(".totalSignUpSteps").text(n), globals.underage || t("#signupDetailsContainer .clearfix, #signupCountryContainer, #dob p.intro").show(), o.clearErrorClasses(), globals.signUpreCaptchaValidated = !1
    }

    function m(e) {
        void 0 != e && e || (t("div.signIn").find("span.errorText, span.error").remove(), globals.signInReCaptchaEnabled && globals.showSignInRecaptcha || t("signInProfile").find("#signInReCaptchaInput").empty()), t("#buttonSignInProfile").removeAttr("disabled", !1), t("div.buttonSignInWrapper").find("span").spinner("stop").hide()
    }

    function g(e) {
        void 0 != e && e || t("div.troubleSigningIn").find("span.errorText, span.error").remove(), t("#buttonSignInPasswordReset").removeAttr("disabled", !1), t(".resetSpinner").spinner("stop").hide(), t("div.buttonSignInWrapper").find("span").spinner("stop").hide()
    }

    function v() {
        var e, n = t("#signInProfile"),
            i = !I.isSigninPageForceReload(n) && (n.is(":visible") || t("#createProfileOffline").is(":visible"));
        return i ? "undefined" == typeof I.cache.loadProfilesPromise ? (I.cache.loadProfilesPromise = r.LoadGameProfilesAsync(), e = I.cache.loadProfilesPromise) : e = I.cache.loadProfilesPromise : (I.cache.loadProfilesPromise = r.LoadGameProfilesAsync(), e = I.cache.loadProfilesPromise), e
    }

    function b() {
        return t("#selectProfile").find("#existingProfiles").html().length > 0
    }

    function y(e, n) {
        e = void 0 == e ? !0 : e;
        var i = e ? "downloader" : "", a = t("#launcherStyle").css("background"), r = function () {
            globals.launcherClass = i, e ? t("body").addClass("downloader") : t("body").removeClass("downloader"), t("launcherStyle").fadeTo({background: a}, "slow"), t("#launcherStyleContent").fadeIn("slow")
        };
        n ? r() : t.when(t("#launcherStyleContent").fadeOut("slow"), t("launcherStyle").fadeTo({background: "#fff"}, "slow")).then(r)
    }

    function w(e, t) {
        if (!t.services) return !0;
        var n = !1;
        return globals.scsServiceEnabled || (n = !0), _.isArray(t.services) && _.each(t.services, function (e) {
            n = n || !globals[e + "ServiceEnabled"]
        }), n ? (t.silentFail || I.ShowServiceAlert(), !1) : !0
    }

    function S() {
        s.friendProfileView = function () {
        }
    }

    function C() {
    }

    function k() {
        t("#menuMessages").parent("li").hide()
    }

    function T() {
        globals.friendsServiceEnabled || S(), globals.crewServiceEnabled || C(), globals.messagingServiceEnabled || k()
    }

    function L(e) {
        return void 0 != e && void 0 != e.url && e.url.length > 8 && "/desktop" == e.url.substr(-8)
    }

    function E(e) {
        function t() {
            if (a.isScuiVisible()) {
                var t = a.getRequestDescription(e.requestDescription, e.url);
                i.pubsub.trigger("gamefunctions:InfoMessage", a.getText("SlowServiceMessage", "Notifications") + t)
            }
        }

        if (!e.disableSlowMsg && !L(e)) {
            var n = e.slowMsgTimeout || globals.slowAjaxMsgTimeout;
            e.slowTimeoutHandle = setTimeout(t, n)
        }
    }

    function M() {
        t(document).on("keydown", function (e) {
            if (9 == e.which) {
                var n = t(e.target);
                n.is("input") || n.is("textarea") || n.is(".tab") || e.shiftKey && n.is(".shiftTab") || e && e.preventDefault()
            }
        })
    }

    var I = {cache: {}};
    globals.initialVersion = 0, globals.platform = "", globals.wsURL = "", I.signupDropkick = function () {
        var e = t("#dayOfBirth"), n = t("#monthOfBirth"), i = t("#yearOfBirth");
        e.dropkick().hide(), n.dropkick().hide(), i.addClass("ignoreChange"), i.dropkick().hide(), e.dropkick("setValue", "1"), n.dropkick("setValue", "1"), i.dropkick("setValue", "")
    }, I.ShowBlockList = function () {
        t("#mainNav li").removeClass("on"), t("#editProfile").hasClass("active") ? (t("#blockListPlayercards").empty().removeData(), I.blockListQuery()) : a.clearActivePanel(function () {
            a.setUpLoadingPanel("#editProfile"), t("#blockListPlayercards").empty().removeData(), I.blockListQuery()
        })
    }, I.signupClickOnEnter = function () {
        t("#onlinePoliciesContainer a").keydown(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        })
    }, I.triggerFindFriend = function () {
        var e = t("#findFriendsList");
        if (void 0 === e.data("total") || e.find("div.profileButton").length < e.data("total")) {
            var n = parseInt(e.data("pageIndex"), 10);
            s.FindPlayer(t("#friendSearchbox").val(), ++n)
        }
    }, I.scrollbarIsAtBottom = function (e) {
        var n = "#friendsPanel";
        "blockList" == e && (n = "#editProfile");
        var i = t(n + " .antiscroll-scrollbar");
        if (null != i.position()) {
            var a = i.height() + i.position().top;
            if (a >= 345) return !0
        }
        return !1
    }, I.StartUp = function (e) {
        i.WriteDebugLog("StartUp", "isOffline", e), e && a.setOffline(!0);
        var n = t("#homefeedPanel").find(".newsRow");
        n.length > 0 && n.html().length > 0 && n.show(), a.initHeaderMenu(!0), a.showHeaderMenu(!0, function () {
            I.showHomepage(!0)
        })
    }, I.ShowEULA = function () {
        i.WriteDebugLog("ShowEULA", "Desktop EULA", "Error: Not supported on this platform")
    }, I.showPageSignIn = function (e) {
        var n = t("div.panel.active");
        n.length && parseInt(n.css("top"), 10) < 0 && a.showPanel(n);
        var i = globals.signInReCaptchaEnabled && globals.showSignInRecaptcha;
        return i ? void I.showPageReCaptchaIntro() : void t.when(v()).done(function () {
            var n = t("#signInProfile");
            I.clearSigninPageForceReload(n), P(e);
            var i = b(), r = a.isOffline(), s = a.isNewSigninFlowEnabled(), o = globals.RosTitleVersion < 11;
            r ? (s ? A() : (R(), o && !a.isForceLoginForm(n) ? j() : i && A()), i || Y(s), G(i)) : (s ? A() : (R(), A()), i || O())
        })
    }, I.showPageCreateLocalAccount = function () {
        globals.localProfileCreation && t.when(r.LoadGameProfilesAsync()).done(function () {
            P();
            var e = b(), t = a.isOffline();
            R(), j(), t && G(), e || O()
        })
    }, I.showPageResetPassword = function (e) {
        var t = a.isOffline();
        if (!t) {
            P(e);
            var n = globals.signInReCaptchaEnabled && globals.showSignInRecaptcha;
            n && !e ? N() : A(), D()
        }
    }, I.showPageReCaptchaIntro = function () {
        var e = t(".previousSignInErrorMessage").is(":visible") || t("#signInReCaptchaInput").is(":visible");
        return e && !I.isSigninPageForceReload() ? void I.showPageReCaptchaSignIn() : void t.when(r.LoadGameProfilesAsync()).done(function () {
            I.clearSigninPageForceReload(), P(), N();
            var e = a.isNewSigninFlowEnabled();
            e || R()
        })
    }, I.showPageReCaptchaSignIn = function () {
        P();
        var e = a.isNewSigninFlowEnabled();
        e ? (A(), D()) : (R(), A()), U()
    }, I.resetSigninPage = function (e) {
        var n = e || t("#signInProfile");
        n.data("reload", !0)
    }, I.isSigninPageForceReload = function (e) {
        var n = e || t("#signInProfile");
        return void 0 != n.data("reload") && n.data("reload") === !0
    }, I.clearSigninPageForceReload = function (e) {
        var n = e || t("#signInProfile");
        n.removeData("reload")
    };
    var P = function (e) {
        0 == t("#mainNav").find(".pendingSignIn").length && a.setSelected(), a.removeLoading("selectProfile");
        var n = t("#selectProfile"), i = t("#signInProfile"), r = t(".formSignIn");
        r.hide(), r.find(".forgot").hide(), i.hide(), i.find(".buttonSignInQuitGame").hide(), i.find(".offlineMode").hide(), i.find(".previousSignInErrorMessage").hide(), i.find("#buttonSignInProfile").hide(), i.find("#buttonGoToSignIn").hide(), i.find(".orCreateAccount").hide(), i.find(".noExistingProfiles").hide(), t("div.active").find("form.passwordForm, .buttonResetWrapper").hide(), t(".buttonSignInWrapper").hide();
        var s = n.find(".profileList");
        s.hide(), s.find(".noExistingProfiles").hide(), n.find(".noProfiles").hide(), n.find(".profilesExist").hide(), n.find("a.needAccountLink").hide(), n.find(".troubleSigningIn").hide(), n.find(".resetPasswordForm.signInEmailPasswordResetForm").hide(), n.removeClass("nobg"), t("#createProfileOffline").hide();
        var o = t("#buttonSignInProfile");
        void 0 != o.attr("title") && o.text(o.attr("title")), e || f(), m(e), g(e)
    }, D = function () {
        var e = t("#signInProfile"), n = b();
        t(".troubleSigningIn, .resetPasswordForm, .buttonResetWrapper").show(), t(".formSignIn").find(".forgot").hide(), e.find(".buttonSignInQuitGame").hide(), !a.isNewSigninFlowEnabled() || globals.signInReCaptchaEnabled && globals.showSignInRecaptcha ? t(".noExistingProfiles").hide() : n || t(".noExistingProfiles").show(), t("#selectProfile").addClass("nobg")
    }, A = function () {
        var e = t("#signInProfile");
        a.resetForceLoginForm(e);
        var n = a.isOffline(), i = globals.RosTitleVersion < 11,
            r = globals.signInReCaptchaEnabled && globals.showSignInRecaptcha, s = a.isNewSigninFlowEnabled();
        e.show(), r || e.removeClass("verify"), t(".formSignIn").show(), t("div.active, .active .buttonSignInWrapper").show(), t("#buttonSignInProfile").show(), e.find(".buttonSignInQuitGame").show(), i && t("#signInEmailProfile").attr("placeholder", a.getText("Email", "HomeSignin")), n || (e.find(".forgot").show(), s && t(".orCreateAccount").show())
    }, R = function () {
        var e = b();
        if (!e) return void x();
        var n = a.isOffline(), i = t("#selectProfile");
        i.find(".profilesExist").show(), n || t("a.needAccountLink").show()
    }, x = function () {
        var e = a.isOffline();
        if (e) {
            var n = t("#selectProfile");
            globals.signInReCaptchaEnabled && globals.showSignInRecaptcha || n.find(".profilesExist").show()
        } else t("#selectProfile").find(".noProfiles").show(), t("a.needAccountLink").show(), O()
    }, N = function () {
        t("#buttonGoToSignIn, .previousSignInErrorMessage").show(), t("#selectProfile").removeClass("nobg"), t("#signInProfile").show().addClass("verify")
    }, O = function () {
        var e, n = a.getText("CreateSCAccount2", "HomeSignin");
        n = n.replace("[title]", globals.titleDisplayName);
        var i = a.isNewSigninFlowEnabled();
        e = i ? t("#selectProfile").find(".noExistingProfiles") : t(".profileList").find(".noExistingProfiles"), e.html("<p>" + n + "</p>"), e.find("a").attr("tabindex", "6"), e.show()
    }, F = function () {
        var e = a.isNewSigninFlowEnabled();
        e ? t("#signInProfile").find(".noExistingProfiles").hide() : t(".profileList").find(".noExistingProfiles").hide()
    }, U = function () {
        F(), t("#signInProfile").addClass("verify");
        var e = t("#signInReCaptchaInput #recaptcha_area");
        if (e.length) {
            var n = t("#recaptcha_challenge_field").val();
            n.length || d.reload()
        } else {
            var a = 4;
            i.pubsub.trigger("reCaptcha.initReCaptcha", t("#signInReCaptchaInput"), a)
        }
    }, G = function (e) {
        if (e) t(".offline-NoLocalProfiles").hide(), t(".offline-LocalProfiles").show(); else {
            var n = a.InternetConnectedStateAsync();
            n.done(function (e) {
                var n, r;
                e ? (n = i.errorCode("2000.43"), r = a.getErrorWithCode(n).Message) : r = e === !1 ? a.getError("NoInternet") : "";
                var s = t(".offline-NoLocalProfiles");
                s.find("#offline-connectionCheckMsg").remove();
                var o = s.find("p");
                "lanoire" === globals.titleName && o.text(a.getText("OfflineSigninNotAvailableLan", "HomeSignin")), o.append("<span id='offline-connectionCheckMsg'><br/><br/>" + r + "</span>"), s.show(), t(".offline-LocalProfiles").hide()
            })
        }
    }, Y = function (e) {
        if (e) {
            var n = t("#signInProfile");
            n.find(".formSignIn").hide(), n.find("div.offlineMode").addClass("noProfiles")
        } else {
            var i = t("#selectProfile").find(".profileList");
            i.find("h1").first().hide(), i.find("h3").hide(), i.find("div.offlineMode").addClass("noProfiles")
        }
    }, j = function () {
        var e = t("#createProfileOffline");
        return e.is(":visible") ? void x() : (e.show(), e.find(".buttonSignInWrapper").show(), void t(".formSignIn").show())
    };
    return I.ShowSignup = function (e) {
        i.WriteDebugLog("ShowSignup", "online", e), e || a.setOffline(!0), a.initHeaderMenu(!0, !0), a.isOffline() ? I.ShowSignin() : t("#joinClub").click(), globals.localProfileCreation && t("#lnkSkipAccount").show()
    }, I.ShowSignin = function (e, t) {
        return globals.signInRequested ? (i.WriteDebugLog("requestStateSignin", "denied", "RGSC_JS_FINISH_SIGN_IN not yet returned"), !1) : (i.WriteDebugLog("ShowSignin", "online", e), (void 0 != e && !e || !globals.scsServiceEnabled) && a.setOffline(!0), r.isSteam() && i.HideNonSteamFeatures(), a.showHeaderMenu(), a.isSignedIn() ? I.showHomepage(!0) : (a.initHeaderMenu(!1, !0), I.showPageSignIn(t), h.startSession(), h.trackPage("/Signin")), !0)
    }, I.ShowCountryOrDobPrompt = function () {
        var e;
        e = (isNaN(globals.account.Age) || globals.account.Age < 1) && "" == globals.account.CountryCode ? "DOBAndCountryUpdate" : isNaN(globals.account.Age) || globals.account.Age < 1 ? "DOBUpdate" : "countryUpdate", t("#dob").addClass(e), a.requestUiState(!0), I.ShowDOBPrompt()
    }, I.ShowDOBPrompt = function () {
        var e = t("#dob");
        if (!e.visible()) {
            i.WriteDebugLog("ShowDOBPrompt"), a.showHeaderMenu();
            var n = "MissingRequiredData";
            (e.hasClass("DOBUpdate") || e.hasClass("DOBAndCountryUpdate")) && r.LoadDateDropdowns(), e.hasClass("DOBUpdate") && (n = "MissingDOB", t("#dob .intro").text(a.getText("EnterDOB2", "Register", "Please enter your date of birth."))), e.hasClass("countryUpdate") && (n = "MissingCountry", e.find(".intro").text(a.getText("EnterCountry", "Register", "Please enter your country."))), e.hasClass("DOBAndCountryUpdate") && (n = "MissingDOBandCountry", e.find(".intro").text(a.getText("EnterDOBAndCountry", "Register", "Please enter your date of birth and country."))), e.find("#submitDOB").text(a.getText("Submit", "Register", "Submit")).removeAttr("disabled"), e.find("p.intro, #signupCountryContainer").show(), t("span.errorText").remove(), t("#loginPanelsWrapper").hasClass("active") || I.ShowDobForm(), a.initHeaderMenu(!1), h.trackPage("/" + n)
        }
    }, I.showCommerce = function (e) {
        if (i.WriteDebugLog("showCommerce", "url", e), globals.account && a.isOnline() && (void 0 == globals.account.Age || isNaN(globals.account.Age) || globals.account.Age < 1)) I.ShowDOBPrompt(); else {
            a.hideHeaderMenu();
            var n = t("#storePanel");
            n.show().find("#storeFrame").unbind("load").load(function () {
                var e = t(this).attr("src");
                i.WriteDebugLog("showCommerce", "frmSrc.length, loaded url", e.length + "," + e), t(this).hasClass("loaded") ? (t(this).removeClass("loaded"), a.removeLoading("storePanel"), t("#scuiPanelInstruction").removeAttr("style class").addClass("store2").fadeIn("slow")) : e.length > 0 && (t(this).addClass("loaded"), setTimeout(function () {
                    a.removeLoading("storePanel")
                }, 1e4))
            });
            var r = n.position();
            null == e || void 0 == e || !n.hasClass("active") || !n.find("div.loadingMask").is(":visible") || r.top < 0 ? (a.setUpLoadingPanel("#storePanel", function () {
                t("#storeFrame").removeClass("loaded").attr("src", e)
            }), t("#scuiPanelInstruction").addClass("store").delay(1e3).fadeIn("slow")) : t("#storeFrame").attr("src", e)
        }
    }, I.showCommerceV2 = function (e) {
        if (!globals.isLauncher) if (i.WriteDebugLog("showCommerceV2", "url", e), a.isSignedIn()) if (globals.account && a.isOnline() && (void 0 == globals.account.Age || isNaN(globals.account.Age) || globals.account.Age < 1)) I.ShowDOBPrompt(); else {
            var n = t("#storeButton");
            a.setSelected(n), a.clearActivePanel(function () {
                a.setUpLoadingPanel("#storev2Panel");
                var e = n.data("productId"), t = n.data("category");
                void 0 == window.amd.store.StoreView ? window.amd.store.StoreView = new u.StoreView({
                    productId: e,
                    category: t
                }) : window.amd.store.StoreView.reInitialize({productId: e, category: t})
            })
        } else r.navigatePendingSignIn(I.showCommerceV2)
    }, I.showCrews = function () {
        i.WriteDebugLog("showCrews"), a.setSelectedSide("#myCrewsLink"), t(".content").hide(), t(".crewsList").show(), t("#friendsPanel").attr("class", "panel active myCrews"), l.closeCrewViews(), void 0 == window.amd.crews.MyCrewsView ? window.amd.crews.MyCrewsView = new l.MyCrewsView : (window.amd.crews.MyCrewsView.onClose(), window.amd.crews.MyCrewsView.initialize()), i.WriteDebugLog("showCrews Finished"), h.trackPage("/MyCrews")
    }, I.showPrimaryCrewMembers = function () {
        i.WriteDebugLog("showPrimaryCrewMembers"), a.setSelectedSide("#crewMembersLink"), t(".content").hide(), t(".crewMembersList").show(), t("#friendsPanel").attr("class", "panel active crewMembersList"), l.closeCrewViews(), void 0 == window.amd.crews.CrewMembersView ? window.amd.crews.CrewMembersView = new l.CrewMembersView : (window.amd.crews.CrewMembersView.onClose(), window.amd.crews.CrewMembersView.initialize()), i.WriteDebugLog("showPrimaryCrewMembers Finished"), h.trackPage("/CrewMembers")
    }, I.loadCrewInvites = function () {
        a.setUpLoadingPanel("#friendsPanel", function () {
            t("#friendsPanel").attr("class", "panel active crewInvites"), I.showCrewInvites()
        })
    }, I.showCrewInvites = function () {
        i.WriteDebugLog("showCrewInvites"), a.setSelectedSide("#crewInvitesLink"), t(".content").hide(), t(".crewInvitesList").show(), t("#friendsPanel").attr("class", "panel active crewInvitesList"), l.closeCrewViews(), void 0 == window.amd.crews.CrewInvitesHeaderView ? window.amd.crews.CrewInvitesHeaderView = new l.CrewInvitesHeaderView : (window.amd.crews.CrewInvitesHeaderView.onClose(), window.amd.crews.CrewInvitesHeaderView.initialize()), h.trackPage("/CrewInvites")
    }, I.showCrewSearch = function () {
        i.WriteDebugLog("showCrewSearch"), a.setUpLoadingPanel("#friendsPanel"), a.setSelected(t("#socialButton")), a.setSelectedSide("#findCrewLink"), t(".content").hide(), t(".crewsList").show(), t("#friendsPanel").attr("class", "panel active findCrews"), l.closeCrewViews(), void 0 == window.amd.crews.FindCrewView ? window.amd.crews.FindCrewView = new l.FindCrewView : (window.amd.crews.FindCrewView.onClose(), window.amd.crews.FindCrewView.initialize()), h.trackPage("/FindCrew")
    }, I.minimizeUi = function () {
        i.WriteDebugLog("Desktop.minimizeUi"), a.launcherWindowsEvent("Minimize")
    }, I.myFriendsQuery = function () {
        var e = t("#friendsPanel");
        if (!t(this).is(".on")) {
            a.closeModalsAndHideMenu(), e.find(".content").removeAttr("style"), a.setSelectedSide(t("#myFriendsLink")), a.setUpLoadingPanel("#friendsPanel"), t("#friendsPanel").attr("class", "panel active myFriends");
            var n = t("#friendsList").data("PageIndex"), i = t("#friendsList").data("total"), r = 20;
            if (void 0 === n && (n = 0, t("#friendsList").data("PageIndex", n)), void 0 == i || i > r * n) {
                var o = Math.round((new Date).getTime() / 1e3),
                    l = {RequestId: o, PlayerListType: 3, PageIndex: n, PageSize: r};
                s.GetFriendsJS(l), t("#friendsContainer").data("antiscroll").refresh()
            }
        }
    }, I.friendInviteQuery = function () {
        var e = t("#friendsPanel");
        if (!t(this).is(".on")) {
            a.closeModalsAndHideMenu(), a.setSelectedSide(t(this)), a.setUpLoadingPanel("#friendsPanel", function () {
                t("#friendInvitesList").show()
            }), e.attr("class", "panel active friendInvites");
            var n = t("#friendInvitesList").data("PageIndex"), i = t("#friendInvitesList").data("total"), r = 100;
            if (void 0 === n && (n = 0, t("#friendInvitesList").data("PageIndex", n)), void 0 == i || i > r * n) {
                var o = {PageIndex: n, PageSize: r};
                s.GetFriendInvitesJS(o)
            }
            h.trackPage("/FriendInvites")
        }
    }, I.showSocialSection = function (e) {
        if (!globals.isLauncher) {
            var n = t("#socialButton"), i = function () {
                "undefined" != typeof e && e.length || (e = "#myFriendsLink"), t(e).click()
            };
            if (n.attr("disabled") || t("#friendsPanel").hasClass("active") || t("div.panel.active").is(":animated")) return void i();
            if (!a.isSignedIn()) return a.setSelected(n), void r.navigatePendingSignIn("#socialButton");
            if (a.isOffline()) return void I.showHomepage(!0);
            var s = t("#friendsPanel");
            s.hasClass("localized") || (t("#friendProfilePanel, #friendsPanel").find("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), s.addClass("localized")), globals.crewsServiceEnabled && (void 0 == window.amd.crews.MyPrimaryCrewTagView ? window.amd.crews.MyPrimaryCrewTagView = new l.MyPrimaryCrewTagView : (window.amd.crews.MyPrimaryCrewTagView.onClose(), window.amd.crews.MyPrimaryCrewTagView.initialize())), a.setSelected(n), a.setUpLoadingPanel("#friendsPanel", function () {
                i()
            })
        }
    }, I.blockListQuery = function () {
        t("#editProfile").hasClass("active") || a.clearActivePanel(function () {
            a.setUpLoadingPanel("#editProfile")
        }), a.closeModalsAndHideMenu(), a.setSelectedSide(t("#blockListLink")), t("#editProfile .content").removeAttr("style"), a.setUpLoadingPanel("#editProfile", function () {
            t("#editProfile").attr("class", "panel active blockList")
        });
        var e = t("#blockListPlayercards").data("PageIndex");
        void 0 === e && (e = 0, t("#blockListPlayercards").data("PageIndex", e));
        var n = Math.round((new Date).getTime() / 1e3);
        h.trackPage("/BlockList"), a.CallGameMethod("RGSC_REQUEST_PLAYER_LIST", '{ "RequestId": ' + n + ', "PlayerListType": 8, "PageIndex": ' + e + ', "PageSize": 10 }', "RGSC_JS_PLAYER_LIST_RESPONSE_DEMO")
    }, I.EnableReplyMessageButton = function (e) {
        e > 0 ? t(".sendReply").removeAttr("disabled") : t(".sendReply").attr("disabled", "disabled")
    }, I.LoadPlayerStats = function (e, t) {
        i.isGameSupported() && require(["common/games/" + globals.titleName], function (n) {
            n.LoadPlayerStats(e, t)
        })
    }, I.CompareWithFriend = function (e, n, r) {
        i.WriteDebugLog("CompareWithFriend", "friendRockstarId, friendAvatarUrl, friendNickname", e + "," + n + "," + r);
        var o, l = t("#statsPanel"), c = e;
        o = "" == n || "null" == n || n.match(/default.png$/) ? i.getAvatarUrl("", 32) : i.getAvatarUrl(n, 32);
        var d = r;
        s.closeCompareStats(), l.find("#comparedFriendNickname").text(d), l.find("#comparedFriendNickname").attr("data-userid", c), l.find("#comparedFriendAvatar").attr("src", o), l.find("#statsHeader, #achievementsHeader").find("h5.friendStatsTitle").html(d), l.find("#comparedFriend").fadeIn().addClass("compare"), l.find("#compareStats").addClass("compare"), l.addClass("compared");
        var u = l.hasClass("onlineStats");
        l.hasClass("active") ? l.hasClass("stats") ? I.LoadPlayerStats(c, u) : l.hasClass("achievements") && s.GetFriendAchievementsJS(c) : a.setUpLoadingPanel("#statsPanel", function () {
            var e = t("#statsPanel");
            e.find(".content").hide(), t("#statsContent").show(), e.find("#statsHeader").show(), a.setSelectedSide(e.find("#statsLink2")), e.hasClass("compared") ? e.attr("class", "panel active stats compared") : e.attr("class", "panel active stats"), e.hasClass("stats") ? I.LoadPlayerStats(c, u) : e.hasClass("achievements") && s.GetFriendAchievementsJS(c), c = null
        })
    }, I.OnErrorGetPlayerStatsJS = function (e, n) {
        var a = i.getServerErrorHtml(e, n);
        t("#statstable").html("<tr><td>" + a + "</td></tr>")
    }, I.showTimeOutRetry = function (e) {
        i.WriteDebugLog("showTimeOut", "waitingResponse", globals.waitingResponse);
        var n = t("div.panel.active");
        r.ShowConfirmModal(a.getText("FailedToLoadData", "Notifications"), "", "datafnfriends:timeOutRetryClick", e, "Retry"), a.removeLoading(n.attr("id"))
    }, I.timeOutRetryClick = function (e) {
        var n = t("div.panel.active");
        a.setUpLoading(n), t.ajax(e)
    }, I.ShowServiceAlert = function () {
        var e = i.errorCode("1002"), t = a.getText("errorcode_" + e, "Errors");
        r.ShowConfirmModal(t, null, null, null, "Close", null)
    }, I.launcherButtonClick = function (e) {
        e && e.preventDefault(), i.WriteDebugLog("Desktop.launcherButtonClicked");
        var n = t(e.currentTarget).attr("data"), r = Number(n);
        isNaN(r) && (r = n), a.launcherUiEvent("LauncherButton", r)
    }, I.launcherCommand = function (e, t) {
        if (!globals.receiveMsgEnabled) return void i.WriteDebugLog("launcherCommand", "aborted", "false");
        switch (a.showLauncherUi(), i.WriteDebugLog("Desktop.launcherCommand", e, t), e) {
            case"SetText":
                I.launcherSetText(t);
                break;
            case"SetButtons":
                I.launcherSetButtons(t);
                break;
            case"SetHeaderText":
                I.launcherSetHeaderText(t);
                break;
            case"SetSpinnerText":
                I.launcherSetSpinnerText(t);
                break;
            case"SetProgressText":
                I.launcherSetProgressText(t);
                break;
            case"SetVersionText":
                I.launcherSetVersionText(t);
                break;
            case"SetProgress":
                I.launcherSetProgress(t);
                break;
            case"ShowDebugLog":
                window.debugLog && window.RGSC_JS_SHOW_DEBUG_LOG && window.RGSC_JS_SHOW_DEBUG_LOG();
                break;
            default:
                throw"Error: Unsupported command: " + e
        }
    }, I.launcherSetText = function (e) {
        var n = t("#launcherStyle").find(".dialogue");
        I.cleanUpLauncher("dialogue"), n.find("p").html(i.processLauncherText(e)), n.fadeIn()
    }, I.launcherSetButtons = function (e) {
        for (var n = "", a = e.length - 1; a > -1; a--) {
            var r = "btnPurple", s = void 0;
            0 == a && (r = "btnGrey", s = "btnCancel"), n += i.getButtonHtml(r, e[a], a, s)
        }
        var o = t("#launcherStyle").find(".buttons");
        o.html(n), o.is(":visible") || o.fadeIn()
    }, I.launcherSetHeaderText = function (e) {
        t("#launcherStyle").find(".headerText").html(i.processLauncherText(e))
    }, I.launcherSetSpinnerText = function (e) {
        var n = t("#launcherStyle");
        I.cleanUpLauncher("loading");
        var a = "";
        "object" == typeof e && "string" == typeof e.text ? (a = e.text, e.toggleMode && y(!0, !0)) : a = e;
        var r = (new Date).getTime() + 864e5;
        n.find(".loading p").html(i.processLauncherText(a)), n.find(".loadingSpinner").spinner("stop").spinner({
            height: 32,
            width: 32,
            speed: 80,
            image: globals.baseUrl + "images/spinners/spinner32x32black.png",
            frames: 12,
            endTime: r
        }).fadeIn(), n.find(".loading").fadeIn()
    }, I.launcherSetVersionText = function (e) {
        t("#launcherStyle").find(".ver").html(i.processLauncherText(e)).fadeIn()
    }, I.launcherSetProgressText = function (e) {
        var n = t("#launcherStyle").find(".progressBar");
        I.cleanUpLauncher("progressBar"), n.find("p").html(i.processLauncherText(e)), n.fadeIn()
    }, I.launcherSetProgress = function (e) {
        var n = t("#launcherStyle").find(".progressBarTotal"), i = n.find("span");
        t("body").hasClass("downloader") || y(!0, !0), i.width(100 * e + "%")
    }, I.cleanUpLauncher = function (e) {
        var n = t("#launcherStyle");
        if (n.find(".loadingSpinner").spinner("stop"), "dialogue" != e) {
            var i = n.find(".dialogue");
            i.find("p").text(""), i.hide()
        }
        if ("progressBar" != e) {
            var a = n.find(".progressBar");
            a.find("p").text(""), a.find(".progressBarTotal span").width("0%"), a.hide()
        }
        if ("loading" != e) {
            var r = n.find(".loading");
            r.find("p").text(""), r.hide()
        }
    }, I.ShowDobForm = function () {
        var e = t("#dob");
        return p(), (e.hasClass("countryUpdate") || e.hasClass("DOBAndCountryUpdate")) && r.GetCountries("#signUpCountry"), a.clearActivePanel(function () {
            t("#signUpConfirm").hide(), t("#dob, #AccountDetailsForm").show(), t("#loginPanels").css({left: "0"}), (e.hasClass("DOBUpdate") || e.hasClass("DOBAndCountryUpdate")) && r.LoadDateDropdowns(), a.setUpLoadingPanel("#loginPanelsWrapper", function () {
                (e.hasClass("DOBUpdate") || e.hasClass("DOBAndCountryUpdate")) && (I.signupDropkick(), I.signupClickOnEnter()), a.removeLoading("loginPanelsWrapper")
            })
        }), !1
    }, I.retryOnlineConnection = function () {
        a.CallGameMethod("RGSC_RELOAD_UI", '{ "OfflineSite": false }', "RGSC_RELOAD_UI_DEMO")
    }, I.signOut = function () {
        a.clearActivePanel(function () {
            a.CallGameMethod("RGSC_SIGN_OUT", null, "RGSC_SIGN_OUT_DEMO"), a.closeModalsAndHideMenu(), globals.account = null, t(".statusbar").empty().hide(), s.ClearGetFriendsCache(), i.pubsub.trigger("signout:completed"), s.closeCompareStats(), h.endSession(), a.CallGameMethod("RGSC_DESTROY_COMMERCE_DATA", null, "RGSC_DESTROY_COMMERCE_DATA_DEMO"), a.setUpSignedInOptions(!1, a.isOffline()), a.isScuiVisible() && I.ShowSignin(a.isOnline())
        })
    }, I.showMessagesPage = function () {
        t("#headerLoginOptionsDrop").is(":visible") && t("#headerLoginOptionsButton").click();
        var e = t("#messagesPanel"), n = e.hasClass("active");
        a.setSelected(), a.isSignedIn() ? (t("#messageThreadList").empty(), t("#replyMessageInput, #newMessageInput, #cancelMessage").hide(), t("#messagesList .box .antiscroll-inner").empty(), t("#messagesList").removeData(), t("#messageThread").removeData(), t("#cancelMessage").removeClass("backFriendLink"), t("#newMessageName").removeData().val(""), a.messagesListQuery(), "en-US" != globals.titlelang && (e.hasClass("localized") || (e.find("[rel*=localize]").localize("Social", {
            language: globals.titlelang,
            pathPrefix: globals.baseAssetUrl + "xml/Shared"
        }), e.addClass("localized"))), e.find("div.antiscroll-wrap").antiscroll()) : r.navigatePendingSignIn("#menuMessages"), n || h.trackPage("/Messages")
    }, n(function () {
        M(), window.open = function (e) {
            a.launchExternalBrowserForUrl(e)
        };
        var n = !0;
        h.setup(n), t.ajaxSetup({timeout: globals.ajaxTimeout});
        var l = t(document);
        l.ajaxSend(function (e, t, n) {
            return w(t, n) ? void E(n) : void t.abort()
        }), I.clearSlowTimeoutMsg = function (e) {
            void 0 !== e.slowTimeoutHandle && clearInterval(e.slowTimeoutHandle)
        }, l.ajaxComplete(function (e, t, n) {
            I.clearSlowTimeoutMsg(n)
        }), l.ajaxSuccess(function () {
            void 0 != t("body").data("AjaxRetry") && t("body").removeData("AjaxRetry")
        }), l.ajaxError(function (e, n, r, s) {
            if (!i.AjaxRequestAborted(n.statusText) && (i.WriteDebugLog("Ajax Error", "url; exception", r.url + "; " + s), I.clearSlowTimeoutMsg(r), !r.silentFail)) {
                var o, l, c, d;
                if (l = "url", c = r.url, t("div.active:first").find("span.waitMessage").spinner("stop").hide(), 0 == n.status ? (d = "jqxhr.status == 0", i.WriteDebugLog("Ajax Error", "Reason", d)) : 404 == n.status ? (d = "404", i.WriteDebugLog("Ajax Error", "Reason", d + " Requested URL not found.")) : 429 == n.status ? (d = "429", i.WriteDebugLog("Ajax Error", "Reason", d + " Too Many Requests."), o = i.errorCode("8000")) : 500 == n.status && (d = "500", i.WriteDebugLog("Ajax Error", "Reason", d + " Internal Server Error.")), "parsererror" == s) return d = "parser error", void i.WriteDebugLog("Ajax Error", "Reason", "Parsing JSON request failed.");
                if ("timeout" == s) d = "timeout", i.WriteDebugLog("Ajax Error", "Reason", "Request timed out."), o = i.errorCode("1001"); else {
                    var u, h = n.responseText;
                    try {
                        u = i.isAjaxXml(r) ? jQuery.xml2json(h) : jQuery.parseJSON(h), void 0 != u ? o = u.Message : (l += "; resp", "string" == typeof h && h.length && (h.length > 50 && (h = h.substr(0, 47) + "..."), c += "; " + h))
                    } catch (f) {
                    }
                }
                if ("undefined" != typeof d && d.length && (l += "; reason", c += "; " + d), "undefined" != typeof o && o.length && (l += "; errorCode", c += "; " + o), "undefined" != typeof s && s.length && (l += "; exception", c += "; " + s), i.WriteDebugLog("Ajax Error", l, c, i.logType.error, i.logController[globals.titleName]), o == i.errorCode("3003") && (void 0 == t("body").data("AjaxRetry") || t("body").data("AjaxRetry") != r.url)) return t("body").data("AjaxRetry", r.url), void i.pubsub.trigger("datafnfriends:timeOutRetryClick", r);
                var p = a.getErrorWithCode(o, r.requestDescription);
                if (i.WriteDebugLog("Ajax Error", o, p.Message), "timeout" != s || void 0 != r.noRetryModal && r.noRetryModal) {
                    var m = {
                        errorCode: o,
                        message: p.Message,
                        supportText: p.SupportText,
                        codeDesc: p.CodeDescription,
                        errorFunction: r.fatalError,
                        contentEl: r.contentEl
                    };
                    a.showFatalError(m)
                } else r.noRetryModal = !0, I.showTimeOutRetry(r);
                t("#buttonCancelMessage").hide()
            }
        }), T(), t("div.antiscroll-inner").bind("scroll  mousewheel", function () {
            var e, n = t(this).closest("div.panel").find("div.loadingMask:visible");
            if (0 == n.length) {
                var a = t(this).closest("div").find(".content:visible").attr("id");
                if (I.scrollbarIsAtBottom(a)) if ("findFriends" == a) I.triggerFindFriend(); else if ("friendInvitesList" == a) {
                    if (void 0 === t("#friendInvitesList").data("total") || t("#friendInvitesList .profileButton").length < t("#friendInvitesList").data("total")) {
                        e = parseInt(t("#friendInvitesList").data("PageIndex"), 10), t("#friendInvitesList").data("PageIndex", ++e);
                        var r, s = t("#friendInvitesList").data("friendInvitesList");
                        void 0 != s && (s.PageIndex = e, r = JSON.stringify(s)), i.pubsub.trigger("datafunctions:RGSC_JS_PLAYER_LIST_RESPONSE", r)
                    }
                } else if ("friendsList" == a) {
                    if (void 0 === t("#friendsList").data("total") || t("#friendsList div.profileButton").length < t("#friendsList").data("total")) {
                        e = parseInt(t("#friendsList").data("PageIndex"), 10), t("#friendsList").data("PageIndex", ++e);
                        var o = t("#friendsPanel .loadingMask");
                        o.addClass("noMask"), o.hasClass("bottom") || o.addClass("bottom"), I.myFriendsQuery()
                    }
                } else if ("blockList" == a) {
                    if (void 0 === t("#blockListPlayercards").data("total") || t("#blockListPlayercards div.profileButtonWrapper").length < t("#blockListPlayercards").data("total")) {
                        e = parseInt(t("#blockListPlayercards").data("PageIndex"), 10), t("#blockListPlayercards").data("PageIndex", ++e);
                        var l = t("#editProfile .loadingMask");
                        l.addClass("noMask"), l.hasClass("bottom") || l.addClass("bottom"), I.blockListQuery()
                    }
                } else "crewInvitesHeader" == a && (t("#crewInvitesList").is(":visible") ? t("#crewInvitesList").trigger("crewInvitesScroll") : t("#crewRequestsList").is(":visible") && t("#crewRequestsList").trigger("crewRequestsScroll"));
                a = null
            }
        }), t([globals.baseUrl + "images/rsc_icon_small.png", globals.baseUrl + "images/friend_request.png", globals.baseUrl + "images/friend_request.png", globals.baseUrl + "images/friend_online.png", globals.baseUrl + "images/message_received.png", globals.baseUrl + "images/multi_invite.png", globals.baseUrl + "images/info.png"]).preload(), t("#joinClub").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }).click(function () {
            return (!t(this).attr("disabled") || t("#selectProfile").hasClass("active")) && (t("#recaptcha_challenge_field").val(""), t("#submitDOB").attr("disabled", "disabled"), a.setSelected(this), p(), r.GetCountries("#signUpCountry"), a.clearActivePanel(function () {
                t("#onlinePolicies, #signUpReCaptchaContainer, #signUpConfirm").hide(), t("#dob, #AccountDetailsForm, #registrationBack, #signUpSteps").show(), t("#dob p.intro").text(""), t("#lnkCreateOfflineProfile").toggle(globals.localProfileCreation), t("#loginPanels").css({left: "0"}), r.LoadDateDropdowns(), a.setUpLoadingPanel("#loginPanelsWrapper", function () {
                    I.signupDropkick(), I.signupClickOnEnter(), a.removeLoading("loginPanelsWrapper"), t("#dk_container_dayOfBirth").focus()
                })
            }), h.trackPage("/CreateAccountStart")), !1
        }), t("#homefeedPanel").on("click", "#retryConnection", function (e) {
            e && e.preventDefault(), t(this).text(a.getError("Loading")), I.retryOnlineConnection()
        }), t("#headerLoginButton").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("#headerLoginButton, #headerLoginButtonOffline, #joinClubOffline").click(function () {
            return t("#recaptcha_challenge_field").val(""), (!t(this).attr("disabled") || t("#loginPanelsWrapper").hasClass("active")) && I.ShowSignin(a.isOnline()), !1
        }), t("div.antiscroll-wrap").each(function () {
            var e = t(this), n = e.closest(".panel"), i = n.length && !n.is(":visible");
            i && n.css("display", "block");
            var a = void 0;
            e.hasClass("antiscroll-always-on") && (a = {autoHide: !1}), e.antiscroll(a), i && n.css("display", "")
        }), t("a.previousPanel").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("a.previousPanel").click(function () {
            if ("block" == t("#introTextContainer").css("display")) return t("#introTextContainer").fadeOut(function () {
                a.SetSignUpStepText("One"), t("#dob").fadeIn(), t("#onlinePolicies").fadeOut()
            }), !1;
            if ("block" == t("#termsTextContainer").css("display")) return t("#termsDisagree").hide(), t("#termsAgree").hide(), t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(), t("#termsTextContainer").fadeOut(function () {
                a.SetSignUpStepText("Two"), t("#introTextContainer").fadeIn(function () {
                    t("#buttonPrivacy").show().focus()
                })
            }), !1;
            if ("block" == t("#privacyTextContainer").css("display")) return t("#privacyDisagree").hide(), t("#privacyAgree").hide(), t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(), t("#privacyTextContainer").fadeOut(function () {
                a.SetSignUpStepText("Two"), t("#introTextContainer").fadeIn(function () {
                    t("#buttonPrivacy").show().focus()
                })
            }), !1;
            if ("block" == t("#signUpReCaptchaContainer").css("display")) return t("#termsDisagree").hide(), t("#termsAgree").hide(), t("#signUpReCaptchaContainer").fadeOut(function () {
                a.SetSignUpStepText("Two"), t("#introTextContainer").fadeIn(function () {
                    t("#buttonPrivacy").show().focus()
                })
            }), !1;
            if ("block" == t("#dob").css("display")) return t("#dob").fadeOut(function () {
                I.ShowSignin()
            }), !1;
            if ("block" == t("#avatar").css("display")) return t("#onlinePolicies").show(), t("#avatar").fadeOut(function () {
                a.SetSignUpStepText("Two"), t("#introTextContainer").fadeIn(function () {
                    t("#buttonPrivacy").focus()
                })
            }), !1;
            var e = t(this).closest("div.signupPanel");
            return e.hasClass("DOBUpdate") || t(this).parents("div.panel").fadeOut(function () {
                e.hide(), e = null
            }), !1
        }), t("#existingProfiles").on("click", "a.profileButton", function (e) {
            e && e.preventDefault();
            var n = t(this), i = n.attr("data-userid");
            I.showPageSignIn(), r.SelectProfile(i, n.data("local"), null, n.data("nick"))
        }), t("#buttonSignIn").click(function () {
            return t(this).attr("disabled") || o.SignInValidation("") && (t(this).attr("disabled", "disabled"), t("#signIn .buttonSignInWrapper span").show(), r.SignInJS()), !1
        }), t(".buttonSignInQuitGame").click(function (e) {
            e && e.preventDefault(), t(this).attr("disabled") || a.quitGame()
        }), t("#lnkCreateOfflineProfile").click(function (e) {
            e && e.preventDefault(), globals.localProfileCreation && I.showPageCreateLocalAccount()
        }), t("#createProfileOffline").find(".formSignIn").on("submit", function () {
            return t("#buttonCreateProfileOffline").click(), !1
        }), t("#buttonCreateProfileOffline").click(function () {
            var e = !1;
            return o.clearErrorClasses(), o.NicknameValidation("createProfileNickname") && o.LocalNicknameValidation() && (t(".buttonSignInWrapper span").show(), r.SignInLocal("", t.trim(t("#createProfileNickname").val()), !1), e = !0), e
        }), t("a.signInReturn").click(function (e) {
            e && e.preventDefault(), I.ShowSignin()
        }), t("#buttonSignInProfile").click(function (e) {
            e && e.preventDefault();
            var n = t(this);
            if (!n.attr("disabled")) {
                n.attr("disabled", "disabled"), n.attr("title", n.text()), i.ShowInvisibleMask(n, a.getError("Loading"));
                try {
                    n.next().spinner("stop").spinner({
                        height: 32,
                        width: 32,
                        speed: 80,
                        image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                        frames: 12
                    }).fadeIn()
                } catch (e) {
                }
                if (t("#formSignIn").find("input[name=signInOptions]").removeAttr("checked"), t("#autoSignInProfile").is(":checked") && t("#autoSignIn").attr("checked", !0), r.SetAutoSignInValues(t("#autoSignInProfile").is(":checked")), t("#signInEmail").val(t("#signInEmailProfile").val()), t("#signInPassword").val(t("#signInPasswordProfile").val()), !o.SignInValidation("Profile")) return n.removeAttr("disabled"), i.HideInvisibleMask(), void n.next().spinner("stop").hide();
                t("#selectProfile").find(".buttonSignInWrapper span").show(), setTimeout(r.SignInJS, 100)
            }
        }), t("#buttonSignUp, a.needAccountLink, .orCreateAccount a").click(function (e) {
            return e && e.preventDefault(), globals.localProfileCreation && a.isOffline() ? t("#joinClubOffline").click() : a.isOnline() && (r.LoadDateDropdowns(), "en-US" != globals.titlelang && (t("#dob").hasClass("localized") || (t("[rel*=localize]").localize("Register", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), i.isGameSupported() && t("#signUpConfirm [rel*=localize]").localize("General", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/" + globals.titleName
            }), t("#dob").addClass("localized"))), t("#dob").fadeIn(), t("#intro").hide(), t("#loginPanelsWrapper").hasClass("active") || t("#joinClub").click()), !1
        }), t("#monthOfBirth, #yearOfBirth").change(function () {
            r.UpdateDays()
        }), t("#yearOfBirth").change(function (e) {
            var n = t(e.currentTarget);
            return n.hasClass("ignoreChange") ? void n.removeClass("ignoreChange") : void o.DOBValidation(!1)
        }), t("#submitDOB").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("#submitDOB").click(function () {
            if (t(this).attr("disabled")) return !1;
            var e = t("#dob");
            if (e.hasClass("DOBUpdate") || e.hasClass("DOBAndCountryUpdate") || e.hasClass("countryUpdate")) {
                if (e.hasClass("DOBUpdate")) {
                    if (!o.DOBValidation()) return !1;
                    r.UpdateDOB()
                }
                if (e.hasClass("DOBAndCountryUpdate")) {
                    if (!o.DOBValidation()) return !1;
                    r.UpdateDOBAndCountry()
                }
                e.hasClass("countryUpdate") && r.UpdateCountry(t("#signUpCountry").val())
            } else if (o.CreateAccountValidation()) {
                r.CheckPasswordJS("signUpPassword");
                var n = r.GetSignUpPolicies();
                t("#termsTextContainer, #privacyTextContainer").removeAttr("style"), t("#dob").hide(), t("#onlinePolicies").find(".buttonPara a").hide(), t("#onlinePolicies").fadeIn(), t("#introTextContainer").show(), a.setUpLoading("#introTextContainer"), n.done(function () {
                    a.removeLoading("introTextContainer"), t("#onlinePolicies").find(".buttonPara a").hide(), a.resetScrollbar("#onlinePolicies"), t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(), t("#buttonPrivacy").show().focus(), t('#onlinePolicies .text a[href!="#"][class!="policyButtons"]:not(.btn)').unbind("click").click(a.launchExternalBrowser), h.trackPage("/OnlinePolicies")
                }), n.fail(function () {
                    a.removeLoading("introTextContainer");
                    var e = i.errorCode("3000.19"), t = a.getErrorWithCode(e, "GetTos").Message;
                    r.OnGetEULAError(e, t)
                })
            }
            return !1
        }), t("#headerLoginOptionsButton").click(function () {
            globals.isLauncher || t(this).attr("disabled") || (t("#headerLoginOptionsDrop").toggle(), t("#headerLoginOptionsButton").toggleClass("active"))
        }), t("#headerLoginUser").click(function (e) {
            e && e.preventDefault();
            var n = t(this);
            if (!globals.isLauncher) return n.attr("disabled") || n.hasClass("disabled") || a.isMyProfileVisible() ? void i.pubsub.trigger("headerLoginUser:click:disabled") : void (!a.isOffline() && !n.attr("disabled") && globals.RosTitleVersion >= 11 && (n.attr("disabled", "disabled"), i.pubsub.trigger("datafnfriends:friendProfileView", globals.account.RockstarId)))
        }), t("#headerLoginOptionsDrop").find("ul li a").keydown(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("#menuSignOut").click(function () {
            if (a.isLogoutDisabled()) return !1;
            if (a.setSelected(), !t("#signOut").hasClass("active")) {
                var e = t("div.panel.active");
                t("#signOut").removeAttr("data-prevPanel"), e.length && e.attr("id").length && t("#signOut").attr("data-prevPanel", e.attr("id")), a.clearActivePanel(function () {
                    a.setUpLoadingPanel("#signOut", function () {
                        t("#buttonSignOutNo").focus()
                    })
                })
            }
            return !1
        }), t("#buttonSignOutYes").click(function (e) {
            e && e.preventDefault(), I.signOut()
        }), t("#buttonSignOutNo").click(function () {
            var e = t("#mainNav").find("li.on a");
            return e.length ? e.click() : t("#signOut").attr("data-prevPanel").length ? a.clearActivePanel(function () {
                var e = t("#signOut").attr("data-prevPanel");
                a.setUpLoadingPanel("#" + e), a.removeLoading(e)
            }) : I.showHomepage(!0), !1
        }), t("a.closeCurrentPanel").click(function () {
            return a.clearActivePanel(), !1
        }), t("#menuSettings").click(function (e) {
            return e && e.preventDefault(), globals.isLauncher ? !1 : (t("#headerLoginOptionsDrop").is(":visible") && t("#headerLoginOptionsButton").click(), a.setSelected(), t("#myProfileLink").click(), "en-US" != globals.titlelang && (t("#editProfile").hasClass("localized") || (t("#editProfile [rel*=localize]").localize("Settings", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), t("#editProfile").addClass("localized"))), !1)
        }), t("#menuMessages").click(function (e) {
            e && e.preventDefault(), globals.isLauncher || I.showMessagesPage()
        }), t("#nameForm").submit(function (e) {
            e && e.preventDefault(), setTimeout(function () {
                if (o.UpdateNicknameValidation()) {
                    var e = a.getText("UpdateNickConfirm", "Settings");
                    r.ShowConfirmModal(e, null, "datafunctions:UpdateNickname")
                }
            }, 100)
        }), t("#emailForm").submit(function (e) {
            e && e.preventDefault();
            var n = t("#editEmailBtn");
            "disabled" != n.attr("disabled") && (n.attr("disabled", "disabled"), setTimeout(function () {
                o.UpdateEmailValidation() ? r.UpdateEmail() : n.removeAttr("disabled")
            }, 100))
        }), t("#validateEmail").click(function (e) {
            e && e.preventDefault();
            var n = t(e.currentTarget);
            "disabled" != n.attr("disabled") && (n.attr("disabled", "disabled"), setTimeout(function () {
                r.ResendValidation()
            }, 100))
        }), t("#passwordForm").submit(function (e) {
            e && e.preventDefault();
            var n = t("#editPasswordBtn");
            "disabled" != n.attr("disabled") && (n.attr("disabled", "disabled"), setTimeout(function () {
                o.UpdatePasswordValidation() ? r.UpdatePassword() : n.removeAttr("disabled")
            }, 100))
        }), t("#countryForm").submit(function (e) {
            e && e.preventDefault();
            var n = t("#editCountryBtn");
            "disabled" != n.attr("disabled") && (n.attr("disabled", "disabled"), setTimeout(function () {
                r.UpdateCountry(t("#editCountry").val())
            }, 100))
        }), t("#autoSignInForm").submit(function (e) {
            e && e.preventDefault(), setTimeout(function () {
                r.UpdateAutoSignIn()
            }, 100)
        }), t("#hideNotificationsForm").submit(function (e) {
            e && e.preventDefault(), setTimeout(function () {
                r.updateAndCloseHideNotifications()
            }, 100)
        }), t("a.closeButton").click(function () {
            return a.clearActivePanel(function () {
                t(this).parents(".panel").removeClass("active"), a.CloseUI()
            }), !1
        }), t("#mainNav").find("li").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("#homeButton, #header h1").click(function (e) {
            e && e.preventDefault(), t(this).attr("disabled") || I.showHomepage(!1)
        }), I.showHomepage = function (e) {
            globals.isLauncher || (a.isSignedIn() || I.ShowSignin(), t("#headerLoginOptionsDrop").is(":visible") && t("#headerLoginOptionsButton").click(), require(["common/jquery.gamefunctions.notifications"], function (n) {
                e && n.triggerLastNotificationClick() || t("#homefeedPanel").hasClass("active") || t(".active").is(":animated") || (a.setSelected(t("#homeButton")), a.clearActivePanel(function () {
                    a.setUpLoadingPanel("#homefeedPanel");
                    var e = t("#homefeedPanel");
                    e.find("div.antiscroll-inner").css({
                        width: "",
                        height: ""
                    }), e.find(".box-wrap").antiscroll(), h.trackPage("/Home"), i.isGameSupported() ? require(["common/games/" + globals.titleName], function (e) {
                        e.LoadHomeScreen()
                    }) : t("#headerLoginUser").click()
                }))
            }))
        }, t("#statsButton").click(function (e) {
            if (e && e.preventDefault(), globals.isLauncher) return !1;
            if (!t(this).attr("disabled")) {
                s.closeCompareStats();
                var n = t("#statsPanel");
                n.removeClass("compared"), n.find("#comparedFriend").hide(), n.hasClass("active") ? t("#statsLink2").click() : t("div.active").is(":animated") || (a.isSignedIn() ? a.clearActivePanel(function () {
                    t("#statsPanel").hasClass("achievements") || a.hideStats() ? (t("#statsPanel").removeClass("achievements"), t("#awardsLink2").click()) : t("#statsLink2").click()
                }) : (0 == t("#awardsButton").find(".on").length && (n.removeClass("achievements"), a.setSelected(this)), r.navigatePendingSignIn("#statsButton")))
            }
            return i.pubsub.trigger("section:stats:loaded"), !1
        }), l.on("keydown", "#statsPanel .sideMenu a", function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("#statsLink2").click(function (e) {
            if (e && e.preventDefault(), !globals.isLauncher) {
                var n = t(this), a = t("#statsPanel");
                return n.hasClass("disabled") || n.hasClass("on") && a.hasClass("active") ? void i.WriteDebugLog("statsLink2 click disabled") : void I.reloadStats()
            }
        }), I.reloadStats = function () {
            var e = t("#statsPanel");
            t("#awardsLink2").addClass("disabled"), t("#onlineStatsLink").addClass("disabled"), e.find(".content").hide(), e.find("#statsHeader").show(), 0 == t("#statsButton .on").length && a.setSelected("#statsButton"), a.setSelectedSide(t("#statsLink2")), a.setUpLoadingPanel("#statsPanel", function () {
                t("#statsContent").show(), t("#statsPanel").hasClass("compared") ? t("#statsPanel").attr("class", "panel active stats compared") : t("#statsPanel").attr("class", "panel active stats"), globals.RosTitleVersion < 11 ? (t("#compareStats").hide(), I.LoadPlayerStats()) : I.LoadPlayerStats(t("#statsPanel").hasClass("compared") ? t("#comparedFriendNickname").attr("data-userid") : null)
            }), h.trackPage("/Statistics")
        }, I.reloadStatsWithoutFriendData = function () {
            var e = t("#statsPanel .sideMenu li a.on"), n = e.attr("id");
            "onlineStatsLink" == n || "awardsLink2" == n ? e.removeClass("on").click() : I.reloadStats()
        }, l.on("click", "#onlineStatsLink", function (e) {
            if (e && e.preventDefault(), "gta5" === globals.titleName) {
                var n = t(this), r = t("#statsPanel");
                if (n.hasClass("disabled") || n.hasClass("on") && r.hasClass("active")) return void i.WriteDebugLog("onlineStatsLink click disabled");
                t("#statsLink2").addClass("disabled"), t("#awardsLink2").addClass("disabled"), t(this).is(".on") || (r.find(".content").hide(), r.find("#statsHeader").show(), 0 == t("#statsButton .on").length && a.setSelected("#statsButton"), a.setSelectedSide(t(this)), a.setUpLoadingPanel("#statsPanel", function () {
                    t("#statsContent").show(), t("#statsPanel").hasClass("compared") ? t("#statsPanel").attr("class", "panel active stats onlineStats compared") : t("#statsPanel").attr("class", "panel active stats onlineStats"), t("#statsPanel").hasClass("compared") ? I.LoadPlayerStats(t("#comparedFriendNickname").attr("data-userid"), !0) : I.LoadPlayerStats(null, !0)
                }), h.trackPage("/Statistics"))
            }
        }), t("#awardsButton").click(function (e) {
            if (e && e.preventDefault(), globals.isLauncher) return !1;
            if (!t(this).attr("disabled")) {
                var n = t("#statsPanel");
                a.setSelected(t(this)), n.hasClass("active") || t("div.active").is(":animated") ? t("#awardsLink2").click() : a.isSignedIn() ? a.clearActivePanel(function () {
                    a.setUpLoadingPanel("#statsPanel"), t("#awardsLink2").click()
                }) : r.navigatePendingSignIn("#awardsButton")
            }
            return !1
        }), t("#awardsLink2").click(function (e) {
            if (e && e.preventDefault(), !globals.isLauncher) {
                var n = t(this), o = t("#statsPanel");
                if (n.hasClass("disabled") || n.hasClass("on") && o.hasClass("active")) return void i.WriteDebugLog("awardsLink2 click disabled");
                t("#statsLink2").addClass("disabled"), t("#onlineStatsLink").addClass("disabled"), o.find(".content").hide(), o.find("#achievementsHeader").show(), t("#awardsButton").length ? a.setSelected(t("#awardsButton")) : 0 == t("#statsButton").find(".on").length && a.setSelected("#statsButton"), a.setSelectedSide(t(this)), a.isSignedIn() ? a.setUpLoadingPanel("#statsPanel", function () {
                    t("#achievementsContent").show(), t("#statsPanel").hasClass("compared") ? t("#statsPanel").attr("class", "panel active achievements compared") : t("#statsPanel").attr("class", "panel active achievements"), t("#statsPanel").hasClass("compared") ? s.GetFriendAchievementsJS(t("#comparedFriendNickname").attr("data-userid")) : t("#statsPanel").find("#achievementsContent").animate({opacity: "1"}, 500, function () {
                        a.LoadGameAchievements()
                    })
                }) : (o.attr("class", "panel achievements"), r.navigatePendingSignIn("#statsButton")), h.trackPage("/Accomplishments")
            }
        }), t("#friendsPanel").find(".sideMenu a").keydown(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("#myFriendsLink").click(function (e) {
            e && e.preventDefault(), globals.isLauncher || t(this).is(".on") || (t("#friendsList").empty(), t("#friendsList").removeData(), I.myFriendsQuery(), h.trackPage("/MyFriends"))
        }), t("#mainNav #systemButton").click(function (e) {
            e && e.preventDefault(), globals.isLauncher || t("#systemPanel").hasClass("active") || (a.setSelected(this), a.clearActivePanel(function () {
                a.setUpLoadingPanel("#systemPanel")
            }))
        }), t("#avatarPanelInner").find("a").click(function () {
            if (globals.isLauncher) return !1;
            var e = t(this).children("img").attr("src");
            return t("#avatar .selectedAvatar img").attr("src", e), !1
        }), t("#signUpAvatar").keydown(function () {
            var e = t("#signUpAvatar").find("option:selected"), n = e.index(), i = event.keyCode;
            if (39 != i && 40 != i || 58 == n) {
                if (37 != i && 38 != i || 0 == n) return !1;
                n--
            } else n++;
            var a = t("#signUpAvatar option:eq(" + n + ")");
            "" != a.val() && (t("#avatarPanelInner").attr("class", a.val()), t("#avatarPanel").find("span.loading").spinner("stop").spinner({
                height: 32,
                width: 32,
                speed: 80,
                image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                frames: 12
            }).fadeIn(), t("#avatarPanelInner").animate({opacity: "0"}, 200, function () {
                r.LoadAvatarThumbs(a.val(), "avatarPanelInner", "imgSelectedAvatar"), setTimeout(function () {
                    t("#avatarPanelInner").animate({opacity: "1"}, 600), t("#avatarPanel").find("span.loading").spinner("stop").fadeOut()
                }, 300)
            }))
        }), t("#signUpAvatar").change(function () {
            var e = t(this).find("option:selected");
            return "" != e.val() && (t("#avatarPanelInner").attr("class", e.val()), t("#avatarPanel").find("span.loading").spinner("stop").spinner({
                height: 32,
                width: 32,
                speed: 80,
                image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                frames: 12
            }).fadeIn(), t("#avatarPanelInner").animate({opacity: "0"}, 200, function () {
                r.LoadAvatarThumbs(e.val(), "avatarPanelInner", "imgSelectedAvatar"), setTimeout(function () {
                    t("#avatarPanelInner").animate({opacity: "1"}, 600), t("#avatarPanel").find("span.loading").spinner("stop").fadeOut()
                }, 300)
            })), !1
        }), t("#editAvatarGame").keydown(function () {
            var e = t("#editAvatarGame").find("option:selected"), n = e.index(), i = event.keyCode;
            if (39 != i && 40 != i || 58 == n) {
                if (37 != i && 38 != i || 0 == n) return !1;
                n--
            } else n++;
            var s = t("#editAvatarGame option:eq(" + n + ")");
            "" != s.val() && (t("#editAvatarPanelInner").attr("class", s.val()), t("#editAvatarPanel").find("span.loading").spinner("stop").spinner({
                height: 32,
                width: 32,
                speed: 80,
                image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                frames: 12
            }).fadeIn(), t("#editAvatarPanelInner").animate({opacity: "0"}, 200, function () {
                r.LoadAvatarThumbs(s.val(), "avatarSlider", "imgEditSelectedAvatar"), setTimeout(function () {
                    t("#editAvatarPanelInner").animate({opacity: "1"}, 600), a.removeLoading("editAvatarPanel")
                }, 300)
            }))
        }), t("#editAvatarGame").change(function () {
            var e = t(this).find("option:selected");
            return "" != e.val() && (t("#editAvatarPanelInner").attr("class", e.val()), t("#editAvatarPanel").find("span.loading").spinner("stop").spinner({
                height: 32,
                width: 32,
                speed: 80,
                image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                frames: 12
            }).fadeIn(), t("#editAvatarPanelInner").animate({opacity: "0"}, 200, function () {
                r.LoadAvatarThumbs(e.val(), "avatarSlider", "imgEditSelectedAvatar"), setTimeout(function () {
                    t("#editAvatarPanelInner").animate({opacity: "1"}, 600), a.removeLoading("editAvatarPanel")
                }, 300)
            })), !1
        }), t(".deleteLocalUserData, #menuDeleteProfile").click(function (e) {
            if (e && e.preventDefault(), globals.isLauncher) return !1;
            o.clearErrorClasses();
            var n = t("div.panel.active");
            return t("#deleteProfile").removeAttr("data-prevPanel"), n.length && n.attr("id").length && t("#deleteProfile").attr("data-prevPanel", n.attr("id")), a.clearActivePanel(function () {
                var e = "lanoire" === globals.titleName && a.isOffline() && a.isLocal ? "DeleteProfileInfoLocalLan" : "DeleteProfileInfo",
                    n = a.getText(e, "HomeSignin").replace("[title]", globals.titleDisplayName);
                t("#deleteProfileInfo").text(n), a.setUpLoadingPanel("#deleteProfile")
            }), !1
        }), t("#buttonDeleteProfileYes").click(function () {
            return globals.isLauncher ? !1 : (t(this).attr("disabled") || (t(this).attr("disabled", "disabled"), t("#editRockstarId").val(globals.account.RockstarId), r.DeleteProfile(t("#editRockstarId").val())), !1)
        }), t("#buttonDeleteProfileNo").click(function (e) {
            if (e && e.preventDefault(), globals.isLauncher) return !1;
            var n = t("#mainNav li.on a");
            return n.length ? n.click() : t("#deleteProfile").attr("data-prevPanel").length ? a.clearActivePanel(function () {
                a.setUpLoadingPanel("#" + t("#deleteProfile").attr("data-prevPanel")), a.removeLoading(t("#deleteProfile").attr("data-prevPanel"))
            }) : I.showHomepage(!0), !1
        }), t("#storeButton").click(function (e) {
            if (e && e.preventDefault(), !globals.isLauncher) {
                var n = t(this);
                n.attr("disabled") || (a.setSelected(n), i.isStoreV2Enabled() ? (n.removeData(), I.showCommerceV2()) : I.showCommerce())
            }
        }), t("#socialButton").click(function (e) {
            e && e.preventDefault(), I.showSocialSection()
        }), t("#findPlayerLink").click(function (e) {
            if (e && e.preventDefault(), a.removeLoading("friendsPanel"), !globals.isLauncher && !t(this).is(".on")) {
                var n = t("#friendsPanel");
                t(this).is(".on") || (t("#headerLoginOptionsDrop").is(":visible") && t("#headerLoginOptionsButton").click(), t("#findFriendsList").empty(), t("#findFriendsIntro").show(), t("#friendSearchTerm").removeAttr("style"), t("#friendsPanel div.content").removeAttr("style"), a.setSelectedSide(t(this)), a.resetScrollbar("#friendsPanel"), t("#friendSearchbox").val(""), t("#findFriends .emptyContainer").remove(), n.attr("class", "panel active findPlayer"), n.find("#friendSearchLink").unbind("click").click(function () {
                    var e = t(this).parents("#friendSearch").find(".searchTip"), n = t("#friendSearchbox").val();
                    n = n.replace(/ /g, ""), t("#friendSearchbox").val(n), "" != n && n.length > 2 ? o.SearchNicknameRegExValidation(n) ? (s.FindPlayer(n, "0"), e.fadeOut(), h.trackEvent(h.category.friend, h.action.friend_search)) : e.html(a.getError("NickInvalid")).fadeIn() : "" != n && n.length < 3 && e.html(a.getError("SearchMin3Chars")).fadeIn()
                }), n.find("#friendSearchbox").unbind("keydown").keydown(function (e) {
                    (13 == e.keyCode || 13 == e.charCode) && (e && e.preventDefault(), t("#friendSearchLink").click())
                }).focus(), t("#friendsContainer").data("antiscroll").refresh(), h.trackPage("/FindPlayer"))
            }
        }), t("#friendMore").click(function (e) {
            if (e && e.preventDefault(), !globals.isLauncher) {
                var n = t("#friendSearchbox"), a = parseInt(n.data("pageIndex"), 10);
                i.WriteDebugLog("friendMore", "pageIndex", a), s.FindPlayer(n.val(), a + 1)
            }
        }), t("#friendInvitesLink").click(function (e) {
            e && e.preventDefault(), t(this).is(".on") || globals.isLauncher || (a.setSelectedSide(t(this)), t("#friendInvitesList").empty().removeData(), I.friendInviteQuery())
        }), t("#gameInvitesLink").click(function (e) {
            e && e.preventDefault(), t(this).is(".on") || globals.isLauncher || (a.setSelectedSide(t(this)), a.setUpLoadingPanel("#friendsPanel", function () {
                t("#friendsPanel").attr("class", "panel active gameInvites"), s.GetGameInvites()
            }), h.trackPage("/GameInvites"))
        }), t("#myCrewsLink").click(function (e) {
            e && e.preventDefault(), t(this).is(".on") || globals.isLauncher || a.setUpLoadingPanel("#friendsPanel", function () {
                I.showCrews()
            })
        }), t("#crewMembersLink").click(function (e) {
            e && e.preventDefault(), t(this).is(".on") || globals.isLauncher || I.showPrimaryCrewMembers()
        }), t("#crewInvitesLink").click(function (e) {
            e && e.preventDefault(), t(this).is(".on") || globals.isLauncher || I.loadCrewInvites()
        }), t("#findCrewLink").click(function (e) {
            e && e.preventDefault(), t(this).is(".on") || globals.isLauncher || I.showCrewSearch()
        }), t("#messagesPanel #cancelMessage").click(function (e) {
            e && e.preventDefault();
            var n = t(this);
            if (globals.isLauncher || n.attr("disabled")) return !1;
            var r = t("#newMessageName");
            r.val(""), r.attr("data-rockstarId", "");
            var s = t("#newMessageInput");
            return s.find("textarea").val(""), s.find("span.characterCount").text("0"), t("#messagesPanel .help-block").text(""), t(".sendMessage").attr("disabled", "disabled"), t("#newMessageInput, #cancelMessage").hide(), n.hasClass("backFriendLink") ? (i.WriteDebugLog("cancelMessage", ".click", "return to friends"), n.removeClass("backFriendLink"), void a.showPanel(t("#" + n.data("returnPanel")))) : (i.WriteDebugLog("cancelMessage", ".click", "return to messages"), void t("#messagesList, #messageThread, #newMessage").show())
        }), t("#newMessageToPlayer").find(".back").click(function (e) {
            if (e && e.preventDefault(), !globals.isLauncher) {
                var n = t(this).attr("data-id"), i = t(this).attr("data-avatar"), a = t(this).attr("data-nickname");
                s.GetMessageThread(n, i, a)
            }
        }), t("#MessageThreadHeader").find("a.reply").click(function (e) {
            e && e.preventDefault(), globals.isLauncher || s.OpenNewMessage(t(this).attr("data-id"), t(this).attr("data-avatar"), t(this).attr("data-nickname"))
        }), t("#editProfile").find(".sideMenu a").keydown(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("#myProfileLink").click(function () {
            if (!t(this).is(".on") && !globals.isLauncher) {
                t("#headerLoginOptionsDrop").is(":visible") && t("#headerLoginOptionsButton").click();
                var e = t("#editProfile");
                e.find(".content").removeAttr("style"), s.SetProfileOptions(globals.account), e.hasClass("active") ? e.attr("class", "panel active myProfile") : a.clearActivePanel(function () {
                    a.setUpLoadingPanel("#editProfile", function () {
                        a.removeLoading("editProfile")
                    }), e.attr("class", "panel active myProfile")
                }), a.setSelectedSide(t(this)), a.resetScrollbar("#editProfile"), h.trackPage("/ProfileSettings")
            }
        }), t("#privacyLink").click(function () {
            if (!t(this).is(".on") && !globals.isLauncher) {
                o.clearErrorClasses(), t("#headerLoginOptionsDrop").is(":visible") && t("#headerLoginOptionsButton").click();
                var e = t("#editProfile");
                e.hasClass("active") ? e.attr("class", "panel active privacySettings") : a.clearActivePanel(function () {
                    a.setUpLoadingPanel("#editProfile"), e.attr("class", "panel active privacySettings")
                }), t(this).hasClass("on") || (a.setSelectedSide(t(this)), a.setUpLoadingPanel("#editProfile", function () {
                    s.GetUserPrivacyInfo(globals.account.RockstarId, "", ""), t("#linkedAccountOptions").show(), r.GetUserNetworks(globals.account.RockstarId, "", "", s.LoadUserNetworksPrivacy), t("#privacySettingsForm").show()
                })), h.trackPage("/PrivacySettings")
            }
        }), I.UpdateAccountLinking = function (e, n, i) {
            var o = t("#editProfile");
            if (!e && n) {
                if (!a.isSignedIn()) return;
                return void r.UpdateLinkedAccounts(n, i)
            }
            if (!a.isSignedIn()) return o.attr("class", "panel active accountSettings"), void r.navigatePendingSignIn("#accountsLink");
            t("#headerLoginOptionsDrop").is(":visible") && t("#headerLoginOptionsButton").click(), o.hasClass("active") ? o.attr("class", "panel active accountSettings") : a.clearActivePanel(function () {
                a.setUpLoadingPanel("#editProfile", function () {
                    a.removeLoading("editProfile")
                }), o.attr("class", "panel active accountSettings")
            });
            var l = function (e) {
                s.LoadUserNetworksPrivacy(e), window.amd.settings.LinkedAccountsView && window.amd.settings.LinkedAccountsView.close(), window.amd.settings.LinkedAccountsView = new c.LinkedAccountsView({xmlData: e}), a.removeLoading("editProfile"), a.resetScrollbar("#editProfile")
            };
            n ? (a.setSelectedSide(t("#accountsLink")), a.setUpLoadingPanel("#editProfile", function () {
                r.UpdateLinkedAccounts(n, i, l)
            })) : t("#accountsLink").hasClass("on") || (a.setSelectedSide(t("#accountsLink")), a.setUpLoadingPanel("#editProfile", function () {
                r.GetUserNetworks(globals.account.RockstarId, "", "", l)
            }))
        }, t("#gameSettingsLink").click(function () {
            if (!t(this).is(".on") && !globals.isLauncher) {
                t("#headerLoginOptionsDrop").is(":visible") && t("#headerLoginOptionsButton").click();
                var e = t("#editProfile");
                e.hasClass("active") ? e.attr("class", "panel active gameSettings") : a.clearActivePanel(function () {
                    a.setUpLoadingPanel("#editProfile"), e.attr("class", "panel active gameSettings")
                }), t(this).hasClass("on") || (a.setSelectedSide(t(this)), a.setUpLoadingPanel("#editProfile", function () {
                    s.GetUserPrivacyInfo(globals.account.RockstarId, "", "")
                })), e.find(".content").removeAttr("style"), a.resetScrollbar("#editProfile"), h.trackPage("/GameSettings")
            }
        }), t("#blockListLink").click(function (e) {
            e && e.preventDefault(), t(this).is(".on") || globals.isLauncher || I.ShowBlockList()
        }), t("#gameInviteLink").click(function (e) {
            e && e.preventDefault(), s.SendGameInvite(t("#friendProfile").attr("data-id"))
        }), t("#newMessage, #messageLink").click(function () {
            var e = t("#friendProfilePanel.active");
            return e.length ? s.OpenNewMessage(e.find("#friendProfile").attr("data-id"), e.find("#friendProfile img.avatarImg").attr("src"), e.find("#friendProfile .profilenickname:first").text(), "friendProfilePanel") : s.OpenNewMessage(), !1
        }), t("#profileSettings").find(".editlink").click(function (e) {
            e && e.preventDefault(), t("#profileSettings li .formWrapper").hide(), t("#profileSettings li .editlink").show(), t("#profileSettings ." + t(this).data("field")).toggle().find("span.errorText").remove().end().find("span.error").remove()
        }), t("#profileSettings").find(".closeRow").click(function (e) {
            e && e.preventDefault(), t("#profileSettings ." + t(this).data("field")).toggle().find("span.errorText").remove().end().find("span.error").remove()
        }), t("#friendsPanel form #crewMemberSearchText, #activation form").keydown(function (e) {
            var n;
            return n = window.event ? window.event.keyCode : e.which, 13 == n || 10 == n ? (e && e.preventDefault(), t(this).find("input:focus").focusout(), t(this).submit(), !1) : !0
        }), t("#lnkSkipAccount").click(function (e) {
            e && e.preventDefault();
            var n = a.hasProfileListAsync();
            n.always(function (e) {
                e ? a.requestUiState(!1) : (t("#confirmPanelText").html("&nbsp;"), t("#confirmPanel").find(".confirmPanelButtonWrapper, .confirmPanelOptionsWrapper, .buttonCancelConfirm, .buttonQuitConfirm").hide(), t("#confirmPanelTitle").html(a.getText("Default", "HomeSignin")), t("#confirmPanelTextLong").html(a.getText("DefaultDescription", "HomeSignin")), t("#confirmPanelYes").off("click").on("click", function () {
                    SignInLocal(null, "Default", !0)
                }), t("#confirmPanelNo").off("click").on("click", function () {
                    t("#joinClub").click()
                }), t("#confirmPanelButtonWrapperYesNo").show(), a.clearActivePanel(function () {
                    a.setUpLoadingPanel("#confirmPanel")
                }))
            })
        }), t("#buttonResetPassword").click(function () {
            return o.clearErrorClasses(), o.EmailValidation("signInEmailRetrieve") && (t("div.active .buttonResetWrapper span").show(), r.ResetPassword("")), !1
        }), t("#buttonResetPasswordProfile").click(function () {
            return o.clearErrorClasses(), o.EmailValidation("signInEmailRetrieveProfile") && (t("div.active .buttonResetWrapper span").show(), r.ResetPassword("Profile")), !1
        }), t("#buttonSignInPasswordReset").click(function () {
            var e = t(this);
            return e.hasClass("disabled") ? !1 : (e.addClass("disabled"), o.clearErrorClasses(), o.EmailValidation("signInEmailRetrievePassword") ? (e.hide(), t("#resetSpinner").spinner("stop").spinner({
                height: 32,
                width: 32,
                speed: 80,
                image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                frames: 12
            }).show(), t("div.active .buttonResetWrapper span").show(), r.ResetPassword("Password"), !0) : (e.removeClass("disabled"), !1))
        }), t("a.forgotPasswordLink").keydown(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }).click(function () {
            return I.showPageResetPassword(!1), !1
        }), t("#onlinePolicies .buttonPara a").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }), t("#buttonPrivacy").click(function (e) {
            e && e.preventDefault();
            var n = t("#onlinePoliciesContainer");
            n.find(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").show(), t("#onlinePolicies").find(".buttonPara a").hide(), n.find("#introTextContainer").fadeOut(function () {
                a.SetSignUpStepText("Three"), t("#privacyTextContainer").fadeIn(function () {
                    a.resetScrollbar("#onlinePolicies"), t("#onlinePolicies").find(".buttonPara .privacyButton").show(), t("#privacyAgree").focus()
                }).focus()
            }), n.find(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").css("height", "15px"), h.trackPage("/PrivacyPolicy")
        }), t("#privacyAgree").click(function (e) {
            e && e.preventDefault();
            var n = t("#onlinePoliciesContainer");
            n.find(".antiscroll-scrollbar.antiscroll-scrollbar-vertical").hide(), t("#onlinePolicies").find(".buttonPara a").hide(), n.find("#privacyTextContainer").fadeOut(function () {
                a.SetSignUpStepText("Four"), t("#termsTextContainer").fadeIn(function () {
                    t("#onlinePoliciesContainer .antiscroll-scrollbar.antiscroll-scrollbar-vertical").show().css("height", "15px"), t("#onlinePolicies .buttonPara .termsButton").show(), t("#termsAgree").focus()
                }).focus()
            }), h.trackPage("/TermsAndConditions")
        }), t("#privacyDisagree").click(function (e) {
            e && e.preventDefault(), t("#introTextContainer, #onlinePolicies, #privacyTextContainer, #termsTextContainer").hide(), a.resetScrollbar("#onlinePolicies"), I.ShowSignin()
        }), t("#termsAgree").click(function () {
            return globals.signUpReCaptchaEnabled && globals.showSignUpRecaptcha ? (a.SetSignUpStepText("Five"), t("#dob, #introTextContainer, #privacyTextContainer, #termsTextContainer").hide(), d.InitReCaptcha(t("#signUpReCaptchaInput"), 24, t("#signUpReCaptchaContainer")), h.trackPage("/CreateAccountReCaptcha")) : r.CreateAccountJS(), !1
        }),t("#termsDisagree").click(function () {
            return t("#introTextContainer, #onlinePolicies, #privacyTextContainer, #termsTextContainer").hide(), a.resetScrollbar("#onlinePolicies"), I.ShowSignin(), !1
        }),l.on("click", ".RGSCLoadExt", function (e) {
            e && e.preventDefault(), a.launchExternalBrowser.call(this, e)
        }),l.on("click", ".RGSCLoadExtAuth", function (e) {
            e && e.preventDefault(), a.launchExternalBrowserWithScAuth.call(this, e)
        }),l.on("click", "#accountSettings .btn.linkAccount", function (e) {
            var n = t(e.currentTarget);
            h.trackEvent(h.category.settings, h.action.settings_account_linking_link, n.attr("data-os"))
        }),l.on("click", "#accountSettings .btn.unlink", function (e) {
            var n = t(e.currentTarget);
            h.trackEvent(h.category.settings, h.action.settings_account_linking_unlink, n.attr("data-os"))
        }),l.on("keyup", "#messagePanel .closeCurrentPanel", function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }),l.on("click", ".inviteMsg", function (e) {
            e && e.preventDefault();
            var n = t(e.currentTarget), i = '"' + n.attr("data-message") + '"';
            r.ShowConfirmModal(i, null, null, null, "Close", null)
        }),t("#submitDetails").click(function () {
            return setTimeout(function () {
                0 == t("#accountDetails .pwvalid").length && 0 == t("#accountDetails .pwerror").length && r.CheckPasswordJS("signUpPassword"), o.CreateAccountValidation() && (t("#submitDetails").hide(), t("#createAccount").removeClass("disabled").show())
            }, 500), !1
        }),t("#signUpNickname").off("keydown").on("keydown", function (e) {
            var n = t(e.currentTarget);
            n.visible() && (13 == e.keyCode || 13 == e.charCode) && (e && e.preventDefault(), t("#signUpNickname").focusout())
        }),t("#signUpNickname").off("focusout.validation").on("focusout.validation", function () {
            o.NicknameValidation("signUpNickname")
        }),t("#signUpEmail").off("focusout.validation").on("focusout.validation", function () {
            var e = t(this);
            e.val(e.val().trim()), o.EmailValidation("signUpEmail")
        }),t("#signUpEmailConfirm").off("focusout.validation").on("focusout.validation", function () {
            var e = t(this);
            e.val(e.val().trim()), o.ConfirmEmail(t("#signUpEmailConfirm"))
        }),t("#signUpPassword").off("focusout.validation").on("focusout.validation", function () {
            r.CheckPasswordJS("signUpPassword")
        }),t("#createAccount").click(function (e) {
            e && e.preventDefault(), t(this).hasClass("disabled") || r.CreateAccount()
        }),t("#signUpReCaptchaInputForm").submit(function (e) {
            e && e.preventDefault(), t("#createAccount").click()
        }),t("#signUpConfirmButton").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }).click(function () {
            return a.clearActivePanel(function () {
                t("#signUpConfirm").hide(), I.showHomepage(!1)
            }), !1
        }),t("#lnkChangeAvatar, #editAvatar").click(function () {
            t(this).is(".on") || globals.isLauncher || (r.LoadAvatarThumbs("", "avatarSlider", "imgEditSelectedAvatar"), t("#editProfile").hasClass("active") || a.clearActivePanel(function () {
                a.setUpLoadingPanel("#editProfile")
            }), a.closeModalsAndHideMenu(), a.setSelectedSide(t("#lnkChangeAvatar")), t("#editProfile .content").removeAttr("style"), a.setUpLoadingPanel("#editProfile", function () {
                t("#editProfile").attr("class", "panel active avatar")
            }), r.GetAvatarGames("editAvatarGame"), a.removeLoading("editProfile"), "en-US" == globals.titlelang || t("#editProfile").hasClass("localized") || (t("#editProfile").find("[rel*=localize]").localize("Settings", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), t("#editProfile").addClass("localized")), a.resetScrollbar("#editProfile"), h.trackPage("/ChangeAvatar"))
        }),t("#avatarSlider").on("click", "li a", function (e) {
            e && e.preventDefault();
            var n = t(this).find("img");
            return n.length ? (r.ChangeSelectedAvatar(n[0], n.attr("data-image")), void t("#editAvatarSubmit").focus()) : !1
        }),t("#editAvatarSubmit").click(function () {
            var e = t("#editAvatarGame").val();
            return e ? (o.clearErrorClasses(), r.UpdateAvatar(), !1) : !1
        }),t("#newReplyEntry").keyup(function (e) {
            var n = t(e.currentTarget);
            if (n.visible()) {
                if (13 == e.which) return void t(".sendReply").click();
                var i = t(this).val().length;
                I.EnableReplyMessageButton(i)
            }
        }),t("#newReplyEntry").focusout(function () {
            var e = t(this).val().length;
            I.EnableReplyMessageButton(e)
        }),t(".newMessageEntry").keyup(function (e) {
            var n = t(e.currentTarget);
            if (n.visible()) {
                if (13 == e.which) return void t(".sendMessage").click();
                var i = t(this).val().length;
                t("#messagesContainer .characterCountWrapper span.characterCount").text(i), a.EnableSendMessageButton(i)
            }
        }),t(".newMessageEntry").focusout(function () {
            var e = t(this).val().length;
            t("#messagesContainer .characterCountWrapper span.characterCount").text(e), a.EnableSendMessageButton(e)
        }),t("#editZip").keydown(function (e) {
            var n = 10 - t(this).val().length, i = event.keyCode;
            0 >= n && (32 == i || i > 46 && 112 > i || i > 123) && e && e.preventDefault()
        }).keyup(function () {
            var e = 10 - t(this).val().length;
            0 >= e && (e = 0, t(this).val(t(this).val().substring(0, 10)))
        }),t("form").keydown(function (e) {
            var n = t(e.originalEvent.target);
            if (!n.visible()) return !1;
            if (n.hasClass("noEnterSubmit")) return !0;
            var i;
            return i = window.event ? window.event.keyCode : e.which, 13 != i && 10 != i ? !0 : void t(this).submit()
        }),t("#newMessageName").keydown(function (e) {
            return 13 == e.keyCode || 32 == e.keyCode ? !1 : void 0
        }),t(".sendReply").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }).click(function () {
            var e = t(this);
            if (e.attr("disabled")) return !1;
            var n = t("#replyMessageInput"),
                i = encodeURIComponent(t("#replyMessageInput .newMessageEntry").val().trim());
            if (0 == i.length) return n.find(" .input .help-block").text("Message is required"), !1;
            n.find(" .input .help-block").text("");
            var a = t("#replyToNickname"), r = a.attr("data-rockstarId");
            if (void 0 != r) {
                e.attr("disabled", "disabled");
                var o = a.text();
                s.SendMessage(o, r, i, !0)
            }
        }),t(".sendMessage").keyup(function (e) {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && t(this).click()
        }).click(function () {
            var e = t(this);
            if (e.attr("disabled")) return !1;
            var n, i = encodeURIComponent(t("#newMessageInput .newMessageEntry").val().trim()),
                r = t("#newMessageInput .input .help-block");
            0 == i.length ? (r.text(a.getText("MessageMissing", "Errors")), n = !0) : r.text("");
            var o = t("#friendsSearch").find("#newMessageName"), l = o.val(), c = o.attr("data-rockstarId"),
                d = t("#friendsSearch .help-block");
            return "" == l || void 0 == c || "" == c ? (d.text(a.getText("NicknameMissing", "Errors")), n = !0) : d.text(""), n ? !1 : (e.attr("disabled", "disabled"), t("#cancelMessage").attr("disabled", "disabled"), void s.SendMessage(l, c, i, !1))
        }),t("fieldset.options").find("input:radio").click(function () {
            var e = t(this).data("previousValue");
            "checked" == e ? (t(this).attr("checked", !1), t(this).removeData()) : t(this).data("previousValue", t(this).attr("checked"))
        }),t("#menuExit").click(function () {
            return a.clearActivePanel(function () {
                a.CloseUI()
            }), !1
        }),t("#menuQuitGame").click(function () {
            a.quitGame()
        }),t("#loginPanelsWrapper form input:text, #loginPanelsWrapper form input:password").bind({
            dblclick: function () {
                t(this).select()
            }
        }),t("form.toggleOptionsForm").find(".toggleOptions a").click(function (e) {
            e && e.preventDefault();
            var n = t(this);
            return n.is(".selected") || n.data("updating") ? !1 : (n.data("updating", !0), s.UpdatePrivacySetting(n.find("input:radio").attr("name"), n.find("input:radio").attr("value"), "", n), !1)
        }),t("#compareStats").click(function () {
            return t("#compareSelect").is(".open") ? (i.WriteDebugLog("CompareStats", "click", "close"), s.closeCompareStats()) : (i.WriteDebugLog("CompareStats", "click", "open"), t("#comparedFriend").fadeOut(), t("#compareSelect").show().animate({height: "252px"}, 200, "easeOutQuart", function () {
                t("#compareSelect .spinner").spinner("stop").spinner({
                    height: 32,
                    width: 32,
                    speed: 80,
                    image: globals.baseUrl + "images/spinners/spinner32x32black.png",
                    frames: 12
                }).fadeIn(), s.GetFriendCompareJS()
            }).addClass("open")), !1
        }),t("#compareSelect").find(".close").click(function () {
            return s.closeCompareStats(), t("#statsPanel").removeClass("compared"), I.reloadStatsWithoutFriendData(), !1
        }),t("#compareSelectList").on("click", "a", function (e) {
            e && e.preventDefault();
            var n = t(this);
            I.CompareWithFriend(n.attr("data-userid"), n.attr("data-useravatar"), n.text());
            var i = t("#statsPanel .friendStatsTitle");
            i.html().length > 12 && i.html(i.html().substring(0, 9) + "...")
        }),t("#compareStatsLink").click(function () {
            var e = t("#friendProfileHead");
            return I.CompareWithFriend(e.closest("#friendProfile").attr("data-id"), i.getLastStringSegment(e.find("img.avatarImg").attr("src"), "/", 2), e.find("h5.profilenickname").text()), !1
        }),t("#buttonGoToSignIn").click(function (e) {
            e && e.preventDefault(), I.showPageReCaptchaSignIn()
        }),t("#buttonCancelPasswordReset").click(function (e) {
            e && e.preventDefault(), I.resetSigninPage(), I.ShowSignin()
        }),t("#launcherControls").on("click", ".minimise", I.minimizeUi).on("click", ".close", a.quitGame),t("#launcherStyle").on("click", ".buttons a", I.launcherButtonClick),t("#launcherStyle").on("keyup", ".buttons a"),function () {
            var n = t(e.currentTarget);
            13 == e.which && n.visible() && I.launcherButtonClick()
        },t("[data-services]").each(function (e, n) {
            var i = t(n), a = i.data("services").split(",");
            return globals.scsServiceEnabled ? void ("socialbutton" === i.attr("id").toLowerCase() ? globals.friendsServiceEnabled && globals.accountsServiceEnabled || i.unbind().click(globals.crewsServiceEnabled ? function () {
                t("#myCrewsLink").click()
            } : function () {
                t("#gameInvitesLink").click()
            }) : _.each(a, function (e) {
                return globals[e + "ServiceEnabled"] ? void 0 : void (i.hasClass("doNotRemove") ? i.addClass("disabled").attr("disabled", "disabled") : (i.parent("li").length && i.parent("li").remove(), i.remove()))
            })) : (i.parent("li").length && i.parent("li").remove(), void (i.hasClass("doNotRemove") ? i.addClass("disabled").attr("disabled", "disabled") : i.remove()))
        }),t("#friendsPanel").find(".sideMenu li").click(function (e) {
            e && e.preventDefault(), t("#friendsPanel .loadingMask").removeClass("bottom")
        }),t("#signInEmailPasswordResetForm").submit(function (e) {
            e && e.preventDefault(), t("#buttonSignInPasswordReset").click()
        }),t("#buttonServerErrorHome").click(function (e) {
            e && e.preventDefault(), I.showHomepage(!0)
        })
    }), i.pubsub.on("datafnfriends:timeOutRetryClick", I.timeOutRetryClick), i.pubsub.on("datafunctions:ShowSignin", I.ShowSignin), i.pubsub.on("datafunctions:ShowBlockList", I.ShowBlockList), i.pubsub.on("setupEnv:showServiceAlert", I.ShowServiceAlert), i.pubsub.on("setupEnv:launcherCommand", I.launcherCommand), i.pubsub.on("setupEnv:showPageResetPassword", I.showPageResetPassword), i.pubsub.on("setupEnv:showPageSignIn", I.showPageSignIn), i.pubsub.on("setupEnv:showHomepage", I.showHomepage), I
}),define("common/jquery.datafunctions.activation", ["jquery", "utils", "jquery.setup.environment.utils", "common/jquery.datafunctions", "common/formvalidation"], function (e, t, n, i, a) {
    var r = {};
    return r.ActivateCode = function (t) {
        a.clearErrorClasses();
        var i = e("#activation #ContentId").val() || 0,
            r = '{ "Message": 24, "ContentId":' + i + ', "ActivationCode":"' + e("#activationCode").val() + '", "Action": ' + t + "}";
        n.CallGameMethod("RGSC_ACTIVATION_CODE_RESPONSE", r, "RGSC_ACTIVATION_CODE_RESPONSE_DEMO"), e("#activation").removeClass("pending")
    }, r.ActivateCodeRecovery = function (t) {
        a.clearErrorClasses();
        var i = '{ "ContentId":' + e("#activation #ContentId").val() + ', "RequestCode":"' + e("#requestCode").val() + '", "ResponseCode":"' + e("#activationCode").val() + '", "Action": ' + t + "}";
        n.CallGameMethod("RGSC_LICENSE_RECOVERY_RESPONSE", i, "RGSC_JS_LICENSE_RECOVERY_RESULT"), e("#activation").removeClass("pending")
    }, r.ActivateCodeExpiration = function (t) {
        a.clearErrorClasses();
        var i = '{ "ContentId":' + e("#activation #ContentId").val() + ', "ActivationCode":"' + e("#activationCode").val() + '", "Action": ' + t + "}";
        n.CallGameMethod("RGSC_LICENSE_EXPIRATION_RESPONSE", i, "RGSC_JS_LICENSE_EXPIRATION_RESULT"), e("#activation").removeClass("pending")
    }, r.RedeemCode = function (t) {
        a.clearErrorClasses();
        var i = '{ "Message": 36, "redemptionCode":"' + e("#activationCode").val() + '", "Action": ' + t + "}";
        n.CallGameMethod("RGSC_REDEMPTION_CODE_RESPONSE", i, "RGSC_REDEMPTION_CODE_RESPONSE_DEMO"), e("#activation").removeClass("pending")
    }, r.showActivationError = function (n, i) {
        if (t.WriteDebugLog("showActivationError", "errorMsg, codeDescription", n + ", " + i), "confirmPanel" == e("div.panel.active").attr("id")) e("#confirmPanelTextLong").html('<span class="errorText">' + n + "</span>"); else {
            e("#activation").find("#buttonBackToCodeEntry").click();
            var a = e("#activationCode");
            a.siblings(".error, .errorText, .errorCode").remove(), i && a.after('<div class="errorCode">' + i + "</div>"), a.after('<div class="errorText">' + n + "</div>"), a.is(":visible") && a.after('<span class="error"></span>')
        }
        r.resetActivationForm(), e("#activationCode").focus().select()
    }, r.resetActivationForm = function () {
        var t = e("#activation");
        t.find("#spanActivate").hide(), t.find(".unlock, .unlockContinue").remove(), e("#activationWrapper").find('a[disabled="disabled"]').removeAttr("disabled")
    }, r.ShowVoucherContents = function (i) {
        var s = e("#activation");
        i ? s.data("isActivation", 1) : s.removeData("isActivation"), a.clearErrorClasses(), e("#activationWrapper").removeData("voucherContentsRequested");
        var o = {voucherCode: e("#activationCode").val(), language: globals.titlelang},
            l = n.CallGameMethod("RGSC_REQUEST_VOUCHER_CONTENTS", o, "RGSC_REQUEST_VOUCHER_CONTENTS_DEMO");
        if (void 0 != l && void 0 != l.Result && l.Result) e("#activationWrapper").data("voucherContentsRequested", o.voucherCode); else {
            var c = t.errorCode("7001.67"), d = n.getErrorWithCode(c);
            r.showActivationError(d.Message, d.CodeDescription)
        }
        s.removeClass("pending")
    }, r.ConsumeVoucher = function () {
        a.clearErrorClasses(), e("#activationWrapper").removeData("voucherContentsRequested");
        var i = {voucherCode: e("#activationCode").val()},
            s = n.CallGameMethod("RGSC_REQUEST_VOUCHER_CONSUMPTION", i, "RGSC_REQUEST_VOUCHER_CONSUMPTION_DEMO");
        if (void 0 == s || void 0 == s.Result || !s.Result) {
            var o = t.errorCode("7001.69"), l = n.getErrorWithCode(o);
            r.showActivationError(l.Message, l.CodeDescription)
        }
        e("#activation").removeClass("pending")
    }, r
}),define("common/gamefunctions", ["jquery", "domReady", "utils", "jquery.setup.environment.utils", "jquery.setup.environment", "common/jquery.datafunctions", "common/jquery.datafunctions.friends", "common/jquery.datafunctions.activation", "common/steam", "common/analyticsManager", "common/reCaptcha", "spinner"], function (e, t, n, i, a, r, s, o, l, c, d) {
    function u() {
        return e("#editProfile").hasClass("active")
    }

    function h() {
        return e("#loginPanelsWrapper").hasClass("active")
    }

    function f() {
        var t = e("#homeButton").attr("disabled");
        return !t || !t.length || "pcros" != globals.platform
    }

    function p(e) {
        return void 0 != e.CallbackData && 2 & e.CallbackData
    }

    function m(t, a, r) {
        n.WriteDebugLog("initStyling", "jsonRequest.Visible; stateValue; subStateValue", t.Visible + "; " + a + "; " + r), t.Visible ? (globals.isScuiVisible = !0, e("html").css("background-color", "rgba(0, 0, 0, 0.6)"), ("COMMERCE" != a || "COMMERCE" == a && "" != r) && (e("#storePanel").removeAttr("style").removeClass("loaded"), e("#scuiPanelInstruction").removeAttr("class style")), i.isHeaderRequired() ? i.showHeaderMenu() : i.hideHeaderMenu()) : (globals.isScuiVisible = !1, e("html").removeAttr("style"), e("#storePanel").removeAttr("style").removeClass("loaded"), e("#scuiPanelInstruction").removeAttr("class style"), i.hideHeaderMenu())
    }

    function g(t, r, s) {
        if (t.Visible) switch (s) {
            case"REDEMPTIONCODE":
            case"SERIALKEYREDEMPTION":
                n.pubsub.trigger("gamefunctions:showActivation", t, r, s);
                break;
            default:
                var o = void 0 != t.Data && void 0 != t.Data.Url ? t.Data.Url : "";
                if (n.isStoreV2Enabled()) {
                    if (i.initHeaderMenu(!0), !t.Online || i.isOffline() || e("#OnlineFlag").length > 0 && "False" == e("#OnlineFlag").val()) return S.Retry_Connection(i.getText("OnlineRequired", "Store")), setTimeout(function () {
                        i.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible": true }', "RGSC_UI_STATE_RESPONSE_DEMO")
                    }, 300), !1;
                    var l = e("#storeButton");
                    l.removeData(), "undefined" != typeof t.Data && ("undefined" != typeof t.Data.Category && l.data("category", decodeURI(t.Data.Category)), "undefined" != typeof t.Data.Product && l.data("productId", decodeURI(t.Data.Product))), a.showCommerceV2(o)
                } else a.showCommerce(o)
        }
        return !0
    }

    function v(e) {
        return e.Visible ? S.isDLLUpdateAvailable() ? (n.pubsub.trigger("gamefunctions:showPatchRequired"), i.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible":' + (e.Visible ? "true" : "false") + " }", "RGSC_UI_STATE_RESPONSE_DEMO"), !1) : (n.WriteDebugLog("SIGNIN", "signin json", JSON.stringify(e.Data)), a.ShowSignin(e.Online)) : !0
    }

    function _() {
        var t = ["RGSC_COMMERCE_GET_PURCHASE_FLOW_TELEMETRY", "RGSC_GET_ACHIEVEMENT_LIST", "RGSC_GET_GAME_INVITE_LIST", "RGSC_GET_PROFILE_LIST", "RGSC_GET_ROS_CREDENTIALS", "RGSC_GET_STATS_DATA", "RGSC_GET_TITLE_ID", "RGSC_GET_VERSION_INFO", "RGSC_INTERNET_CONNECTED_STATE"];
        e.each(t, function (e, t) {
            var i = n.jsToDll(t);
            window[i] = function (e) {
                return w(i, e)
            }
        })
    }

    function b(e) {
        "undefined" == typeof C[e.fn] && (C[e.fn] = []), C[e.fn].push(e.dfd)
    }

    function y(e) {
        return void 0 == C || "undefined" == typeof e || "undefined" == typeof C[e] || 0 === C[e].length ? !1 : C[e].shift()
    }

    function w(e, t) {
        n.WriteDllLog(e, "data", t, n.logType.debug);
        var i = y(e);
        if ("object" != typeof i || !i.resolve) return n.WriteDebugLog(e, "failed to resolve", "", n.logType.error, n.logController[globals.titleName]), n.WriteDllLog(e, "failed to resolve", t), t;
        if (n.WriteDebugLog(e, "resolved", t.toString(), n.logType.debug), "string" == typeof t) try {
            t = JSON.parse(t)
        } catch (a) {
            e === n.jsToDll("RGSC_GET_ROS_CREDENTIALS") && t && n.WriteDebugLog(n.jsToDll("RGSC_GET_ROS_CREDENTIALS"), "JSON.parse exception", t, n.logType.error, n.logController[globals.titleName])
        }
        return void i.resolve(t)
    }

    var S = {};
    S.RGSC_JS_PING = function () {
        return n.WriteDllLog("RGSC_JS_PING"), window.cssErr ? void n.WriteDebugLog("RGSC_JS_PING", "Error", "CSS load error", n.logType.error, n.logController[globals.titleName]) : void i.CallGameMethod("RGSC_PONG", null, "RGSC_PONG_DEMO")
    }, S.RGSC_JS_READY_TO_ACCEPT_COMMANDS = function () {
        if (window.cssErr) return void n.WriteDebugLog("RGSC_JS_READY_TO_ACCEPT_COMMANDS", "Error", "CSS load error", n.logType.error, n.logController[globals.titleName]);
        n.WriteDllLog("RGSC_JS_READY_TO_ACCEPT_COMMANDS");
        var e = r.SetGameTitleAsync();
        e.done(function () {
            n.WriteDebugLog("RGSC_JS_READY_TO_ACCEPT_COMMANDS", "Game Title Set"), t(function () {
                setTimeout(function () {
                    n.WriteDebugLog("RGSC_JS_READY_TO_ACCEPT_COMMANDS", "DOM ready"), i.CallGameMethod("RGSC_READY_TO_ACCEPT_COMMANDS", null, "RGSC_READY_TO_ACCEPT_COMMANDS_DEMO")
                }, 10)
            })
        }).fail(function () {
            n.WriteDebugLog("RGSC_JS_READY_TO_ACCEPT_COMMANDS", "Error", "Set Game Title Failed", n.logType.error, n.logController[globals.titleName])
        })
    }, S.RGSC_JS_SIGN_IN = function (t) {
        return n.WriteDllLog("RGSC_JS_SIGN_IN", "json", t), t = e.parseJSON(t), i.isOnline() && e("#OnlineFlag").length > 0 && "False" == e("#OnlineFlag").val() && (i.setOffline(!0), void 0 != t.Local && !t.Local && void 0 != t.RockstarId) ? void r.SignInOffline(t.RockstarId) : void (void 0 != t.Email && void 0 != t.Password || l.isSteam() ? r.SignInJS(t) : null == t.Local || !t.Local || null == t.Nickname && null == t.RockstarId || r.SignInLocal(t.RockstarId, t.Nickname, !1))
    }, S.afterSignInToasts = function (e) {
        if (r.isDesktopPlatform()) {
            var t, a = "", s = "", o = 1, l = i.getText("SignedIn", "Notifications");
            e.SignedOnline || (l += " [" + i.getText("Offline", "Social") + "]"), t = '{ "Type" : "SIGNEDIN", "Count" : 1, "Data" : [ { "Id" : "SignedIn", "Name": "' + globals.account.Nickname + '", "Description" : "' + l + '" } ] }', e.NumInvitesReceieved && e.NumInvitesReceieved > 0 && (a = ', { "Type" : "FRIENDREQUESTS", "Count" : 1, "Data" : [ { "Id" : "NumInvites", "Name": "[ ' + e.NumInvitesReceieved + ' ]", "Description" : "' + i.getText("FriendRequests", "Notifications") + '" } ] }', o++), e.NumFriendsOnline && e.NumFriendsOnline > 0 && (s = ', { "Type" : "FRIENDSONLINE", "Count" : 1, "Data" : [ { "Id" : "NumFriends", "Name": "[ ' + e.NumFriendsOnline + ' ]", "Description" : "' + i.getText("FriendsOnline", "Notifications") + '" } ] }', o++), n.pubsub.trigger("gamefunctions:RGSC_JS_NOTIFICATION", '{ "Count" : ' + o + ', "Notifications" : [' + t + a + s + "] }")
        }
    }, S.isActivation = function () {
        return e("#activation").hasClass("active")
    }, S.afterSignInTidyUp = function (t) {
        if (p(t)) i.requestUiState(!1); else {
            var s = r.navigateAfterSignIn();
            s || (n.WriteDebugLog("afterSignInTidyUp", "setupEnvUtils.isScuiVisible() ; !isActivation ; !isEditProfile ; !isSignInOrSignUpOrMissingDetails ;  homeButtonEnabledOrNotPc ; !globals.areSigninCredsFromGame", i.isScuiVisible() + " " + !S.isActivation() + " " + !u() + " " + !h() + " " + f() + " " + !globals.areSigninCredsFromGame), !i.isScuiVisible() || S.isActivation() || u() || h() || !f() || globals.areSigninCredsFromGame || a.showHomepage(!0))
        }
        var o = e("#signIn");
        o.find("input[type=email], input:text, input:password").val(""), o.find("input:checkbox").removeAttr("checked");
        var c = e("#selectProfile");
        c.find("input[type=email], input:text, input:password").val(""), c.find("input:checkbox").removeAttr("checked"), l.isSteam() && n.HideNonSteamFeatures(), S.resetSignInWrapper()
    }, S.resetSignInWrapper = function () {
        e('a.btn[disabled="disabled"]:first').removeAttr("disabled"), e('a.buttonSignIn[disabled="disabled"]').removeAttr("disabled");
        try {
            e("div.buttonSignInWrapper span").spinner("stop").hide()
        } catch (t) {
        }
        e(".buttonSignInWrapper span").hide()
    }, S.RGSC_JS_FINISH_SIGN_IN = function (t) {
        n.WriteDllLog("RGSC_JS_FINISH_SIGN_IN", "json", t), n.HideInvisibleMask(), r.clearSignInRequestNote();
        var s = e.parseJSON(t);
        if (null != s) {
            if (n.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN", "jsonResult.SignedIn", s.SignedIn), "undefined" != typeof s.ProfileSaved && s.ProfileSaved === !1) {
                var o = {iss: i.isSteam(), l: globals.titlelang};
                n.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN", "ProfileSaved:false", t + "; " + JSON.stringify(o) + globals.debugLog, n.logType.error, n.logController[globals.titleName])
            }
            if (s.SignedIn) {
                if (void 0 != s.ticket && null != s.ticket && (n.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN", "jsonResult.ticket", s.ticket), c.setUserId(s.RockstarId), c.setCustomDimension(c.dimension.loginState, "true"), c.getCustomDimensionData()), void 0 != s.RockstarId && null != s.RockstarId) {
                    n.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN", "jsonResult.RockstarId", s.RockstarId), e("#editRockstarId").val(s.RockstarId);
                    var u = i.getOfflineSigninCount();
                    c.setCustomMetric(c.metric.offlineSigninCount, u)
                }
                if (void 0 == s.SignedOnline && null == s.SignedOnline) {
                    var h = i.isOnline();
                    s.Nickname && "LocalProfile1" === s.Nickname && (h = !1), s = {
                        SignedIn: !0,
                        SignedOnline: h,
                        ProfileSaved: !0,
                        AchievementsSynched: !0
                    }, n.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN", "jsonResult", JSON.stringify(s))
                }
                if (void 0 != s.SignedOnline) {
                    if (s.SignedOnline) n.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN", "Call LoadProfile", ""), n.WriteDebugLog("**RGSC_JS_FINISH_SIGN_IN", "UpdatePassword", s.UpdatePassword), l.isSteam() && S.isActivation() ? n.pubsub.trigger("steam:showActivationSteamSuccess") : !globals.isLauncher && globals.updatePassword ? r.PromptToUpdatePassword() : r.LoadProfile(); else if (s.Local) {
                        if (r.LoadProfile(), void 0 != s.CallbackData && 1 & s.CallbackData) return i.setUpSignedInOptions(s.SignedIn, s.Local), e("#lnkSkipAccount").hide(), void i.requestUiState(!1)
                    } else globals.account && (i.isOffline(!0), r.LoadProfile());
                    i.setUpSignedInOptions(s.SignedIn, s.Local)
                }
                S.afterSignInToasts(s), s.SignedOnline && (isNaN(globals.account.Age) || globals.account.Age < 1) || "" == globals.account.CountryCode ? (n.pubsub.once("RGSC_JS_UI_STATE_RESPONSE", function () {
                    n.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "RGSC_JS_UI_STATE_RESPONSE called, Visible:", globals.isScuiVisible), globals.isScuiVisible && a.ShowCountryOrDobPrompt()
                }), i.requestUiState(!0)) : (i.launcherNotifyEvent("SignIn"), S.afterSignInTidyUp(s))
            } else {
                var f = e("div.signIn");
                if (!f.find(".errorText").length && !d.isError() && !l.isSteam()) {
                    var p = globals.isNLE ? "NotFound" : "NotFoundEmail";
                    f.find(".SignInError").after('<span class="errorText">' + i.getError(p) + "</span>")
                }
                r.ShowLoginPage(), S.resetSignInWrapper()
            }
        }
        e("div.buttonSignInWrapper span").hide(), setTimeout(function () {
            n.pubsub.trigger("gamefn:signinComplete")
        }, 500), n.WriteDebugLog("RGSC_JS_FINISH_SIGN_IN", "MethodCompleted", "")
    }, S.RGSC_JS_SIGN_OUT = function (t) {
        if (n.WriteDllLog("RGSC_JS_SIGN_OUT"), t) {
            var r = e.parseJSON(t);
            if (r.DuplicateSignIn && globals.account) {
                var s = {
                    Count: 1,
                    Notifications: [{
                        Type: "DUPLICATESIGNEDOUT",
                        Count: 1,
                        Data: [{
                            Id: "DuplicateSignedOut",
                            Name: globals.account.Nickname,
                            Description: i.getText("DuplicateSignedOut", "Notifications").replace("[nickname]", globals.account.Nickname)
                        }]
                    }]
                };
                n.pubsub.trigger("gamefunctions:RGSC_JS_NOTIFICATION", JSON.stringify(s))
            }
        }
        n.WriteDebugLog("RGSC_JS_SIGN_OUT", "finished", ""), a.signOut()
    }, S.RGSC_JS_REQUEST_UI_STATE = function (t, r) {
        n.WriteDllLog("RGSC_JS_REQUEST_UI_STATE", "json", t), globals.waitingResponse = !0;
        var o = e.parseJSON(t);
        if (i.closeModalsAndHideMenu(), void 0 == globals.titleName || "" == globals.titleName) {
            m(o, u, h);
            var l = n.errorCode("1000.34"), c = i.getErrorWithCode(l),
                d = {errorCode: l, message: c.Message, supportText: c.SupportText, codeDesc: c.CodeDescription};
            return void i.showFatalError(d)
        }
        if (void 0 != o.Online && 1 == o.Online && (o.Online = !0, n.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "jsonRequest.Online", o.Online)), e(".on").removeClass("on"), !o.Online && S.isDLLUpdateAvailable()) return n.pubsub.trigger("gamefunctions:showPatchRequired"), n.WriteDebugLog("titleVersion: " + globals.titleVersion + " initialVersion: " + globals.initialVersion), void i.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible":' + (o.Visible ? "true" : "false") + " }", "RGSC_UI_STATE_RESPONSE_DEMO");
        var u = "";
        if (void 0 != o.State && (u = o.State.toUpperCase()), m(o, u, h), globals.isLauncher && "MAIN" == u) return n.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "skipped due to launcher mode"), globals.receiveMsgEnabled = !0, void i.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible":' + (o.Visible ? "true" : "false") + " }", "RGSC_UI_STATE_RESPONSE_DEMO");
        if (globals.receiveMsgEnabled = !1, i.pendingAccountCompletion() && "ACTIVATION" != u) return a.ShowDOBPrompt(), void i.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible":' + (o.Visible ? "true" : "false") + " }", "RGSC_UI_STATE_RESPONSE_DEMO");
        var h = "";
        void 0 != o.SubState && (h = o.SubState.toUpperCase()), n.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "stateValue", u);
        var f;
        switch (u) {
            case"ACCOUNTLINKING":
                o.Visible ? (i.initHeaderMenu(!0), i.setSelected(), e("#accountsLink").click()) : i.clearActivePanel();
                break;
            case"ACHIEVEMENTS":
                o.Visible ? (i.initHeaderMenu(!0), e("#awardsLink2").click()) : i.clearActivePanel();
                break;
            case"ACTIVATION":
                o.Visible && n.pubsub.trigger("gamefunctions:showActivation", o, u, h);
                break;
            case"COMMERCE":
                if (f = g(o, u, h), f === !1) return;
                break;
            case"PATCHING":
                o.Visible && n.pubsub.trigger("gamefunctions:showPatching", o, u, h);
                break;
            case"GAMEINVITES":
                o.Visible ? (i.initHeaderMenu(!0), e("#gameInvitesLink").click(), e("#friendsPanel").hasClass("localized") || (e("#friendProfilePanel, #friendsPanel").find("[rel*=localize]").localize("Social", {
                    language: globals.titlelang,
                    pathPrefix: globals.baseAssetUrl + "xml/Shared"
                }), e("#friendsPanel").addClass("localized"))) : i.clearActivePanel();
                break;
            case"MESSAGES":
                o.Visible ? (i.initHeaderMenu(!0), a.showMessagesPage(), e("#friendsPanel").hasClass("localized") || (e("#friendProfilePanel, #friendsPanel").find("[rel*=localize]").localize("Social", {
                    language: globals.titlelang,
                    pathPrefix: globals.baseAssetUrl + "xml/Shared"
                }), e("#friendsPanel").addClass("localized"))) : i.clearActivePanel();
                break;
            case"FRIENDS":
                if (o.Visible) {
                    switch (i.initHeaderMenu(!0), h) {
                        case"REQUEST":
                            a.showSocialSection("#friendInvitesLink");
                            break;
                        case"SENDINVITE":
                            void 0 != o.Data && void 0 != o.Data.RockstarId && n.pubsub.trigger("datafnfriends:SendFriendRequest", o.Data.RockstarId), a.showSocialSection();
                            break;
                        case"FRIENDSEARCH":
                            a.showSocialSection("#findPlayerLink");
                            break;
                        default:
                            a.showSocialSection()
                    }
                    e("#friendsPanel").hasClass("localized") || (e("#friendProfilePanel, #friendsPanel").find("[rel*=localize]").localize("Social", {
                        language: globals.titlelang,
                        pathPrefix: globals.baseAssetUrl + "xml/Shared"
                    }), e("#friendsPanel").addClass("localized"))
                } else i.clearActivePanel();
                break;
            case"STATS":
                o.Visible && e("#statsLink2").click();
                break;
            case"EULA":
                o.Visible && a.ShowEULA(o.Online);
                break;
            case"SIGNUP":
                if (o.Visible) {
                    if (n.WriteDebugLog("SIGNUP", "titleVersion", globals.titleVersion), n.WriteDebugLog("SIGNUP", "initialVersion", globals.initialVersion), S.isDLLUpdateAvailable()) return n.pubsub.trigger("gamefunctions:showPatchRequired"), void i.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible":' + (o.Visible ? "true" : "false") + " }", "RGSC_UI_STATE_RESPONSE_DEMO");
                    a.ShowSignup(o.Online)
                }
                break;
            case"SIGNIN":
                if (f = v(o), f === !1) return;
                break;
            case"ERROR":
                switch (e(".confirmPanelButtonWrapper").hide(), e("#confirmPanel .confirmPanelOptionsWrapper").hide(), h) {
                    case"404":
                        S.RGSC_JS_NETWORK_CHANGE('{ "Online": false }');
                        break;
                    default:
                        i.showMessagePanel(i.getError("ServerError"), "", i.getError("SorryTry"))
                }
                i.clearActivePanel(function () {
                    i.setUpLoadingPanel("#confirmPanel")
                });
                break;
            case"MAIN":
                if (i.isSignedIn()) o.Visible && a.StartUp(!o.Online); else if (f = v(o), f === !1) return;
                break;
            case"PLAYERS":
                o.Visible && (i.initHeaderMenu(!0), void 0 != o.Data && void 0 != o.Data.RockstarId && o.Data.RockstarId && s.friendProfileViewByRockstarId(o.Data.RockstarId));
                break;
            case"LAUNCHER":
                break;
            case"CREWINVITES":
                o.Visible ? (i.initHeaderMenu(!0), a.loadCrewInvites()) : i.clearActivePanel();
                break;
            default:
                var p = e("div.panel.active"), _ = e("#OnlineFlag");
                if (n.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "#OnlineFlag.val()", _.length ? _.val() : ""), n.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "jsonRequest.Visible", o.Visible), o.Visible) if (p.length > 0) {
                    var b = !1;
                    n.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "default switch $onlineFlag.length,$onlineFlag.val()", _.length + "," + _.val()), n.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "default switch jsonRequest.Online", o.Online), o.Online ? _.length > 0 && "False" == _.val() ? (S.RGSC_JS_NETWORK_CHANGE('{ "Online": true }'), b = !0) : (i.setOffline(!1), e("#confirmPanel").hide(), i.initHeaderMenu(!0)) : i.isOnline() && (_.length > 0 && "True" == _.val() ? (S.RGSC_JS_NETWORK_CHANGE('{ "Online": false }'), b = !0) : i.setOffline(!0)), b || ("statsPanel" == p.attr("id") ? (p.removeClass("active"), e("#statsButton").click()) : "achievementsPanel" == p.attr("id") && (p.removeClass("active"), e("#achievementsButton").click()))
                } else a.StartUp(!o.Online); else {
                    if (p.length > 0) switch (p.attr("id")) {
                        case"confirmPanel":
                            var y = !1;
                            if (e("#confirmPanel .buttonCancelConfirm").each(function () {
                                return e(this).is(":visible") ? (y = !0, e(this).click(), !1) : void 0
                            }), y) break;
                            if (e("#confirmPanelNo").is(":visible")) {
                                e("#confirmPanelNo").click();
                                break
                            }
                            if (e("#confirmPanelOk").is(":visible")) {
                                e("#confirmPanelOk").click();
                                break
                            }
                            break;
                        case"messagePanel":
                            if (e("#buttonCancelMessage").is(":visible")) {
                                e("#buttonCancelMessage").click();
                                break
                            }
                            if (e("#buttonCloseMessage").is(":visible")) {
                                e("#buttonCloseMessage").click();
                                break
                            }
                            break;
                        case"activation":
                            if (p.hasClass("redemption")) break;
                            if (e("#buttonCancel").is(":visible")) {
                                e("#activation").removeClass("pending"), e("#buttonCancel").click();
                                break
                            }
                        case"serverError":
                            e("#activation").hasClass("pending") && (e("#activation").removeClass("pending"), e("#buttonCancel").is(":visible") && e("#buttonCancel").click())
                    } else i.setOffline(!o.Online);
                    r = !0, i.clearActivePanel(function () {
                        i.requestUiState(!1)
                    })
                }
        }
        r || i.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible":' + (o.Visible ? "true" : "false") + " }", "RGSC_UI_STATE_RESPONSE_DEMO")
    }, S.RGSC_JS_UI_STATE_RESPONSE = function (t) {
        n.WriteDllLog("RGSC_JS_UI_STATE_RESPONSE", "jsonResponse", t);
        var a = e.parseJSON(t);
        null != a && void 0 != a.Visible && (globals.isScuiVisible = a.Visible, a.Visible || i.hideUI(), i.isHeaderRequired() ? i.showHeaderMenu() : i.hideHeaderMenu()), n.pubsub.trigger("RGSC_JS_UI_STATE_RESPONSE")
    }, S.RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED = function () {
        n.WriteDllLog("RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED", "", "")
    }, S.RGSC_JS_NETWORK_CHANGE = function (t) {
        n.WriteDllLog("RGSC_JS_NETWORK_CHANGE", "jsonString", t);
        var t = e.parseJSON(t), r = e("#confirmPanel");
        r.find(".confirmPanelButtonWrapper").hide(), r.find(".confirmPanelOptionsWrapper").hide(), t.Online ? (r.find("#confirmPanelTitle").html(i.getError("ConnectionUpdate")), r.find("#confirmPanelText").html(i.getError("NetworkDetected")), r.find("#confirmPanelTextLong").html("<p>" + i.getError("OfflineBut") + "</p>"), r.find("#confirmPanelYes").unbind("click"), r.find("#confirmPanelYes").click(function () {
            return i.requestUiState(!0), !1
        }), r.find("#confirmPanelNo").unbind("click"), r.find("#confirmPanelNo").click(function () {
            return e("#confirmPanel").hide(), e("div.panel.active").show(), !1
        }), i.isOnline(!0), r.find("#confirmPanelButtonWrapperYesNo").show()) : (i.initHeaderMenu(!1), r.find("#confirmPanelTitle").html(i.getError("ConnectLost")), r.find("#confirmPanelText").html(i.getError("UnableConnect")), r.find("#confirmPanelTextLong").html(i.getError("DisconnectRefresh")), r.find("#confirmPanelOk").unbind("click"), r.find("#confirmPanelOk").click(function () {
            return i.setOffline(!0), e("div.panel.active").length > 0 ? (n.WriteDebugLog("RGSC_JS_NETWORK_CHANGE", "$(div.panel.active).id", e("div.panel.active").attr("id")), e("div.panel.active").show()) : a.StartUp(!0), e("#confirmPanel").hide(), i.initHeaderMenu(!0), !1
        }), i.isOffline(!0), e("#confirmPanelButtonWrapperOk").show()), e("div.panel.active").hide(), r.show()
    }, S.Retry_Connection = function (t) {
        var n = e("#messagePanel");
        n.find("[rel*=localize]").localize("Register", {
            language: globals.titlelang,
            pathPrefix: globals.baseAssetUrl + "xml/Shared"
        }), i.showMessagePanel(i.getError("NoCon"), i.getError("UnableConnect"), t), e("#buttonCancelMessage").hide(), n.find(".closeCurrentPanel").unbind("click").click(function () {
            e("#activationCode").attr("disabled") ? i.requestUiState(!0) : globals.isLauncher ? (o.ActivateCode(3), i.clearActivePanel(function () {
                a.signOut()
            })) : o.ActivateCode(3)
        })
    }, S.RGSC_JS_FINISH_MODIFY_PROFILE = function (t) {
        n.WriteDllLog("RGSC_JS_FINISH_MODIFY_PROFILE", "json", t), e("#editProfileButtonWrapper span").hide(), r.ChangeSelectedAvatar("#editAvatar", "signedInUserAvatar"), r.ChangeSelectedAvatar("#editAvatar", "imgDeleteProfile"), e("#editOldPassword").val(""), e("#editNewPassword").val(""), e("#editConfNewPassword").val(""), e("#editEmail").val(""), e("#editEmailPassword").val(""), e("#editName").val(""), r.LoadProfile()
    }, S.isDLLUpdateAvailable = function () {
        return globals.titleVersion <= globals.initialVersion
    }, S.RGSC_JS_RECEIVE_MESSAGE = function (t) {
        if (n.WriteDllLog("RGSC_JS_RECEIVE_MESSAGE", "messageText", t), !globals.receiveMsgEnabled) return void n.WriteDebugLog("RGSC_JS_RECEIVE_MESSAGE", "ignored", t);
        var i = e.parseJSON(t), r = i.Commands;
        r.forEach(function (e) {
            a.launcherCommand(e.Command, e.Parameter)
        })
    }, S.RGSC_JS_CHECKOUT_URL_REQUEST_RESULT = function (t) {
        n.WriteDllLog("RGSC_JS_CHECKOUT_URL_REQUEST_RESULT", "jsonResponse", t);
        var a = e.parseJSON(t);
        if (null == a || !a.Result || void 0 == a.Url) {
            n.WriteDebugLog("RGSC_JS_CHECKOUT_URL_REQUEST_RESULT", "failed", JSON.stringify(t), n.logType.error, n.logController[globals.titleName]);
            var r = n.errorCode("7000.64"), s = i.getErrorWithCode(r, "RGSC_JS_CHECKOUT_URL_REQUEST_RESULT").Message;
            return void i.showGenericFatalError(r, s)
        }
        n.pubsub.trigger("gamefunctions:checkoutUrl", a)
    }, S.RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE = function (t) {
        n.WriteDllLog("RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE", "jsonResponse", t);
        var i = e.parseJSON(t);
        i && i.Success && i.Players && s.RenderFriendsListPresence(i)
    }, S.RGSC_JS_SET_INPUT_METHOD = function (t) {
        n.WriteDllLog("RGSC_JS_SET_INPUT_METHOD", "jsonString", t);
        var a = e.parseJSON(t);
        void 0 != a && void 0 != a.InputMethod && (globals.inputMethod = a.InputMethod, i.inGamePadMode() || n.pubsub.trigger("virtualKeyboard", !1), n.pubsub.trigger("setCloseInstructions"))
    }, S.RGSC_JS_SHOW_VIRTUAL_KEYBOARD = function () {
        n.WriteDllLog("RGSC_JS_SHOW_VIRTUAL_KEYBOARD"), n.pubsub.trigger("virtualKeyboard", !0)
    }, S.RGSC_JS_VIRTUAL_KEYBOARD_RESULT = function (t) {
        n.WriteDllLog("RGSC_JS_VIRTUAL_KEYBOARD_RESULT", "jsonstring", t);
        var i = e.parseJSON(t), a = i.Result, r = e(document.activeElement);
        (r.is("input") || r.is("textarea")) && r.val(a), n.pubsub.trigger("gamefn:keyboardResult", r)
    }, S.RGSC_JS_PRESENCE_MESSAGE_RECEIVED = function (t) {
        if (n.WriteDllLog("RGSC_JS_PRESENCE_MESSAGE_RECEIVED", "presenceJson", JSON.stringify(t)), t) {
            var i = e.parseJSON(t), s = {Count: 0, Notifications: []};
            for (var o in i) {
                var l = o.toUpperCase(), c = i[o];
                switch (l) {
                    case"ROS.CLAN.NOTIFY":
                        var d, u = c.type.toUpperCase();
                        d = "JOINREQUEST" === u ? c.clanid : c, r.GetCrewById(d, function (t) {
                            var i = e(t), a = "true" == i.find("Status").text();
                            if (a) {
                                var r = i.find("CrewName").text();
                                n.pubsub.trigger("gamefunctions:RGSC_JS_NOTIFICATION", JSON.stringify({
                                    Count: 1,
                                    Notifications: [{Type: u, Data: [{cn: r}]}]
                                }))
                            }
                        });
                        break;
                    case"ROS.CLAN.INVITE":
                        r.ClearCrewCache(c.ci), n.pubsub.trigger("gamefunctions:RGSC_JS_NOTIFICATION", JSON.stringify({
                            Count: 1,
                            Notifications: [{Type: l, Data: [{cn: c.cn}]}]
                        }));
                        break;
                    case"ROS.CLAN.MEMBER.PROMOTED":
                        var h = function (t) {
                            var i = e(t), a = "true" == i.find("Status").text();
                            if (a) {
                                r.ClearCrewCache(c.clanid);
                                var s = i.find("CrewName").text();
                                n.pubsub.trigger("gamefunctions:RGSC_JS_NOTIFICATION", JSON.stringify({
                                    Count: 1,
                                    Notifications: [{Type: l, Data: [{cn: s}]}]
                                }))
                            }
                        };
                        r.GetCrewById(c.clanid, h);
                        break;
                    case"ROS.CLAN.MEMBER.DEMOTED":
                        r.ClearCrewCache(c.clanid);
                        break;
                    case"ROS.CLAN.JOINED":
                    case"ROS.CLAN.LEFT":
                    case"ROS.CLAN.PRIMARY.CHANGED":
                        r.ClearCrewCache(c);
                        break;
                    case"ROS.ACCOUNT.LINK":
                        a.UpdateAccountLinking("scui" == c.r, c.n, c.s)
                }
            }
            s.Count > 0 && n.pubsub.trigger("gamefunctions:RGSC_JS_NOTIFICATION", JSON.stringify(s))
        }
    }, S.RGSC_JS_REFRESH_STEAM_TICKET_RESULT = function (t) {
        if (n.WriteDllLog("RGSC_JS_REFRESH_STEAM_TICKET_RESULT", "jsonstring", t), i.isSignedIn()) return void n.WriteDebugLog("RGSC_JS_REFRESH_STEAM_TICKET_RESULT", "aborted", "user is signed in already");
        var a = e.parseJSON(t);
        "undefined" != typeof a && "undefined" != typeof a.Ticket && a.Ticket.length && (globals.steamAuthTicket = a.Ticket, r.SignInJS())
    }, S.RGSC_JS_INSTALL_PRODUCT_RESULT = function (t) {
        n.WriteDllLog("RGSC_JS_INSTALL_PRODUCT_RESULT", "jsonstring", t);
        var a = e.parseJSON(t);
        if ("undefined" == typeof a || !a.Result) {
            var s = n.errorCode("7000.90"), o = i.getErrorWithCode(s);
            r.ShowErrorModal(s, o.Message, void 0, o.SupportText, o.CodeDescription)
        }
    };
    var C = [];
    return S.init = function () {
        window.RGSC_JS_READY_TO_ACCEPT_COMMANDS = S.RGSC_JS_READY_TO_ACCEPT_COMMANDS, window.RGSC_JS_SIGN_IN = S.RGSC_JS_SIGN_IN, window.RGSC_JS_FINISH_SIGN_IN = S.RGSC_JS_FINISH_SIGN_IN, window.RGSC_JS_SIGN_OUT = S.RGSC_JS_SIGN_OUT, window.RGSC_JS_REQUEST_UI_STATE = S.RGSC_JS_REQUEST_UI_STATE, window.RGSC_JS_UI_STATE_RESPONSE = S.RGSC_JS_UI_STATE_RESPONSE, window.RGSC_JS_NETWORK_CHANGE = S.RGSC_JS_NETWORK_CHANGE, window.Retry_Connection = S.Retry_Connection, window.RGSC_JS_FINISH_MODIFY_PROFILE = S.RGSC_JS_FINISH_MODIFY_PROFILE, window.RGSC_JS_RECEIVE_MESSAGE = S.RGSC_JS_RECEIVE_MESSAGE, window.RGSC_JS_CHECKOUT_URL_REQUEST_RESULT = S.RGSC_JS_CHECKOUT_URL_REQUEST_RESULT, window.RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE = S.RGSC_JS_PLAYER_MULTIPLAYER_PRESENCE_INFO_RESPONSE, window.RGSC_JS_SET_INPUT_METHOD = S.RGSC_JS_SET_INPUT_METHOD, window.RGSC_JS_SHOW_VIRTUAL_KEYBOARD = S.RGSC_JS_SHOW_VIRTUAL_KEYBOARD, window.RGSC_JS_PRESENCE_MESSAGE_RECEIVED = S.RGSC_JS_PRESENCE_MESSAGE_RECEIVED, window.RGSC_JS_VIRTUAL_KEYBOARD_RESULT = S.RGSC_JS_VIRTUAL_KEYBOARD_RESULT, window.RGSC_JS_REFRESH_STEAM_TICKET_RESULT = S.RGSC_JS_REFRESH_STEAM_TICKET_RESULT, window.RGSC_JS_INSTALL_PRODUCT_RESULT = S.RGSC_JS_INSTALL_PRODUCT_RESULT, window.RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED = S.RGSC_JS_INTERNET_CONNECTED_STATE_CHANGED, _(), n.pubsub.on("callGameMethodAsyncStarted", b), void 0 != globals.awaitingJsLoad && globals.awaitingJsLoad && (globals.awaitingJsLoad = !1, S.RGSC_JS_READY_TO_ACCEPT_COMMANDS()), window.RGSC_JS_PING = S.RGSC_JS_PING
    }, S.init(), S
}),define("common/jquery.gamefunctions.activation", ["jquery", "underscore", "utils", "jquery.setup.environment", "jquery.setup.environment.utils", "common/jquery.datafunctions", "common/jquery.datafunctions.friends", "common/gamefunctions", "common/formvalidation", "common/jquery.datafunctions.activation", "common/steam", "common/analyticsManager", "spinner"], function (t, n, i, a, r, s, o, l, c, d, u, h) {
    function f() {
        var e = "";
        return null != Y.account && (void 0 != Y.account.Nickname && Y.account.Nickname.length > 0 ? e = Y.account.Nickname : void 0 != Y.account.Email && Y.account.Email.length > 0 && (e = Y.account.Email)), e
    }

    function p(e) {
        var n = e.find("#activationCode");
        return n.val() ? void n.attr("disabled", "disabled").show() : (n.removeAttr("disabled").show(), n.unbind("mouseup").bind("mouseup", function () {
            var e = window.getSelection();
            if (e) {
                var t = this.selectionEnd - this.selectionStart;
                t > 4 && t != this.value.length && (this.selectionEnd = this.selectionStart + 4)
            }
        }), n.unbind("keyup").bind("keyup", function (e) {
            var n = t(this), a = i.getCaretPosition(this), r = n.val(), s = i.areChunkedVoucherCodesEnabled(),
                o = /[^0-9A-Za-z]/g;
            if (s || (o = /[^0-9A-Za-z\-]/g), e.keyCode >= 48 && e.keyCode <= 57 || e.keyCode >= 65 && e.keyCode <= 90 || e.keyCode >= 96 && e.keyCode <= 105 || !s && 189 == e.keyCode) {
                var l = r.replace(o, "");
                if (r = l, s) {
                    var c = l.replace(/\s+/g, "").chunk(4);
                    r = c.join("-"), r = r.substr(0, 19), 4 == c.length ? 1 == c[3].length && a > 14 ? i.setCaretPosition(this, a + 1) : i.setCaretPosition(this, a) : i.setCaretPosition(this, a + c.length % 4)
                }
                r = r.substr(0, 50), n.val(r.toUpperCase())
            }
        }), n.unbind("paste").bind("paste", function () {
            var e = t(this);
            e.val(""), setTimeout(function () {
                var t = e.val();
                i.areChunkedVoucherCodesEnabled() && (t = t.replace(/-/g, "").replace(/\s+/g, "").chunk(4).join("-"), t = t.substr(0, 19)), t = t.substr(0, 50), e.val(t.toUpperCase())
            }, 100)
        }), void n.unbind("keydown").bind("keydown", function (e) {
            i.areChunkedVoucherCodesEnabled() && 189 == e.keyCode && e.preventDefault()
        }))
    }

    function m(e) {
        return void 0 != e && void 0 != e.Data && void 0 != e.Data.Referrer
    }

    function g(e, n, s) {
        e.find("#buttonCancel").show(), e.find("#buttonCancel").unbind("click"), e.find("#buttonCancel").click(m(s) ? function () {
            l.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": ' + ("offline" !== i.getUrlVars("status")) + ', "State": "COMMERCE", "Data" : { "Url" : "" } }')
        } : "REDEMPTIONCODE" == n ? function () {
            d.RedeemCode(2), r.clearActivePanel(function () {
                r.requestUiState(!1)
            })
        } : Y.RosTitleVersion < 11 ? function () {
            t("#legalActivation input:checkbox").attr("checked", !1), d.ActivateCode(3), r.clearActivePanel(function () {
                r.requestUiState(!1)
            })
        } : function () {
            t("#legalActivation input:checkbox").attr("checked", !1), d.ActivateCode(3), r.clearActivePanel(function () {
                a.signOut()
            })
        })
    }

    function v(e, n) {
        e.find("#buttonActivate").show(), "REDEMPTIONCODE" == n ? e.find("#buttonActivate").unbind("click").click(function () {
            c.ActivationCodeValidation(!0) && (t(this).attr("disabled") || (t(this).attr("disabled", "disabled"), t("#spanActivate").show(), d.RedeemCode(1)))
        }) : "MAIN" == n && e.find("#buttonActivate, #buttonActivateYes, #buttonActivateOk").unbind("click").click(function () {
            c.ActivationCodeValidation() && (t(this).attr("disabled") || (t(this).attr("disabled", "disabled"), t("#spanActivate").show(), d.ActivateCode(1)))
        })
    }

    function _(e, n) {
        e.find("#buttonActivate").hide(), e.find("#buttonCheck").show(), t("#activationWrapper").removeData("voucherContentsRequested"), "REDEMPTIONCODE" == n ? (e.find("#buttonActivate, #buttonCheck").unbind("click").click(b), e.find("#buttonActivate, #buttonCheck").unbind("keydown").keydown(function (e) {
            13 == e.which && t(this).click()
        })) : "MAIN" == n && (e.find("#buttonActivate, #buttonActivateOk, #buttonCheck").unbind("click").click(function (e) {
            b(e, !0)
        }), e.find("#buttonActivate, #buttonActivateOk, #buttonCheck").unbind("keydown").keydown(function (e) {
            13 == e.which && t(this).click()
        }))
    }

    function b(e, n) {
        if (c.ActivationCodeValidation(!0, n)) {
            var i = t(e.currentTarget);
            if (!i.attr("disabled")) {
                i.attr("disabled", "disabled"), t("#spanActivate").show();
                var a = t("#activationWrapper").data("voucherContentsRequested");
                void 0 != a && a.length && a == t("#activationCode").val() ? d.ConsumeVoucher(n) : d.ShowVoucherContents(n)
            }
        }
    }

    function y(e) {
        e.find("#buttonQuitGame").show(), e.find("#buttonQuitGame").unbind("click"), e.find("#buttonQuitGame").click(function () {
            d.ActivateCode(4), r.clearActivePanel(function () {
                r.quitGame(), r.requestUiState(!1)
            })
        }), e.find("#buttonQuitGame").unbind("keydown"), e.find("#buttonQuitGame").keydown(function (n) {
            var i = n.keyCode || n.which;
            9 == i && (n.preventDefault(), e.find("#activationCode").focus()), 13 == i && t(this).click()
        })
    }

    function w(e, t) {
        r.showMessagePanel(r.getText("LicenseCorrupt", "Activation"), "", r.getText("i" + t.Data.Message, "Activation")), e.find("#buttonCancelMessage, #buttonActivateYes, #buttonActivateOk, #buttonCheck").hide(), e.find("#messagePanel .closeCurrentPanel").unbind("click").show().click(function () {
            r.clearActivePanel(function () {
                r.CallGameMethod("RGSC_CORRUPT_LICENSE_DIALOG_RESPONSE", null, "RGSC_UI_STATE_RESPONSE_DEMO")
            })
        })
    }

    function S(n, i) {
        n.find("#buttonActivateYes, #buttonActivateOk, #buttonCheck").hide(), n.find("#requestCode").val(i.Data.RequestCode), n.find(".requestCode").show(), n.find(".title").text(r.getText("i15", "Activation")), n.find(".message").text(r.getText("i" + i.Data.Message, "Activation")), n.find("#buttonActivate").show(), n.find("#buttonActivate").unbind("click"), n.find("#buttonActivate").click(function () {
            c.ActivationCodeValidation() && (t(this).attr("disabled") || (t(this).attr("disabled", "disabled"), t("#spanActivate").show(), d.ActivateCodeRecovery(1)))
        }), n.find("#buttonCancel").unbind("keydown"), n.find("#buttonCancel").keydown(function () {
            13 == e.which && t(this).click()
        }), n.find("#buttonCancel").unbind("click"), n.find("#buttonCancel").click(function () {
            d.ActivateCodeRecovery(3), r.clearActivePanel(function () {
                r.requestUiState(!1)
            })
        })
    }

    function C(e, n) {
        e.find("#buttonActivateYes, #buttonActivateOk, #buttonCheck").hide(), e.find("#activationCode").val(n.Data.CurrentSerialNumber), e.find(".title").text("License Expiration"), e.find(".message").text(r.getText("i" + n.Data.Message, "Activation")), e.find("#buttonActivate").show(), e.find("#buttonActivate").unbind("click"), e.find("#buttonActivate").click(function () {
            c.ActivationCodeValidation() && (t(this).attr("disabled") || (t(this).attr("disabled", "disabled"), t("#spanActivate").show(), d.ActivateCodeExpiration(1)))
        }), e.find("#buttonCancel").unbind("click"), e.find("#buttonCancel").click(function () {
            d.ActivateCodeExpiration(3), r.clearActivePanel(function () {
                r.requestUiState(!1)
            })
        })
    }

    function k(e, t) {
        var i = "", a = ", ", r = "", s = "";
        t && (i = "<li>", a = "</li>", r = "<ul>", s = "</ul>");
        var o;
        return o = "string" == typeof e ? i + e + a : n.reduce(e, function (e, t) {
            if (L(t)) {
                var n = t.Count;
                "undefined" == typeof n && (n = 1);
                var r = t.FriendlyName;
                n > 1 && (r = n + "x " + r), e += i + r + a
            }
            return e
        }, ""), o.length && (t || (o = o.substr(0, o.length - 2)), o = r + o + s), o
    }

    function T(e) {
        var t = e.Offers, a = e.EntitlementsGranted, r = [];
        if (null === t || void 0 === t || !t.length) return "";
        for (var s = 0, o = t.length; o > s; s++) for (var l = t[s].Entitlements, c = 0, d = l.length; d > c; c++) {
            var u = l[c];
            if (i.WriteDebugLog("getEntitlementsNotGrantedString", "friendlyName", u.FriendlyName), L(u)) {
                var h = n.filter(a, function (e) {
                    return e.EntitlementCode === u.EntitlementCode
                });
                h.length || r.push(u)
            }
        }
        return k(r, !0)
    }

    function L(e) {
        return "undefined" == typeof e || "undefined" == typeof e.Visible || e.Visible
    }

    function E(e) {
        return e && e.replace(/ /g, "&nbsp;")
    }

    function M(e) {
        var t = "", n = e.Offers;
        if (void 0 == n || 0 == n.length) return t;
        for (var i = 0, a = n.length; a > i; i++) t += n[i].OfferCode + ", ";
        return t.replace(/,\s*$/, "")
    }

    function I() {
    }

    function P(e, n) {
        if (t("#activationWrapper").removeData("voucherContentsRequested"), "undefined" == typeof e || "undefined" == typeof e.ErrorStringId) {
            var i = r.getErrorWithCode(n);
            return d.showActivationError(i.Message, i.CodeDescription), void t("#activationCode").data("error", i.Message)
        }
        var a;
        a = isNaN(e.ErrorStringId) ? r.getText(e.ErrorStringId, "Activation") : r.getText("i" + e.ErrorStringId, "Activation"), 0 === a.length && (a = r.getError("ErrorActivate")), t("#activationCode").data("error", a), d.showActivationError(a)
    }

    function D() {
        return t("#activation").hasClass("redemption")
    }

    function A(e, n, i) {
        var a = e.length ? k(i.EntitlementsGranted, !0) : "", s = T(i), o = t("#activation"), l = n.split(","),
            c = l.length;
        if (c > 0) {
            var d = r.getText("ThisCodeUnlocks", "Activation");
            o.find("#activationVoucherContents").append('<span class="unlock">' + d + "<ul></ul></span>");
            for (var u = 0; c > u; u++) o.find("#activationVoucherContents ul").append("<li>" + l[u] + "</li>")
        }
        if (o.find("#activationVoucherContents").append('<span class="unlock">' + e + a + "</span>"), s.length) {
            var h = r.getText("NotGrantedTitle", "Activation");
            a.length || (h = r.getText("NotGrantedTitle2", "Activation")), o.find("#activationVoucherContents").append('<span class="notGranted">' + h + s + "</span>")
        }
        o.find("#activationVoucherContents").show(), o.find("#activationCodeEntry").hide(), o.find("#buttonCancel").hide();
        var f = o.find("#buttonBackToCodeEntry");
        f.unbind("keyup").click(function (e) {
            13 == e.which && t(this).visible() && t(this).click()
        }), f.unbind("click").click(function () {
            R()
        }), f.show(), t("#activationContent").antiscroll()
    }

    function R() {
        var e = t("#activation"), n = e.find("#activationVoucherContents");
        n.empty(), n.hide(), e.find("#buttonActivate").hide(), e.find("#buttonBackToCodeEntry").hide(), e.find("#activationCodeEntry").show(), e.find("#buttonCheck").show(), e.find("#buttonCancel").show(), t("#activationWrapper").removeData("voucherContentsRequested"), t("#activationContent").antiscroll()
    }

    function x(e) {
        var t = "";
        if (null === e.Offers || !e.Offers.length) return t;
        if (!(e.Offers.length > 1)) return e.Offers[0].FriendlyName;
        for (var n = 0, i = e.Offers.length; i > n; n++) t += e.Offers[n].FriendlyName + ", ";
        return t.length > 2 ? t.substr(0, t.length - 2) : t
    }

    function N(e) {
        var n = t("#activation").data("offer");
        return void 0 != n && n.length || (n = k(e.EntitlementsGranted)), void 0 != n && n.length || (n = "Code"), n
    }

    function O(e, n) {
        var i = "";
        if (void 0 != e.ErrorStringId && (i = isNaN(e.ErrorStringId) ? r.getText(e.ErrorStringId, "Activation").replace("[content name]", n) : r.getText("i" + e.ErrorStringId, "Activation").replace("[content name]", n)), 0 == i.length) {
            var a = 35;
            t("#activation").data("isActivation") || (a = 36), i = r.getText("i" + a, "Activation").replace("[content name]", n)
        }
        return i
    }

    function F(e, n, i) {
        if (t("#activation").data("isActivation")) if (void 0 != e.ErrorStringId && e.ErrorStringId > 41 && e.ErrorStringId < 45) r.showMessagePanel(r.getText("Success", "Register"), "&nbsp;", n); else if (void 0 != e.ContentId && 1 == e.ContentId) r.showMessagePanel(r.getText("i35", "Activation"), "&nbsp;", r.getText("YouHaveDLC", "Activation").replace("[content name]", i)); else {
            var a = U;
            r.showMessagePanel(r.getText("i35", "Activation"), "&nbsp;", r.getText("i21", "Activation").replace("[content name]", i), a)
        } else r.showMessagePanel(r.getText("CodeRedemption", "Activation"), "&nbsp;", n, function (e) {
            e.preventDefault(), t("#storeButton").click()
        })
    }

    function U(e) {
        e && e.preventDefault(), t("#activation").data("isActivation") ? (d.ActivateCode(1), r.launcherNotifyEvent("Activate")) : d.RedeemCode(1), r.clearActivePanel(function () {
            r.requestUiState(!1)
        })
    }

    var G = {};
    "undefined" == typeof window.globals && (window.globals = {});
    var Y = window.globals;
    return G.showActivation = function (e, n, s) {
        if (i.WriteDebugLog("showActivation", "jsonRequest, stateValue, subStateValue", JSON.stringify(e) + "," + n + "," + s), !r.isSignedIn()) return void i.pubsub.trigger("datafunctions:ShowSignin");
        if (m(e) || r.initHeaderMenu(!1), !e.Online || r.isOffline() || t("#OnlineFlag").length > 0 && "False" == t("#OnlineFlag").val()) return l.Retry_Connection(r.getText("OnlineRequired", "Activation")), void setTimeout(function () {
            r.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible": true }', "RGSC_UI_STATE_RESPONSE_DEMO")
        }, 300);
        var o = t("#activation");
        o.addClass("pending"), R(), o.hasClass("localized") || (o.find("[rel*=localize]").localize("Activation", {
            language: Y.titlelang,
            pathPrefix: Y.baseAssetUrl + "xml/Shared"
        }), o.addClass("localized"));
        var u = !0;
        o.find("#lblActivation").html(""), o.find("#activationDesc").html(""), d.resetActivationForm(), o.find("#ContentId").val(void 0 != e.Data && void 0 != e.Data.ContentId ? e.Data.ContentId : ""), o.find(".requestCode").hide(), o.find("#buttonDeactivate").hide(), c.clearErrorClasses(), t("div.errorText:not(.emailerror,.nickerror), div.errorCode").remove();
        var b = o.find("#activationCode"), k = b.data("error");
        switch ("undefined" != typeof k && (i.WriteDebugLog("showActivation", "displaying previous error", k), d.showActivationError(k), b.removeData("error")), s) {
            case"REDEMPTIONCODE":
            case"MAIN":
                var T = f();
                if (b.val(void 0 != e.Data && void 0 != e.Data.CurrentSerialNumber ? e.Data.CurrentSerialNumber : ""), "MAIN" == s) {
                    var L = r.getText("i20", "Activation");
                    if (o.find(".title").text(L), o.find("#buttonActivate").text(L), Y.RosTitleVersion >= 11) {
                        if (o.find("label[for=activationCode]").html(r.getText("ActivationUser", "Activation").replace("[Nickname]", "<span class='purple'>" + T + "</span>")), o.find("#activationDesc").html(r.getText("ActivationUserDesc", "Activation").replace("[Nickname]", "<span>" + T + "</span>") + t("#activationDesc").text()), o.find(".message").html(r.getText("i19", "Activation").replace("[content name]", "<span class='purple'>" + E(Y.titleDisplayName) + "</span>")), "gta5" == Y.titleName) {
                            o.find("#legalText1").text(r.getText("Gta5LegalText", "General", "", "gta5")).show();
                            var M = o.find("#legalActivation");
                            M.find("#legalText2").text(r.getText("Gta5LegalCheckbox", "General", "", "gta5")).show(), M.show()
                        }
                    } else o.find("#activationDesc").html(r.getText("ActivationDesc", "Activation").replace("[content name]", "<span class='purple'>" + E(Y.titleDisplayName) + "</span>").replace("[Nickname]", "<span class='purple'>" + T + "</span>"));
                    h.trackPage("/Activation/CodeEntry")
                } else "REDEMPTIONCODE" == s && (o.find(".title").text(r.getText("CodeRedemption", "Activation")), o.find("label[for=activationCode]").text(r.getText("RedemptionCode", "Activation")), o.find("#activationDesc").html(r.getText("RedemptionUserDesc", "Activation").replace("[Nickname]", "<span>" + T + "</span>") + t("#activationDesc").text()), o.find("#buttonActivate").text(r.getText("Redeem", "Activation")), o.find(".message").html(r.getText("i41", "Activation").replace("[content name]", "<span class='purple'>" + E(Y.titleDisplayName) + "</span>")), "gta5" == Y.titleName && (o.find(".legal").hide(), o.find("#legalActivation").hide(), o.find("#redemptionCodeLegal").html(r.getText("RedemptionCodeLegal", "Store")).show()), o.addClass("redemption"), h.trackPage("/Store/CodeRedemption"));
                o.find("#activationWrapper a").hide(), void 0 != e.Data && void 0 != e.Data.IsAlreadyActivated && e.Data.IsAlreadyActivated ? (b.attr("disabled", "disabled").hide(), o.find("label[for=activationCode]").hide(), o.find(".message").text(r.getText("YouHaveDLC", "Activation"))) : (p(o), void 0 != e.Data && void 0 != e.Data.ContentId && 1 == e.Data.ContentId ? (o.find(".message").text(r.getText("ActivateDLC", "Activation").replace("[content name]", E(Y.titleDisplayName))), o.find("#activationDesc").html(r.getText("InstructionDLC", "Activation").replace("[content name]", E(Y.titleDisplayName)))) : (o.find("label[for=activationCode]").show(), void 0 != e.Data && void 0 != e.Data.Message && o.find(".message").html(r.getText("i" + e.Data.Message, "Activation").replace("[content name]", "<span class='purple'>" + E(Y.titleDisplayName) + "</span>").replace("[Nickname]", "<span class='purple'>" + T + "</span>"))), i.isEntitlementsV2Enabled() ? _(o, s) : v(o, s)), Y.RosTitleVersion >= 11 && t("div#headerLogin a").removeAttr("disabled").removeClass("dimLayer"), g(o, s, e), "MAIN" == s && Y.RosTitleVersion >= 11 && y(o);
                break;
            case"LICENSECORRUPTED":
                u = !1, w(o, e);
                break;
            case"LICENSERECOVERY":
                Y.RosTitleVersion >= 11 && y(o), S(o, e);
                break;
            case"LICENSEEXPIRATION":
                C(o, e)
        }
        return r.pendingAccountCompletion() ? (a.ShowDOBPrompt(), void r.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible":' + (e.Visible ? "true" : "false") + " }", "RGSC_UI_STATE_RESPONSE_DEMO")) : void (u && !o.hasClass("active") && (i.areChunkedVoucherCodesEnabled() || b.attr("placeholder", ""), r.clearActivePanel(function () {
            r.setUpLoadingPanel("#activation", function () {
                t("#activationContent").antiscroll(), b.focus()
            })
        })))
    }, G.showActivationSteamSuccess = function () {
        if (l.isActivation()) {
            var e = t("#activation");
            d.resetActivationForm(), e.find("#buttonActivate, #buttonDeactivate, #buttonQuitGame, #buttonCheck, #buttonCancel").hide(), e.find(".requestCode, #spanActivate, #spanDeactivate").hide(), r.setUpLoadingPanel("#activation");
            var n = r.getText("i43", "Activation");
            e.find(".message").text(n), r.initHeaderMenu(!0), e.find("#buttonActivateOk").off("click").on("click", function () {
                r.clearActivePanel(function () {
                    r.requestUiState(!1)
                })
            }), e.find("#buttonActivateOk").show()
        }
    }, G.showActivationSteamLink = function (e) {
        if (i.WriteDebugLog("showActivationSteamLink", "signedinJSON", JSON.stringify(e)), r.showHeaderMenu(), r.initHeaderMenu(!1), r.isOffline() || t("#OnlineFlag").length > 0 && "False" == t("#OnlineFlag").val()) return l.Retry_Connection(r.getText("OnlineRequired", "Activation")), void setTimeout(function () {
            r.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible": true }', "RGSC_UI_STATE_RESPONSE_DEMO")
        }, 300);
        var n = t("#activation");
        if (n.addClass("pending"), r.pendingAccountCompletion()) return a.ShowDOBPrompt(), void r.CallGameMethod("RGSC_UI_STATE_RESPONSE", '{ "Visible": true }', "RGSC_UI_STATE_RESPONSE_DEMO");
        n.hasClass("localized") || n.find("[rel*=localize]").localize("Activation", {
            language: Y.titlelang,
            pathPrefix: Y.baseAssetUrl + "xml/Shared"
        }), d.resetActivationForm(), n.find("#lblActivation, #activationDesc").html(""), n.find("#buttonDeactivate, #buttonQuitGame, #buttonCheck, .requestCode").hide(), n.find(".title").text(r.getText("SteamSetup", "Activation")), n.find("#activationCode").attr("disabled", "disabled").hide(), n.find("label[for=activationCode]").hide(), n.find("#buttonActivate").hide(), n.find("#buttonActivateOk").show(), c.clearErrorClasses(), t("div.errorText:not(.emailerror,.nickerror), div.errorCode").remove();
        var s = "";
        null != Y.account && (void 0 != Y.account.Nickname && Y.account.Nickname.length > 0 ? s = Y.account.Nickname : void 0 != Y.account.Email && Y.account.Email.length > 0 && (s = Y.account.Email)), n.find(".message").html(r.getText("i42", "Activation").replace("[content name]", "<span class='purple'>" + E(Y.titleDisplayName) + "</span>").replace("[Nickname]", "<span class='purple'>" + s + "</span>").replace(new RegExp(/\n/g), "<br />")), n.find("#buttonActivateOk").unbind("click").click(function () {
            t(this).attr("disabled") || (t(this).attr("disabled", "disabled"), n.find("#buttonCancel").attr("disabled", "disabled"), t("#spanActivate").show(), u.BindSteamAccount(Y.steamAppId, Y.steamAuthTicket, e))
        }), n.find("#buttonCancel").show(), n.find("#buttonCancel").unbind("click").click(function () {
            t(this).attr("disabled") || r.clearActivePanel(function () {
                t('a[disabled="disabled"]:first').removeAttr("disabled"), t('a.buttonSignIn[disabled="disabled"]').removeAttr("disabled"), t("div.buttonSignInWrapper span").spinner("stop").hide(), a.signOut()
            })
        }), n.hasClass("active") || r.clearActivePanel(function () {
            r.setUpLoadingPanel("#activation")
        })
    }, G.RGSC_JS_ACTIVATION_RESULT = function (e) {
        i.WriteDllLog("RGSC_JS_ACTIVATION_RESULT", "json", e), t("#activationWrapper span").hide();
        var n = E(Y.titleDisplayName);
        if (e = t.parseJSON(e), e.Result && 1 == e.Result) {
            void 0 != e.ContentName && (n = E(e.ContentName));
            var a = "";
            void 0 != e.Message && (a = isNaN(e.Message) ? r.getText(e.Message, "Activation").replace("[content name]", n) : r.getText("i" + e.Message, "Activation").replace("[content name]", n)), 0 == a.length && (a = r.getText("i35", "Activation").replace("[content name]", n)), void 0 != e.Message && e.Message > 35 && e.Message < 42 ? r.showMessagePanel(r.getText("CodeRedemption", "Activation"), "&nbsp;", a) : void 0 != e.Message && e.Message > 41 && e.Message < 45 ? r.showMessagePanel(r.getText("Success", "Register"), "&nbsp;", a) : void 0 != e.ContentId && 1 == e.ContentId ? r.showMessagePanel(r.getText("i35", "Activation"), "&nbsp;", r.getText("YouHaveDLC", "Activation").replace("[content name]", n)) : r.showMessagePanel(r.getText("i35", "Activation"), "&nbsp;", r.getText("i21", "Activation").replace("[content name]", n)), t("#buttonCancelMessage").hide(), t("#messagePanel .closeCurrentPanel").unbind("click").show().click(function () {
                r.clearActivePanel(function () {
                    r.requestUiState(!1)
                })
            })
        } else {
            var s = "";
            if (void 0 !== e.Message) if (isNaN(e.Message)) s = r.getText(e.Message, "Activation"); else {
                if ("22" == e.Message) return r.showMessagePanel(r.getText("NotPassed", "Activation"), "", r.getText("i" + e.Data.Message, "Activation")), t("#buttonCancelMessage").hide(), t("#buttonCloseMessage").show(), t("#messagePanel .closeCurrentPanel").unbind("click").show().click(function () {
                    return r.clearActivePanel(function () {
                        r.requestUiState(!1)
                    }), !1
                }), void t('#activationWrapper a[disabled="disabled"]').removeAttr("disabled");
                s = r.getText("i" + e.Message, "Activation")
            }
            if (0 == s.length && (s = r.getError("ErrorActivate")), "confirmPanel" == t("div.panel.active").attr("id")) t("#confirmPanelTextLong").html('<span class="errorText">' + s + "</span>"); else {
                var o = t("#activationCode");
                o.after('<div class="errorText">' + s + "</div>"), o.is(":visible") && o.after('<span class="error"></span>')
            }
        }
        t('#activationWrapper a[disabled="disabled"]').removeAttr("disabled")
    }, G.RGSC_JS_LICENSE_EXPIRATION_RESULT = function (e) {
        i.WriteDllLog("RGSC_JS_LICENSE_EXPIRATION_RESULT", "json", e), t("#activationWrapper span").hide(), e = t.parseJSON(e), null != e.Result && 1 == e.Result ? (t("#lblActivation").html(e.Message), setTimeout(function () {
            r.requestUiState(!1)
        }, 2e3)) : (t("#activationCode").before('<span class="errorText">' + r.getError("ErrorActivate") + "</span>"), t("#activationCode").before('<span class="error"></span>')), t('#activationWrapper a[disabled="disabled"]').removeAttr("disabled")
    }, G.RGSC_JS_LICENSE_RECOVERY_RESULT = function (e) {
        i.WriteDllLog("RGSC_JS_LICENSE_RECOVERY_RESULT", "json", e), t("#activationWrapper span").hide(), e = t.parseJSON(e), e.Result && 1 == e.Result ? (t("#lblActivation").html(e.Message), setTimeout(function () {
            r.requestUiState(!1)
        }, 2e3)) : (t("#activationCode").before('<span class="errorText">' + r.getError("ErrorActivate") + "</span>"), t("#activationCode").before('<span class="error"></span>')), t('#activationWrapper a[disabled="disabled"]').removeAttr("disabled")
    }, G.RGSC_JS_REDEMPTION_RESULT = function (e) {
        i.WriteDllLog("RGSC_JS_REDEMPTION_RESULT", "json", e), G.RGSC_JS_ACTIVATION_RESULT(e)
    }, G.RGSC_JS_VOUCHER_CONTENT_RESULT = function (e) {
        i.WriteDllLog("RGSC_JS_VOUCHER_CONTENT_RESULT", "jsonResult", e), "string" == typeof e && (e = t.parseJSON(e));
        var a = t("#activation");
        a.removeData("offer");
        var s;
        if ("undefined" != typeof e && (s = e.EntitlementsGranted), "undefined" == typeof e || !e.Result || "undefined" == typeof s) {
            if ("undefined" == typeof e) {
                var o = {iss: r.isSteam(), l: Y.titlelang};
                i.WriteDebugLog("RGSC_JS_VOUCHER_CONTENT_RESULT", "Error: ", JSON.stringify(o) + Y.debugLog, i.logType.error, i.logController[Y.titleName]), Y.debugLog = ""
            }
            var l = i.errorCode("7001.68");
            return P(e, l), void h.trackPage(D() ? "/Store/CheckCodeFail" : "/Activation/CheckCodeFail")
        }
        var c = n.any(e.EntitlementsGranted, function (e) {
            return L(e)
        }), u = x(e), f = r.getText("YouWillReceive", "Activation");
        c ? (null != e.Offers && e.Offers.length && (a.data("offer", u), a.data("offerCodes", M(e))), a.find("#buttonActivate").show()) : (t("#activationWrapper").removeData("voucherContentsRequested"), f = ""), a.find("#buttonCheck").hide(), d.resetActivationForm(), t("#buttonActivate").focus(), A(f, u, e), I(e);
        var p = M(e);
        a.find("#formActivation").data("offerCodes", p), h.setCustomDimension(h.dimension.offerRedeemed, p), h.trackPage(D() ? "/Store/CheckCodeSuccess" : "/Activation/CheckCodeSuccess")
    }, G.RGSC_JS_VOUCHER_CONSUME_RESULT = function (e) {
        if ("string" == typeof e && (i.WriteDllLog("RGSC_JS_VOUCHER_CONSUME_RESULT", "jsonResult string", e), e = t.parseJSON(e)), R(), void 0 == e || !e.Result) {
            var n = i.errorCode("7001.70");
            return P(e, n), h.trackPage(D() ? "/Store/ConsumeCodeFail" : "/Activation/ConsumeCodeFail"), void d.ActivateCode(0)
        }
        var a = N(e), r = O(e, a);
        F(e, r, a), t("#buttonCancelMessage").hide(), t("#buttonCloseMessage").unbind("click").hide(), d.resetActivationForm();
        var s = t("#activation").find("#formActivation").data("offerCodes");
        h.setCustomDimension(h.dimension.offerRedeemed, s), h.trackPage(D() ? "/Store/ConsumeCodeSuccess" : "/Activation/ConsumeCodeSuccess")
    }, G.showPatching = function (e, n, a) {
        r.initHeaderMenu(!1);
        var s = t("#confirmPanel");
        switch (s.find(".confirmPanelButtonWrapper, .confirmPanelOptionsWrapper, .buttonCancelConfirm, .buttonQuitConfirm").hide(), s.find("#confirmPanelTextLong, #confirmPanelText").html(""), a) {
            case"DIALOG":
                t("#confirmPanelText").removeClass("animate"), 3 == e.Data.DialogType || 4 == e.Data.DialogType ? (t("#confirmPanelYes").unbind("click"), t("#confirmPanelYes").click(function () {
                    return r.CallGameMethod("RGSC_PATCHING_DIALOG_RESPONSE", '{ "Response":6 }', "RGSC_PATCHING_DIALOG_RESPONSE_DEMO"), !1
                }), t("#confirmPanelNo").unbind("click"), t("#confirmPanelNo").click(function () {
                    return r.CallGameMethod("RGSC_PATCHING_DIALOG_RESPONSE", '{ "Response":7 }', "RGSC_PATCHING_DIALOG_RESPONSE_DEMO"), !1
                }), t("#confirmPanelButtonWrapperYesNo").show(), 4 == e.Data.DialogType && t("#confirmPanelButtonWrapperYesNo .buttonCancelConfirm").show()) : (t("#confirmPanelOk").unbind("click"), t("#confirmPanelOk").click(function () {
                    return r.CallGameMethod("RGSC_PATCHING_DIALOG_RESPONSE", '{ "Response":1 }', "RGSC_PATCHING_DIALOG_RESPONSE_DEMO"), !1
                }), t("#confirmPanelButtonWrapperOk").show(), 2 == e.Data.DialogType && t("#confirmPanelButtonWrapperOk .buttonCancelConfirm").show()), t("#confirmPanel .buttonCancelConfirm").unbind("click"), t("#confirmPanel .buttonCancelConfirm").click(function () {
                    return r.CallGameMethod("RGSC_PATCHING_DIALOG_RESPONSE", '{ "Response":2 }', "RGSC_PATCHING_DIALOG_RESPONSE_DEMO"), !1
                });
                break;
            default:
                e.Data.AnimateSpinner && t("#confirmPanelText").removeClass("animate").addClass("animate")
        }
        t("#confirmPanelTitle").html(r.getText("PatchUpdate", "Patching")), void 0 !== e.Data.Message && (i.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "jsonRequest.Data.Message", e.Data.Message), t("#confirmPanelText").html(isNaN(e.Data.Message) ? r.getText(e.Data.Message, "Patching") : r.getText("i" + e.Data.Message, "Patching")), 0 == t("#confirmPanelText").html().length && t("#confirmPanelText").html(e.Data.Message)), void 0 !== e.Data.DynamicMessage && t("#confirmPanelTextLong").html(e.Data.DynamicMessage), t("#confirmPanel").hasClass("active") || r.clearActivePanel(function () {
            r.setUpLoadingPanel("#confirmPanel")
        }), r.CallGameMethod("RGSC_PATCHING_ANIMATION_STATE", '{ "State": 1 }', "RGSC_PATCHING_ANIMATION_STATE_DEMO")
    }, G.RGSC_JS_PATCHING_FINISHED = function (e) {
        i.WriteDllLog("RGSC_JS_PATCHING_FINISHED", "json", e), t("#confirmPanel .confirmPanelButtonWrapper").hide(), t("#confirmPanel .confirmPanelOptionsWrapper").hide(), t("#confirmPanel .buttonCancelConfirm").hide(), t("#confirmPanel .buttonQuitConfirm").hide(), t("#confirmPanelTextLong").html(""), t("#confirmPanelText").html(""), t("#confirmPanelButtonWrapperCancel, #confirmPanelButtonWrapperCancel .buttonCancelConfirm").show(), t("#confirmPanelButtonWrapperCancel .buttonCancelConfirm").unbind("click"), t("#confirmPanelButtonWrapperCancel .buttonCancelConfirm").click(function () {
            r.clearActivePanel(function () {
                r.requestUiState(!1)
            })
        }), t("#confirmPanelTitle").html(r.getText("i7", "Patching")), t("#confirmPanelText").html(r.getText("i18", "Patching")), t("#confirmPanelTextLong").html(r.getText("i17", "Patching")), t("#confirmPanel").hasClass("active") || r.clearActivePanel(function () {
            r.setUpLoadingPanel("#confirmPanel")
        }), r.CallGameMethod("RGSC_PATCHING_ANIMATION_STATE", '{ "State": 1 }', "RGSC_PATCHING_ANIMATION_STATE_DEMO")
    }, G.RGSC_JS_PATCHING_SET_PROGRESS = function (e) {
        t("#confirmPanelButtonWrapperCancel .buttonCancelConfirm").hasClass("cancelled") || (i.WriteDllLog("RGSC_JS_PATCHING_SET_PROGRESS", "json", e), e = t.parseJSON(e), t("#confirmPanel .confirmPanelButtonWrapper").hide(), t("#confirmPanel .confirmPanelOptionsWrapper").hide(), t("#confirmPanel .buttonCancelConfirm").hide(), t("#confirmPanel .buttonQuitConfirm").hide(), t("#confirmPanelTextLong").html(""), t("#confirmPanelText").html(""), t("#confirmPanelButtonWrapperCancel, #confirmPanelButtonWrapperCancel .buttonCancelConfirm").show(), t("#confirmPanelButtonWrapperCancel .buttonCancelConfirm").unbind("click"), t("#confirmPanelButtonWrapperCancel .buttonCancelConfirm").click(function () {
            r.CallGameMethod("RGSC_PATCHING_PROGRESS_RESPONSE", '{ "State": 2 }', "RGSC_PATCHING_ANIMATION_STATE_DEMO"), t(this).removeClass("cancelled").addClass("cancelled")
        }), t("#confirmPanelTitle").html(r.getText("PatchUpdate", "Patching")), void 0 !== e.Message && (i.WriteDebugLog("RGSC_JS_REQUEST_UI_STATE", "jsonRequest.Data.Message", e.Message), t("#confirmPanelText").html(isNaN(e.Message) ? r.getText(e.Message, "Patching", e.Message) : r.getText("i" + e.Message, "Patching", e.Message))), t("#confirmPanelTextLong").html(void 0 !== e.DynamicMessage ? e.DynamicMessage + ": " + e.Progress + "%" : r.getError("CurrentProgress") + ": " + e.Progress + "%"), t("#confirmPanel").hasClass("active") ? r.CallGameMethod("RGSC_PATCHING_PROGRESS_RESPONSE", '{ "State": 1 }', "RGSC_PATCHING_ANIMATION_STATE_DEMO") : r.clearActivePanel(function () {
            r.setUpLoadingPanel("#confirmPanel"), r.CallGameMethod("RGSC_PATCHING_PROGRESS_RESPONSE", '{ "State": 1 }', "RGSC_PATCHING_ANIMATION_STATE_DEMO")
        }))
    }, G.RGSC_JS_PATCHING_SET_OPTIONS = function (e) {
        if (i.WriteDllLog("RGSC_JS_PATCHING_SET_OPTIONS", "json", e), r.initHeaderMenu(!1), t(".confirmPanelButtonWrapper").hide(), t(".confirmPanelTextWrapper").removeClass("animate"), t("#confirmPanel .confirmPanelOptionsWrapper").show(), t("#confirmPanelOptionsButtonWrapper").show(), t("#confirmPanelTitle").html(r.getText("PatchUpdate", "Patching")), e = t.parseJSON(e)) {
            t("#confirmPanelText").html(void 0 !== e.Message ? isNaN(e.Message) ? r.getText(e.Message, "Patching", e.Message) : r.getText("i" + e.Message, "Patching", e.Message) : r.getError("SelectPatches") + ":"), void 0 !== e.DynamicMessage && t("#confirmPanelTextLong").html(e.DynamicMessage);
            var n = [], a = [], s = !1;
            t.each(e.Options, function (e, t) {
                var i = t.Index;
                t.Hidden ? (s = !0, n.push('<div id="divOption' + i + '"><input class="confirmPanelOption hidden" id="cbOption' + i + '" type="checkbox" value="' + i + '"/><label class="hidden" for="cbOption' + i + '">' + t.Name + '</label><input class="hidePanelOption hidden" id="cbHideOption' + i + '" type="checkbox" value="' + i + "\" onchange=\"if($(this).is(':checked')){$(this).parent().removeClass('hidden').addClass('hidden');$('#showAllOptionsLink').show();}else{$(this).parent().removeClass('hidden');}\" checked=\"true\"/><label class=\"hidden\" for=\"cbHideOption" + i + '">' + r.getText("PatchHide", "Patching") + "</label></div>")) : t.Optional ? n.push('<div id="divOption' + i + '"><input class="confirmPanelOption" id="cbOption' + i + '" type="checkbox" value="' + i + '"/><label for="cbOption' + i + '">' + t.Name + '</label><input class="hidePanelOption" id="cbHideOption' + i + '" type="checkbox" value="' + i + "\" onchange=\"if($(this).is(':checked')){$(this).parent().removeClass('hidden').addClass('hidden');$('#showAllOptionsLink').show();}else{$(this).parent().removeClass('hidden');}\"/><label for=\"cbHideOption" + i + '">' + r.getText("PatchHide", "Patching") + "</label></div>") : a.push('<div id="divOption' + i + '"><input disabled="disabled" checked="true" class="confirmPanelOption" id="cbOption' + i + '" type="checkbox" value="' + i + '"/><label for="cbOption' + i + '">' + t.Name + "</label></div>")
            }), n.push(s ? "<div><a href=\"#\" onclick=\"$('#confirmPanelOptions .hidden').removeClass('hidden');\" >" + r.getText("PatchShowHidden", "Patching") + "</a></div>" : "<div id='showAllOptionsLink'style='display: none;'><a href=\"#\" onclick=\"$('#confirmPanelOptions .hidden').removeClass('hidden');\" >" + r.getText("PatchShowHidden", "Patching") + "</a></div>"), t("#confirmPanelOptions").html(a.join("")), t("#confirmPanelOptions").append(n.join(""))
        }
        t("#confirmPanelSubmit").unbind("click"), t("#confirmPanelSubmit").click(function () {
            for (var e = t(".confirmPanelOption"), n = '{"NumOptions" : ' + e.length + ', "Options" : [ ', i = 1; i <= e.length; i++) {
                var a = t("input[id=cbOption" + i + "]"), s = t("input[id=cbHideOption" + i + "]");
                n += '{ "Index": ' + t(a).val() + ', "Install": ' + (t(a).is(":checked") ? !0 : !1) + ', "Hide": ' + (t(s).is(":checked") ? !0 : !1) + " }", i != e.length && (n += ", ")
            }
            return n += " ] }", r.CallGameMethod("RGSC_PATCHING_OPTIONS_RESPONSE", n, "RGSC_JS_PATCHING_FINISHED"), !1
        }), r.setUpLoadingPanel("#confirmPanel")
    }, G.showPatchRequired = function () {
        i.WriteDebugLog("showPatchRequired", "", ""), r.initHeaderMenu(!1), t("#confirmPanel .confirmPanelButtonWrapper").hide(), t("#confirmPanel .confirmPanelOptionsWrapper").hide(), t("#confirmPanel .buttonCancelConfirm").hide(), t("#confirmPanel .buttonQuitConfirm").hide(), t("#confirmPanelTextLong").html(""), t("#confirmPanelText").html(""), t("#confirmPanelText").removeClass("animate"), t("#confirmPanelOk").unbind("click"), t("#confirmPanelOk").click(function () {
            r.requestUiState(!1)
        }), t("#confirmPanelButtonWrapperOk").show(), t("#confirmPanelTitle").html(r.getText("PatchUpdate", "Patching"));
        var e = "MandatoryPatch";
        r.inGamePadMode() && (e += "GamePad"), t("#confirmPanelText").html(r.getText(e, "Patching")), r.clearActivePanel(function () {
            r.setUpLoadingPanel("#confirmPanel")
        })
    }, G.init = function () {
        window.RGSC_JS_ACTIVATION_RESULT = G.RGSC_JS_ACTIVATION_RESULT, window.RGSC_JS_LICENSE_EXPIRATION_RESULT = G.RGSC_JS_LICENSE_EXPIRATION_RESULT, window.RGSC_JS_LICENSE_RECOVERY_RESULT = G.RGSC_JS_LICENSE_RECOVERY_RESULT, window.RGSC_JS_REDEMPTION_RESULT = G.RGSC_JS_REDEMPTION_RESULT, window.showPatching = G.showPatching, window.RGSC_JS_PATCHING_FINISHED = G.RGSC_JS_PATCHING_FINISHED, window.RGSC_JS_PATCHING_SET_PROGRESS = G.RGSC_JS_PATCHING_SET_PROGRESS, window.RGSC_JS_PATCHING_SET_OPTIONS = G.RGSC_JS_PATCHING_SET_OPTIONS, window.RGSC_JS_VOUCHER_CONTENT_RESULT = G.RGSC_JS_VOUCHER_CONTENT_RESULT, window.RGSC_JS_VOUCHER_CONSUME_RESULT = G.RGSC_JS_VOUCHER_CONSUME_RESULT, i.pubsub.on("steam:showActivationSteamLink", G.showActivationSteamLink), i.pubsub.on("steam:showActivationSteamSuccess", G.showActivationSteamSuccess), i.pubsub.on("gamefunctions:showActivation", G.showActivation), i.pubsub.on("gamefunctions:showPatching", G.showPatching), i.pubsub.on("gamefunctions:showPatchRequired", G.showPatchRequired)
    }, G.init(), G
}),define("common/jquery.gamefunctions.friends", ["jquery", "utils", "jquery.setup.environment.utils", "common/jquery.datafunctions", "common/jquery.datafunctions.friends", "common/profile/profile-views", "common/profile/profile-models", "jquery.localize"], function (e, t, n, i, a, r, s) {
    function o(e, t, n) {
        var i = 0, a = e.length;
        if (4 == t) {
            var r = 20;
            n > 0 && (i = r * n), a = i + 20
        }
        return e.slice(i, a)
    }

    function l(e, t, n, i) {
        var a = window.amd.friends;
        switch (e) {
            case 4:
                _.extend(i, {activePanel: "friendsPanel"}), void 0 == a.FriendInvitesView ? a.FriendInvitesView = new r.ProfileFriendsView(i) : n > 0 ? a.FriendInvitesView.collection.push(t) : a.FriendInvitesView.collection.reset(t);
                break;
            case 8:
                _.extend(i, {activePanel: "editProfile"}), void 0 == a.BlockedPlayersView ? a.BlockedPlayersView = new r.ProfileFriendsView(i) : n > 0 ? a.BlockedPlayersView.collection.push(t) : a.BlockedPlayersView.collection.reset(t);
                break;
            case 99:
                _.extend(i, {activePanel: "friendsPanel"}), void 0 == a.FriendSearchView ? a.FriendSearchView = new r.ProfileFriendsView(i) : n > 0 ? a.FriendSearchView.collection.push(t) : a.FriendSearchView.collection.reset(t);
                break;
            default:
                _.extend(i, {activePanel: "friendsPanel"}), void 0 == a.MyFriendsView ? a.MyFriendsView = new r.ProfileFriendsView(i) : n > 0 ? a.MyFriendsView.collection.push(t) : a.MyFriendsView.collection.reset(t)
        }
    }

    var c = {};
    return c.RGSC_JS_PLAYER_LIST_RESPONSE = function (i) {
        if (t.WriteDllLog("RGSC_JS_PLAYER_LIST_RESPONSE", "jsonFriendList", i), i = e.parseJSON(i)) {
            var a = i.PageIndex;
            ("undefined" == typeof i.Total || 0 === i.Total) && (i.Total = "");
            var r, d = i.PlayerListType;
            switch (d) {
                case 4:
                    r = e("#friendInvitesList"), e("#friendInvitesLink span.count").html(i.Total);
                    break;
                case 8:
                    if (r = e("#blockListPlayercards"), 0 === a) {
                        ("undefined" == typeof i.Total || "" === i.Total) && (i.Total = 0);
                        var u = e("#blockedUsersHeader");
                        0 == i.Total ? (u.find(".noBlockedUsers").show(), u.find(".blockInfo").show(), u.show()) : (e("#blockListLink span.count").html(i.Total), u.find(".noBlockedUsers").hide(), u.find(".blockInfo").show(), u.show())
                    }
                    break;
                case 99:
                    r = e("#findFriendsList");
                    break;
                default:
                    r = e("#friendsList"), e("#myFriendsLink span.count").html(i.Total)
            }
            if (r.data("total", i.Total), ("undefined" == typeof a || 0 === a) && r.empty(), i.Count > 0) {
                t.WriteDebugLog("RGSC_JS_PLAYER_LIST_RESPONSE", "listType", d);
                var h = o(i.Players, d, a), f = {
                    collection: new s.FriendCollection(h),
                    model: new s.ProfileCard(_.extend(h[0])),
                    el: "#" + r.attr("id")
                };
                l(d, h, a, f), r.parent().find("div.content").removeAttr("style"), r.show()
            } else r.parent().find("div.content").removeAttr("style"), 99 === d && 0 === r.find("div.profileButton").length ? r.append('<div class="emptyContainer"><p rel="localize[NoSearchResults]">Sorry. Your search returned no results.</p></div>') : 4 === d ? c.showNoFriendInvites(r) : 3 === d && c.showNoFriends(r);
            switch (r.find("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), d) {
                case 8:
                    n.removeLoading("editProfile"), e("#editProfileContainer").data("antiscroll").refresh();
                    break;
                case 99:
                    n.removeLoading("friendsPanel"), n.resetScrollbar("#friendsPanel");
                    break;
                default:
                    n.removeLoading("friendsPanel"), i && void 0 != i.Success && 0 == i.Success && void 0 !== r && r.append("<tr><td>" + n.getError("InternetAccess") + "</td></tr>"), e("#friendsContainer").data("antiscroll").refresh()
            }
        }
    }, c.showNoFriendInvites = function (t) {
        t.append('<div id="noFriendInvites" class="emptySocial"><p rel="localize[NoFriendInvites]">No pending friend invites</p><span></span><a class="btn btnPurple" href="#" rel="localize[FindFriends]">Find friends</a></div>'), e("#noFriendInvites.emptySocial .btn").click(function () {
            e("#findPlayerLink").click()
        })
    }, c.showNoFriends = function (t) {
        t.append('<div id="noFriends" class="emptySocial"><p rel="localize[NoFriendsAdded]">No friends added yet</p><span></span><a class="btn btnPurple" href="#" rel="localize[FindFriends]">Find friends</a></div>'), e("#noFriends.emptySocial .btn").click(function () {
            e("#findPlayerLink").click()
        })
    }, c.RGSC_JS_PLAYER_LIST_MINI_RESPONSE = function (i) {
        t.WriteDllLog("RGSC_JS_PLAYER_LIST_MINI_RESPONSE", "jsonFriendList", i), i = e.parseJSON(i);
        var a = "", r = e("#compareSelectList").empty();
        i.Count > 0 ? (e.each(i.Players, function (e, t) {
            var n = '<li><a data-userid="' + t.RockstarId + '">' + t.DisplayName + "</a></li>";
            a += n
        }), r.append(a)) : r.append("<li>" + n.getText("NoFriends", "Social") + "</li>")
    }, c.showError = function (e) {
        t.WriteDebugLog("showError", "errorCode", e);
        var a = "400" == e ? "errorcode_8000" : "GenericFriendActionError";
        i.ShowErrorModal("", n.getError(a))
    }, c.RGSC_JS_FRIEND_SEND_INVITE_RESULT = function (i) {
        t.WriteDllLog("RGSC_JS_FRIEND_SEND_INVITE_RESULT", "jsonResponse", i);
        try {
            i = e.parseJSON(i)
        } catch (r) {
            i = !1
        }
        if (!i || !i.Success) return i && 0 != i.ResultCode && c.showError(i.ResultCode), void e("#friendsContainer").find(".friend.add.addFriend").removeClass("disabled");
        var s = i.RockstarId, o = a.getNicknameAsync(s);
        o.done(function (t) {
            var i = JSON.parse(t), a = e("div.panel.active"), r = a.find("div.profileButton[data-id='" + s + "']");
            n.updateUIAFterFriendInviteSent(s, i, a, r);
            var o = n.getText("Cancel", "Social");
            r.find(".options").prepend('<a class="optionCancelInvite btn btnGrey btnSmall"><span>' + o + "</span></a>")
        }), o.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_FRIEND_SEND_INVITE_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_FRIEND_SEND_INVITE_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_FRIEND_SEND_INVITE_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.RGSC_JS_FRIEND_DECLINE_INVITE_RESULT = function (i) {
        if (t.WriteDllLog("RGSC_FRIEND_DECLINE_INVITE_RESULT", "jsonResponse", i), i = e.parseJSON(i), !i) return void c.showError();
        var r = i.RockstarId, s = a.getNicknameAsync(r);
        s.done(function (t) {
            var a = JSON.parse(t);
            e("#friendsPanel #friendInvitesList").find("div.profileButton[data-id='" + i.RequestId + "']").remove();
            var r = e("#friendInvitesLink .count"), s = parseInt(r.html(), 10) - 1;
            r.html(s > 0 ? s : "");
            var o = e("#friendsPanel #findFriendsList .profileButton[data-id='" + i.RockstarId + "']");
            if (o.length > 0) {
                o.find(".acceptFriendInvite").remove(), o.find(".declineFriendInvite").remove();
                var l = n.getText("Add", "Social");
                o.find(".playerOptions").prepend('<li class="friend add addFriend"><a href="#" class="tooltip"><span>' + l + "</span></a></li>")
            }
            c.ShowStatusNotification(n.getText("FriendInviteDeclined", "Social"), a)
        }), s.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_FRIEND_DECLINE_INVITE_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_FRIEND_DECLINE_INVITE_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_FRIEND_DECLINE_INVITE_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT = function (i) {
        if (t.WriteDllLog("RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT", "jsonResponse", i), i = e.parseJSON(i), !i || !i.Success) return t.WriteDebugLog("RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT", "Success", i.Success), void (i && 0 != i.ResultCode && c.showError(i.ResultCode));
        var r = i.RockstarId, s = a.getNicknameAsync(r);
        s.done(function (a) {
            var r = JSON.parse(a);
            t.pubsub.trigger("gameFnFriends:UpdateFriendStatus", {RockstarId: i.RockstarId, Relationship: 6});
            var s = e("#friendsPanel");
            if (s.hasClass("active")) {
                var o = e("#myFriendsLink").find("span.count").html();
                o++, e("#myFriendsLink").find("span.count").html(o);
                var l = e("#friendInvitesLink").find("span.count").html();
                l--, e("#friendInvitesLink").find("span.count").html(l), 0 == l && s.hasClass("friendInvites") ? e("#myFriendsLink").click() : s.find("#friendInvitesList .profileButton[data-id='" + i.RockstarId + "']").remove();
                var d = s.find("#findFriendsList .profileButton[data-id='" + i.RockstarId + "']");
                if (d.length > 0) {
                    d.find(".acceptFriendInvite").remove(), d.find(".declineFriendInvite").remove();
                    var u = n.getText("Unfriend", "Social");
                    d.find(".playerOptions").prepend('<li class="friend remove removeFriend"><a href="#" class="tooltip"><span>' + u + "</span></a></li>")
                }
                c.ShowStatusNotification(n.getText("FriendInviteAccepted", "Social"), r)
            }
        }), s.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.RGSC_JS_GAME_INVITE_SEND_RESULT = function (i) {
        t.WriteDllLog("RGSC_JS_GAME_INVITE_SEND_RESULT", "jsonResponse", i), i = e.parseJSON(i);
        var r = i.RockstarId, s = a.getNicknameAsync(r);
        s.done(function (e) {
            var t = JSON.parse(e);
            i && void 0 != i.Success && i.Success ? c.ShowStatusNotification(n.getText("GameInviteSent", "Social"), t) : c.ShowStatusNotification(n.getText("GameInviteFail", "Social"), t)
        }), s.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_GAME_INVITE_SEND_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_GAME_INVITE_SEND_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_GAME_INVITE_SEND_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.ShowStatusNotification = function (e, n) {
        var i = e.replace("[PlayerNickname]", "<strong><em> " + n + " </em></strong>");
        t.pubsub.trigger("gamefunctions:InfoMessage", i)
    }, c.RGSC_JS_JOIN_VIA_PRESENCE_RESULT = function (i) {
        t.WriteDllLog("RGSC_JS_JOIN_VIA_PRESENCE_RESULT", "jsonResponse", i), i = e.parseJSON(i);
        var r = i.RockstarId, s = a.getNicknameAsync(r);
        s.done(function (e) {
            var t = JSON.parse(e);
            i && void 0 != i.Success && i.Success ? c.ShowStatusNotification(n.getText("JoinGameSent", "Social"), t) : c.ShowStatusNotification(n.getText("JoinGameFail", "Social"), t)
        }), s.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_JOIN_VIA_PRESENCE_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_JOIN_VIA_PRESENCE_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_JOIN_VIA_PRESENCE_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.RGSC_JS_FRIEND_DELETE_FRIEND_RESULT = function (i) {
        if (t.WriteDllLog("RGSC_JS_FRIEND_DELETE_FRIEND_RESULT", "jsonResponse", i), e("#friendProfilePanel").find("a.backFriendLink").click(), i = e.parseJSON(i), !i || !i.Success) return void (i && 0 != i.ResultCode && c.showError(i.ResultCode));
        var r = i.RockstarId, s = a.getNicknameAsync(r);
        s.done(function (a) {
            var r = JSON.parse(a);
            t.pubsub.trigger("gameFnFriends:UpdateFriendStatus", {
                RockstarId: i.RockstarId,
                Relationship: 0
            }), e("#friendsList").find("div.profileButton[data-id='" + i.RequestId + "']").remove(), c.ShowStatusNotification(n.getText("FriendRemoved", "Social"), r);
            var s = e("#myFriendsLink").find("span.count").html();
            s--, e("#myFriendsLink").find("span.count").html(e("#friendsList div.profileButton").length > 0 ? s : "");
            var o = e("#friendsPanel").find("#findFriendsList .profileButton[data-id='" + i.RockstarId + "']");
            if (o.length > 0) {
                o.find(".playerOptions .removeFriend").remove();
                var l = n.getText("Add", "Social");
                o.find(".playerOptions").prepend('<li class="friend add addFriend"><a href="#" class="tooltip"><span>' + l + "</span></a></li>")
            }
        }), s.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_FRIEND_DELETE_FRIEND_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_FRIEND_DELETE_FRIEND_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_FRIEND_DELETE_FRIEND_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.RGSC_JS_FRIEND_CANCEL_INVITE_RESULT = function (i) {
        if (t.WriteDllLog("RGSC_JS_FRIEND_CANCEL_INVITE_RESULT", "jsonResponse", i), e("#friendProfilePanel").find("a.backFriendLink").click(), i = e.parseJSON(i), !i || !i.Success) return void (i && 0 != i.ResultCode && c.showError(i.ResultCode));
        var r = i.RockstarId, s = a.getNicknameAsync(r);
        s.done(function (t) {
            var i = JSON.parse(t), a = e("div.panel.active"), s = a.find("div.profileButton[data-id='" + r + "']");
            n.updateUIAFterFriendCancelInviteSent(r, i, a, s)
        }), s.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_FRIEND_CANCEL_INVITE_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_FRIEND_CANCEL_INVITE_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_FRIEND_CANCEL_INVITE_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT = function (i) {
        t.WriteDllLog("RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT", "jsonResponse", i), e("#friendProfilePanel").find("a.backFriendLink").click(), i = e.parseJSON(i);
        var r = i.RockstarId, s = a.getNicknameAsync(r);
        s.done(function (e) {
            var t = JSON.parse(e);
            i && void 0 != i.Success && i.Success ? c.ShowStatusNotification(n.getText("PlayerBlocked", "Social"), t) : c.ShowStatusNotification(n.getText("PlayerBlockFail", "Social"), t)
        }), s.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT = function (i) {
        if (t.WriteDllLog("RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT", "jsonResponse", i), i = e.parseJSON(i), !i || !i.Success) return void (i && 0 != i.ResultCode && c.showError(i.ResultCode));
        var r = i.RockstarId, s = a.getNicknameAsync(r);
        s.done(function (i) {
            var a = JSON.parse(i), s = e("#blockListPlayercards").find("div.profileButton[data-id='" + r + "']");
            s.remove(), s = e("#findFriendsList").find("div.profileButton[data-id='" + r + "']");
            var o = s.find(".playerOptions");
            o.find(".unblock").remove(), o.append('<li class="friend add addFriend"><a href="#" class="tooltip"><span rel="localize[Add]">' + n.getText("Add", "Social") + "</span></a></li>"), o.append('<li class="message"><a href="#" class="tooltip"><span rel="localize[MessageOption]">' + n.getText("MessageOption", "Social") + "</span></a></li>"), c.ShowStatusNotification(n.getText("PlayerUnBlocked", "Social"), a), t.pubsub.trigger("gameFnFriends:UpdateFriendStatus", {
                RockstarId: r,
                Relationship: 0
            });
            var l = e("#blockListLink").find("span.count").html();
            l--, e("#blockListLink").find("span.count").html(l), e("#blockListPlayercards").data("total", l)
        }), s.fail(function (e, n, i) {
            t.WriteDebugLog("RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT.GetNickname", "ERROR", i), t.WriteDebugLog("RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT.GetNickname", "ERROR status", n), t.WriteDebugLog("RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT.GetNickname", "ERROR responseText", e.responseText, t.logType.error, t.logController.friend)
        })
    }, c.RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE = function (i) {
        if (t.WriteDllLog("RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE", "jsonResponse", i), i = e.parseJSON(i)) {
            t.WriteDebugLog("RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE", "jsonResponse.NumFriends", i.NumFriends);
            var r = i.NumFriends > 0 ? i.NumFriends : "", s = i.NumInvitesReceieved > 0 ? i.NumInvitesReceieved : "",
                o = i.NumGameInvites > 0 ? i.NumGameInvites : "", l = i.NumBlocked > 0 ? i.NumBlocked : "";
            n.updatePlayerListCounts(r, s, o, l), a.GetAccountActivity(globals.account.RockstarId)
        }
    }, c.RGSC_JS_PLAYER_INFO_RESPONSE = function (i) {
        t.WriteDllLog("RGSC_JS_PLAYER_INFO_RESPONSE", "jsonResponse", i);
        try {
            if (i = e.parseJSON(i), i.IsOnline) {
                var a = '<span title="online" class="status"></span><span class="title">' + n.getText("NowPlaying", "Social") + "</span>";
                void 0 != i.IsPlayingSameTitle && i.IsPlayingSameTitle && (a += " " + titleDisplayName), e("#friendProfile").removeClass("offline").addClass("online")
            } else {
                var a = '<span title="offline" class="status"></span><span class="title">' + n.getText("Offline", "Social") + "</span>";
                e("#friendProfile").removeClass("online").addClass("offline")
            }
            e("#friendProfileHead .nowPlaying").html(a)
        } catch (r) {
            t.WriteDebugLog("RGSC_JS_PLAYER_INFO_RESPONSE", "error", r.message, t.logType.error, t.logController[globals.titleName])
        }
    }, c.init = function () {
        window.RGSC_JS_PLAYER_LIST_RESPONSE = c.RGSC_JS_PLAYER_LIST_RESPONSE, window.RGSC_JS_PLAYER_LIST_MINI_RESPONSE = c.RGSC_JS_PLAYER_LIST_MINI_RESPONSE, window.RGSC_JS_FRIEND_SEND_INVITE_RESULT = c.RGSC_JS_FRIEND_SEND_INVITE_RESULT, window.RGSC_JS_FRIEND_DECLINE_INVITE_RESULT = c.RGSC_JS_FRIEND_DECLINE_INVITE_RESULT, window.RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT = c.RGSC_JS_FRIEND_ACCEPT_INVITE_RESULT, window.RGSC_JS_GAME_INVITE_SEND_RESULT = c.RGSC_JS_GAME_INVITE_SEND_RESULT, window.RGSC_JS_JOIN_VIA_PRESENCE_RESULT = c.RGSC_JS_JOIN_VIA_PRESENCE_RESULT, window.RGSC_JS_FRIEND_DELETE_FRIEND_RESULT = c.RGSC_JS_FRIEND_DELETE_FRIEND_RESULT, window.RGSC_JS_FRIEND_CANCEL_INVITE_RESULT = c.RGSC_JS_FRIEND_CANCEL_INVITE_RESULT, window.RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT = c.RGSC_JS_FRIEND_BLOCK_PLAYER_RESULT, window.RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT = c.RGSC_JS_FRIEND_UNBLOCK_PLAYER_RESULT, window.RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE = c.RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE, window.RGSC_JS_PLAYER_INFO_RESPONSE = c.RGSC_JS_PLAYER_INFO_RESPONSE, t.pubsub.on("datafunctions:RGSC_JS_PLAYER_LIST_RESPONSE", c.RGSC_JS_PLAYER_LIST_RESPONSE), t.pubsub.on("datafunctions:showNoFriendInvites", c.showNoFriendInvites), t.pubsub.on("datafunctions:showNoFriends", c.showNoFriends)
    }, c.init(), c
}),define("hbs!common/templates/profile/profile_friend_online", ["hbs", "common/hbs/handlebars"], function (e, t) {
    var n = t.template(function (e, t, n, i, a) {
        function r() {
            return " SCOnline "
        }

        function s() {
            return " SCOffline "
        }

        this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
        var o, l, c = "", d = "function", u = this.escapeExpression, h = this;
        return c += '<li>\r\n    <a class="profileButton gold" data-id="', (l = n.RockstarId) ? o = l.call(t, {hash: {}}) : (l = t && t.RockstarId, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '" data-services="accounts,friends">\r\n        <img id="imgProfile', (l = n.RockstarId) ? o = l.call(t, {hash: {}}) : (l = t && t.RockstarId, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '" width="32" height="32" class="avatarImg" alt="', (l = n.DisplayName) ? o = l.call(t, {hash: {}}) : (l = t && t.DisplayName, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '" src="', (l = n.AvatarUrl) ? o = l.call(t, {hash: {}}) : (l = t && t.AvatarUrl, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '" />\r\n\r\n        <span class="text info">\r\n            <h5 class="profilenickname optionProfile">', (l = n.DisplayName) ? o = l.call(t, {hash: {}}) : (l = t && t.DisplayName, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + '</h5>\r\n            <span class="subText">\r\n                <i class="status ', o = n["if"].call(t, t && t.IsOnline, {
            hash: {},
            inverse: h.program(3, s, a),
            fn: h.program(1, r, a)
        }), (o || 0 === o) && (c += o), c += '"></i>\r\n                <span>', (l = n.PlayingGame) ? o = l.call(t, {hash: {}}) : (l = t && t.PlayingGame, o = typeof l === d ? l.call(t, {hash: {}}) : l), c += u(o) + "</span>\r\n            </span>\r\n        </span>\r\n\r\n        <i class='arrow' style=\"display: none;\"></i>\r\n    </a>\r\n    <div class='actions clearfix'>\r\n        <a href='#' class='btn btnPurple btnSmall optionGameInvite' rel='localize[InviteToGame]' style=\"display: none;\">Invite to game</a>\r\n        <a href='#' class='btn btnPurple btnSmall optionJoingame' rel='localize[JoinGame]' style=\"display: none;\">Join game</a>\r\n    </div>\r\n</li>"
    });
    return n
}),define("common/games/gamecommon", ["jquery", "utils", "jquery.setup.environment", "jquery.setup.environment.utils", "common/jquery.datafunctions", "common/jquery.datafunctions.friends", "hbs!common/templates/profile/profile_friend_online"], function (e, t, n, i, a, r, s) {
    var o = {};
    o.LoadHomeScreen = function () {
        i.isOnline() && i.isSignedIn() && !i.isLocal() ? (e("#landingFriends #noFriends").hide(), e("#tweetFeed").hide(), e("#landingFriendsList").empty(), i.setUpLoading("#landingFriends"), o.GetFriends()) : (i.setUpLoading("#homefeedPanel"), a.GetTweets())
    };
    var l = function (t, n) {
        var i = t.RockstarAccountList.RockstarAccounts;
        null != t.RockstarAccountList && null != i && i.length > 0 ? (e.each(i, function () {
            var e = o.getOnlineTitle(this.IsOnline, this.OnlineGames);
            n.Players.push({
                RockstarId: this.RockstarId,
                AvatarUrl: this.AvatarUrl,
                DisplayName: this.Name,
                MutualFriends: this.MutualFriendCount,
                ViewerMutualFriendCount: this.MutualFriendCount,
                Relationship: this.Relationship,
                IsOnline: this.IsOnline,
                Game: this.IsOnline ? e.game : null,
                Platform: this.IsOnline ? e.platform : null
            })
        }), n.Success = !0, n.Count = n.Players.length, n.Total = t.RockstarAccountList.Total, n.OnlineTotal = t.RockstarAccountList.OnlineTotal, n.PageIndex = t.RockstarAccountList.PageIndex, o.ShowFriends(n)) : o.ShowEmptyFriends()
    };
    return o.GetFriends = function (n) {
        t.WriteDebugLog("gamecommon.GetFriends", "", "");
        var s = {PageSize: 250, PageIndex: 0};
        s.Players = [];
        var o = {
            env: globals.rosEnvironment,
            title: globals.titleName,
            version: globals.RosTitleVersion,
            pageSize: s.PageSize,
            pageIndex: s.PageIndex,
            rockstarId: "",
            updatedFriendIds: n
        }, c = ["getfriends", globals.account.RockstarId].join(":");
        if (r.getFriendsCache[c]) {
            var d = r.getFriendsCache[c];
            return void l(d, s)
        }
        var u = i.GetAuthHeaderAsync();
        u.done(function (n) {
            e.ajax({
                type: "POST",
                url: t.getApiUrl("/api/friend/getfriends"),
                headers: n,
                data: JSON.stringify(o),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                silentFail: !0,
                fatalError: a.ShowErrorModal,
                contentEl: e("#landingFriendsList"),
                services: ["friends"],
                success: function (e, t) {
                    "success" === t && (r.getFriendsCache[c] = e), l(e, s)
                },
                error: function () {
                    a.GetTweets()
                }
            })
        }), u.fail(function () {
            a.GetTweets()
        })
    }, o.getOnlineTitle = function (e, t) {
        var n, i, a = !1;
        if (e) if (1 == t.length) n = t[0].TitleFriendlyName, i = t[0].PlatformFriendlyName; else {
            var r = _.find(t, function (e) {
                return "pcros" == e.PlatformName
            });
            r && (a = !0, n = r.TitleFriendlyName, i = r.PlatformFriendlyName), a || (n = t[0].TitleFriendlyName, i = t[0].PlatformFriendlyName)
        }
        return {game: n, platform: i}
    }, o.ShowFriends = function (n) {
        if (t.WriteDebugLog("gamecommon.ShowFriends", "data", JSON.stringify(n)), n) {
            var a = "", o = e("#landingFriendsList");
            if (e("#onlineFriendCount").text(n.OnlineTotal), e("#landingFriends").find("h3").show(), (void 0 === n.PageIndex || 0 === n.PageIndex) && (o.data("total", n.Total), o.empty()), n.Count > 0) {
                var l = i.getText("PlayingGameOn", "Social", "Playing {0} on {1}"), c = [];
                e.each(n.Players, function (e, t) {
                    t.IsOnline && c.push(t.RockstarId)
                }), i.requestMultiplayerPresenceInfo(c), e.each(n.Players, function (e, n) {
                    var r = t.getAvatarUrl(n.AvatarUrl);
                    n.AvatarUrl = r;
                    var o = n.IsOnline ? l.format(n.Game, n.Platform) : i.getText("Offline", "Social");
                    n.PlayingGame = o, a += t.renderCompiledTemplate(s, n)
                }), o.append(a), o.find("[rel*=localize]").localize("Social", {
                    language: globals.titlelang,
                    pathPrefix: globals.baseAssetUrl + "xml/Shared"
                }), o.find("a.profileButton").click(function () {
                    var t = e(this).parent(), n = t.find(".arrow");
                    n.is(":visible") && t.toggleClass("open")
                }), o.off("click", "a.optionGameInvite").on("click", "a.optionGameInvite", function () {
                    return r.SendGameInvite(e(this).closest("li").find(".profileButton").attr("data-id")), !1
                }), o.off("click", "h5.optionProfile").on("click", "h5.optionProfile", function () {
                    return e("#friendProfilePanel .content").hide(), r.friendProfileView(e(this).closest("a.profileButton").attr("data-id")), !1
                }), o.off("click", "a.optionJoingame").on("click", "a.optionJoingame", function () {
                    return r.SendJoinGame(e(this).closest("li").find(".profileButton").attr("data-id")), !1
                })
            }
            e("#tweetFeed").hide(), i.removeLoading("landingFriends"), o.find("[rel*=localize]").localize("Social", {
                language: globals.titlelang,
                pathPrefix: globals.baseAssetUrl + "xml/Shared"
            }), i.resetScrollbar("#landingFriends")
        }
    }, o.ShowEmptyFriends = function () {
        var t = e("#landingFriends"), a = t.find("#noFriends.emptySocial");
        a.find(".btn").off("click").on("click", function (e) {
            e.preventDefault(), n.showSocialSection("#findPlayerLink")
        }), a.find("[rel*=localize]").localize("Social", {
            language: globals.titlelang,
            pathPrefix: globals.baseAssetUrl + "xml/Shared"
        }), t.find("h3").hide(), e("#tweetFeed").hide(), i.resetScrollbar("#landingFriends"), a.show(), i.removeLoading("landingFriends")
    }, o
}),define("common/jquery.gamefunctions.notifications", ["jquery", "utils", "jquery.setup.environment", "jquery.setup.environment.utils", "common/jquery.datafunctions", "common/gamefunctions", "common/games/gamecommon"], function (e, t, n, i, a, r, s) {
    function o(e, t, n) {
        var i = e.data("boundClasses") || [];
        i.push(t), e.data("boundClasses", i), e.on("click", "div." + t, function (e) {
            e.preventDefault(), l[n](this)
        })
    }

    var l = {};
    return l.HideNotification = function (n) {
        var i = ["NETWORK", "GAMEINVITES", "INFORMATION", "DOWNLOADSTATUS", "DUPLICATESIGNEDOUT", "CONNECTIONLOST"],
            a = "true" == localStorage.getItem("hideNotifications");
        return a && -1 == e.inArray(n, i) ? (t.WriteDebugLog("ShowNotification", "false"), !0) : !1
    }, l.RGSC_JS_NOTIFICATION = function (n) {
        if (t.WriteDllLog("RGSC_JS_NOTIFICATION", "jsonNotifications", n), n = e.parseJSON(n)) {
            var a = e("#headerWrapper");
            a.length > 0 ? i.isScuiVisible() ? i.isHeaderMenuVisible() ? (t.WriteDebugLog("---RGSC_JS_NOTIFICATION", "$headerWrapper", "is enabled and visible"), e("#notificationPanel").css("top", e("#header").height())) : t.WriteDebugLog("---RGSC_JS_NOTIFICATION", "$headerWrapper", "is enabled but is hidden or positioned off-screen") : i.hideUI() : t.WriteDebugLog("---RGSC_JS_NOTIFICATION", "$headerWrapper", "doesn't exist in HTML"), n.Count > 0 ? e.each(n.Notifications, function (e, n) {
                t.WriteDebugLog("---RGSC_JS_NOTIFICATION", "jsonNotification", n.Type);
                var a = n.Type.toUpperCase();
                if (!l.HideNotification(a)) switch (a) {
                    case"NETWORK":
                        i.setOffline(!n.Online);
                        break;
                    case"ACHIEVEMENTS":
                    case"GAMEINVITES":
                    case"MESSAGERECEIVED":
                    case"FRIENDSTATUS":
                    case"FRIENDREQUESTRECEIVED":
                    case"FRIENDREQUESTACCEPTED":
                    case"INFORMATION":
                    case"DOWNLOADSTATUS":
                    case"WELCOME":
                    case"SIGNEDIN":
                    case"DUPLICATESIGNEDOUT":
                    case"FRIENDREQUESTS":
                    case"FRIENDSONLINE":
                    case"ROS.CLAN.INVITE":
                    case"JOINREQUEST":
                    case"ROS.CLAN.MEMBER.PROMOTED":
                    case"CONNECTIONLOST":
                        l.ShowNotification(n)
                }
            }) : t.WriteDebugLog("---RGSC_JS_NOTIFICATION", "jsonNotifications.Count", "0")
        } else t.WriteDebugLog("---RGSC_JS_NOTIFICATION", "jsonNotifications", "null")
    }, l.ShowNotification = function (n) {
        if (t.WriteDebugLog("ShowNotification", "jsonNotification", JSON.stringify(n)), n && (n.Count > 0 || n.Data)) {
            var r = "", o = "", c = "", d = "", u = !1, h = "";
            "undefined" != typeof n.Type && (h = n.Type.toUpperCase());
            var f = e("div.active.panel").attr("id");
            switch (h) {
                case"ACHIEVEMENTS":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/achievement.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyAchievements", d = i.getText("Accomplishment", "Notifications");
                    break;
                case"FRIENDREQUESTRECEIVED":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/friendrequest.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyFriendRequests", d = i.getText("FriendRequest", "Notifications"), "friendsPanel" == f && e("div.active.panel.friendInvites").length ? e("#friendInvitesLink").removeClass("on").click() : u = !0;
                    break;
                case"FRIENDREQUESTACCEPTED":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/friendrequest.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyFriendRequests", d = i.getText("FriendRequestAccepted", "Notifications"), "friendsPanel" == f && e("div.active.panel.myFriends").length && e("#myFriendsLink").removeClass("on").click();
                    break;
                case"FRIENDSTATUS":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/friendsonline.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyFriends", d = i.getText("FriendOnline", "Notifications");
                    break;
                case"MESSAGERECEIVED":
                    globals.account && t.pubsub.trigger("datafnfriends:GetMessageCount", globals.account.RockstarId), r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/message.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyMessages", d = i.getText("MessageReceived", "Notifications");
                    var p = e("#newMessageInput").is(":visible"), m = "" != e("#newReplyEntry").val().trim();
                    "messagesPanel" != f || globals.MessagesLoading || p || m || (globals.MessagesLoading = !0, e("#menuMessages").click());
                    break;
                case"GAMEINVITES":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/invite.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyGameInvites", d = i.getText("MultiplayerInvite", "Notifications"), "friendsPanel" == f && e("div.active.panel.gameInvites").length ? e("#gameInvitesLink").removeClass("on").click() : u = !0;
                    break;
                case"INFORMATION":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/information.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyInfo", d = i.getText("Information", "Notifications");
                    break;
                case"DOWNLOADSTATUS":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/information.png' alt='' width='48' height='48'/>", d = i.getText("DownloadStatus", "Notifications");
                    break;
                case"WELCOME":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/information.png' alt='' width='48' height='48'/>", d = i.getText("Information", "Notifications");
                    break;
                case"SIGNEDIN":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/friendsonline.png' alt='' width='48' height='48'/>", d = i.getText("Information", "Notifications");
                    break;
                case"DUPLICATESIGNEDOUT":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/information.png' alt='' width='48' height='48'/>", d = i.getText("Information", "Notifications");
                    break;
                case"FRIENDREQUESTS":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/friendrequests.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyFriendRequests", d = i.getText("FriendRequest", "Notifications");
                    break;
                case"FRIENDSONLINE":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/friendsonline.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyFriends", d = i.getText("FriendOnline", "Notifications");
                    break;
                case"ROS.CLAN.INVITE":
                    a.ClearProxyCache();
                    var g = e("#crewInvitesLink span.count"), v = g.html(), _ = "" !== v ? parseInt(v, 10) + 1 : 1;
                    g.html(_), r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/crewinvite.png' alt='' width='48' height='48'/>", c = " clickable", o = " notifyClanInvite", d = i.getText("CrewInviteNotification", "Notifications");
                    break;
                case"JOINREQUEST":
                case"ROS.CLAN.MEMBER.PROMOTED":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/crewinvite.png' alt='' width='48' height='48'/>";
                    break;
                case"CONNECTIONLOST":
                    r = "<img class='avatar' src='" + globals.baseUrl + "images/notifications/information.png' alt='' width='48' height='48'/>", d = i.getText("Information", "Notifications")
            }
            u && i.CallGameMethod("RGSC_REQUEST_PLAYER_LIST_COUNTS", '{ "RequestId": 5 }', "RGSC_JS_PLAYER_LIST_COUNTS_RESPONSE_DEMO");
            var b = [];
            e.each(n.Data, function (n, a) {
                var s = "", u = "";
                switch (h) {
                    case"ACHIEVEMENTS":
                        try {
                            r = "<img class='avatar' src='" + i.GetAchievementImage(a.Id) + "' alt='' width='48' height='48'/>"
                        } catch (p) {
                        }
                        s = a.Description, u = void 0 != a.Name ? "<span class='name'>" + a.Name + "</span><br />" : "";
                        break;
                    case"DOWNLOADSTATUS":
                        s = i.getText("i" + a.Message, "Notifications"), u = void 0 != a.Name ? "<span class='name'>" + a.Name + "</span><br />" : "";
                        break;
                    case"FRIENDREQUESTRECEIVED":
                        null == a.Nickname || void 0 == a.Nickname || "" == a.Nickname ? s = i.getText("FriendRequestReceivedGeneric", "Notifications") : (u = "<span class='name'>" + a.Nickname + "</span><br />", s = i.getText("FriendRequestReceived", "Notifications"));
                        break;
                    case"FRIENDREQUESTACCEPTED":
                        u = void 0 != a.Nickname ? "<span class='name'>" + a.Nickname + "</span><br />" : "", s = i.getText("FriendRequestAccepted", "Notifications");
                        break;
                    case"FRIENDSTATUS":
                        if (u = void 0 != a.Nickname ? "<span class='name'>" + a.Nickname + "</span><br />" : "", a.AvatarUrl && "" != a.AvatarUrl && (r = "<img class='avatar' src='" + t.getAvatarUrl(a.AvatarUrl) + "' alt='' width='48' height='48'/>"), a.IsOnline ? s = i.getText("FriendOnlineStatus", "Notifications") : (s = i.getText("FriendOfflineStatus", "Notifications"), d = i.getText("FriendOffline", "Notifications")), "friendsPanel" == f && e("div.active.panel.myFriends").length) {
                            var m = "offline";
                            a.IsOnline && (m = "online"), e("#friendsList").find(".profileButton[data-id='" + a.RockstarId + "']").removeClass("online offline").addClass(m)
                        }
                        if (a.RockstarId) {
                            var g, v;
                            a.IsOnline ? (g = "SCOnline", v = i.getText("Online", "Social"), a.IsPlayingSameTitle && b.push(a.RockstarId)) : (g = "SCOffline", v = i.getText("Offline", "Social"));
                            var _ = e("#landingFriendsList"), y = _.children("li"),
                                w = _.find('[data-id="' + a.RockstarId + '"]');
                            w.find("i.status").removeClass("SCOnline SCOffline").addClass(g), w.find(".subText span").text(v), y.sort(function (t, n) {
                                var i = e(t), a = e(n), r = i.find(".status").hasClass("SCOnline"),
                                    s = a.find(".status").hasClass("SCOnline");
                                if (r && !s) return -1;
                                if (s && !r) return 1;
                                var o = i.find(".profilenickname").text(), l = a.find(".profilenickname").text();
                                return o.localeCompare(l)
                            }), y.detach().appendTo(_), t.pubsub.trigger("datafnfriends:ClearFriendsCache", a.RockstarId)
                        }
                        break;
                    case"GAMEINVITES":
                        s = i.getText("MultiplayerInviteReceived", "Notifications"), u = void 0 != a.Nickname ? "<span class='name'>" + a.Nickname + "</span><br />" : "";
                        break;
                    case"WELCOME":
                        var S = "i" + a.Message;
                        !i.inGamePadMode() || 1 != a.Message && 4 != a.Message || (S += "GamePad"), t.WriteDebugLog("ShowNotification", "WELCOME localisationKey", S), s = i.getText(S, "Notifications");
                        break;
                    case"MESSAGERECEIVED":
                        s = i.getText("PrivateMessageReceived", "Notifications"), u = void 0 != a.Nickname ? "<span class='name'>" + a.Nickname + "</span><br />" : "";
                        break;
                    case"ROS.CLAN.INVITE":
                        u = void 0 != a.cn ? "<span class='name'>" + a.cn + "</span><br />" : "", s = i.getText("CrewInvite", "Notifications");
                        break;
                    case"JOINREQUEST":
                        u = void 0 != a.cn ? "<span class='name'>" + a.cn + "</span><br />" : "", s = i.getText("CrewRequest", "Notifications");
                        break;
                    case"ROS.CLAN.MEMBER.PROMOTED":
                        u = void 0 != a.cn ? "<span class='name'>" + a.cn + "</span><br />" : "", s = i.getText("CrewMemberPromoted", "Notifications");
                        break;
                    case"CONNECTIONLOST":
                        s = i.getText("ConnectionLost", "Notifications");
                        break;
                    default:
                        s = void 0 != a.Description ? a.Description : "", u = void 0 != a.Name ? "<span class='name'>" + a.Name + "</span><br />" : void 0 != a.Nickname ? "<span class='name'>" + a.Nickname + "</span><br />" : ""
                }
                var C = Math.random().toString().substring(2, 10), k = void 0 != a.Id ? a.Id : "",
                    T = k + "_" + h.replace(/\./g, "-") + n + C;
                t.WriteDebugLog("ShowNotification", "notifyId", "id='notify" + T + "'"), i.isScuiVisible() || i.hideUI();
                var L = "<div class='" + h + " notify" + T + " notification" + c + o + "'>" + r + "<i></i><span class='title" + c + "'>" + d + "</span><br />" + u + "<span class='" + c + "'>" + s + "</span></div>",
                    E = e("#notificationPanel").append(L).find("div.notify" + T);
                E.fadeIn("slow").delay(3500 * (n + 1)).fadeOut("slow", function () {
                    e(this).remove(), l.FinishedShowingToasts()
                })
            }), b && b.length && i.isScuiVisible() && s.GetFriends(b, !0), i.CallGameMethod("RGSC_SET_NOTIFICATION_VISIBLE", '{ "visible": true }', null)
        }
    }, l.FinishedShowingToasts = function () {
        t.WriteDebugLog("FinishedShowingToasts", "$('#notificationPanel div.notification').length", e("#notificationPanel div.notification").length), 0 == e("#notificationPanel div.notification").length && i.CallGameMethod("RGSC_SET_NOTIFICATION_VISIBLE", '{ "visible": false }', null)
    }, l.OpenAchievements = function (t) {
        e(t).remove(), r.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": ' + i.isOnline() + ', "State": "Achievements" }', !0)
    }, l.OpenInformation = function (t) {
        e(t).remove(), r.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": ' + i.isOnline() + ', "State": "Main" }', !0)
    }, l.OpenFriends = function (t) {
        e(t).remove(), r.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": ' + i.isOnline() + ', "State": "Friends" }', !0)
    }, l.OpenFriendRequests = function (t) {
        e(t).remove(), r.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": ' + i.isOnline() + ', "State": "Friends", "SubState": "Request" }', !0)
    }, l.OpenGameInvites = function (t) {
        e(t).remove(), r.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": ' + i.isOnline() + ', "State": "GameInvites" }', !0)
    }, l.OpenMessages = function (t) {
        e(t).remove(), r.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": ' + i.isOnline() + ', "State": "Messages" }', !0)
    }, l.OpenCrewInvites = function (t) {
        e(t).remove(), r.RGSC_JS_REQUEST_UI_STATE('{ "Visible": true, "Online": ' + i.isOnline() + ', "State": "CrewInvites" }', !0)
    }, l.InfoMessage = function (e) {
        var t = '{ "Type" : "INFORMATION", "Count" : 1, "Data" : [ { "Description" : "' + e + '" } ] }';
        l.RGSC_JS_NOTIFICATION('{ "Count" : 1, "Notifications" : [' + t + "] }")
    }, l.triggerLastNotificationClick = function () {
        var t = e("#notificationPanel"), n = t.data("boundClasses");
        if (!n || 0 == t.children().length) return !1;
        var i = !1, a = e(t.children().get().reverse());
        return a.each(function () {
            var t = e(this);
            return e(n).each(function () {
                return t.hasClass(this) ? (t.click(), i = !0, !1) : !0
            }), i ? !1 : !0
        }), i
    }, l.init = function () {
        window.RGSC_JS_NOTIFICATION = l.RGSC_JS_NOTIFICATION, t.pubsub.on("gamefunctions:RGSC_JS_NOTIFICATION", l.RGSC_JS_NOTIFICATION), t.pubsub.on("gamefunctions:InfoMessage", l.InfoMessage);
        var n = e("#notificationPanel");
        o(n, "notifyAchievements", "OpenAchievements"), o(n, "notifyFriendRequests", "OpenFriendRequests"), o(n, "notifyFriends", "OpenFriends"), o(n, "notifyMessages", "OpenMessages"), o(n, "notifyGameInvites", "OpenGameInvites"), o(n, "notifyInfo", "OpenInformation"), o(n, "notifyClanInvite", "OpenCrewInvites")
    }, l.init(), l
}),define("common/common", ["jquery", "moment", "jTweetsAnywhere", "common/formvalidation", "common/gamefunctions", "common/jquery.gamefunctions.activation", "common/jquery.gamefunctions.friends", "common/games/gamecommon", "common/jquery.gamefunctions.notifications", "common/jquery.datafunctions", "common/jquery.datafunctions.activation", "common/jquery.datafunctions.friends", "common/reCaptcha", "spinner", "common/jquery.mousewheel", "jquery-ui", "common/jquery.anythingslider", "jquery.localize", "xml2json", "common/antiscroll", "jquery.setup.environment", "jquery.setup.environment.utils", "jcoverflip"], function () {
    window.amd = {crews: {}, store: {}, modals: {}, settings: {}, friends: {}}
}),define("desktop/common", function () {
});